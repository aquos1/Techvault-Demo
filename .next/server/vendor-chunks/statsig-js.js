"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/statsig-js";
exports.ids = ["vendor-chunks/statsig-js"];
exports.modules = {

/***/ "(ssr)/./node_modules/statsig-js/dist/DynamicConfig.js":
/*!*******************************************************!*\
  !*** ./node_modules/statsig-js/dist/DynamicConfig.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar DynamicConfig = /** @class */ (function () {\n    function DynamicConfig(configName, configValue, ruleID, evaluationDetails, secondaryExposures, allocatedExperimentName, onDefaultValueFallback, groupName, idType, isExperimentActive) {\n        if (secondaryExposures === void 0) { secondaryExposures = []; }\n        if (allocatedExperimentName === void 0) { allocatedExperimentName = ''; }\n        if (onDefaultValueFallback === void 0) { onDefaultValueFallback = null; }\n        if (groupName === void 0) { groupName = null; }\n        if (idType === void 0) { idType = null; }\n        if (isExperimentActive === void 0) { isExperimentActive = null; }\n        this.onDefaultValueFallback = null;\n        this.name = configName;\n        this.value = JSON.parse(JSON.stringify(configValue !== null && configValue !== void 0 ? configValue : {}));\n        this.ruleID = ruleID !== null && ruleID !== void 0 ? ruleID : '';\n        this.secondaryExposures = secondaryExposures;\n        this.allocatedExperimentName = allocatedExperimentName;\n        this.evaluationDetails = evaluationDetails;\n        this.onDefaultValueFallback = onDefaultValueFallback;\n        this.groupName = groupName;\n        this.idType = idType;\n        this.isExperimentActive = isExperimentActive;\n    }\n    DynamicConfig.prototype.get = function (key, defaultValue, typeGuard) {\n        var _a, _b;\n        var val = this.getValue(key, defaultValue);\n        if (val == null) {\n            return defaultValue;\n        }\n        var expectedType = Array.isArray(defaultValue)\n            ? 'array'\n            : typeof defaultValue;\n        var actualType = Array.isArray(val) ? 'array' : typeof val;\n        if (typeGuard) {\n            if (typeGuard(val)) {\n                return val;\n            }\n            (_a = this.onDefaultValueFallback) === null || _a === void 0 ? void 0 : _a.call(this, this, key, expectedType, actualType);\n            return defaultValue;\n        }\n        if (defaultValue == null || expectedType === actualType) {\n            return val;\n        }\n        (_b = this.onDefaultValueFallback) === null || _b === void 0 ? void 0 : _b.call(this, this, key, expectedType, actualType);\n        return defaultValue;\n    };\n    DynamicConfig.prototype.getValue = function (key, defaultValue) {\n        if (key == null) {\n            return this.value;\n        }\n        if (defaultValue == null) {\n            defaultValue = null;\n        }\n        if (this.value[key] == null) {\n            return defaultValue;\n        }\n        return this.value[key];\n    };\n    DynamicConfig.prototype.getRuleID = function () {\n        return this.ruleID;\n    };\n    DynamicConfig.prototype.getGroupName = function () {\n        return this.groupName;\n    };\n    DynamicConfig.prototype.getIDType = function () {\n        return this.idType;\n    };\n    DynamicConfig.prototype.getName = function () {\n        return this.name;\n    };\n    DynamicConfig.prototype.getEvaluationDetails = function () {\n        return this.evaluationDetails;\n    };\n    DynamicConfig.prototype._getSecondaryExposures = function () {\n        return this.secondaryExposures;\n    };\n    DynamicConfig.prototype._getAllocatedExperimentName = function () {\n        return this.allocatedExperimentName;\n    };\n    DynamicConfig.prototype.getIsExperimentActive = function () {\n        return this.isExperimentActive;\n    };\n    return DynamicConfig;\n}());\nexports[\"default\"] = DynamicConfig;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L0R5bmFtaWNDb25maWcuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Q7QUFDQTtBQUNBLDZDQUE2QztBQUM3QyxrREFBa0Q7QUFDbEQsaURBQWlEO0FBQ2pELG9DQUFvQztBQUNwQyxpQ0FBaUM7QUFDakMsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQSxnSEFBZ0g7QUFDaEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELGtCQUFlIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYW1hem9uLWZyZXNoLWRlbW8vLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L0R5bmFtaWNDb25maWcuanM/ZjhmMyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBEeW5hbWljQ29uZmlnID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIER5bmFtaWNDb25maWcoY29uZmlnTmFtZSwgY29uZmlnVmFsdWUsIHJ1bGVJRCwgZXZhbHVhdGlvbkRldGFpbHMsIHNlY29uZGFyeUV4cG9zdXJlcywgYWxsb2NhdGVkRXhwZXJpbWVudE5hbWUsIG9uRGVmYXVsdFZhbHVlRmFsbGJhY2ssIGdyb3VwTmFtZSwgaWRUeXBlLCBpc0V4cGVyaW1lbnRBY3RpdmUpIHtcbiAgICAgICAgaWYgKHNlY29uZGFyeUV4cG9zdXJlcyA9PT0gdm9pZCAwKSB7IHNlY29uZGFyeUV4cG9zdXJlcyA9IFtdOyB9XG4gICAgICAgIGlmIChhbGxvY2F0ZWRFeHBlcmltZW50TmFtZSA9PT0gdm9pZCAwKSB7IGFsbG9jYXRlZEV4cGVyaW1lbnROYW1lID0gJyc7IH1cbiAgICAgICAgaWYgKG9uRGVmYXVsdFZhbHVlRmFsbGJhY2sgPT09IHZvaWQgMCkgeyBvbkRlZmF1bHRWYWx1ZUZhbGxiYWNrID0gbnVsbDsgfVxuICAgICAgICBpZiAoZ3JvdXBOYW1lID09PSB2b2lkIDApIHsgZ3JvdXBOYW1lID0gbnVsbDsgfVxuICAgICAgICBpZiAoaWRUeXBlID09PSB2b2lkIDApIHsgaWRUeXBlID0gbnVsbDsgfVxuICAgICAgICBpZiAoaXNFeHBlcmltZW50QWN0aXZlID09PSB2b2lkIDApIHsgaXNFeHBlcmltZW50QWN0aXZlID0gbnVsbDsgfVxuICAgICAgICB0aGlzLm9uRGVmYXVsdFZhbHVlRmFsbGJhY2sgPSBudWxsO1xuICAgICAgICB0aGlzLm5hbWUgPSBjb25maWdOYW1lO1xuICAgICAgICB0aGlzLnZhbHVlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjb25maWdWYWx1ZSAhPT0gbnVsbCAmJiBjb25maWdWYWx1ZSAhPT0gdm9pZCAwID8gY29uZmlnVmFsdWUgOiB7fSkpO1xuICAgICAgICB0aGlzLnJ1bGVJRCA9IHJ1bGVJRCAhPT0gbnVsbCAmJiBydWxlSUQgIT09IHZvaWQgMCA/IHJ1bGVJRCA6ICcnO1xuICAgICAgICB0aGlzLnNlY29uZGFyeUV4cG9zdXJlcyA9IHNlY29uZGFyeUV4cG9zdXJlcztcbiAgICAgICAgdGhpcy5hbGxvY2F0ZWRFeHBlcmltZW50TmFtZSA9IGFsbG9jYXRlZEV4cGVyaW1lbnROYW1lO1xuICAgICAgICB0aGlzLmV2YWx1YXRpb25EZXRhaWxzID0gZXZhbHVhdGlvbkRldGFpbHM7XG4gICAgICAgIHRoaXMub25EZWZhdWx0VmFsdWVGYWxsYmFjayA9IG9uRGVmYXVsdFZhbHVlRmFsbGJhY2s7XG4gICAgICAgIHRoaXMuZ3JvdXBOYW1lID0gZ3JvdXBOYW1lO1xuICAgICAgICB0aGlzLmlkVHlwZSA9IGlkVHlwZTtcbiAgICAgICAgdGhpcy5pc0V4cGVyaW1lbnRBY3RpdmUgPSBpc0V4cGVyaW1lbnRBY3RpdmU7XG4gICAgfVxuICAgIER5bmFtaWNDb25maWcucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXksIGRlZmF1bHRWYWx1ZSwgdHlwZUd1YXJkKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHZhciB2YWwgPSB0aGlzLmdldFZhbHVlKGtleSwgZGVmYXVsdFZhbHVlKTtcbiAgICAgICAgaWYgKHZhbCA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBleHBlY3RlZFR5cGUgPSBBcnJheS5pc0FycmF5KGRlZmF1bHRWYWx1ZSlcbiAgICAgICAgICAgID8gJ2FycmF5J1xuICAgICAgICAgICAgOiB0eXBlb2YgZGVmYXVsdFZhbHVlO1xuICAgICAgICB2YXIgYWN0dWFsVHlwZSA9IEFycmF5LmlzQXJyYXkodmFsKSA/ICdhcnJheScgOiB0eXBlb2YgdmFsO1xuICAgICAgICBpZiAodHlwZUd1YXJkKSB7XG4gICAgICAgICAgICBpZiAodHlwZUd1YXJkKHZhbCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKF9hID0gdGhpcy5vbkRlZmF1bHRWYWx1ZUZhbGxiYWNrKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2FsbCh0aGlzLCB0aGlzLCBrZXksIGV4cGVjdGVkVHlwZSwgYWN0dWFsVHlwZSk7XG4gICAgICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWZhdWx0VmFsdWUgPT0gbnVsbCB8fCBleHBlY3RlZFR5cGUgPT09IGFjdHVhbFR5cGUpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgICAgIH1cbiAgICAgICAgKF9iID0gdGhpcy5vbkRlZmF1bHRWYWx1ZUZhbGxiYWNrKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2FsbCh0aGlzLCB0aGlzLCBrZXksIGV4cGVjdGVkVHlwZSwgYWN0dWFsVHlwZSk7XG4gICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gICAgfTtcbiAgICBEeW5hbWljQ29uZmlnLnByb3RvdHlwZS5nZXRWYWx1ZSA9IGZ1bmN0aW9uIChrZXksIGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICBpZiAoa2V5ID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWZhdWx0VmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgZGVmYXVsdFZhbHVlID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy52YWx1ZVtrZXldID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVba2V5XTtcbiAgICB9O1xuICAgIER5bmFtaWNDb25maWcucHJvdG90eXBlLmdldFJ1bGVJRCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucnVsZUlEO1xuICAgIH07XG4gICAgRHluYW1pY0NvbmZpZy5wcm90b3R5cGUuZ2V0R3JvdXBOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ncm91cE5hbWU7XG4gICAgfTtcbiAgICBEeW5hbWljQ29uZmlnLnByb3RvdHlwZS5nZXRJRFR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlkVHlwZTtcbiAgICB9O1xuICAgIER5bmFtaWNDb25maWcucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5hbWU7XG4gICAgfTtcbiAgICBEeW5hbWljQ29uZmlnLnByb3RvdHlwZS5nZXRFdmFsdWF0aW9uRGV0YWlscyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZhbHVhdGlvbkRldGFpbHM7XG4gICAgfTtcbiAgICBEeW5hbWljQ29uZmlnLnByb3RvdHlwZS5fZ2V0U2Vjb25kYXJ5RXhwb3N1cmVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWNvbmRhcnlFeHBvc3VyZXM7XG4gICAgfTtcbiAgICBEeW5hbWljQ29uZmlnLnByb3RvdHlwZS5fZ2V0QWxsb2NhdGVkRXhwZXJpbWVudE5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFsbG9jYXRlZEV4cGVyaW1lbnROYW1lO1xuICAgIH07XG4gICAgRHluYW1pY0NvbmZpZy5wcm90b3R5cGUuZ2V0SXNFeHBlcmltZW50QWN0aXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0V4cGVyaW1lbnRBY3RpdmU7XG4gICAgfTtcbiAgICByZXR1cm4gRHluYW1pY0NvbmZpZztcbn0oKSk7XG5leHBvcnRzLmRlZmF1bHQgPSBEeW5hbWljQ29uZmlnO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/statsig-js/dist/DynamicConfig.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/statsig-js/dist/ErrorBoundary.js":
/*!*******************************************************!*\
  !*** ./node_modules/statsig-js/dist/ErrorBoundary.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ExceptionEndpoint = void 0;\nvar uuid_1 = __webpack_require__(/*! uuid */ \"(ssr)/./node_modules/uuid/dist/esm-node/index.js\");\nvar Errors_1 = __webpack_require__(/*! ./Errors */ \"(ssr)/./node_modules/statsig-js/dist/Errors.js\");\nvar Diagnostics_1 = __importDefault(__webpack_require__(/*! ./utils/Diagnostics */ \"(ssr)/./node_modules/statsig-js/dist/utils/Diagnostics.js\"));\nvar OutputLogger_1 = __importDefault(__webpack_require__(/*! ./utils/OutputLogger */ \"(ssr)/./node_modules/statsig-js/dist/utils/OutputLogger.js\"));\nvar parseError_1 = __importDefault(__webpack_require__(/*! ./utils/parseError */ \"(ssr)/./node_modules/statsig-js/dist/utils/parseError.js\"));\nexports.ExceptionEndpoint = 'https://statsigapi.net/v1/sdk_exception';\nvar MAX_DIAGNOSTICS_MARKERS = 30;\nvar SAMPLING_RATE = 10000;\nvar ErrorBoundary = /** @class */ (function () {\n    function ErrorBoundary(sdkKey, sdkOptions) {\n        this.sdkKey = sdkKey;\n        this.sdkOptions = sdkOptions;\n        this.seen = new Set();\n        var sampling = Math.floor(Math.random() * SAMPLING_RATE);\n        this.setupDiagnostics(sampling === 0 ? MAX_DIAGNOSTICS_MARKERS : 0);\n    }\n    ErrorBoundary.prototype.setStatsigMetadata = function (statsigMetadata) {\n        this.statsigMetadata = statsigMetadata;\n    };\n    ErrorBoundary.prototype.swallow = function (tag, task, options) {\n        if (options === void 0) { options = {}; }\n        this.capture(tag, task, function () {\n            return undefined;\n        }, options);\n    };\n    ErrorBoundary.prototype.capture = function (tag, task, recover, captureOptions) {\n        var _this = this;\n        if (captureOptions === void 0) { captureOptions = {}; }\n        var markerID = null;\n        try {\n            markerID = this.beginMarker(tag);\n            var result = task();\n            var wasSuccessful_1 = true;\n            if (result instanceof Promise) {\n                return result\n                    .catch(function (e) {\n                    wasSuccessful_1 = false;\n                    return _this.onCaught(tag, e, recover, captureOptions);\n                })\n                    .then(function (possiblyRecoveredResult) {\n                    _this.endMarker(tag, wasSuccessful_1, markerID);\n                    return possiblyRecoveredResult;\n                });\n            }\n            this.endMarker(tag, true, markerID, captureOptions.configName);\n            return result;\n        }\n        catch (error) {\n            this.endMarker(tag, false, markerID, captureOptions.configName);\n            return this.onCaught(tag, error, recover, captureOptions);\n        }\n    };\n    ErrorBoundary.prototype.logError = function (tag, error, _a) {\n        var _this = this;\n        var _b = _a === void 0 ? {} : _a, getExtraData = _b.getExtraData, configName = _b.configName;\n        if (this.sdkOptions.isAllLoggingDisabled()) {\n            return;\n        }\n        (function () { return __awaiter(_this, void 0, void 0, function () {\n            var extra, _a, name_1, info, metadata, body;\n            var _b;\n            return __generator(this, function (_c) {\n                try {\n                    extra = typeof getExtraData === 'function' ? getExtraData() : {};\n                    _a = (0, parseError_1.default)(error), name_1 = _a.name, info = _a.trace;\n                    extra['configName'] = configName;\n                    if (this.seen.has(name_1))\n                        return [2 /*return*/];\n                    this.seen.add(name_1);\n                    metadata = (_b = this.statsigMetadata) !== null && _b !== void 0 ? _b : {};\n                    if (metadata.sessionID == null) {\n                        metadata.sessionID = (0, uuid_1.v4)();\n                    }\n                    body = JSON.stringify({\n                        tag: tag,\n                        exception: name_1,\n                        info: info,\n                        statsigMetadata: metadata,\n                        statsigOptions: this.sdkOptions.getLoggingCopy(),\n                        extra: extra,\n                    });\n                    return [2 /*return*/, fetch(exports.ExceptionEndpoint, {\n                            method: 'POST',\n                            headers: {\n                                'STATSIG-API-KEY': this.sdkKey,\n                                'STATSIG-SDK-TYPE': String(metadata['sdkType']),\n                                'STATSIG-SDK-VERSION': String(metadata['sdkVersion']),\n                                'Content-Type': 'application/json; charset=UTF-8',\n                            },\n                            body: body,\n                        })];\n                }\n                catch (_error) {\n                    /* noop */\n                }\n                return [2 /*return*/];\n            });\n        }); })().catch(function () {\n            /*noop*/\n        });\n    };\n    ErrorBoundary.prototype.setupDiagnostics = function (maxMarkers) {\n        Diagnostics_1.default.setMaxMarkers('api_call', maxMarkers);\n    };\n    ErrorBoundary.prototype.beginMarker = function (tag) {\n        var diagnostics = Diagnostics_1.default.mark.api_call(tag);\n        if (!diagnostics) {\n            return null;\n        }\n        var count = Diagnostics_1.default.getMarkerCount('api_call');\n        var markerID = \"\".concat(tag, \"_\").concat(count);\n        var wasAdded = diagnostics.start({\n            markerID: markerID,\n        }, 'api_call');\n        return wasAdded ? markerID : null;\n    };\n    ErrorBoundary.prototype.endMarker = function (tag, wasSuccessful, markerID, configName) {\n        var diagnostics = Diagnostics_1.default.mark.api_call(tag);\n        if (!markerID || !diagnostics) {\n            return;\n        }\n        diagnostics.end({\n            markerID: markerID,\n            success: wasSuccessful,\n            configName: configName,\n        }, 'api_call');\n    };\n    ErrorBoundary.prototype.onCaught = function (tag, error, recover, captureOptions) {\n        if (captureOptions === void 0) { captureOptions = {}; }\n        if (error instanceof Errors_1.StatsigUninitializedError ||\n            error instanceof Errors_1.StatsigInvalidArgumentError) {\n            throw error; // Don't catch these\n        }\n        if (error instanceof Errors_1.StatsigInitializationTimeoutError) {\n            OutputLogger_1.default.error('Timeout occured.', error);\n            return recover();\n        }\n        OutputLogger_1.default.error('An unexpected exception occurred.', error);\n        this.logError(tag, error, captureOptions);\n        return recover();\n    };\n    return ErrorBoundary;\n}());\nexports[\"default\"] = ErrorBoundary;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L0Vycm9yQm91bmRhcnkuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDRCQUE0QiwrREFBK0QsaUJBQWlCO0FBQzVHO0FBQ0Esb0NBQW9DLE1BQU0sK0JBQStCLFlBQVk7QUFDckYsbUNBQW1DLE1BQU0sbUNBQW1DLFlBQVk7QUFDeEYsZ0NBQWdDO0FBQ2hDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxjQUFjLDZCQUE2QiwwQkFBMEIsY0FBYyxxQkFBcUI7QUFDeEcsaUJBQWlCLG9EQUFvRCxxRUFBcUUsY0FBYztBQUN4Six1QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QztBQUN4QyxtQ0FBbUMsU0FBUztBQUM1QyxtQ0FBbUMsV0FBVyxVQUFVO0FBQ3hELDBDQUEwQyxjQUFjO0FBQ3hEO0FBQ0EsOEdBQThHLE9BQU87QUFDckgsaUZBQWlGLGlCQUFpQjtBQUNsRyx5REFBeUQsZ0JBQWdCLFFBQVE7QUFDakYsK0NBQStDLGdCQUFnQixnQkFBZ0I7QUFDL0U7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBLFVBQVUsWUFBWSxhQUFhLFNBQVMsVUFBVTtBQUN0RCxvQ0FBb0MsU0FBUztBQUM3QztBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QseUJBQXlCO0FBQ3pCLGFBQWEsbUJBQU8sQ0FBQyw4REFBTTtBQUMzQixlQUFlLG1CQUFPLENBQUMsZ0VBQVU7QUFDakMsb0NBQW9DLG1CQUFPLENBQUMsc0ZBQXFCO0FBQ2pFLHFDQUFxQyxtQkFBTyxDQUFDLHdGQUFzQjtBQUNuRSxtQ0FBbUMsbUJBQU8sQ0FBQyxvRkFBb0I7QUFDL0QseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0M7QUFDcEM7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRUFBbUU7QUFDbkUsNkJBQTZCO0FBQzdCO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUyxJQUFJO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EseUNBQXlDO0FBQ3pDO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsa0JBQWUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbWF6b24tZnJlc2gtZGVtby8uL25vZGVfbW9kdWxlcy9zdGF0c2lnLWpzL2Rpc3QvRXJyb3JCb3VuZGFyeS5qcz84MDgxIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICAgIHdoaWxlIChnICYmIChnID0gMCwgb3BbMF0gJiYgKF8gPSAwKSksIF8pIHRyeSB7XG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcbiAgICB9XG59O1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5FeGNlcHRpb25FbmRwb2ludCA9IHZvaWQgMDtcbnZhciB1dWlkXzEgPSByZXF1aXJlKFwidXVpZFwiKTtcbnZhciBFcnJvcnNfMSA9IHJlcXVpcmUoXCIuL0Vycm9yc1wiKTtcbnZhciBEaWFnbm9zdGljc18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL3V0aWxzL0RpYWdub3N0aWNzXCIpKTtcbnZhciBPdXRwdXRMb2dnZXJfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi91dGlscy9PdXRwdXRMb2dnZXJcIikpO1xudmFyIHBhcnNlRXJyb3JfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi91dGlscy9wYXJzZUVycm9yXCIpKTtcbmV4cG9ydHMuRXhjZXB0aW9uRW5kcG9pbnQgPSAnaHR0cHM6Ly9zdGF0c2lnYXBpLm5ldC92MS9zZGtfZXhjZXB0aW9uJztcbnZhciBNQVhfRElBR05PU1RJQ1NfTUFSS0VSUyA9IDMwO1xudmFyIFNBTVBMSU5HX1JBVEUgPSAxMDAwMDtcbnZhciBFcnJvckJvdW5kYXJ5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEVycm9yQm91bmRhcnkoc2RrS2V5LCBzZGtPcHRpb25zKSB7XG4gICAgICAgIHRoaXMuc2RrS2V5ID0gc2RrS2V5O1xuICAgICAgICB0aGlzLnNka09wdGlvbnMgPSBzZGtPcHRpb25zO1xuICAgICAgICB0aGlzLnNlZW4gPSBuZXcgU2V0KCk7XG4gICAgICAgIHZhciBzYW1wbGluZyA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIFNBTVBMSU5HX1JBVEUpO1xuICAgICAgICB0aGlzLnNldHVwRGlhZ25vc3RpY3Moc2FtcGxpbmcgPT09IDAgPyBNQVhfRElBR05PU1RJQ1NfTUFSS0VSUyA6IDApO1xuICAgIH1cbiAgICBFcnJvckJvdW5kYXJ5LnByb3RvdHlwZS5zZXRTdGF0c2lnTWV0YWRhdGEgPSBmdW5jdGlvbiAoc3RhdHNpZ01ldGFkYXRhKSB7XG4gICAgICAgIHRoaXMuc3RhdHNpZ01ldGFkYXRhID0gc3RhdHNpZ01ldGFkYXRhO1xuICAgIH07XG4gICAgRXJyb3JCb3VuZGFyeS5wcm90b3R5cGUuc3dhbGxvdyA9IGZ1bmN0aW9uICh0YWcsIHRhc2ssIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cbiAgICAgICAgdGhpcy5jYXB0dXJlKHRhZywgdGFzaywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfSwgb3B0aW9ucyk7XG4gICAgfTtcbiAgICBFcnJvckJvdW5kYXJ5LnByb3RvdHlwZS5jYXB0dXJlID0gZnVuY3Rpb24gKHRhZywgdGFzaywgcmVjb3ZlciwgY2FwdHVyZU9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKGNhcHR1cmVPcHRpb25zID09PSB2b2lkIDApIHsgY2FwdHVyZU9wdGlvbnMgPSB7fTsgfVxuICAgICAgICB2YXIgbWFya2VySUQgPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbWFya2VySUQgPSB0aGlzLmJlZ2luTWFya2VyKHRhZyk7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGFzaygpO1xuICAgICAgICAgICAgdmFyIHdhc1N1Y2Nlc3NmdWxfMSA9IHRydWU7XG4gICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhc1N1Y2Nlc3NmdWxfMSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMub25DYXVnaHQodGFnLCBlLCByZWNvdmVyLCBjYXB0dXJlT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHBvc3NpYmx5UmVjb3ZlcmVkUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmVuZE1hcmtlcih0YWcsIHdhc1N1Y2Nlc3NmdWxfMSwgbWFya2VySUQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcG9zc2libHlSZWNvdmVyZWRSZXN1bHQ7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVuZE1hcmtlcih0YWcsIHRydWUsIG1hcmtlcklELCBjYXB0dXJlT3B0aW9ucy5jb25maWdOYW1lKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmVuZE1hcmtlcih0YWcsIGZhbHNlLCBtYXJrZXJJRCwgY2FwdHVyZU9wdGlvbnMuY29uZmlnTmFtZSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vbkNhdWdodCh0YWcsIGVycm9yLCByZWNvdmVyLCBjYXB0dXJlT3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEVycm9yQm91bmRhcnkucHJvdG90eXBlLmxvZ0Vycm9yID0gZnVuY3Rpb24gKHRhZywgZXJyb3IsIF9hKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBfYiA9IF9hID09PSB2b2lkIDAgPyB7fSA6IF9hLCBnZXRFeHRyYURhdGEgPSBfYi5nZXRFeHRyYURhdGEsIGNvbmZpZ05hbWUgPSBfYi5jb25maWdOYW1lO1xuICAgICAgICBpZiAodGhpcy5zZGtPcHRpb25zLmlzQWxsTG9nZ2luZ0Rpc2FibGVkKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAoZnVuY3Rpb24gKCkgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGV4dHJhLCBfYSwgbmFtZV8xLCBpbmZvLCBtZXRhZGF0YSwgYm9keTtcbiAgICAgICAgICAgIHZhciBfYjtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2MpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBleHRyYSA9IHR5cGVvZiBnZXRFeHRyYURhdGEgPT09ICdmdW5jdGlvbicgPyBnZXRFeHRyYURhdGEoKSA6IHt9O1xuICAgICAgICAgICAgICAgICAgICBfYSA9ICgwLCBwYXJzZUVycm9yXzEuZGVmYXVsdCkoZXJyb3IpLCBuYW1lXzEgPSBfYS5uYW1lLCBpbmZvID0gX2EudHJhY2U7XG4gICAgICAgICAgICAgICAgICAgIGV4dHJhWydjb25maWdOYW1lJ10gPSBjb25maWdOYW1lO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWVuLmhhcyhuYW1lXzEpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlZW4uYWRkKG5hbWVfMSk7XG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhID0gKF9iID0gdGhpcy5zdGF0c2lnTWV0YWRhdGEpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHt9O1xuICAgICAgICAgICAgICAgICAgICBpZiAobWV0YWRhdGEuc2Vzc2lvbklEID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhLnNlc3Npb25JRCA9ICgwLCB1dWlkXzEudjQpKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYm9keSA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZzogdGFnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0aW9uOiBuYW1lXzEsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmZvOiBpbmZvLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHNpZ01ldGFkYXRhOiBtZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzaWdPcHRpb25zOiB0aGlzLnNka09wdGlvbnMuZ2V0TG9nZ2luZ0NvcHkoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhOiBleHRyYSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBmZXRjaChleHBvcnRzLkV4Y2VwdGlvbkVuZHBvaW50LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU1RBVFNJRy1BUEktS0VZJzogdGhpcy5zZGtLZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdTVEFUU0lHLVNESy1UWVBFJzogU3RyaW5nKG1ldGFkYXRhWydzZGtUeXBlJ10pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU1RBVFNJRy1TREstVkVSU0lPTic6IFN0cmluZyhtZXRhZGF0YVsnc2RrVmVyc2lvbiddKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PVVURi04JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IGJvZHksXG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChfZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgLyogbm9vcCAqL1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7IH0pKCkuY2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLypub29wKi9cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBFcnJvckJvdW5kYXJ5LnByb3RvdHlwZS5zZXR1cERpYWdub3N0aWNzID0gZnVuY3Rpb24gKG1heE1hcmtlcnMpIHtcbiAgICAgICAgRGlhZ25vc3RpY3NfMS5kZWZhdWx0LnNldE1heE1hcmtlcnMoJ2FwaV9jYWxsJywgbWF4TWFya2Vycyk7XG4gICAgfTtcbiAgICBFcnJvckJvdW5kYXJ5LnByb3RvdHlwZS5iZWdpbk1hcmtlciA9IGZ1bmN0aW9uICh0YWcpIHtcbiAgICAgICAgdmFyIGRpYWdub3N0aWNzID0gRGlhZ25vc3RpY3NfMS5kZWZhdWx0Lm1hcmsuYXBpX2NhbGwodGFnKTtcbiAgICAgICAgaWYgKCFkaWFnbm9zdGljcykge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNvdW50ID0gRGlhZ25vc3RpY3NfMS5kZWZhdWx0LmdldE1hcmtlckNvdW50KCdhcGlfY2FsbCcpO1xuICAgICAgICB2YXIgbWFya2VySUQgPSBcIlwiLmNvbmNhdCh0YWcsIFwiX1wiKS5jb25jYXQoY291bnQpO1xuICAgICAgICB2YXIgd2FzQWRkZWQgPSBkaWFnbm9zdGljcy5zdGFydCh7XG4gICAgICAgICAgICBtYXJrZXJJRDogbWFya2VySUQsXG4gICAgICAgIH0sICdhcGlfY2FsbCcpO1xuICAgICAgICByZXR1cm4gd2FzQWRkZWQgPyBtYXJrZXJJRCA6IG51bGw7XG4gICAgfTtcbiAgICBFcnJvckJvdW5kYXJ5LnByb3RvdHlwZS5lbmRNYXJrZXIgPSBmdW5jdGlvbiAodGFnLCB3YXNTdWNjZXNzZnVsLCBtYXJrZXJJRCwgY29uZmlnTmFtZSkge1xuICAgICAgICB2YXIgZGlhZ25vc3RpY3MgPSBEaWFnbm9zdGljc18xLmRlZmF1bHQubWFyay5hcGlfY2FsbCh0YWcpO1xuICAgICAgICBpZiAoIW1hcmtlcklEIHx8ICFkaWFnbm9zdGljcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGRpYWdub3N0aWNzLmVuZCh7XG4gICAgICAgICAgICBtYXJrZXJJRDogbWFya2VySUQsXG4gICAgICAgICAgICBzdWNjZXNzOiB3YXNTdWNjZXNzZnVsLFxuICAgICAgICAgICAgY29uZmlnTmFtZTogY29uZmlnTmFtZSxcbiAgICAgICAgfSwgJ2FwaV9jYWxsJyk7XG4gICAgfTtcbiAgICBFcnJvckJvdW5kYXJ5LnByb3RvdHlwZS5vbkNhdWdodCA9IGZ1bmN0aW9uICh0YWcsIGVycm9yLCByZWNvdmVyLCBjYXB0dXJlT3B0aW9ucykge1xuICAgICAgICBpZiAoY2FwdHVyZU9wdGlvbnMgPT09IHZvaWQgMCkgeyBjYXB0dXJlT3B0aW9ucyA9IHt9OyB9XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yc18xLlN0YXRzaWdVbmluaXRpYWxpemVkRXJyb3IgfHxcbiAgICAgICAgICAgIGVycm9yIGluc3RhbmNlb2YgRXJyb3JzXzEuU3RhdHNpZ0ludmFsaWRBcmd1bWVudEVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjsgLy8gRG9uJ3QgY2F0Y2ggdGhlc2VcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcnNfMS5TdGF0c2lnSW5pdGlhbGl6YXRpb25UaW1lb3V0RXJyb3IpIHtcbiAgICAgICAgICAgIE91dHB1dExvZ2dlcl8xLmRlZmF1bHQuZXJyb3IoJ1RpbWVvdXQgb2NjdXJlZC4nLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gcmVjb3ZlcigpO1xuICAgICAgICB9XG4gICAgICAgIE91dHB1dExvZ2dlcl8xLmRlZmF1bHQuZXJyb3IoJ0FuIHVuZXhwZWN0ZWQgZXhjZXB0aW9uIG9jY3VycmVkLicsIGVycm9yKTtcbiAgICAgICAgdGhpcy5sb2dFcnJvcih0YWcsIGVycm9yLCBjYXB0dXJlT3B0aW9ucyk7XG4gICAgICAgIHJldHVybiByZWNvdmVyKCk7XG4gICAgfTtcbiAgICByZXR1cm4gRXJyb3JCb3VuZGFyeTtcbn0oKSk7XG5leHBvcnRzLmRlZmF1bHQgPSBFcnJvckJvdW5kYXJ5O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/statsig-js/dist/ErrorBoundary.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/statsig-js/dist/Errors.js":
/*!************************************************!*\
  !*** ./node_modules/statsig-js/dist/Errors.js ***!
  \************************************************/
/***/ (function(__unused_webpack_module, exports) {

eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.StatsigInitializationTimeoutError = exports.StatsigSDKKeyMismatchError = exports.StatsigInvalidArgumentError = exports.StatsigUninitializedError = void 0;\nvar StatsigUninitializedError = /** @class */ (function (_super) {\n    __extends(StatsigUninitializedError, _super);\n    function StatsigUninitializedError(message) {\n        var _this = _super.call(this, message !== null && message !== void 0 ? message : 'Call and wait for initialize() to finish first.') || this;\n        Object.setPrototypeOf(_this, StatsigUninitializedError.prototype);\n        return _this;\n    }\n    return StatsigUninitializedError;\n}(Error));\nexports.StatsigUninitializedError = StatsigUninitializedError;\nvar StatsigInvalidArgumentError = /** @class */ (function (_super) {\n    __extends(StatsigInvalidArgumentError, _super);\n    function StatsigInvalidArgumentError(message) {\n        var _this = _super.call(this, message) || this;\n        Object.setPrototypeOf(_this, StatsigInvalidArgumentError.prototype);\n        return _this;\n    }\n    return StatsigInvalidArgumentError;\n}(Error));\nexports.StatsigInvalidArgumentError = StatsigInvalidArgumentError;\nvar StatsigSDKKeyMismatchError = /** @class */ (function (_super) {\n    __extends(StatsigSDKKeyMismatchError, _super);\n    function StatsigSDKKeyMismatchError(message) {\n        var _this = _super.call(this, message) || this;\n        Object.setPrototypeOf(_this, StatsigSDKKeyMismatchError.prototype);\n        return _this;\n    }\n    return StatsigSDKKeyMismatchError;\n}(Error));\nexports.StatsigSDKKeyMismatchError = StatsigSDKKeyMismatchError;\nvar StatsigInitializationTimeoutError = /** @class */ (function (_super) {\n    __extends(StatsigInitializationTimeoutError, _super);\n    function StatsigInitializationTimeoutError(timeoutMs) {\n        var _this = _super.call(this, \"The initialization timeout of \".concat(timeoutMs, \"ms has been hit before the network request has completed.\")) || this;\n        Object.setPrototypeOf(_this, StatsigInitializationTimeoutError.prototype);\n        return _this;\n    }\n    return StatsigInitializationTimeoutError;\n}(Error));\nexports.StatsigInitializationTimeoutError = StatsigInitializationTimeoutError;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L0Vycm9ycy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0JBQWdCLHNDQUFzQyxrQkFBa0I7QUFDdkYsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0EsQ0FBQztBQUNELDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCx5Q0FBeUMsR0FBRyxrQ0FBa0MsR0FBRyxtQ0FBbUMsR0FBRyxpQ0FBaUM7QUFDeEo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCx5Q0FBeUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbWF6b24tZnJlc2gtZGVtby8uL25vZGVfbW9kdWxlcy9zdGF0c2lnLWpzL2Rpc3QvRXJyb3JzLmpzPzI1NzQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5TdGF0c2lnSW5pdGlhbGl6YXRpb25UaW1lb3V0RXJyb3IgPSBleHBvcnRzLlN0YXRzaWdTREtLZXlNaXNtYXRjaEVycm9yID0gZXhwb3J0cy5TdGF0c2lnSW52YWxpZEFyZ3VtZW50RXJyb3IgPSBleHBvcnRzLlN0YXRzaWdVbmluaXRpYWxpemVkRXJyb3IgPSB2b2lkIDA7XG52YXIgU3RhdHNpZ1VuaW5pdGlhbGl6ZWRFcnJvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3RhdHNpZ1VuaW5pdGlhbGl6ZWRFcnJvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdGF0c2lnVW5pbml0aWFsaXplZEVycm9yKG1lc3NhZ2UpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgbWVzc2FnZSAhPT0gbnVsbCAmJiBtZXNzYWdlICE9PSB2b2lkIDAgPyBtZXNzYWdlIDogJ0NhbGwgYW5kIHdhaXQgZm9yIGluaXRpYWxpemUoKSB0byBmaW5pc2ggZmlyc3QuJykgfHwgdGhpcztcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKF90aGlzLCBTdGF0c2lnVW5pbml0aWFsaXplZEVycm9yLnByb3RvdHlwZSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIFN0YXRzaWdVbmluaXRpYWxpemVkRXJyb3I7XG59KEVycm9yKSk7XG5leHBvcnRzLlN0YXRzaWdVbmluaXRpYWxpemVkRXJyb3IgPSBTdGF0c2lnVW5pbml0aWFsaXplZEVycm9yO1xudmFyIFN0YXRzaWdJbnZhbGlkQXJndW1lbnRFcnJvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3RhdHNpZ0ludmFsaWRBcmd1bWVudEVycm9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN0YXRzaWdJbnZhbGlkQXJndW1lbnRFcnJvcihtZXNzYWdlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihfdGhpcywgU3RhdHNpZ0ludmFsaWRBcmd1bWVudEVycm9yLnByb3RvdHlwZSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIFN0YXRzaWdJbnZhbGlkQXJndW1lbnRFcnJvcjtcbn0oRXJyb3IpKTtcbmV4cG9ydHMuU3RhdHNpZ0ludmFsaWRBcmd1bWVudEVycm9yID0gU3RhdHNpZ0ludmFsaWRBcmd1bWVudEVycm9yO1xudmFyIFN0YXRzaWdTREtLZXlNaXNtYXRjaEVycm9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdGF0c2lnU0RLS2V5TWlzbWF0Y2hFcnJvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdGF0c2lnU0RLS2V5TWlzbWF0Y2hFcnJvcihtZXNzYWdlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihfdGhpcywgU3RhdHNpZ1NES0tleU1pc21hdGNoRXJyb3IucHJvdG90eXBlKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gU3RhdHNpZ1NES0tleU1pc21hdGNoRXJyb3I7XG59KEVycm9yKSk7XG5leHBvcnRzLlN0YXRzaWdTREtLZXlNaXNtYXRjaEVycm9yID0gU3RhdHNpZ1NES0tleU1pc21hdGNoRXJyb3I7XG52YXIgU3RhdHNpZ0luaXRpYWxpemF0aW9uVGltZW91dEVycm9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdGF0c2lnSW5pdGlhbGl6YXRpb25UaW1lb3V0RXJyb3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3RhdHNpZ0luaXRpYWxpemF0aW9uVGltZW91dEVycm9yKHRpbWVvdXRNcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBcIlRoZSBpbml0aWFsaXphdGlvbiB0aW1lb3V0IG9mIFwiLmNvbmNhdCh0aW1lb3V0TXMsIFwibXMgaGFzIGJlZW4gaGl0IGJlZm9yZSB0aGUgbmV0d29yayByZXF1ZXN0IGhhcyBjb21wbGV0ZWQuXCIpKSB8fCB0aGlzO1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoX3RoaXMsIFN0YXRzaWdJbml0aWFsaXphdGlvblRpbWVvdXRFcnJvci5wcm90b3R5cGUpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBTdGF0c2lnSW5pdGlhbGl6YXRpb25UaW1lb3V0RXJyb3I7XG59KEVycm9yKSk7XG5leHBvcnRzLlN0YXRzaWdJbml0aWFsaXphdGlvblRpbWVvdXRFcnJvciA9IFN0YXRzaWdJbml0aWFsaXphdGlvblRpbWVvdXRFcnJvcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/statsig-js/dist/Errors.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/statsig-js/dist/FeatureGate.js":
/*!*****************************************************!*\
  !*** ./node_modules/statsig-js/dist/FeatureGate.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar FeatureGate = /** @class */ (function () {\n    function FeatureGate(gateName, value, ruleID, evaluationDetails, groupName, idType, secondaryExposures) {\n        if (groupName === void 0) { groupName = null; }\n        if (idType === void 0) { idType = null; }\n        if (secondaryExposures === void 0) { secondaryExposures = []; }\n        this.name = gateName;\n        this.value = value;\n        this.ruleID = ruleID !== null && ruleID !== void 0 ? ruleID : '';\n        this.evaluationDetails = evaluationDetails;\n        this.groupName = groupName;\n        this.idType = idType;\n        this.secondaryExposures = secondaryExposures;\n    }\n    FeatureGate.prototype.getRuleID = function () {\n        return this.ruleID;\n    };\n    FeatureGate.prototype.getGroupName = function () {\n        return this.groupName;\n    };\n    FeatureGate.prototype.getIDType = function () {\n        return this.idType;\n    };\n    FeatureGate.prototype.getName = function () {\n        return this.name;\n    };\n    FeatureGate.prototype.getValue = function () {\n        return this.value;\n    };\n    FeatureGate.prototype.getEvaluationDetails = function () {\n        return this.evaluationDetails;\n    };\n    FeatureGate.prototype.getSecondaryExposures = function () {\n        return this.secondaryExposures;\n    };\n    return FeatureGate;\n}());\nexports[\"default\"] = FeatureGate;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L0ZlYXR1cmVHYXRlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdEO0FBQ0E7QUFDQSxvQ0FBb0M7QUFDcEMsaUNBQWlDO0FBQ2pDLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsa0JBQWUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbWF6b24tZnJlc2gtZGVtby8uL25vZGVfbW9kdWxlcy9zdGF0c2lnLWpzL2Rpc3QvRmVhdHVyZUdhdGUuanM/YjZmNiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBGZWF0dXJlR2F0ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBGZWF0dXJlR2F0ZShnYXRlTmFtZSwgdmFsdWUsIHJ1bGVJRCwgZXZhbHVhdGlvbkRldGFpbHMsIGdyb3VwTmFtZSwgaWRUeXBlLCBzZWNvbmRhcnlFeHBvc3VyZXMpIHtcbiAgICAgICAgaWYgKGdyb3VwTmFtZSA9PT0gdm9pZCAwKSB7IGdyb3VwTmFtZSA9IG51bGw7IH1cbiAgICAgICAgaWYgKGlkVHlwZSA9PT0gdm9pZCAwKSB7IGlkVHlwZSA9IG51bGw7IH1cbiAgICAgICAgaWYgKHNlY29uZGFyeUV4cG9zdXJlcyA9PT0gdm9pZCAwKSB7IHNlY29uZGFyeUV4cG9zdXJlcyA9IFtdOyB9XG4gICAgICAgIHRoaXMubmFtZSA9IGdhdGVOYW1lO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMucnVsZUlEID0gcnVsZUlEICE9PSBudWxsICYmIHJ1bGVJRCAhPT0gdm9pZCAwID8gcnVsZUlEIDogJyc7XG4gICAgICAgIHRoaXMuZXZhbHVhdGlvbkRldGFpbHMgPSBldmFsdWF0aW9uRGV0YWlscztcbiAgICAgICAgdGhpcy5ncm91cE5hbWUgPSBncm91cE5hbWU7XG4gICAgICAgIHRoaXMuaWRUeXBlID0gaWRUeXBlO1xuICAgICAgICB0aGlzLnNlY29uZGFyeUV4cG9zdXJlcyA9IHNlY29uZGFyeUV4cG9zdXJlcztcbiAgICB9XG4gICAgRmVhdHVyZUdhdGUucHJvdG90eXBlLmdldFJ1bGVJRCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucnVsZUlEO1xuICAgIH07XG4gICAgRmVhdHVyZUdhdGUucHJvdG90eXBlLmdldEdyb3VwTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ3JvdXBOYW1lO1xuICAgIH07XG4gICAgRmVhdHVyZUdhdGUucHJvdG90eXBlLmdldElEVHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWRUeXBlO1xuICAgIH07XG4gICAgRmVhdHVyZUdhdGUucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5hbWU7XG4gICAgfTtcbiAgICBGZWF0dXJlR2F0ZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICAgIH07XG4gICAgRmVhdHVyZUdhdGUucHJvdG90eXBlLmdldEV2YWx1YXRpb25EZXRhaWxzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ldmFsdWF0aW9uRGV0YWlscztcbiAgICB9O1xuICAgIEZlYXR1cmVHYXRlLnByb3RvdHlwZS5nZXRTZWNvbmRhcnlFeHBvc3VyZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlY29uZGFyeUV4cG9zdXJlcztcbiAgICB9O1xuICAgIHJldHVybiBGZWF0dXJlR2F0ZTtcbn0oKSk7XG5leHBvcnRzLmRlZmF1bHQgPSBGZWF0dXJlR2F0ZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/statsig-js/dist/FeatureGate.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/statsig-js/dist/Layer.js":
/*!***********************************************!*\
  !*** ./node_modules/statsig-js/dist/Layer.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar Layer = /** @class */ (function () {\n    function Layer(name, layerValue, ruleID, evaluationDetails, logParameterFunction, secondaryExposures, undelegatedSecondaryExposures, allocatedExperimentName, explicitParameters, groupName) {\n        if (logParameterFunction === void 0) { logParameterFunction = null; }\n        if (secondaryExposures === void 0) { secondaryExposures = []; }\n        if (undelegatedSecondaryExposures === void 0) { undelegatedSecondaryExposures = []; }\n        if (allocatedExperimentName === void 0) { allocatedExperimentName = ''; }\n        if (explicitParameters === void 0) { explicitParameters = []; }\n        if (groupName === void 0) { groupName = null; }\n        this.logParameterFunction = logParameterFunction;\n        this.name = name;\n        this.value = JSON.parse(JSON.stringify(layerValue !== null && layerValue !== void 0 ? layerValue : {}));\n        this.ruleID = ruleID !== null && ruleID !== void 0 ? ruleID : '';\n        this.evaluationDetails = evaluationDetails;\n        this.secondaryExposures = secondaryExposures;\n        this.undelegatedSecondaryExposures = undelegatedSecondaryExposures;\n        this.allocatedExperimentName = allocatedExperimentName;\n        this.explicitParameters = explicitParameters;\n        this.groupName = groupName;\n    }\n    Layer._create = function (name, value, ruleID, evaluationDetails, logParameterFunction, secondaryExposures, undelegatedSecondaryExposures, allocatedExperimentName, explicitParameters, groupName) {\n        if (logParameterFunction === void 0) { logParameterFunction = null; }\n        if (secondaryExposures === void 0) { secondaryExposures = []; }\n        if (undelegatedSecondaryExposures === void 0) { undelegatedSecondaryExposures = []; }\n        if (allocatedExperimentName === void 0) { allocatedExperimentName = ''; }\n        if (explicitParameters === void 0) { explicitParameters = []; }\n        if (groupName === void 0) { groupName = null; }\n        return new Layer(name, value, ruleID, evaluationDetails, logParameterFunction, secondaryExposures, undelegatedSecondaryExposures, allocatedExperimentName, explicitParameters, groupName);\n    };\n    Layer.prototype.get = function (key, defaultValue, typeGuard) {\n        var _this = this;\n        var val = this.value[key];\n        if (val == null) {\n            return defaultValue;\n        }\n        var logAndReturn = function () {\n            _this.logLayerParameterExposure(key);\n            return val;\n        };\n        if (typeGuard) {\n            return typeGuard(val) ? logAndReturn() : defaultValue;\n        }\n        if (defaultValue == null) {\n            return logAndReturn();\n        }\n        if (typeof val === typeof defaultValue &&\n            Array.isArray(defaultValue) === Array.isArray(val)) {\n            return logAndReturn();\n        }\n        return defaultValue;\n    };\n    Layer.prototype.getValue = function (key, defaultValue) {\n        if (defaultValue == undefined) {\n            defaultValue = null;\n        }\n        var val = this.value[key];\n        if (val != null) {\n            this.logLayerParameterExposure(key);\n        }\n        return val !== null && val !== void 0 ? val : defaultValue;\n    };\n    Layer.prototype.getRuleID = function () {\n        return this.ruleID;\n    };\n    Layer.prototype.getGroupName = function () {\n        return this.groupName;\n    };\n    Layer.prototype.getName = function () {\n        return this.name;\n    };\n    Layer.prototype.getEvaluationDetails = function () {\n        return this.evaluationDetails;\n    };\n    Layer.prototype._getSecondaryExposures = function () {\n        return this.secondaryExposures;\n    };\n    Layer.prototype._getUndelegatedSecondaryExposures = function () {\n        return this.undelegatedSecondaryExposures;\n    };\n    Layer.prototype._getAllocatedExperimentName = function () {\n        return this.allocatedExperimentName;\n    };\n    Layer.prototype._getExplicitParameters = function () {\n        return this.explicitParameters;\n    };\n    Layer.prototype._getEvaluationDetails = function () {\n        return this.evaluationDetails;\n    };\n    Layer.prototype.logLayerParameterExposure = function (parameterName) {\n        var _a;\n        (_a = this.logParameterFunction) === null || _a === void 0 ? void 0 : _a.call(this, this, parameterName);\n    };\n    return Layer;\n}());\nexports[\"default\"] = Layer;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L0xheWVyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdEO0FBQ0E7QUFDQSwrQ0FBK0M7QUFDL0MsNkNBQTZDO0FBQzdDLHdEQUF3RDtBQUN4RCxrREFBa0Q7QUFDbEQsNkNBQTZDO0FBQzdDLG9DQUFvQztBQUNwQztBQUNBO0FBQ0EsNkdBQTZHO0FBQzdHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQztBQUMvQyw2Q0FBNkM7QUFDN0Msd0RBQXdEO0FBQ3hELGtEQUFrRDtBQUNsRCw2Q0FBNkM7QUFDN0Msb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxrQkFBZSIsInNvdXJjZXMiOlsid2VicGFjazovL2FtYXpvbi1mcmVzaC1kZW1vLy4vbm9kZV9tb2R1bGVzL3N0YXRzaWctanMvZGlzdC9MYXllci5qcz8xMmJlIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIExheWVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIExheWVyKG5hbWUsIGxheWVyVmFsdWUsIHJ1bGVJRCwgZXZhbHVhdGlvbkRldGFpbHMsIGxvZ1BhcmFtZXRlckZ1bmN0aW9uLCBzZWNvbmRhcnlFeHBvc3VyZXMsIHVuZGVsZWdhdGVkU2Vjb25kYXJ5RXhwb3N1cmVzLCBhbGxvY2F0ZWRFeHBlcmltZW50TmFtZSwgZXhwbGljaXRQYXJhbWV0ZXJzLCBncm91cE5hbWUpIHtcbiAgICAgICAgaWYgKGxvZ1BhcmFtZXRlckZ1bmN0aW9uID09PSB2b2lkIDApIHsgbG9nUGFyYW1ldGVyRnVuY3Rpb24gPSBudWxsOyB9XG4gICAgICAgIGlmIChzZWNvbmRhcnlFeHBvc3VyZXMgPT09IHZvaWQgMCkgeyBzZWNvbmRhcnlFeHBvc3VyZXMgPSBbXTsgfVxuICAgICAgICBpZiAodW5kZWxlZ2F0ZWRTZWNvbmRhcnlFeHBvc3VyZXMgPT09IHZvaWQgMCkgeyB1bmRlbGVnYXRlZFNlY29uZGFyeUV4cG9zdXJlcyA9IFtdOyB9XG4gICAgICAgIGlmIChhbGxvY2F0ZWRFeHBlcmltZW50TmFtZSA9PT0gdm9pZCAwKSB7IGFsbG9jYXRlZEV4cGVyaW1lbnROYW1lID0gJyc7IH1cbiAgICAgICAgaWYgKGV4cGxpY2l0UGFyYW1ldGVycyA9PT0gdm9pZCAwKSB7IGV4cGxpY2l0UGFyYW1ldGVycyA9IFtdOyB9XG4gICAgICAgIGlmIChncm91cE5hbWUgPT09IHZvaWQgMCkgeyBncm91cE5hbWUgPSBudWxsOyB9XG4gICAgICAgIHRoaXMubG9nUGFyYW1ldGVyRnVuY3Rpb24gPSBsb2dQYXJhbWV0ZXJGdW5jdGlvbjtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobGF5ZXJWYWx1ZSAhPT0gbnVsbCAmJiBsYXllclZhbHVlICE9PSB2b2lkIDAgPyBsYXllclZhbHVlIDoge30pKTtcbiAgICAgICAgdGhpcy5ydWxlSUQgPSBydWxlSUQgIT09IG51bGwgJiYgcnVsZUlEICE9PSB2b2lkIDAgPyBydWxlSUQgOiAnJztcbiAgICAgICAgdGhpcy5ldmFsdWF0aW9uRGV0YWlscyA9IGV2YWx1YXRpb25EZXRhaWxzO1xuICAgICAgICB0aGlzLnNlY29uZGFyeUV4cG9zdXJlcyA9IHNlY29uZGFyeUV4cG9zdXJlcztcbiAgICAgICAgdGhpcy51bmRlbGVnYXRlZFNlY29uZGFyeUV4cG9zdXJlcyA9IHVuZGVsZWdhdGVkU2Vjb25kYXJ5RXhwb3N1cmVzO1xuICAgICAgICB0aGlzLmFsbG9jYXRlZEV4cGVyaW1lbnROYW1lID0gYWxsb2NhdGVkRXhwZXJpbWVudE5hbWU7XG4gICAgICAgIHRoaXMuZXhwbGljaXRQYXJhbWV0ZXJzID0gZXhwbGljaXRQYXJhbWV0ZXJzO1xuICAgICAgICB0aGlzLmdyb3VwTmFtZSA9IGdyb3VwTmFtZTtcbiAgICB9XG4gICAgTGF5ZXIuX2NyZWF0ZSA9IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSwgcnVsZUlELCBldmFsdWF0aW9uRGV0YWlscywgbG9nUGFyYW1ldGVyRnVuY3Rpb24sIHNlY29uZGFyeUV4cG9zdXJlcywgdW5kZWxlZ2F0ZWRTZWNvbmRhcnlFeHBvc3VyZXMsIGFsbG9jYXRlZEV4cGVyaW1lbnROYW1lLCBleHBsaWNpdFBhcmFtZXRlcnMsIGdyb3VwTmFtZSkge1xuICAgICAgICBpZiAobG9nUGFyYW1ldGVyRnVuY3Rpb24gPT09IHZvaWQgMCkgeyBsb2dQYXJhbWV0ZXJGdW5jdGlvbiA9IG51bGw7IH1cbiAgICAgICAgaWYgKHNlY29uZGFyeUV4cG9zdXJlcyA9PT0gdm9pZCAwKSB7IHNlY29uZGFyeUV4cG9zdXJlcyA9IFtdOyB9XG4gICAgICAgIGlmICh1bmRlbGVnYXRlZFNlY29uZGFyeUV4cG9zdXJlcyA9PT0gdm9pZCAwKSB7IHVuZGVsZWdhdGVkU2Vjb25kYXJ5RXhwb3N1cmVzID0gW107IH1cbiAgICAgICAgaWYgKGFsbG9jYXRlZEV4cGVyaW1lbnROYW1lID09PSB2b2lkIDApIHsgYWxsb2NhdGVkRXhwZXJpbWVudE5hbWUgPSAnJzsgfVxuICAgICAgICBpZiAoZXhwbGljaXRQYXJhbWV0ZXJzID09PSB2b2lkIDApIHsgZXhwbGljaXRQYXJhbWV0ZXJzID0gW107IH1cbiAgICAgICAgaWYgKGdyb3VwTmFtZSA9PT0gdm9pZCAwKSB7IGdyb3VwTmFtZSA9IG51bGw7IH1cbiAgICAgICAgcmV0dXJuIG5ldyBMYXllcihuYW1lLCB2YWx1ZSwgcnVsZUlELCBldmFsdWF0aW9uRGV0YWlscywgbG9nUGFyYW1ldGVyRnVuY3Rpb24sIHNlY29uZGFyeUV4cG9zdXJlcywgdW5kZWxlZ2F0ZWRTZWNvbmRhcnlFeHBvc3VyZXMsIGFsbG9jYXRlZEV4cGVyaW1lbnROYW1lLCBleHBsaWNpdFBhcmFtZXRlcnMsIGdyb3VwTmFtZSk7XG4gICAgfTtcbiAgICBMYXllci5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGtleSwgZGVmYXVsdFZhbHVlLCB0eXBlR3VhcmQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHZhbCA9IHRoaXMudmFsdWVba2V5XTtcbiAgICAgICAgaWYgKHZhbCA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsb2dBbmRSZXR1cm4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5sb2dMYXllclBhcmFtZXRlckV4cG9zdXJlKGtleSk7XG4gICAgICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgICB9O1xuICAgICAgICBpZiAodHlwZUd1YXJkKSB7XG4gICAgICAgICAgICByZXR1cm4gdHlwZUd1YXJkKHZhbCkgPyBsb2dBbmRSZXR1cm4oKSA6IGRlZmF1bHRWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmYXVsdFZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2dBbmRSZXR1cm4oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gdHlwZW9mIGRlZmF1bHRWYWx1ZSAmJlxuICAgICAgICAgICAgQXJyYXkuaXNBcnJheShkZWZhdWx0VmFsdWUpID09PSBBcnJheS5pc0FycmF5KHZhbCkpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2dBbmRSZXR1cm4oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICAgIH07XG4gICAgTGF5ZXIucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKGtleSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgIGlmIChkZWZhdWx0VmFsdWUgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBkZWZhdWx0VmFsdWUgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHZhciB2YWwgPSB0aGlzLnZhbHVlW2tleV07XG4gICAgICAgIGlmICh2YWwgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5sb2dMYXllclBhcmFtZXRlckV4cG9zdXJlKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbCAhPT0gbnVsbCAmJiB2YWwgIT09IHZvaWQgMCA/IHZhbCA6IGRlZmF1bHRWYWx1ZTtcbiAgICB9O1xuICAgIExheWVyLnByb3RvdHlwZS5nZXRSdWxlSUQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJ1bGVJRDtcbiAgICB9O1xuICAgIExheWVyLnByb3RvdHlwZS5nZXRHcm91cE5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdyb3VwTmFtZTtcbiAgICB9O1xuICAgIExheWVyLnByb3RvdHlwZS5nZXROYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uYW1lO1xuICAgIH07XG4gICAgTGF5ZXIucHJvdG90eXBlLmdldEV2YWx1YXRpb25EZXRhaWxzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ldmFsdWF0aW9uRGV0YWlscztcbiAgICB9O1xuICAgIExheWVyLnByb3RvdHlwZS5fZ2V0U2Vjb25kYXJ5RXhwb3N1cmVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWNvbmRhcnlFeHBvc3VyZXM7XG4gICAgfTtcbiAgICBMYXllci5wcm90b3R5cGUuX2dldFVuZGVsZWdhdGVkU2Vjb25kYXJ5RXhwb3N1cmVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlbGVnYXRlZFNlY29uZGFyeUV4cG9zdXJlcztcbiAgICB9O1xuICAgIExheWVyLnByb3RvdHlwZS5fZ2V0QWxsb2NhdGVkRXhwZXJpbWVudE5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFsbG9jYXRlZEV4cGVyaW1lbnROYW1lO1xuICAgIH07XG4gICAgTGF5ZXIucHJvdG90eXBlLl9nZXRFeHBsaWNpdFBhcmFtZXRlcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV4cGxpY2l0UGFyYW1ldGVycztcbiAgICB9O1xuICAgIExheWVyLnByb3RvdHlwZS5fZ2V0RXZhbHVhdGlvbkRldGFpbHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV2YWx1YXRpb25EZXRhaWxzO1xuICAgIH07XG4gICAgTGF5ZXIucHJvdG90eXBlLmxvZ0xheWVyUGFyYW1ldGVyRXhwb3N1cmUgPSBmdW5jdGlvbiAocGFyYW1ldGVyTmFtZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIChfYSA9IHRoaXMubG9nUGFyYW1ldGVyRnVuY3Rpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jYWxsKHRoaXMsIHRoaXMsIHBhcmFtZXRlck5hbWUpO1xuICAgIH07XG4gICAgcmV0dXJuIExheWVyO1xufSgpKTtcbmV4cG9ydHMuZGVmYXVsdCA9IExheWVyO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/statsig-js/dist/Layer.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/statsig-js/dist/LogEvent.js":
/*!**************************************************!*\
  !*** ./node_modules/statsig-js/dist/LogEvent.js ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, exports) {

eval("\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar LogEvent = /** @class */ (function () {\n    function LogEvent(eventName) {\n        this.user = null;\n        this.value = null;\n        this.metadata = null;\n        this.eventName = eventName;\n        this.statsigMetadata = {};\n        this.time = Date.now();\n    }\n    LogEvent.prototype.getName = function () {\n        return this.eventName;\n    };\n    LogEvent.prototype.setValue = function (value) {\n        this.value = value;\n    };\n    LogEvent.prototype.setMetadata = function (metadata) {\n        this.metadata = metadata;\n    };\n    LogEvent.prototype.addStatsigMetadata = function (key, value) {\n        this.statsigMetadata[key] = value;\n    };\n    LogEvent.prototype.setUser = function (newUser) {\n        // Need to remove private attributes from logs and also keep in the original user for evaluations.\n        this.user = __assign({}, newUser);\n        delete this.user.privateAttributes;\n    };\n    LogEvent.prototype.setSecondaryExposures = function (exposures) {\n        if (exposures === void 0) { exposures = []; }\n        this.secondaryExposures = exposures;\n    };\n    LogEvent.prototype.toJsonObject = function () {\n        var _a;\n        return {\n            eventName: this.eventName,\n            user: this.user,\n            value: this.value,\n            metadata: this.metadata,\n            time: this.time,\n            statsigMetadata: this.statsigMetadata,\n            secondaryExposures: (_a = this.secondaryExposures) !== null && _a !== void 0 ? _a : undefined,\n        };\n    };\n    return LogEvent;\n}());\nexports[\"default\"] = LogEvent;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L0xvZ0V2ZW50LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBLGlEQUFpRCxPQUFPO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0M7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELGtCQUFlIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYW1hem9uLWZyZXNoLWRlbW8vLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L0xvZ0V2ZW50LmpzPzM3YWUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKVxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH07XG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIExvZ0V2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIExvZ0V2ZW50KGV2ZW50TmFtZSkge1xuICAgICAgICB0aGlzLnVzZXIgPSBudWxsO1xuICAgICAgICB0aGlzLnZhbHVlID0gbnVsbDtcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG51bGw7XG4gICAgICAgIHRoaXMuZXZlbnROYW1lID0gZXZlbnROYW1lO1xuICAgICAgICB0aGlzLnN0YXRzaWdNZXRhZGF0YSA9IHt9O1xuICAgICAgICB0aGlzLnRpbWUgPSBEYXRlLm5vdygpO1xuICAgIH1cbiAgICBMb2dFdmVudC5wcm90b3R5cGUuZ2V0TmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnROYW1lO1xuICAgIH07XG4gICAgTG9nRXZlbnQucHJvdG90eXBlLnNldFZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB9O1xuICAgIExvZ0V2ZW50LnByb3RvdHlwZS5zZXRNZXRhZGF0YSA9IGZ1bmN0aW9uIChtZXRhZGF0YSkge1xuICAgICAgICB0aGlzLm1ldGFkYXRhID0gbWV0YWRhdGE7XG4gICAgfTtcbiAgICBMb2dFdmVudC5wcm90b3R5cGUuYWRkU3RhdHNpZ01ldGFkYXRhID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5zdGF0c2lnTWV0YWRhdGFba2V5XSA9IHZhbHVlO1xuICAgIH07XG4gICAgTG9nRXZlbnQucHJvdG90eXBlLnNldFVzZXIgPSBmdW5jdGlvbiAobmV3VXNlcikge1xuICAgICAgICAvLyBOZWVkIHRvIHJlbW92ZSBwcml2YXRlIGF0dHJpYnV0ZXMgZnJvbSBsb2dzIGFuZCBhbHNvIGtlZXAgaW4gdGhlIG9yaWdpbmFsIHVzZXIgZm9yIGV2YWx1YXRpb25zLlxuICAgICAgICB0aGlzLnVzZXIgPSBfX2Fzc2lnbih7fSwgbmV3VXNlcik7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnVzZXIucHJpdmF0ZUF0dHJpYnV0ZXM7XG4gICAgfTtcbiAgICBMb2dFdmVudC5wcm90b3R5cGUuc2V0U2Vjb25kYXJ5RXhwb3N1cmVzID0gZnVuY3Rpb24gKGV4cG9zdXJlcykge1xuICAgICAgICBpZiAoZXhwb3N1cmVzID09PSB2b2lkIDApIHsgZXhwb3N1cmVzID0gW107IH1cbiAgICAgICAgdGhpcy5zZWNvbmRhcnlFeHBvc3VyZXMgPSBleHBvc3VyZXM7XG4gICAgfTtcbiAgICBMb2dFdmVudC5wcm90b3R5cGUudG9Kc29uT2JqZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBldmVudE5hbWU6IHRoaXMuZXZlbnROYW1lLFxuICAgICAgICAgICAgdXNlcjogdGhpcy51c2VyLFxuICAgICAgICAgICAgdmFsdWU6IHRoaXMudmFsdWUsXG4gICAgICAgICAgICBtZXRhZGF0YTogdGhpcy5tZXRhZGF0YSxcbiAgICAgICAgICAgIHRpbWU6IHRoaXMudGltZSxcbiAgICAgICAgICAgIHN0YXRzaWdNZXRhZGF0YTogdGhpcy5zdGF0c2lnTWV0YWRhdGEsXG4gICAgICAgICAgICBzZWNvbmRhcnlFeHBvc3VyZXM6IChfYSA9IHRoaXMuc2Vjb25kYXJ5RXhwb3N1cmVzKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgfTtcbiAgICByZXR1cm4gTG9nRXZlbnQ7XG59KCkpO1xuZXhwb3J0cy5kZWZhdWx0ID0gTG9nRXZlbnQ7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/statsig-js/dist/LogEvent.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/statsig-js/dist/SDKVersion.js":
/*!****************************************************!*\
  !*** ./node_modules/statsig-js/dist/SDKVersion.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.version = void 0;\n// Generated by genversion.\nexports.version = '4.53.1';\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L1NES1ZlcnNpb24uanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsZUFBZTtBQUNmO0FBQ0EsZUFBZSIsInNvdXJjZXMiOlsid2VicGFjazovL2FtYXpvbi1mcmVzaC1kZW1vLy4vbm9kZV9tb2R1bGVzL3N0YXRzaWctanMvZGlzdC9TREtWZXJzaW9uLmpzPzUxYjUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnZlcnNpb24gPSB2b2lkIDA7XG4vLyBHZW5lcmF0ZWQgYnkgZ2VudmVyc2lvbi5cbmV4cG9ydHMudmVyc2lvbiA9ICc0LjUzLjEnO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/statsig-js/dist/SDKVersion.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/statsig-js/dist/StatsigClient.js":
/*!*******************************************************!*\
  !*** ./node_modules/statsig-js/dist/StatsigClient.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar DynamicConfig_1 = __importDefault(__webpack_require__(/*! ./DynamicConfig */ \"(ssr)/./node_modules/statsig-js/dist/DynamicConfig.js\"));\nvar ErrorBoundary_1 = __importDefault(__webpack_require__(/*! ./ErrorBoundary */ \"(ssr)/./node_modules/statsig-js/dist/ErrorBoundary.js\"));\nvar Errors_1 = __webpack_require__(/*! ./Errors */ \"(ssr)/./node_modules/statsig-js/dist/Errors.js\");\nvar FeatureGate_1 = __importDefault(__webpack_require__(/*! ./FeatureGate */ \"(ssr)/./node_modules/statsig-js/dist/FeatureGate.js\"));\nvar Layer_1 = __importDefault(__webpack_require__(/*! ./Layer */ \"(ssr)/./node_modules/statsig-js/dist/Layer.js\"));\nvar LogEvent_1 = __importDefault(__webpack_require__(/*! ./LogEvent */ \"(ssr)/./node_modules/statsig-js/dist/LogEvent.js\"));\nvar StatsigIdentity_1 = __importDefault(__webpack_require__(/*! ./StatsigIdentity */ \"(ssr)/./node_modules/statsig-js/dist/StatsigIdentity.js\"));\nvar StatsigLogger_1 = __importDefault(__webpack_require__(/*! ./StatsigLogger */ \"(ssr)/./node_modules/statsig-js/dist/StatsigLogger.js\"));\nvar StatsigNetwork_1 = __importDefault(__webpack_require__(/*! ./StatsigNetwork */ \"(ssr)/./node_modules/statsig-js/dist/StatsigNetwork.js\"));\nvar StatsigSDKOptions_1 = __importDefault(__webpack_require__(/*! ./StatsigSDKOptions */ \"(ssr)/./node_modules/statsig-js/dist/StatsigSDKOptions.js\"));\nvar StatsigStore_1 = __importDefault(__webpack_require__(/*! ./StatsigStore */ \"(ssr)/./node_modules/statsig-js/dist/StatsigStore.js\"));\nvar Diagnostics_1 = __importDefault(__webpack_require__(/*! ./utils/Diagnostics */ \"(ssr)/./node_modules/statsig-js/dist/utils/Diagnostics.js\"));\nvar EvaluationReason_1 = __webpack_require__(/*! ./utils/EvaluationReason */ \"(ssr)/./node_modules/statsig-js/dist/utils/EvaluationReason.js\");\nvar Hashing_1 = __webpack_require__(/*! ./utils/Hashing */ \"(ssr)/./node_modules/statsig-js/dist/utils/Hashing.js\");\nvar OutputLogger_1 = __importDefault(__webpack_require__(/*! ./utils/OutputLogger */ \"(ssr)/./node_modules/statsig-js/dist/utils/OutputLogger.js\"));\nvar ResponseVerification_1 = __webpack_require__(/*! ./utils/ResponseVerification */ \"(ssr)/./node_modules/statsig-js/dist/utils/ResponseVerification.js\");\nvar StatsigAsyncStorage_1 = __importDefault(__webpack_require__(/*! ./utils/StatsigAsyncStorage */ \"(ssr)/./node_modules/statsig-js/dist/utils/StatsigAsyncStorage.js\"));\nvar StatsigLocalStorage_1 = __importDefault(__webpack_require__(/*! ./utils/StatsigLocalStorage */ \"(ssr)/./node_modules/statsig-js/dist/utils/StatsigLocalStorage.js\"));\nvar Timing_1 = __webpack_require__(/*! ./utils/Timing */ \"(ssr)/./node_modules/statsig-js/dist/utils/Timing.js\");\nvar MAX_VALUE_SIZE = 64;\nvar MAX_OBJ_SIZE = 2048;\nvar StatsigClient = /** @class */ (function () {\n    function StatsigClient(sdkKey, user, options) {\n        var _this = this;\n        this.appState = null;\n        this.currentAppState = null;\n        this.appStateChangeSubscription = null;\n        this.onCacheLoadedForReact = null;\n        this.initCalled = false;\n        this.pendingInitPromise = null;\n        this.optionalLoggingSetup = false;\n        this.prefetchedUsersByCacheKey = {};\n        this.logLayerParameterExposureForLayer = function (layer, parameterName, isManualExposure) {\n            if (isManualExposure === void 0) { isManualExposure = false; }\n            var allocatedExperiment = '';\n            var exposures = layer._getUndelegatedSecondaryExposures();\n            var isExplicit = layer._getExplicitParameters().includes(parameterName);\n            if (isExplicit) {\n                allocatedExperiment = layer._getAllocatedExperimentName();\n                exposures = layer._getSecondaryExposures();\n            }\n            _this.logger.logLayerExposure(_this.getCurrentUser(), layer.getName(), layer.getRuleID(), exposures, allocatedExperiment, parameterName, isExplicit, layer._getEvaluationDetails(), isManualExposure);\n        };\n        if ((options === null || options === void 0 ? void 0 : options.localMode) !== true &&\n            (typeof sdkKey !== 'string' || !sdkKey.startsWith('client-'))) {\n            throw new Errors_1.StatsigInvalidArgumentError('Invalid key provided.  You must use a Client SDK Key from the Statsig console to initialize the sdk');\n        }\n        this.startTime = (0, Timing_1.now)();\n        this.options = new StatsigSDKOptions_1.default(options);\n        this.logger = new StatsigLogger_1.default(this);\n        Diagnostics_1.default.initialize({\n            options: this.options,\n        });\n        this.errorBoundary = new ErrorBoundary_1.default(sdkKey, this.options);\n        this.ready = false;\n        this.sdkKey = sdkKey;\n        OutputLogger_1.default.setLogger(this.options.getOutputLogger());\n        OutputLogger_1.default.setLogLevel(this.options.getLogLevel());\n        StatsigLocalStorage_1.default.disabled = this.options.getDisableLocalStorage();\n        this.identity = new StatsigIdentity_1.default(this.normalizeUser(user !== null && user !== void 0 ? user : null), this.options.getOverrideStableID(), StatsigClient.reactNativeUUID);\n        this.errorBoundary.setStatsigMetadata(this.getStatsigMetadata());\n        this.network = new StatsigNetwork_1.default(this);\n        this.store = new StatsigStore_1.default(this, this.options.getInitializeValues());\n        if (this.options.getInitializeValues() != null) {\n            var cb = this.options.getInitCompletionCallback();\n            this.ready = true;\n            this.initCalled = true;\n            setTimeout(function () { return _this.delayedSetup(); }, 20);\n            this.handleOptionalLogging();\n            if (cb) {\n                cb((0, Timing_1.now)() - this.startTime, true, null);\n            }\n        }\n    }\n    StatsigClient.prototype.getErrorBoundary = function () {\n        return this.errorBoundary;\n    };\n    StatsigClient.prototype.getNetwork = function () {\n        return this.network;\n    };\n    StatsigClient.prototype.getStore = function () {\n        return this.store;\n    };\n    StatsigClient.prototype.getLogger = function () {\n        return this.logger;\n    };\n    StatsigClient.prototype.getOptions = function () {\n        return this.options;\n    };\n    StatsigClient.prototype.getSDKKey = function () {\n        var _this = this;\n        return this.errorBoundary.capture('getSDKKey', function () {\n            var _a;\n            return (_a = _this.sdkKey) !== null && _a !== void 0 ? _a : '';\n        }, function () { return ''; });\n    };\n    StatsigClient.prototype.getCurrentUser = function () {\n        var _this = this;\n        return this.errorBoundary.capture('getCurrentUser', function () { return _this.identity.getUser(); }, function () { return null; });\n    };\n    StatsigClient.prototype.getCurrentUserCacheKey = function () {\n        var _this = this;\n        return this.errorBoundary.capture('getCurrentUserCacheKey', function () {\n            return (0, Hashing_1.getUserCacheKey)(_this.getStableID(), _this.getCurrentUser(), _this.getSDKKey());\n        }, function () { return ({ v1: '', v2: '', v3: '' }); });\n    };\n    StatsigClient.prototype.getCurrentUserUnitID = function (idType) {\n        var _this = this;\n        return this.errorBoundary.capture('getCurrentUserUnitID', function () { return _this.getUnitID(_this.getCurrentUser(), idType); }, function () { return ''; });\n    };\n    StatsigClient.prototype.getCurrentUserID = function () {\n        var _this = this;\n        return this.errorBoundary.capture('getCurrentUserID', function () { return _this.getUnitID(_this.getCurrentUser(), 'userid'); }, function () { return ''; });\n    };\n    StatsigClient.prototype.getUnitID = function (user, idType) {\n        var _a, _b, _c;\n        if (!user) {\n            return null;\n        }\n        if (idType.toLowerCase() === 'userid') {\n            return (_b = (_a = user.userID) === null || _a === void 0 ? void 0 : _a.toString()) !== null && _b !== void 0 ? _b : null;\n        }\n        if (user.customIDs) {\n            return (_c = user.customIDs[idType]) !== null && _c !== void 0 ? _c : user.customIDs[idType.toLowerCase()];\n        }\n        return null;\n    };\n    StatsigClient.prototype.getStatsigMetadata = function () {\n        var _this = this;\n        return this.errorBoundary.capture('getStatsigMetadata', function () { return _this.identity.getStatsigMetadata(); }, function () {\n            return {};\n        });\n    };\n    StatsigClient.prototype.getSDKType = function () {\n        var _this = this;\n        return this.errorBoundary.capture('getSDKType', function () { return _this.identity.getSDKType(); }, function () { return ''; });\n    };\n    StatsigClient.prototype.getSDKVersion = function () {\n        var _this = this;\n        return this.errorBoundary.capture('getSDKVersion', function () { return _this.identity.getSDKVersion(); }, function () { return ''; });\n    };\n    StatsigClient.prototype.delayedSetup = function () {\n        var _this = this;\n        this.errorBoundary.swallow('delayedSetup', function () {\n            if (_this.options.getInitializeValues() != null) {\n                _this.fireAndForgetPrefechUsers();\n            }\n            _this.identity.saveStableID();\n            _this.logger\n                .sendSavedRequests()\n                .catch(function (reason) {\n                return _this.errorBoundary.logError('sendSavedRequests:delayedSetup', reason);\n            });\n        });\n    };\n    StatsigClient.prototype.setInitializeValues = function (initializeValues) {\n        var _this = this;\n        this.errorBoundary.capture('setInitializeValues', function () {\n            _this.store.bootstrap(initializeValues);\n            var cb = null;\n            if (!_this.ready) {\n                // the sdk is usable and considered initialized when configured\n                // with initializeValues\n                _this.ready = true;\n                _this.initCalled = true;\n                // only callback on the first time initialize values are set and the\n                // sdk is usable\n                cb = _this.options.getInitCompletionCallback();\n            }\n            // we wont have access to window/document/localStorage if these run on the server\n            // so try to run whenever this is called\n            _this.handleOptionalLogging();\n            _this.logger\n                .sendSavedRequests()\n                .catch(function (reason) {\n                return _this.errorBoundary.logError('sendSavedRequests:setInitializeValues', reason);\n            });\n            if (cb) {\n                cb((0, Timing_1.now)() - _this.startTime, true, null);\n            }\n        }, function () {\n            _this.ready = true;\n            _this.initCalled = true;\n            var cb = _this.options.getInitCompletionCallback();\n            if (cb) {\n                cb((0, Timing_1.now)() - _this.startTime, false, 'Caught an exception during setInitializeValues');\n            }\n        });\n    };\n    StatsigClient.prototype.initializeAsync = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.errorBoundary.capture('initializeAsync', function () { return __awaiter(_this, void 0, void 0, function () {\n                        var handler, listener, user;\n                        var _this = this;\n                        var _a;\n                        return __generator(this, function (_b) {\n                            switch (_b.label) {\n                                case 0:\n                                    if (this.pendingInitPromise != null) {\n                                        return [2 /*return*/, this.pendingInitPromise];\n                                    }\n                                    if (this.ready) {\n                                        return [2 /*return*/, Promise.resolve()];\n                                    }\n                                    Diagnostics_1.default.mark.overall.start({});\n                                    this.initCalled = true;\n                                    if (!StatsigAsyncStorage_1.default.asyncStorage) return [3 /*break*/, 3];\n                                    return [4 /*yield*/, this.identity.initAsync()];\n                                case 1:\n                                    _b.sent();\n                                    return [4 /*yield*/, this.store.loadAsync()];\n                                case 2:\n                                    _b.sent();\n                                    _b.label = 3;\n                                case 3:\n                                    (_a = this.onCacheLoadedForReact) === null || _a === void 0 ? void 0 : _a.call(this);\n                                    if (this.appState != null) {\n                                        handler = this.appState;\n                                        if (handler.addEventListener &&\n                                            typeof handler.addEventListener === 'function') {\n                                            this.currentAppState = handler.currentState;\n                                            listener = handler.addEventListener('change', this.handleAppStateChange.bind(this));\n                                            this.appStateChangeSubscription = listener;\n                                        }\n                                    }\n                                    if (this.options.getLocalModeEnabled()) {\n                                        return [2 /*return*/, Promise.resolve()];\n                                    }\n                                    user = this.identity.getUser();\n                                    this.pendingInitPromise = this.fetchAndSaveValues({\n                                        user: user,\n                                        prefetchUsers: this.options.getPrefetchUsers(),\n                                        timeout: this.options.getInitTimeoutMs(),\n                                    })\n                                        .then(function () {\n                                        Diagnostics_1.default.mark.overall.end({\n                                            success: true,\n                                            evaluationDetails: _this.store.getGlobalEvaluationDetails(),\n                                        });\n                                        return { success: true, message: null };\n                                    })\n                                        .catch(function (e) {\n                                        var _a;\n                                        _this.errorBoundary.logError('initializeAsync:fetchAndSaveValues', e);\n                                        Diagnostics_1.default.mark.overall.end({\n                                            success: false,\n                                            error: Diagnostics_1.default.formatError(e),\n                                            evaluationDetails: _this.store.getGlobalEvaluationDetails(),\n                                        });\n                                        return { success: false, message: (_a = e.message) !== null && _a !== void 0 ? _a : null };\n                                    })\n                                        .then(function (_a) {\n                                        var success = _a.success, message = _a.message;\n                                        var cb = _this.options.getInitCompletionCallback();\n                                        if (cb) {\n                                            cb((0, Timing_1.now)() - _this.startTime, success, message);\n                                        }\n                                        return;\n                                    })\n                                        .finally(function () {\n                                        _this.pendingInitPromise = null;\n                                        _this.ready = true;\n                                        _this.delayedSetup();\n                                        _this.logger.logDiagnostics(user, 'initialize');\n                                    });\n                                    this.handleOptionalLogging();\n                                    return [2 /*return*/, this.pendingInitPromise];\n                            }\n                        });\n                    }); }, function () {\n                        _this.ready = true;\n                        _this.initCalled = true;\n                        return Promise.resolve();\n                    })];\n            });\n        });\n    };\n    StatsigClient.prototype.prefetchUsers = function (users) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.errorBoundary.capture('prefetchUsers', function () {\n                        if (!users || users.length == 0) {\n                            return;\n                        }\n                        return _this.fetchAndSaveValues({\n                            user: null,\n                            prefetchUsers: users,\n                            timeout: 0,\n                        });\n                    }, function () {\n                        return Promise.resolve();\n                    })];\n            });\n        });\n    };\n    StatsigClient.prototype.getEvaluationDetails = function () {\n        var _this = this;\n        return this.errorBoundary.capture('getEvaluationDetails', function () {\n            return _this.store.getGlobalEvaluationDetails();\n        }, function () {\n            return {\n                time: Date.now(),\n                reason: EvaluationReason_1.EvaluationReason.Error,\n            };\n        });\n    };\n    /**\n     * Checks the value of a gate for the current user\n     * @param {string} gateName - the name of the gate to check\n     * @param {boolean} ignoreOverrides = false if this check should ignore local overrides\n     * @returns {boolean} - value of a gate for the user. Gates are \"off\" (return false) by default\n     * @throws Error if initialize() is not called first, or gateName is not a string\n     */\n    StatsigClient.prototype.checkGate = function (gateName, ignoreOverrides) {\n        var _this = this;\n        if (ignoreOverrides === void 0) { ignoreOverrides = false; }\n        return this.errorBoundary.capture('checkGate', function () {\n            var _a, _b, _c;\n            var result = _this.checkGateImpl(gateName, ignoreOverrides);\n            _this.logGateExposureImpl(gateName, result);\n            var cb = _this.options.getGateEvaluationCallback();\n            if (cb) {\n                cb(gateName, result.gate.value, {\n                    withExposureLoggingDisabled: false,\n                });\n            }\n            var ecb = _this.options.getEvaluationCallback();\n            if (ecb) {\n                var gate = new FeatureGate_1.default(gateName, result.gate.value, result.gate.rule_id, result.evaluationDetails, (_a = result.gate.group_name) !== null && _a !== void 0 ? _a : null, (_b = result.gate.id_type) !== null && _b !== void 0 ? _b : null, (_c = result.gate.secondary_exposures) !== null && _c !== void 0 ? _c : []);\n                ecb({ type: 'gate', gate: gate });\n            }\n            return result.gate.value === true;\n        }, function () { return false; }, { configName: gateName });\n    };\n    /**\n     * Gets the value and metadata of a gate evaluation for the current user\n     * @param {string} gateName - the name of the gate to check\n     * @returns {FeatureGate} - metadata about the value of the gate gate for the user. Gates are \"off\" (value false) by default\n     * @throws Error if initialize() is not called first, or gateName is not a string\n     */\n    StatsigClient.prototype.getFeatureGate = function (gateName, options) {\n        var _this = this;\n        if (options === void 0) { options = null; }\n        return this.errorBoundary.capture('getFeatureGate', function () {\n            var _a, _b, _c, _d, _e;\n            var result = _this.checkGateImpl(gateName, (_a = options === null || options === void 0 ? void 0 : options.ignoreOverrides) !== null && _a !== void 0 ? _a : false);\n            if (!(options === null || options === void 0 ? void 0 : options.disableExposureLogging)) {\n                _this.logGateExposureImpl(gateName, result);\n            }\n            else {\n                _this.logger.addNonExposedCheck(gateName);\n            }\n            var cb = _this.options.getGateEvaluationCallback();\n            if (cb) {\n                cb(gateName, result.gate.value, {\n                    withExposureLoggingDisabled: (_b = options === null || options === void 0 ? void 0 : options.disableExposureLogging) !== null && _b !== void 0 ? _b : false,\n                });\n            }\n            var gate = new FeatureGate_1.default(gateName, result.gate.value, result.gate.rule_id, result.evaluationDetails, (_c = result.gate.group_name) !== null && _c !== void 0 ? _c : null, (_d = result.gate.id_type) !== null && _d !== void 0 ? _d : null, (_e = result.gate.secondary_exposures) !== null && _e !== void 0 ? _e : []);\n            var ecb = _this.options.getEvaluationCallback();\n            if (ecb) {\n                ecb({ type: 'gate', gate: gate });\n            }\n            return gate;\n        }, function () {\n            return new FeatureGate_1.default(gateName, false, '', {\n                reason: EvaluationReason_1.EvaluationReason.Error,\n                time: Date.now(),\n            });\n        }, { configName: gateName });\n    };\n    StatsigClient.prototype.checkGateWithExposureLoggingDisabled = function (gateName, ignoreOverrides) {\n        var _this = this;\n        if (ignoreOverrides === void 0) { ignoreOverrides = false; }\n        return this.errorBoundary.capture('checkGateWithExposureLoggingDisabled', function () {\n            var _a, _b, _c;\n            _this.logger.addNonExposedCheck(gateName);\n            var result = _this.checkGateImpl(gateName, ignoreOverrides);\n            var cb = _this.options.getGateEvaluationCallback();\n            if (cb) {\n                cb(gateName, result.gate.value, {\n                    withExposureLoggingDisabled: true,\n                });\n            }\n            var ecb = _this.options.getEvaluationCallback();\n            if (ecb) {\n                var gate = new FeatureGate_1.default(gateName, result.gate.value, result.gate.rule_id, result.evaluationDetails, (_a = result.gate.group_name) !== null && _a !== void 0 ? _a : null, (_b = result.gate.id_type) !== null && _b !== void 0 ? _b : null, (_c = result.gate.secondary_exposures) !== null && _c !== void 0 ? _c : []);\n                ecb({ type: 'gate', gate: gate });\n            }\n            return result.gate.value === true;\n        }, function () { return false; });\n    };\n    StatsigClient.prototype.logGateExposure = function (gateName) {\n        var _this = this;\n        this.errorBoundary.swallow('logGateExposure', function () {\n            _this.logGateExposureImpl(gateName);\n        });\n    };\n    /**\n     * Checks the value of a config for the current user\n     * @param {string} configName - the name of the config to get\n     * @param {boolean} ignoreOverrides = false if this check should ignore local overrides\n     * @returns {DynamicConfig} - value of a config for the user\n     * @throws Error if initialize() is not called first, or configName is not a string\n     */\n    StatsigClient.prototype.getConfig = function (configName, ignoreOverrides) {\n        var _this = this;\n        if (ignoreOverrides === void 0) { ignoreOverrides = false; }\n        return this.errorBoundary.capture('getConfig', function () {\n            var result = _this.getConfigImpl(configName, ignoreOverrides);\n            _this.logConfigExposureImpl(configName, result);\n            var ecb = _this.options.getEvaluationCallback();\n            if (ecb) {\n                ecb({ type: 'config', config: result });\n            }\n            return result;\n        }, function () { return _this.getEmptyConfig(configName); }, { configName: configName });\n    };\n    StatsigClient.prototype.getConfigWithExposureLoggingDisabled = function (configName, ignoreOverrides) {\n        var _this = this;\n        if (ignoreOverrides === void 0) { ignoreOverrides = false; }\n        return this.errorBoundary.capture('getConfig', function () {\n            _this.logger.addNonExposedCheck(configName);\n            var result = _this.getConfigImpl(configName, ignoreOverrides);\n            var ecb = _this.options.getEvaluationCallback();\n            if (ecb) {\n                ecb({ type: 'config', config: result });\n            }\n            return result;\n        }, function () { return _this.getEmptyConfig(configName); });\n    };\n    StatsigClient.prototype.logConfigExposure = function (configName) {\n        var _this = this;\n        this.errorBoundary.swallow('logConfigExposure', function () {\n            _this.logConfigExposureImpl(configName);\n        });\n    };\n    /**\n     * Gets the experiment for a given user\n     * @param {string} experimentName - the name of the experiment to get\n     * @param {boolean} keepDeviceValue = false if this should use \"sticky\" values persisted in local storage\n     * @param {boolean} ignoreOverrides = false if this check should ignore local overrides\n     * @returns {DynamicConfig} - value of the experiment for the user, represented by a Dynamic Config object\n     * @throws Error if initialize() is not called first, or experimentName is not a string\n     */\n    StatsigClient.prototype.getExperiment = function (experimentName, keepDeviceValue, ignoreOverrides) {\n        var _this = this;\n        if (keepDeviceValue === void 0) { keepDeviceValue = false; }\n        if (ignoreOverrides === void 0) { ignoreOverrides = false; }\n        return this.errorBoundary.capture('getExperiment', function () {\n            var result = _this.getExperimentImpl(experimentName, keepDeviceValue, ignoreOverrides);\n            _this.logExperimentExposureImpl(experimentName, keepDeviceValue, result);\n            var ecb = _this.options.getEvaluationCallback();\n            if (ecb) {\n                ecb({ type: 'experiment', config: result });\n            }\n            return result;\n        }, function () { return _this.getEmptyConfig(experimentName); }, { configName: experimentName });\n    };\n    StatsigClient.prototype.getExperimentWithExposureLoggingDisabled = function (experimentName, keepDeviceValue, ignoreOverrides) {\n        var _this = this;\n        if (keepDeviceValue === void 0) { keepDeviceValue = false; }\n        if (ignoreOverrides === void 0) { ignoreOverrides = false; }\n        return this.errorBoundary.capture('getExperimentWithExposureLoggingDisabled', function () {\n            _this.logger.addNonExposedCheck(experimentName);\n            var result = _this.getExperimentImpl(experimentName, keepDeviceValue, ignoreOverrides);\n            var ecb = _this.options.getEvaluationCallback();\n            if (ecb) {\n                ecb({ type: 'experiment', config: result });\n            }\n            return result;\n        }, function () { return _this.getEmptyConfig(experimentName); });\n    };\n    StatsigClient.prototype.logExperimentExposure = function (experimentName, keepDeviceValue) {\n        var _this = this;\n        this.errorBoundary.swallow('logExperimentExposure', function () {\n            _this.logExperimentExposureImpl(experimentName, keepDeviceValue);\n        });\n    };\n    StatsigClient.prototype.getLayer = function (layerName, keepDeviceValue) {\n        var _this = this;\n        if (keepDeviceValue === void 0) { keepDeviceValue = false; }\n        return this.errorBoundary.capture('getLayer', function () {\n            var result = _this.getLayerImpl(_this.logLayerParameterExposureForLayer, layerName, keepDeviceValue);\n            var ecb = _this.options.getEvaluationCallback();\n            if (ecb) {\n                ecb({ type: 'layer', layer: result });\n            }\n            return result;\n        }, function () {\n            return Layer_1.default._create(layerName, {}, '', _this.getEvalutionDetailsForError());\n        }, { configName: layerName });\n    };\n    StatsigClient.prototype.getLayerWithExposureLoggingDisabled = function (layerName, keepDeviceValue) {\n        var _this = this;\n        if (keepDeviceValue === void 0) { keepDeviceValue = false; }\n        return this.errorBoundary.capture('getLayerWithExposureLoggingDisabled', function () {\n            _this.logger.addNonExposedCheck(layerName);\n            var result = _this.getLayerImpl(null, layerName, keepDeviceValue);\n            var ecb = _this.options.getEvaluationCallback();\n            if (ecb) {\n                ecb({ type: 'layer', layer: result });\n            }\n            return result;\n        }, function () {\n            return Layer_1.default._create(layerName, {}, '', _this.getEvalutionDetailsForError());\n        });\n    };\n    StatsigClient.prototype.logLayerParameterExposure = function (layerName, parameterName, keepDeviceValue) {\n        var _this = this;\n        if (keepDeviceValue === void 0) { keepDeviceValue = false; }\n        this.errorBoundary.swallow('logLayerParameterExposure', function () {\n            var layer = _this.getLayerImpl(null, layerName, keepDeviceValue);\n            _this.logLayerParameterExposureForLayer(layer, parameterName, true);\n        });\n    };\n    StatsigClient.prototype.logEvent = function (eventName, value, metadata) {\n        var _this = this;\n        if (value === void 0) { value = null; }\n        if (metadata === void 0) { metadata = null; }\n        this.errorBoundary.swallow('logEvent', function () {\n            if (!_this.logger || !_this.sdkKey) {\n                throw new Errors_1.StatsigUninitializedError('Must initialize() before logging events.');\n            }\n            if (typeof eventName !== 'string' || eventName.length === 0) {\n                OutputLogger_1.default.error('Event not logged. No valid eventName passed.');\n                return;\n            }\n            if (_this.shouldTrimParam(eventName, MAX_VALUE_SIZE)) {\n                OutputLogger_1.default.info('eventName is too long, trimming to ' +\n                    MAX_VALUE_SIZE +\n                    ' characters.');\n                eventName = eventName.substring(0, MAX_VALUE_SIZE);\n            }\n            if (typeof value === 'string' &&\n                _this.shouldTrimParam(value, MAX_VALUE_SIZE)) {\n                OutputLogger_1.default.info('value is too long, trimming to ' + MAX_VALUE_SIZE + '.');\n                value = value.substring(0, MAX_VALUE_SIZE);\n            }\n            if (_this.shouldTrimParam(metadata, MAX_OBJ_SIZE)) {\n                OutputLogger_1.default.info('metadata is too big. Dropping the metadata.');\n                metadata = { error: 'not logged due to size too large' };\n            }\n            var event = new LogEvent_1.default(eventName);\n            event.setValue(value);\n            event.setMetadata(metadata);\n            event.setUser(_this.getCurrentUser());\n            _this.logger.log(event);\n        });\n    };\n    StatsigClient.prototype.updateUserWithValues = function (user, values) {\n        var _this = this;\n        // eslint-disable-next-line statsig-linter/public-methods-error-boundary\n        var fireCompletionCallback;\n        return this.errorBoundary.capture('updateUserWithValues', function () {\n            var updateStartTime = Date.now();\n            if (!_this.initializeCalled()) {\n                throw new Errors_1.StatsigUninitializedError('Call initialize() first.');\n            }\n            fireCompletionCallback = function (success, error) {\n                var cb = _this.options.getUpdateUserCompletionCallback();\n                cb === null || cb === void 0 ? void 0 : cb(Date.now() - updateStartTime, success, error);\n            };\n            _this.identity.updateUser(_this.normalizeUser(user));\n            _this.store.bootstrap(values);\n            fireCompletionCallback(true, null);\n            return true;\n        }, function () {\n            fireCompletionCallback === null || fireCompletionCallback === void 0 ? void 0 : fireCompletionCallback(false, 'Failed to update user. An unexpected error occured.');\n            return false;\n        });\n    };\n    StatsigClient.prototype.updateUser = function (user) {\n        return __awaiter(this, void 0, void 0, function () {\n            var fireCompletionCallback;\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.errorBoundary.capture('updateUser', function () { return __awaiter(_this, void 0, void 0, function () {\n                        var updateStartTime, userCacheKey, isUserPrefetched, cachedTime, currentUser;\n                        var _this = this;\n                        var _a;\n                        return __generator(this, function (_b) {\n                            switch (_b.label) {\n                                case 0:\n                                    updateStartTime = Date.now();\n                                    if (!this.initializeCalled()) {\n                                        throw new Errors_1.StatsigUninitializedError('Call initialize() first.');\n                                    }\n                                    fireCompletionCallback = function (success, error) {\n                                        var cb = _this.options.getUpdateUserCompletionCallback();\n                                        cb === null || cb === void 0 ? void 0 : cb(Date.now() - updateStartTime, success, error);\n                                    };\n                                    if (!(StatsigAsyncStorage_1.default.asyncStorage &&\n                                        ((_a = this.identity.getStatsigMetadata().stableID) !== null && _a !== void 0 ? _a : '') == '')) return [3 /*break*/, 2];\n                                    return [4 /*yield*/, this.identity.initAsync()];\n                                case 1:\n                                    _b.sent();\n                                    _b.label = 2;\n                                case 2:\n                                    this.identity.updateUser(this.normalizeUser(user));\n                                    userCacheKey = this.getCurrentUserCacheKey();\n                                    isUserPrefetched = Boolean(this.prefetchedUsersByCacheKey[userCacheKey.v3]);\n                                    cachedTime = this.store.updateUser(isUserPrefetched);\n                                    Diagnostics_1.default.clearContext('api_call');\n                                    this.logger.resetDedupeKeys();\n                                    if (cachedTime != null &&\n                                        (isUserPrefetched || this.isCacheValidForFetchMode(cachedTime))) {\n                                        fireCompletionCallback(true, null);\n                                        return [2 /*return*/, Promise.resolve(true)];\n                                    }\n                                    if (!(this.pendingInitPromise != null)) return [3 /*break*/, 4];\n                                    return [4 /*yield*/, this.pendingInitPromise];\n                                case 3:\n                                    _b.sent();\n                                    _b.label = 4;\n                                case 4:\n                                    if (this.options.getLocalModeEnabled()) {\n                                        fireCompletionCallback(true, null);\n                                        return [2 /*return*/, Promise.resolve(true)];\n                                    }\n                                    currentUser = this.identity.getUser();\n                                    this.pendingInitPromise = this.fetchAndSaveValues({\n                                        user: currentUser,\n                                        prefetchUsers: [],\n                                        timeout: undefined,\n                                    }).finally(function () {\n                                        _this.pendingInitPromise = null;\n                                    });\n                                    return [2 /*return*/, this.pendingInitPromise\n                                            .then(function () {\n                                            fireCompletionCallback(true, null);\n                                            return Promise.resolve(true);\n                                        })\n                                            .catch(function (error) {\n                                            fireCompletionCallback(false, \"Failed to update user: \".concat(error.message));\n                                            return Promise.resolve(false);\n                                        })];\n                            }\n                        });\n                    }); }, function () {\n                        fireCompletionCallback === null || fireCompletionCallback === void 0 ? void 0 : fireCompletionCallback(false, 'Failed to update user. An unexpected error occured.');\n                        return Promise.resolve(false);\n                    })];\n            });\n        });\n    };\n    /**\n     * Informs the statsig SDK that the client is closing or shutting down\n     * so the SDK can clean up internal state\n     */\n    StatsigClient.prototype.shutdown = function () {\n        var _this = this;\n        this.errorBoundary.swallow('shutdown', function () {\n            _this.logger.shutdown();\n            if (_this.appStateChangeSubscription != null) {\n                var sub = _this.appStateChangeSubscription;\n                if (typeof sub.remove === 'function') {\n                    sub.remove();\n                }\n            }\n            StatsigLocalStorage_1.default.cleanup();\n        });\n    };\n    StatsigClient.prototype.getInitializeResponseJson = function () {\n        var _this = this;\n        return this.errorBoundary.capture('getInitializeResponseJson', function () {\n            var _a;\n            return {\n                values: _this.store.getInitializeResponseJson(),\n                evaluationDetails: (_a = _this.getEvaluationDetails()) !== null && _a !== void 0 ? _a : {\n                    reason: EvaluationReason_1.EvaluationReason.Uninitialized,\n                    time: 0,\n                },\n            };\n        }, function () {\n            var _a;\n            return {\n                values: '',\n                evaluationDetails: (_a = _this.getEvaluationDetails()) !== null && _a !== void 0 ? _a : {\n                    reason: EvaluationReason_1.EvaluationReason.Uninitialized,\n                    time: 0,\n                },\n            };\n        });\n    };\n    /**\n     * Stores a local gate override\n     * @param gateName the gate to override\n     * @param value the value to override the gate to\n     */\n    StatsigClient.prototype.overrideGate = function (gateName, value) {\n        var _this = this;\n        this.errorBoundary.swallow('overrideGate', function () {\n            _this.ensureStoreLoaded();\n            _this.store.overrideGate(gateName, value);\n        });\n    };\n    /**\n     * Stores a local config override\n     * @param configName the config to override\n     * @param value the json value to override the config to\n     */\n    StatsigClient.prototype.overrideConfig = function (configName, value) {\n        var _this = this;\n        this.errorBoundary.swallow('overrideConfig', function () {\n            _this.ensureStoreLoaded();\n            _this.store.overrideConfig(configName, value);\n        });\n    };\n    /**\n     * Stores a local layer override\n     * @param layerName the layer to override\n     * @param value the json value to override the config to\n     */\n    StatsigClient.prototype.overrideLayer = function (layerName, value) {\n        var _this = this;\n        this.errorBoundary.swallow('overrideLayer', function () {\n            _this.ensureStoreLoaded();\n            _this.store.overrideLayer(layerName, value);\n        });\n    };\n    /**\n     * Removes the given gate override\n     * @param gateName\n     */\n    StatsigClient.prototype.removeGateOverride = function (gateName) {\n        var _this = this;\n        this.errorBoundary.swallow('removeGateOverride', function () {\n            _this.ensureStoreLoaded();\n            _this.store.removeGateOverride(gateName);\n        });\n    };\n    /**\n     * Removes the given config override\n     * @param configName\n     */\n    StatsigClient.prototype.removeConfigOverride = function (configName) {\n        var _this = this;\n        this.errorBoundary.swallow('removeConfigOverride', function () {\n            _this.ensureStoreLoaded();\n            _this.store.removeConfigOverride(configName);\n        });\n    };\n    /**\n     * Removes the given layer override\n     * @param layerName\n     */\n    StatsigClient.prototype.removeLayerOverride = function (layerName) {\n        var _this = this;\n        this.errorBoundary.swallow('removeLayerOverride', function () {\n            _this.ensureStoreLoaded();\n            _this.store.removeLayerOverride(layerName);\n        });\n    };\n    /**\n     * @deprecated - use removeGateOverride or removeConfig override\n     * Removes the given gate override\n     * @param gateName\n     */\n    StatsigClient.prototype.removeOverride = function (gateName) {\n        var _this = this;\n        this.errorBoundary.swallow('removeOverride', function () {\n            _this.ensureStoreLoaded();\n            _this.store.removeGateOverride(gateName);\n        });\n    };\n    /**\n     * @deprecated - use getAllOverrides to get gate and config overrides\n     * @returns Gate overrides\n     */\n    StatsigClient.prototype.getOverrides = function () {\n        var _this = this;\n        return this.errorBoundary.capture('getOverrides', function () {\n            _this.ensureStoreLoaded();\n            return _this.store.getAllOverrides().gates;\n        }, function () { return ({}); });\n    };\n    /**\n     * @returns The local gate and config overrides\n     */\n    StatsigClient.prototype.getAllOverrides = function () {\n        var _this = this;\n        return this.errorBoundary.capture('getAllOverrides', function () {\n            _this.ensureStoreLoaded();\n            return _this.store.getAllOverrides();\n        }, function () { return ({ gates: {}, configs: {}, layers: {} }); });\n    };\n    /**\n     * @returns The Statsig stable ID used for device level experiments\n     */\n    StatsigClient.prototype.getStableID = function () {\n        var _this = this;\n        return this.errorBoundary.capture('getStableID', function () { return _this.identity.getStatsigMetadata().stableID; }, function () { return ''; });\n    };\n    StatsigClient.prototype.initializeCalled = function () {\n        return this.initCalled;\n    };\n    // All methods below are for the statsig react native SDK internal usage only!\n    /* eslint-disable statsig-linter/public-methods-error-boundary */\n    StatsigClient.prototype.setSDKPackageInfo = function (sdkPackageInfo) {\n        if (sdkPackageInfo != null) {\n            this.identity.setSDKPackageInfo(sdkPackageInfo);\n            this.errorBoundary.setStatsigMetadata(this.getStatsigMetadata());\n        }\n    };\n    /**\n     * @params Debug information log with exposure event, and information will be living in metadata\n     */\n    StatsigClient.prototype.setDebugInfo = function (debugInfo) {\n        var _this = this;\n        this.errorBoundary.capture('setDebuggingInfo', function () {\n            if (!_this.initializeCalled()) {\n                throw new Errors_1.StatsigUninitializedError('Call initialize() first.');\n            }\n            _this.logger.setDebugInfo(debugInfo);\n        }, function () {\n            /* no-op */\n        });\n    };\n    StatsigClient.setAsyncStorage = function (asyncStorage) {\n        if (asyncStorage != null) {\n            StatsigAsyncStorage_1.default.asyncStorage = asyncStorage;\n        }\n    };\n    StatsigClient.prototype.setOnCacheLoadedReactCallback = function (fn) {\n        this.onCacheLoadedForReact = fn !== null && fn !== void 0 ? fn : null;\n    };\n    StatsigClient.setReactNativeUUID = function (uuid) {\n        if (uuid != null) {\n            StatsigClient.reactNativeUUID = uuid;\n        }\n    };\n    StatsigClient.prototype.setAppState = function (appState) {\n        if (appState != null) {\n            this.appState = appState;\n        }\n    };\n    StatsigClient.prototype.setNativeModules = function (nativeModules) {\n        if (nativeModules != null) {\n            this.identity.setNativeModules(nativeModules);\n        }\n    };\n    StatsigClient.prototype.setPlatform = function (platform) {\n        if (platform != null) {\n            this.identity.setPlatform(platform);\n        }\n    };\n    StatsigClient.prototype.setRNDeviceInfo = function (deviceInfo) {\n        if (deviceInfo != null) {\n            this.identity.setRNDeviceInfo(deviceInfo);\n        }\n    };\n    StatsigClient.prototype.setExpoConstants = function (expoConstants) {\n        if (expoConstants != null) {\n            this.identity.setExpoConstants(expoConstants);\n        }\n    };\n    StatsigClient.prototype.setExpoDevice = function (expoDevice) {\n        if (expoDevice != null) {\n            this.identity.setExpoDevice(expoDevice);\n        }\n    };\n    StatsigClient.prototype.flushEvents = function () {\n        this.logger.flush();\n    };\n    StatsigClient.prototype.reenableAllLogging = function () {\n        this.getOptions().reenableAllLogging();\n    };\n    StatsigClient.prototype.isCacheValidForFetchMode = function (cachedTime) {\n        if (this.options.getFetchMode() !== 'cache-or-network') {\n            return false;\n        }\n        // Only valid if the cache was during this session\n        return cachedTime > this.startTime;\n    };\n    StatsigClient.prototype.handleOptionalLogging = function () {\n        var _this = this;\n        var isErrorLoggingDisabled = this.options.getDisableErrorLogging();\n        var isAutoMetricsLoggingDisabled = this.options.getDisableAutoMetricsLogging();\n        if (isErrorLoggingDisabled && isAutoMetricsLoggingDisabled) {\n            return;\n        }\n        if (this.optionalLoggingSetup ||\n            typeof window === 'undefined' ||\n            !window ||\n            !window.addEventListener) {\n            return;\n        }\n        var user = this.identity.getUser();\n        if (!isErrorLoggingDisabled) {\n            window.addEventListener('error', function (e) {\n                var _a;\n                var errorObj = e.error;\n                if (errorObj != null && typeof errorObj === 'object') {\n                    try {\n                        errorObj = JSON.stringify(errorObj);\n                    }\n                    catch (e) {\n                        errorObj = 'Failed to stringify Error';\n                    }\n                }\n                _this.logger.logAppError(user, (_a = e.message) !== null && _a !== void 0 ? _a : '', {\n                    filename: e.filename,\n                    lineno: e.lineno,\n                    colno: e.colno,\n                    error_obj: errorObj,\n                });\n            });\n        }\n        if (!isAutoMetricsLoggingDisabled) {\n            if (typeof document === 'undefined' ||\n                !document ||\n                typeof setTimeout === 'undefined' ||\n                !setTimeout) {\n                return;\n            }\n            var work_1 = function () {\n                setTimeout(function () {\n                    _this.logger.logAppMetrics(user);\n                }, 1000);\n            };\n            if (document.readyState === 'complete') {\n                work_1();\n            }\n            else {\n                window.addEventListener('load', function () { return work_1(); });\n            }\n        }\n        this.optionalLoggingSetup = true;\n    };\n    StatsigClient.prototype.handleAppStateChange = function (nextAppState) {\n        var _this = this;\n        if (this.currentAppState === 'active' &&\n            nextAppState.match(/inactive|background/)) {\n            this.logger.flush(true);\n        }\n        else if (this.currentAppState != null &&\n            this.currentAppState.match(/inactive|background/) &&\n            nextAppState === 'active') {\n            this.logger\n                .sendSavedRequests()\n                .catch(function (reason) {\n                return _this.errorBoundary.logError('sendSavedRequests:handleAppStateChange', reason);\n            });\n        }\n        this.currentAppState = nextAppState;\n    };\n    StatsigClient.prototype.shouldTrimParam = function (entity, size) {\n        if (entity == null)\n            return false;\n        if (typeof entity === 'string')\n            return entity.length > size;\n        if (typeof entity === 'object') {\n            return JSON.stringify(entity).length > size;\n        }\n        if (typeof entity === 'number')\n            return entity.toString().length > size;\n        return false;\n    };\n    StatsigClient.prototype.normalizePrefetchUsers = function (users) {\n        var _this = this;\n        if (users == null) {\n            return [];\n        }\n        return users.map(function (user) { return _this.normalizeUser(user); });\n    };\n    StatsigClient.prototype.normalizeUser = function (user) {\n        var userCopy = {};\n        try {\n            userCopy = JSON.parse(JSON.stringify(user));\n        }\n        catch (error) {\n            throw new Errors_1.StatsigInvalidArgumentError('User object must be convertable to JSON string.');\n        }\n        userCopy = this.trimUserObjIfNeeded(userCopy);\n        if (this.options.getEnvironment() != null) {\n            userCopy.statsigEnvironment = this.options.getEnvironment();\n        }\n        return userCopy;\n    };\n    StatsigClient.prototype.trimUserObjIfNeeded = function (user) {\n        var _a, _b;\n        if (user == null) {\n            return {};\n        }\n        if (this.shouldTrimParam((_a = user.userID) !== null && _a !== void 0 ? _a : null, MAX_VALUE_SIZE)) {\n            OutputLogger_1.default.info('User ID is too large, trimming to ' + MAX_VALUE_SIZE + 'characters');\n            user.userID = (_b = user.userID) === null || _b === void 0 ? void 0 : _b.toString().substring(0, MAX_VALUE_SIZE);\n        }\n        if (this.shouldTrimParam(user, MAX_OBJ_SIZE)) {\n            user.custom = {};\n            if (this.shouldTrimParam(user, MAX_OBJ_SIZE)) {\n                OutputLogger_1.default.info('User object is too large, only keeping the user ID.');\n                user = { userID: user.userID };\n            }\n            else {\n                OutputLogger_1.default.info('User object is too large, dropping the custom property.');\n            }\n        }\n        return user;\n    };\n    StatsigClient.prototype.ensureStoreLoaded = function () {\n        if (!this.store.isLoaded()) {\n            throw new Errors_1.StatsigUninitializedError('Call and wait for initialize() to finish first.');\n        }\n    };\n    StatsigClient.prototype.getEvalutionDetailsForError = function () {\n        return {\n            time: Date.now(),\n            reason: EvaluationReason_1.EvaluationReason.Error,\n        };\n    };\n    StatsigClient.prototype.fetchAndSaveValues = function (args) {\n        var _a, _b, _c, _d;\n        return __awaiter(this, void 0, void 0, function () {\n            var user, prefetchUsers, timeout, keyedPrefetchUsers, stableID, sinceTime, previousHashUsed, previousDerivedFields;\n            var _this = this;\n            return __generator(this, function (_e) {\n                user = args.user;\n                prefetchUsers = (_a = args.prefetchUsers) !== null && _a !== void 0 ? _a : [];\n                timeout = (_b = args.timeout) !== null && _b !== void 0 ? _b : this.options.getInitTimeoutMs();\n                if (prefetchUsers.length > 5) {\n                    OutputLogger_1.default.info('Cannot prefetch more than 5 users.');\n                }\n                keyedPrefetchUsers = this.normalizePrefetchUsers(prefetchUsers)\n                    .slice(0, 5)\n                    .reduce(function (acc, curr) {\n                    acc[(0, Hashing_1.getUserCacheKey)(_this.getStableID(), curr, _this.getSDKKey()).v3] =\n                        curr;\n                    return acc;\n                }, {});\n                stableID = String((_d = (_c = this.getStatsigMetadata()) === null || _c === void 0 ? void 0 : _c.stableID) !== null && _d !== void 0 ? _d : '');\n                sinceTime = null;\n                if (prefetchUsers.length === 0) {\n                    sinceTime = this.store.getLastUpdateTime(user, stableID);\n                }\n                previousHashUsed = this.store.getPreviousHashUsed(user, stableID);\n                previousDerivedFields = this.store.getPreviousDerivedFields(user, stableID);\n                return [2 /*return*/, this.network\n                        .fetchValues({\n                        user: user,\n                        sinceTime: sinceTime,\n                        timeout: timeout,\n                        useDeltas: sinceTime != null &&\n                            previousHashUsed ===\n                                (this.getOptions().getDisableHashing() ? 'none' : 'djb2'),\n                        prefetchUsers: prefetchUsers.length > 0 ? keyedPrefetchUsers : undefined,\n                        previousDerivedFields: previousDerivedFields,\n                    })\n                        .eventually(function (json) {\n                        var _a;\n                        if (!(0, ResponseVerification_1.verifySDKKeyUsed)(json, (_a = _this.sdkKey) !== null && _a !== void 0 ? _a : '', _this.errorBoundary)) {\n                            return;\n                        }\n                        if (json === null || json === void 0 ? void 0 : json.has_updates) {\n                            _this.store\n                                .saveWithoutUpdatingClientState(user, json, stableID, prefetchUsers.length > 0 ? keyedPrefetchUsers : undefined)\n                                .catch(function (reason) {\n                                return _this.errorBoundary.logError('fetchAndSaveValues:eventually', reason);\n                            });\n                        }\n                    })\n                        .then(function (json) {\n                        return _this.errorBoundary.swallow('fetchAndSaveValues', function () { return __awaiter(_this, void 0, void 0, function () {\n                            var _a;\n                            return __generator(this, function (_b) {\n                                switch (_b.label) {\n                                    case 0:\n                                        Diagnostics_1.default.mark.initialize.process.start({});\n                                        if (!(0, ResponseVerification_1.verifySDKKeyUsed)(json, (_a = this.sdkKey) !== null && _a !== void 0 ? _a : '', this.errorBoundary)) {\n                                            Diagnostics_1.default.mark.initialize.process.end({ success: false });\n                                            return [2 /*return*/];\n                                        }\n                                        if (!(json === null || json === void 0 ? void 0 : json.has_updates)) return [3 /*break*/, 2];\n                                        return [4 /*yield*/, this.store.save(user, json, stableID, prefetchUsers.length > 0 ? keyedPrefetchUsers : undefined)];\n                                    case 1:\n                                        _b.sent();\n                                        return [3 /*break*/, 3];\n                                    case 2:\n                                        if (json === null || json === void 0 ? void 0 : json.is_no_content) {\n                                            this.store.setEvaluationReason(EvaluationReason_1.EvaluationReason.NetworkNotModified);\n                                        }\n                                        _b.label = 3;\n                                    case 3:\n                                        this.prefetchedUsersByCacheKey = __assign(__assign({}, this.prefetchedUsersByCacheKey), keyedPrefetchUsers);\n                                        Diagnostics_1.default.mark.initialize.process.end({ success: true });\n                                        return [2 /*return*/];\n                                }\n                            });\n                        }); });\n                    })];\n            });\n        });\n    };\n    StatsigClient.prototype.checkGateImpl = function (gateName, ignoreOverrides) {\n        this.ensureStoreLoaded();\n        if (typeof gateName !== 'string' || gateName.length === 0) {\n            throw new Errors_1.StatsigInvalidArgumentError('Must pass a valid string as the gateName.');\n        }\n        return this.store.checkGate(gateName, ignoreOverrides);\n    };\n    StatsigClient.prototype.logGateExposureImpl = function (gateName, fetchResult) {\n        var isManualExposure = !fetchResult;\n        var result = fetchResult !== null && fetchResult !== void 0 ? fetchResult : this.checkGateImpl(gateName, false);\n        var gate = result.gate;\n        this.logger.logGateExposure(this.getCurrentUser(), gateName, gate.value, gate.rule_id, gate.secondary_exposures, result.evaluationDetails, isManualExposure);\n    };\n    StatsigClient.prototype.getConfigImpl = function (configName, ignoreOverrides) {\n        this.ensureStoreLoaded();\n        if (typeof configName !== 'string' || configName.length === 0) {\n            throw new Errors_1.StatsigInvalidArgumentError('Must pass a valid string as the configName.');\n        }\n        return this.store.getConfig(configName, ignoreOverrides);\n    };\n    StatsigClient.prototype.logConfigExposureImpl = function (configName, config) {\n        var isManualExposure = !config;\n        var localConfig = config !== null && config !== void 0 ? config : this.getConfigImpl(configName, false);\n        this.logger.logConfigExposure(this.getCurrentUser(), configName, localConfig.getRuleID(), localConfig._getSecondaryExposures(), localConfig.getEvaluationDetails(), isManualExposure);\n    };\n    StatsigClient.prototype.getExperimentImpl = function (experimentName, keepDeviceValue, ignoreOverrides) {\n        this.ensureStoreLoaded();\n        if (typeof experimentName !== 'string' || experimentName.length === 0) {\n            throw new Errors_1.StatsigInvalidArgumentError('Must pass a valid string as the experimentName.');\n        }\n        return this.store.getExperiment(experimentName, keepDeviceValue, ignoreOverrides);\n    };\n    StatsigClient.prototype.logExperimentExposureImpl = function (experimentName, keepDeviceValue, config) {\n        var isManualExposure = !config;\n        var localConfig = config !== null && config !== void 0 ? config : this.getExperimentImpl(experimentName, keepDeviceValue, false);\n        this.logger.logConfigExposure(this.getCurrentUser(), experimentName, localConfig.getRuleID(), localConfig._getSecondaryExposures(), localConfig.getEvaluationDetails(), isManualExposure);\n    };\n    StatsigClient.prototype.getLayerImpl = function (logParameterFunction, layerName, keepDeviceValue) {\n        this.ensureStoreLoaded();\n        if (typeof layerName !== 'string' || layerName.length === 0) {\n            throw new Errors_1.StatsigInvalidArgumentError('Must pass a valid string as the layerName.');\n        }\n        return this.store.getLayer(logParameterFunction, layerName, keepDeviceValue);\n    };\n    StatsigClient.prototype.getEmptyConfig = function (configName) {\n        return new DynamicConfig_1.default(configName, {}, '', this.getEvalutionDetailsForError());\n    };\n    StatsigClient.prototype.fireAndForgetPrefechUsers = function () {\n        this.prefetchUsers(this.options.getPrefetchUsers()).catch(function () {\n            /* noop */\n        });\n    };\n    return StatsigClient;\n}());\nexports[\"default\"] = StatsigClient;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L1N0YXRzaWdDbGllbnQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0EsaURBQWlELE9BQU87QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLCtEQUErRCxpQkFBaUI7QUFDNUc7QUFDQSxvQ0FBb0MsTUFBTSwrQkFBK0IsWUFBWTtBQUNyRixtQ0FBbUMsTUFBTSxtQ0FBbUMsWUFBWTtBQUN4RixnQ0FBZ0M7QUFDaEM7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGNBQWMsNkJBQTZCLDBCQUEwQixjQUFjLHFCQUFxQjtBQUN4RyxpQkFBaUIsb0RBQW9ELHFFQUFxRSxjQUFjO0FBQ3hKLHVCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDLG1DQUFtQyxTQUFTO0FBQzVDLG1DQUFtQyxXQUFXLFVBQVU7QUFDeEQsMENBQTBDLGNBQWM7QUFDeEQ7QUFDQSw4R0FBOEcsT0FBTztBQUNySCxpRkFBaUYsaUJBQWlCO0FBQ2xHLHlEQUF5RCxnQkFBZ0IsUUFBUTtBQUNqRiwrQ0FBK0MsZ0JBQWdCLGdCQUFnQjtBQUMvRTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0EsVUFBVSxZQUFZLGFBQWEsU0FBUyxVQUFVO0FBQ3RELG9DQUFvQyxTQUFTO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxzQ0FBc0MsbUJBQU8sQ0FBQyw4RUFBaUI7QUFDL0Qsc0NBQXNDLG1CQUFPLENBQUMsOEVBQWlCO0FBQy9ELGVBQWUsbUJBQU8sQ0FBQyxnRUFBVTtBQUNqQyxvQ0FBb0MsbUJBQU8sQ0FBQywwRUFBZTtBQUMzRCw4QkFBOEIsbUJBQU8sQ0FBQyw4REFBUztBQUMvQyxpQ0FBaUMsbUJBQU8sQ0FBQyxvRUFBWTtBQUNyRCx3Q0FBd0MsbUJBQU8sQ0FBQyxrRkFBbUI7QUFDbkUsc0NBQXNDLG1CQUFPLENBQUMsOEVBQWlCO0FBQy9ELHVDQUF1QyxtQkFBTyxDQUFDLGdGQUFrQjtBQUNqRSwwQ0FBMEMsbUJBQU8sQ0FBQyxzRkFBcUI7QUFDdkUscUNBQXFDLG1CQUFPLENBQUMsNEVBQWdCO0FBQzdELG9DQUFvQyxtQkFBTyxDQUFDLHNGQUFxQjtBQUNqRSx5QkFBeUIsbUJBQU8sQ0FBQyxnR0FBMEI7QUFDM0QsZ0JBQWdCLG1CQUFPLENBQUMsOEVBQWlCO0FBQ3pDLHFDQUFxQyxtQkFBTyxDQUFDLHdGQUFzQjtBQUNuRSw2QkFBNkIsbUJBQU8sQ0FBQyx3R0FBOEI7QUFDbkUsNENBQTRDLG1CQUFPLENBQUMsc0dBQTZCO0FBQ2pGLDRDQUE0QyxtQkFBTyxDQUFDLHNHQUE2QjtBQUNqRixlQUFlLG1CQUFPLENBQUMsNEVBQWdCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0M7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsOEJBQThCO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLGdCQUFnQixZQUFZO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLDBFQUEwRSxrQ0FBa0MsZ0JBQWdCLGNBQWM7QUFDMUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsZ0JBQWdCLFVBQVUsd0JBQXdCLElBQUk7QUFDL0Q7QUFDQTtBQUNBO0FBQ0EsZ0ZBQWdGLHlEQUF5RCxnQkFBZ0IsWUFBWTtBQUNySztBQUNBO0FBQ0E7QUFDQSw0RUFBNEUsMkRBQTJELGdCQUFnQixZQUFZO0FBQ25LO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEVBQThFLDZDQUE2QztBQUMzSDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxzRUFBc0UscUNBQXFDLGdCQUFnQixZQUFZO0FBQ3ZJO0FBQ0E7QUFDQTtBQUNBLHlFQUF5RSx3Q0FBd0MsZ0JBQWdCLFlBQVk7QUFDN0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrR0FBa0c7QUFDbEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0VBQStFO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDO0FBQ3pDLGlEQUFpRDtBQUNqRCxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekMsaURBQWlEO0FBQ2pELHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QixxQkFBcUIsSUFBSTtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QixxQkFBcUI7QUFDckI7QUFDQSxxQkFBcUI7QUFDckIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFNBQVM7QUFDeEIsaUJBQWlCLFNBQVM7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwwQkFBMEI7QUFDaEQ7QUFDQTtBQUNBLFNBQVMsZ0JBQWdCLGVBQWUsSUFBSSxzQkFBc0I7QUFDbEU7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQixhQUFhO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDBCQUEwQjtBQUNoRDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTLElBQUksc0JBQXNCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDBCQUEwQjtBQUNoRDtBQUNBO0FBQ0EsU0FBUyxnQkFBZ0IsZUFBZTtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFNBQVM7QUFDeEIsaUJBQWlCLGVBQWU7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixnQ0FBZ0M7QUFDdEQ7QUFDQTtBQUNBLFNBQVMsZ0JBQWdCLDBDQUEwQyxJQUFJLHdCQUF3QjtBQUMvRjtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixnQ0FBZ0M7QUFDdEQ7QUFDQTtBQUNBLFNBQVMsZ0JBQWdCLDBDQUEwQztBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFNBQVM7QUFDeEIsZUFBZSxTQUFTO0FBQ3hCLGlCQUFpQixlQUFlO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLG9DQUFvQztBQUMxRDtBQUNBO0FBQ0EsU0FBUyxnQkFBZ0IsOENBQThDLElBQUksNEJBQTRCO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQywwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixvQ0FBb0M7QUFDMUQ7QUFDQTtBQUNBLFNBQVMsZ0JBQWdCLDhDQUE4QztBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw4QkFBOEI7QUFDcEQ7QUFDQTtBQUNBLFNBQVM7QUFDVCx3REFBd0Q7QUFDeEQsU0FBUyxJQUFJLHVCQUF1QjtBQUNwQztBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw4QkFBOEI7QUFDcEQ7QUFDQTtBQUNBLFNBQVM7QUFDVCx3REFBd0Q7QUFDeEQsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZGQUE2RjtBQUM3RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBLHlCQUF5QjtBQUN6QixxQkFBcUIsSUFBSTtBQUN6QjtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLGdCQUFnQixVQUFVLElBQUk7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxnQkFBZ0IsVUFBVSxTQUFTLGFBQWEsY0FBYyxJQUFJO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RSxzREFBc0QsZ0JBQWdCLFlBQVk7QUFDeko7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RCxrQkFBa0I7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLG1DQUFtQztBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsSUFBSTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsK0ZBQStGO0FBQy9GO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEZBQThGO0FBQzlGO0FBQ0EsZ0dBQWdHLGdCQUFnQjtBQUNoSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZGQUE2RjtBQUM3Riw0RkFBNEYsZUFBZTtBQUMzRztBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCLHlCQUF5QixJQUFJO0FBQzdCLHFCQUFxQjtBQUNyQixhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlEO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsa0JBQWUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbWF6b24tZnJlc2gtZGVtby8uL25vZGVfbW9kdWxlcy9zdGF0c2lnLWpzL2Rpc3QvU3RhdHNpZ0NsaWVudC5qcz9mOTdmIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXNzaWduID0gKHRoaXMgJiYgdGhpcy5fX2Fzc2lnbikgfHwgZnVuY3Rpb24gKCkge1xuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSlcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9O1xuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xudmFyIF9fZ2VuZXJhdG9yID0gKHRoaXMgJiYgdGhpcy5fX2dlbmVyYXRvcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIGJvZHkpIHtcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xuICAgICAgICB3aGlsZSAoZyAmJiAoZyA9IDAsIG9wWzBdICYmIChfID0gMCkpLCBfKSB0cnkge1xuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBEeW5hbWljQ29uZmlnXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vRHluYW1pY0NvbmZpZ1wiKSk7XG52YXIgRXJyb3JCb3VuZGFyeV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL0Vycm9yQm91bmRhcnlcIikpO1xudmFyIEVycm9yc18xID0gcmVxdWlyZShcIi4vRXJyb3JzXCIpO1xudmFyIEZlYXR1cmVHYXRlXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vRmVhdHVyZUdhdGVcIikpO1xudmFyIExheWVyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vTGF5ZXJcIikpO1xudmFyIExvZ0V2ZW50XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vTG9nRXZlbnRcIikpO1xudmFyIFN0YXRzaWdJZGVudGl0eV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1N0YXRzaWdJZGVudGl0eVwiKSk7XG52YXIgU3RhdHNpZ0xvZ2dlcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1N0YXRzaWdMb2dnZXJcIikpO1xudmFyIFN0YXRzaWdOZXR3b3JrXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vU3RhdHNpZ05ldHdvcmtcIikpO1xudmFyIFN0YXRzaWdTREtPcHRpb25zXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vU3RhdHNpZ1NES09wdGlvbnNcIikpO1xudmFyIFN0YXRzaWdTdG9yZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1N0YXRzaWdTdG9yZVwiKSk7XG52YXIgRGlhZ25vc3RpY3NfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi91dGlscy9EaWFnbm9zdGljc1wiKSk7XG52YXIgRXZhbHVhdGlvblJlYXNvbl8xID0gcmVxdWlyZShcIi4vdXRpbHMvRXZhbHVhdGlvblJlYXNvblwiKTtcbnZhciBIYXNoaW5nXzEgPSByZXF1aXJlKFwiLi91dGlscy9IYXNoaW5nXCIpO1xudmFyIE91dHB1dExvZ2dlcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL3V0aWxzL091dHB1dExvZ2dlclwiKSk7XG52YXIgUmVzcG9uc2VWZXJpZmljYXRpb25fMSA9IHJlcXVpcmUoXCIuL3V0aWxzL1Jlc3BvbnNlVmVyaWZpY2F0aW9uXCIpO1xudmFyIFN0YXRzaWdBc3luY1N0b3JhZ2VfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi91dGlscy9TdGF0c2lnQXN5bmNTdG9yYWdlXCIpKTtcbnZhciBTdGF0c2lnTG9jYWxTdG9yYWdlXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vdXRpbHMvU3RhdHNpZ0xvY2FsU3RvcmFnZVwiKSk7XG52YXIgVGltaW5nXzEgPSByZXF1aXJlKFwiLi91dGlscy9UaW1pbmdcIik7XG52YXIgTUFYX1ZBTFVFX1NJWkUgPSA2NDtcbnZhciBNQVhfT0JKX1NJWkUgPSAyMDQ4O1xudmFyIFN0YXRzaWdDbGllbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3RhdHNpZ0NsaWVudChzZGtLZXksIHVzZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5hcHBTdGF0ZSA9IG51bGw7XG4gICAgICAgIHRoaXMuY3VycmVudEFwcFN0YXRlID0gbnVsbDtcbiAgICAgICAgdGhpcy5hcHBTdGF0ZUNoYW5nZVN1YnNjcmlwdGlvbiA9IG51bGw7XG4gICAgICAgIHRoaXMub25DYWNoZUxvYWRlZEZvclJlYWN0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5pbml0Q2FsbGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucGVuZGluZ0luaXRQcm9taXNlID0gbnVsbDtcbiAgICAgICAgdGhpcy5vcHRpb25hbExvZ2dpbmdTZXR1cCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByZWZldGNoZWRVc2Vyc0J5Q2FjaGVLZXkgPSB7fTtcbiAgICAgICAgdGhpcy5sb2dMYXllclBhcmFtZXRlckV4cG9zdXJlRm9yTGF5ZXIgPSBmdW5jdGlvbiAobGF5ZXIsIHBhcmFtZXRlck5hbWUsIGlzTWFudWFsRXhwb3N1cmUpIHtcbiAgICAgICAgICAgIGlmIChpc01hbnVhbEV4cG9zdXJlID09PSB2b2lkIDApIHsgaXNNYW51YWxFeHBvc3VyZSA9IGZhbHNlOyB9XG4gICAgICAgICAgICB2YXIgYWxsb2NhdGVkRXhwZXJpbWVudCA9ICcnO1xuICAgICAgICAgICAgdmFyIGV4cG9zdXJlcyA9IGxheWVyLl9nZXRVbmRlbGVnYXRlZFNlY29uZGFyeUV4cG9zdXJlcygpO1xuICAgICAgICAgICAgdmFyIGlzRXhwbGljaXQgPSBsYXllci5fZ2V0RXhwbGljaXRQYXJhbWV0ZXJzKCkuaW5jbHVkZXMocGFyYW1ldGVyTmFtZSk7XG4gICAgICAgICAgICBpZiAoaXNFeHBsaWNpdCkge1xuICAgICAgICAgICAgICAgIGFsbG9jYXRlZEV4cGVyaW1lbnQgPSBsYXllci5fZ2V0QWxsb2NhdGVkRXhwZXJpbWVudE5hbWUoKTtcbiAgICAgICAgICAgICAgICBleHBvc3VyZXMgPSBsYXllci5fZ2V0U2Vjb25kYXJ5RXhwb3N1cmVzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfdGhpcy5sb2dnZXIubG9nTGF5ZXJFeHBvc3VyZShfdGhpcy5nZXRDdXJyZW50VXNlcigpLCBsYXllci5nZXROYW1lKCksIGxheWVyLmdldFJ1bGVJRCgpLCBleHBvc3VyZXMsIGFsbG9jYXRlZEV4cGVyaW1lbnQsIHBhcmFtZXRlck5hbWUsIGlzRXhwbGljaXQsIGxheWVyLl9nZXRFdmFsdWF0aW9uRGV0YWlscygpLCBpc01hbnVhbEV4cG9zdXJlKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMubG9jYWxNb2RlKSAhPT0gdHJ1ZSAmJlxuICAgICAgICAgICAgKHR5cGVvZiBzZGtLZXkgIT09ICdzdHJpbmcnIHx8ICFzZGtLZXkuc3RhcnRzV2l0aCgnY2xpZW50LScpKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yc18xLlN0YXRzaWdJbnZhbGlkQXJndW1lbnRFcnJvcignSW52YWxpZCBrZXkgcHJvdmlkZWQuICBZb3UgbXVzdCB1c2UgYSBDbGllbnQgU0RLIEtleSBmcm9tIHRoZSBTdGF0c2lnIGNvbnNvbGUgdG8gaW5pdGlhbGl6ZSB0aGUgc2RrJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGFydFRpbWUgPSAoMCwgVGltaW5nXzEubm93KSgpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBuZXcgU3RhdHNpZ1NES09wdGlvbnNfMS5kZWZhdWx0KG9wdGlvbnMpO1xuICAgICAgICB0aGlzLmxvZ2dlciA9IG5ldyBTdGF0c2lnTG9nZ2VyXzEuZGVmYXVsdCh0aGlzKTtcbiAgICAgICAgRGlhZ25vc3RpY3NfMS5kZWZhdWx0LmluaXRpYWxpemUoe1xuICAgICAgICAgICAgb3B0aW9uczogdGhpcy5vcHRpb25zLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lcnJvckJvdW5kYXJ5ID0gbmV3IEVycm9yQm91bmRhcnlfMS5kZWZhdWx0KHNka0tleSwgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgdGhpcy5yZWFkeSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNka0tleSA9IHNka0tleTtcbiAgICAgICAgT3V0cHV0TG9nZ2VyXzEuZGVmYXVsdC5zZXRMb2dnZXIodGhpcy5vcHRpb25zLmdldE91dHB1dExvZ2dlcigpKTtcbiAgICAgICAgT3V0cHV0TG9nZ2VyXzEuZGVmYXVsdC5zZXRMb2dMZXZlbCh0aGlzLm9wdGlvbnMuZ2V0TG9nTGV2ZWwoKSk7XG4gICAgICAgIFN0YXRzaWdMb2NhbFN0b3JhZ2VfMS5kZWZhdWx0LmRpc2FibGVkID0gdGhpcy5vcHRpb25zLmdldERpc2FibGVMb2NhbFN0b3JhZ2UoKTtcbiAgICAgICAgdGhpcy5pZGVudGl0eSA9IG5ldyBTdGF0c2lnSWRlbnRpdHlfMS5kZWZhdWx0KHRoaXMubm9ybWFsaXplVXNlcih1c2VyICE9PSBudWxsICYmIHVzZXIgIT09IHZvaWQgMCA/IHVzZXIgOiBudWxsKSwgdGhpcy5vcHRpb25zLmdldE92ZXJyaWRlU3RhYmxlSUQoKSwgU3RhdHNpZ0NsaWVudC5yZWFjdE5hdGl2ZVVVSUQpO1xuICAgICAgICB0aGlzLmVycm9yQm91bmRhcnkuc2V0U3RhdHNpZ01ldGFkYXRhKHRoaXMuZ2V0U3RhdHNpZ01ldGFkYXRhKCkpO1xuICAgICAgICB0aGlzLm5ldHdvcmsgPSBuZXcgU3RhdHNpZ05ldHdvcmtfMS5kZWZhdWx0KHRoaXMpO1xuICAgICAgICB0aGlzLnN0b3JlID0gbmV3IFN0YXRzaWdTdG9yZV8xLmRlZmF1bHQodGhpcywgdGhpcy5vcHRpb25zLmdldEluaXRpYWxpemVWYWx1ZXMoKSk7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZ2V0SW5pdGlhbGl6ZVZhbHVlcygpICE9IG51bGwpIHtcbiAgICAgICAgICAgIHZhciBjYiA9IHRoaXMub3B0aW9ucy5nZXRJbml0Q29tcGxldGlvbkNhbGxiYWNrKCk7XG4gICAgICAgICAgICB0aGlzLnJlYWR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuaW5pdENhbGxlZCA9IHRydWU7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmRlbGF5ZWRTZXR1cCgpOyB9LCAyMCk7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZU9wdGlvbmFsTG9nZ2luZygpO1xuICAgICAgICAgICAgaWYgKGNiKSB7XG4gICAgICAgICAgICAgICAgY2IoKDAsIFRpbWluZ18xLm5vdykoKSAtIHRoaXMuc3RhcnRUaW1lLCB0cnVlLCBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBTdGF0c2lnQ2xpZW50LnByb3RvdHlwZS5nZXRFcnJvckJvdW5kYXJ5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lcnJvckJvdW5kYXJ5O1xuICAgIH07XG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUuZ2V0TmV0d29yayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmV0d29yaztcbiAgICB9O1xuICAgIFN0YXRzaWdDbGllbnQucHJvdG90eXBlLmdldFN0b3JlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdG9yZTtcbiAgICB9O1xuICAgIFN0YXRzaWdDbGllbnQucHJvdG90eXBlLmdldExvZ2dlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9nZ2VyO1xuICAgIH07XG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUuZ2V0T3B0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucztcbiAgICB9O1xuICAgIFN0YXRzaWdDbGllbnQucHJvdG90eXBlLmdldFNES0tleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JCb3VuZGFyeS5jYXB0dXJlKCdnZXRTREtLZXknLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICByZXR1cm4gKF9hID0gX3RoaXMuc2RrS2V5KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJztcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gJyc7IH0pO1xuICAgIH07XG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUuZ2V0Q3VycmVudFVzZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0aGlzLmVycm9yQm91bmRhcnkuY2FwdHVyZSgnZ2V0Q3VycmVudFVzZXInLCBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5pZGVudGl0eS5nZXRVc2VyKCk7IH0sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIG51bGw7IH0pO1xuICAgIH07XG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUuZ2V0Q3VycmVudFVzZXJDYWNoZUtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JCb3VuZGFyeS5jYXB0dXJlKCdnZXRDdXJyZW50VXNlckNhY2hlS2V5JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICgwLCBIYXNoaW5nXzEuZ2V0VXNlckNhY2hlS2V5KShfdGhpcy5nZXRTdGFibGVJRCgpLCBfdGhpcy5nZXRDdXJyZW50VXNlcigpLCBfdGhpcy5nZXRTREtLZXkoKSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7IHYxOiAnJywgdjI6ICcnLCB2MzogJycgfSk7IH0pO1xuICAgIH07XG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUuZ2V0Q3VycmVudFVzZXJVbml0SUQgPSBmdW5jdGlvbiAoaWRUeXBlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0aGlzLmVycm9yQm91bmRhcnkuY2FwdHVyZSgnZ2V0Q3VycmVudFVzZXJVbml0SUQnLCBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5nZXRVbml0SUQoX3RoaXMuZ2V0Q3VycmVudFVzZXIoKSwgaWRUeXBlKTsgfSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gJyc7IH0pO1xuICAgIH07XG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUuZ2V0Q3VycmVudFVzZXJJRCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JCb3VuZGFyeS5jYXB0dXJlKCdnZXRDdXJyZW50VXNlcklEJywgZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuZ2V0VW5pdElEKF90aGlzLmdldEN1cnJlbnRVc2VyKCksICd1c2VyaWQnKTsgfSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gJyc7IH0pO1xuICAgIH07XG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUuZ2V0VW5pdElEID0gZnVuY3Rpb24gKHVzZXIsIGlkVHlwZSkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWRUeXBlLnRvTG93ZXJDYXNlKCkgPT09ICd1c2VyaWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gKF9iID0gKF9hID0gdXNlci51c2VySUQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50b1N0cmluZygpKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1c2VyLmN1c3RvbUlEcykge1xuICAgICAgICAgICAgcmV0dXJuIChfYyA9IHVzZXIuY3VzdG9tSURzW2lkVHlwZV0pICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IHVzZXIuY3VzdG9tSURzW2lkVHlwZS50b0xvd2VyQ2FzZSgpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIFN0YXRzaWdDbGllbnQucHJvdG90eXBlLmdldFN0YXRzaWdNZXRhZGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JCb3VuZGFyeS5jYXB0dXJlKCdnZXRTdGF0c2lnTWV0YWRhdGEnLCBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5pZGVudGl0eS5nZXRTdGF0c2lnTWV0YWRhdGEoKTsgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFN0YXRzaWdDbGllbnQucHJvdG90eXBlLmdldFNES1R5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0aGlzLmVycm9yQm91bmRhcnkuY2FwdHVyZSgnZ2V0U0RLVHlwZScsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmlkZW50aXR5LmdldFNES1R5cGUoKTsgfSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gJyc7IH0pO1xuICAgIH07XG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUuZ2V0U0RLVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JCb3VuZGFyeS5jYXB0dXJlKCdnZXRTREtWZXJzaW9uJywgZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuaWRlbnRpdHkuZ2V0U0RLVmVyc2lvbigpOyB9LCBmdW5jdGlvbiAoKSB7IHJldHVybiAnJzsgfSk7XG4gICAgfTtcbiAgICBTdGF0c2lnQ2xpZW50LnByb3RvdHlwZS5kZWxheWVkU2V0dXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuZXJyb3JCb3VuZGFyeS5zd2FsbG93KCdkZWxheWVkU2V0dXAnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoX3RoaXMub3B0aW9ucy5nZXRJbml0aWFsaXplVmFsdWVzKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIF90aGlzLmZpcmVBbmRGb3JnZXRQcmVmZWNoVXNlcnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF90aGlzLmlkZW50aXR5LnNhdmVTdGFibGVJRCgpO1xuICAgICAgICAgICAgX3RoaXMubG9nZ2VyXG4gICAgICAgICAgICAgICAgLnNlbmRTYXZlZFJlcXVlc3RzKClcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5lcnJvckJvdW5kYXJ5LmxvZ0Vycm9yKCdzZW5kU2F2ZWRSZXF1ZXN0czpkZWxheWVkU2V0dXAnLCByZWFzb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUuc2V0SW5pdGlhbGl6ZVZhbHVlcyA9IGZ1bmN0aW9uIChpbml0aWFsaXplVmFsdWVzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuZXJyb3JCb3VuZGFyeS5jYXB0dXJlKCdzZXRJbml0aWFsaXplVmFsdWVzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMuc3RvcmUuYm9vdHN0cmFwKGluaXRpYWxpemVWYWx1ZXMpO1xuICAgICAgICAgICAgdmFyIGNiID0gbnVsbDtcbiAgICAgICAgICAgIGlmICghX3RoaXMucmVhZHkpIHtcbiAgICAgICAgICAgICAgICAvLyB0aGUgc2RrIGlzIHVzYWJsZSBhbmQgY29uc2lkZXJlZCBpbml0aWFsaXplZCB3aGVuIGNvbmZpZ3VyZWRcbiAgICAgICAgICAgICAgICAvLyB3aXRoIGluaXRpYWxpemVWYWx1ZXNcbiAgICAgICAgICAgICAgICBfdGhpcy5yZWFkeSA9IHRydWU7XG4gICAgICAgICAgICAgICAgX3RoaXMuaW5pdENhbGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgLy8gb25seSBjYWxsYmFjayBvbiB0aGUgZmlyc3QgdGltZSBpbml0aWFsaXplIHZhbHVlcyBhcmUgc2V0IGFuZCB0aGVcbiAgICAgICAgICAgICAgICAvLyBzZGsgaXMgdXNhYmxlXG4gICAgICAgICAgICAgICAgY2IgPSBfdGhpcy5vcHRpb25zLmdldEluaXRDb21wbGV0aW9uQ2FsbGJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHdlIHdvbnQgaGF2ZSBhY2Nlc3MgdG8gd2luZG93L2RvY3VtZW50L2xvY2FsU3RvcmFnZSBpZiB0aGVzZSBydW4gb24gdGhlIHNlcnZlclxuICAgICAgICAgICAgLy8gc28gdHJ5IHRvIHJ1biB3aGVuZXZlciB0aGlzIGlzIGNhbGxlZFxuICAgICAgICAgICAgX3RoaXMuaGFuZGxlT3B0aW9uYWxMb2dnaW5nKCk7XG4gICAgICAgICAgICBfdGhpcy5sb2dnZXJcbiAgICAgICAgICAgICAgICAuc2VuZFNhdmVkUmVxdWVzdHMoKVxuICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmVycm9yQm91bmRhcnkubG9nRXJyb3IoJ3NlbmRTYXZlZFJlcXVlc3RzOnNldEluaXRpYWxpemVWYWx1ZXMnLCByZWFzb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY2IpIHtcbiAgICAgICAgICAgICAgICBjYigoMCwgVGltaW5nXzEubm93KSgpIC0gX3RoaXMuc3RhcnRUaW1lLCB0cnVlLCBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMucmVhZHkgPSB0cnVlO1xuICAgICAgICAgICAgX3RoaXMuaW5pdENhbGxlZCA9IHRydWU7XG4gICAgICAgICAgICB2YXIgY2IgPSBfdGhpcy5vcHRpb25zLmdldEluaXRDb21wbGV0aW9uQ2FsbGJhY2soKTtcbiAgICAgICAgICAgIGlmIChjYikge1xuICAgICAgICAgICAgICAgIGNiKCgwLCBUaW1pbmdfMS5ub3cpKCkgLSBfdGhpcy5zdGFydFRpbWUsIGZhbHNlLCAnQ2F1Z2h0IGFuIGV4Y2VwdGlvbiBkdXJpbmcgc2V0SW5pdGlhbGl6ZVZhbHVlcycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFN0YXRzaWdDbGllbnQucHJvdG90eXBlLmluaXRpYWxpemVBc3luYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5lcnJvckJvdW5kYXJ5LmNhcHR1cmUoJ2luaXRpYWxpemVBc3luYycsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoYW5kbGVyLCBsaXN0ZW5lciwgdXNlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wZW5kaW5nSW5pdFByb21pc2UgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnBlbmRpbmdJbml0UHJvbWlzZV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yZWFkeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBQcm9taXNlLnJlc29sdmUoKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaWFnbm9zdGljc18xLmRlZmF1bHQubWFyay5vdmVyYWxsLnN0YXJ0KHt9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdENhbGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIVN0YXRzaWdBc3luY1N0b3JhZ2VfMS5kZWZhdWx0LmFzeW5jU3RvcmFnZSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmlkZW50aXR5LmluaXRBc3luYygpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5zdG9yZS5sb2FkQXN5bmMoKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKF9hID0gdGhpcy5vbkNhY2hlTG9hZGVkRm9yUmVhY3QpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYXBwU3RhdGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXIgPSB0aGlzLmFwcFN0YXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLmFkZEV2ZW50TGlzdGVuZXIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIGhhbmRsZXIuYWRkRXZlbnRMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRBcHBTdGF0ZSA9IGhhbmRsZXIuY3VycmVudFN0YXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lciA9IGhhbmRsZXIuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5oYW5kbGVBcHBTdGF0ZUNoYW5nZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBTdGF0ZUNoYW5nZVN1YnNjcmlwdGlvbiA9IGxpc3RlbmVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZ2V0TG9jYWxNb2RlRW5hYmxlZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFByb21pc2UucmVzb2x2ZSgpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXIgPSB0aGlzLmlkZW50aXR5LmdldFVzZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZ0luaXRQcm9taXNlID0gdGhpcy5mZXRjaEFuZFNhdmVWYWx1ZXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXI6IHVzZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlZmV0Y2hVc2VyczogdGhpcy5vcHRpb25zLmdldFByZWZldGNoVXNlcnMoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiB0aGlzLm9wdGlvbnMuZ2V0SW5pdFRpbWVvdXRNcygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGlhZ25vc3RpY3NfMS5kZWZhdWx0Lm1hcmsub3ZlcmFsbC5lbmQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmFsdWF0aW9uRGV0YWlsczogX3RoaXMuc3RvcmUuZ2V0R2xvYmFsRXZhbHVhdGlvbkRldGFpbHMoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiBudWxsIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5lcnJvckJvdW5kYXJ5LmxvZ0Vycm9yKCdpbml0aWFsaXplQXN5bmM6ZmV0Y2hBbmRTYXZlVmFsdWVzJywgZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGlhZ25vc3RpY3NfMS5kZWZhdWx0Lm1hcmsub3ZlcmFsbC5lbmQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IERpYWdub3N0aWNzXzEuZGVmYXVsdC5mb3JtYXRFcnJvcihlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZhbHVhdGlvbkRldGFpbHM6IF90aGlzLnN0b3JlLmdldEdsb2JhbEV2YWx1YXRpb25EZXRhaWxzKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IChfYSA9IGUubWVzc2FnZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbnVsbCB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3VjY2VzcyA9IF9hLnN1Y2Nlc3MsIG1lc3NhZ2UgPSBfYS5tZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYiA9IF90aGlzLm9wdGlvbnMuZ2V0SW5pdENvbXBsZXRpb25DYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYigoMCwgVGltaW5nXzEubm93KSgpIC0gX3RoaXMuc3RhcnRUaW1lLCBzdWNjZXNzLCBtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucGVuZGluZ0luaXRQcm9taXNlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZWFkeSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGVsYXllZFNldHVwKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9nZ2VyLmxvZ0RpYWdub3N0aWNzKHVzZXIsICdpbml0aWFsaXplJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlT3B0aW9uYWxMb2dnaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5wZW5kaW5nSW5pdFByb21pc2VdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTsgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVhZHkgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaW5pdENhbGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFN0YXRzaWdDbGllbnQucHJvdG90eXBlLnByZWZldGNoVXNlcnMgPSBmdW5jdGlvbiAodXNlcnMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5lcnJvckJvdW5kYXJ5LmNhcHR1cmUoJ3ByZWZldGNoVXNlcnMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXVzZXJzIHx8IHVzZXJzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmZldGNoQW5kU2F2ZVZhbHVlcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcjogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVmZXRjaFVzZXJzOiB1c2VycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUuZ2V0RXZhbHVhdGlvbkRldGFpbHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0aGlzLmVycm9yQm91bmRhcnkuY2FwdHVyZSgnZ2V0RXZhbHVhdGlvbkRldGFpbHMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuc3RvcmUuZ2V0R2xvYmFsRXZhbHVhdGlvbkRldGFpbHMoKTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0aW1lOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgICAgIHJlYXNvbjogRXZhbHVhdGlvblJlYXNvbl8xLkV2YWx1YXRpb25SZWFzb24uRXJyb3IsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENoZWNrcyB0aGUgdmFsdWUgb2YgYSBnYXRlIGZvciB0aGUgY3VycmVudCB1c2VyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGdhdGVOYW1lIC0gdGhlIG5hbWUgb2YgdGhlIGdhdGUgdG8gY2hlY2tcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlnbm9yZU92ZXJyaWRlcyA9IGZhbHNlIGlmIHRoaXMgY2hlY2sgc2hvdWxkIGlnbm9yZSBsb2NhbCBvdmVycmlkZXNcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gLSB2YWx1ZSBvZiBhIGdhdGUgZm9yIHRoZSB1c2VyLiBHYXRlcyBhcmUgXCJvZmZcIiAocmV0dXJuIGZhbHNlKSBieSBkZWZhdWx0XG4gICAgICogQHRocm93cyBFcnJvciBpZiBpbml0aWFsaXplKCkgaXMgbm90IGNhbGxlZCBmaXJzdCwgb3IgZ2F0ZU5hbWUgaXMgbm90IGEgc3RyaW5nXG4gICAgICovXG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUuY2hlY2tHYXRlID0gZnVuY3Rpb24gKGdhdGVOYW1lLCBpZ25vcmVPdmVycmlkZXMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKGlnbm9yZU92ZXJyaWRlcyA9PT0gdm9pZCAwKSB7IGlnbm9yZU92ZXJyaWRlcyA9IGZhbHNlOyB9XG4gICAgICAgIHJldHVybiB0aGlzLmVycm9yQm91bmRhcnkuY2FwdHVyZSgnY2hlY2tHYXRlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gX3RoaXMuY2hlY2tHYXRlSW1wbChnYXRlTmFtZSwgaWdub3JlT3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIF90aGlzLmxvZ0dhdGVFeHBvc3VyZUltcGwoZ2F0ZU5hbWUsIHJlc3VsdCk7XG4gICAgICAgICAgICB2YXIgY2IgPSBfdGhpcy5vcHRpb25zLmdldEdhdGVFdmFsdWF0aW9uQ2FsbGJhY2soKTtcbiAgICAgICAgICAgIGlmIChjYikge1xuICAgICAgICAgICAgICAgIGNiKGdhdGVOYW1lLCByZXN1bHQuZ2F0ZS52YWx1ZSwge1xuICAgICAgICAgICAgICAgICAgICB3aXRoRXhwb3N1cmVMb2dnaW5nRGlzYWJsZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGVjYiA9IF90aGlzLm9wdGlvbnMuZ2V0RXZhbHVhdGlvbkNhbGxiYWNrKCk7XG4gICAgICAgICAgICBpZiAoZWNiKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdhdGUgPSBuZXcgRmVhdHVyZUdhdGVfMS5kZWZhdWx0KGdhdGVOYW1lLCByZXN1bHQuZ2F0ZS52YWx1ZSwgcmVzdWx0LmdhdGUucnVsZV9pZCwgcmVzdWx0LmV2YWx1YXRpb25EZXRhaWxzLCAoX2EgPSByZXN1bHQuZ2F0ZS5ncm91cF9uYW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBudWxsLCAoX2IgPSByZXN1bHQuZ2F0ZS5pZF90eXBlKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBudWxsLCAoX2MgPSByZXN1bHQuZ2F0ZS5zZWNvbmRhcnlfZXhwb3N1cmVzKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBbXSk7XG4gICAgICAgICAgICAgICAgZWNiKHsgdHlwZTogJ2dhdGUnLCBnYXRlOiBnYXRlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5nYXRlLnZhbHVlID09PSB0cnVlO1xuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7IHJldHVybiBmYWxzZTsgfSwgeyBjb25maWdOYW1lOiBnYXRlTmFtZSB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHZhbHVlIGFuZCBtZXRhZGF0YSBvZiBhIGdhdGUgZXZhbHVhdGlvbiBmb3IgdGhlIGN1cnJlbnQgdXNlclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBnYXRlTmFtZSAtIHRoZSBuYW1lIG9mIHRoZSBnYXRlIHRvIGNoZWNrXG4gICAgICogQHJldHVybnMge0ZlYXR1cmVHYXRlfSAtIG1ldGFkYXRhIGFib3V0IHRoZSB2YWx1ZSBvZiB0aGUgZ2F0ZSBnYXRlIGZvciB0aGUgdXNlci4gR2F0ZXMgYXJlIFwib2ZmXCIgKHZhbHVlIGZhbHNlKSBieSBkZWZhdWx0XG4gICAgICogQHRocm93cyBFcnJvciBpZiBpbml0aWFsaXplKCkgaXMgbm90IGNhbGxlZCBmaXJzdCwgb3IgZ2F0ZU5hbWUgaXMgbm90IGEgc3RyaW5nXG4gICAgICovXG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUuZ2V0RmVhdHVyZUdhdGUgPSBmdW5jdGlvbiAoZ2F0ZU5hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0gbnVsbDsgfVxuICAgICAgICByZXR1cm4gdGhpcy5lcnJvckJvdW5kYXJ5LmNhcHR1cmUoJ2dldEZlYXR1cmVHYXRlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBfdGhpcy5jaGVja0dhdGVJbXBsKGdhdGVOYW1lLCAoX2EgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuaWdub3JlT3ZlcnJpZGVzKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBmYWxzZSk7XG4gICAgICAgICAgICBpZiAoIShvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuZGlzYWJsZUV4cG9zdXJlTG9nZ2luZykpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5sb2dHYXRlRXhwb3N1cmVJbXBsKGdhdGVOYW1lLCByZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgX3RoaXMubG9nZ2VyLmFkZE5vbkV4cG9zZWRDaGVjayhnYXRlTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY2IgPSBfdGhpcy5vcHRpb25zLmdldEdhdGVFdmFsdWF0aW9uQ2FsbGJhY2soKTtcbiAgICAgICAgICAgIGlmIChjYikge1xuICAgICAgICAgICAgICAgIGNiKGdhdGVOYW1lLCByZXN1bHQuZ2F0ZS52YWx1ZSwge1xuICAgICAgICAgICAgICAgICAgICB3aXRoRXhwb3N1cmVMb2dnaW5nRGlzYWJsZWQ6IChfYiA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5kaXNhYmxlRXhwb3N1cmVMb2dnaW5nKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBnYXRlID0gbmV3IEZlYXR1cmVHYXRlXzEuZGVmYXVsdChnYXRlTmFtZSwgcmVzdWx0LmdhdGUudmFsdWUsIHJlc3VsdC5nYXRlLnJ1bGVfaWQsIHJlc3VsdC5ldmFsdWF0aW9uRGV0YWlscywgKF9jID0gcmVzdWx0LmdhdGUuZ3JvdXBfbmFtZSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogbnVsbCwgKF9kID0gcmVzdWx0LmdhdGUuaWRfdHlwZSkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogbnVsbCwgKF9lID0gcmVzdWx0LmdhdGUuc2Vjb25kYXJ5X2V4cG9zdXJlcykgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogW10pO1xuICAgICAgICAgICAgdmFyIGVjYiA9IF90aGlzLm9wdGlvbnMuZ2V0RXZhbHVhdGlvbkNhbGxiYWNrKCk7XG4gICAgICAgICAgICBpZiAoZWNiKSB7XG4gICAgICAgICAgICAgICAgZWNiKHsgdHlwZTogJ2dhdGUnLCBnYXRlOiBnYXRlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGdhdGU7XG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmVhdHVyZUdhdGVfMS5kZWZhdWx0KGdhdGVOYW1lLCBmYWxzZSwgJycsIHtcbiAgICAgICAgICAgICAgICByZWFzb246IEV2YWx1YXRpb25SZWFzb25fMS5FdmFsdWF0aW9uUmVhc29uLkVycm9yLFxuICAgICAgICAgICAgICAgIHRpbWU6IERhdGUubm93KCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgeyBjb25maWdOYW1lOiBnYXRlTmFtZSB9KTtcbiAgICB9O1xuICAgIFN0YXRzaWdDbGllbnQucHJvdG90eXBlLmNoZWNrR2F0ZVdpdGhFeHBvc3VyZUxvZ2dpbmdEaXNhYmxlZCA9IGZ1bmN0aW9uIChnYXRlTmFtZSwgaWdub3JlT3ZlcnJpZGVzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChpZ25vcmVPdmVycmlkZXMgPT09IHZvaWQgMCkgeyBpZ25vcmVPdmVycmlkZXMgPSBmYWxzZTsgfVxuICAgICAgICByZXR1cm4gdGhpcy5lcnJvckJvdW5kYXJ5LmNhcHR1cmUoJ2NoZWNrR2F0ZVdpdGhFeHBvc3VyZUxvZ2dpbmdEaXNhYmxlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICAgICAgX3RoaXMubG9nZ2VyLmFkZE5vbkV4cG9zZWRDaGVjayhnYXRlTmFtZSk7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gX3RoaXMuY2hlY2tHYXRlSW1wbChnYXRlTmFtZSwgaWdub3JlT3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHZhciBjYiA9IF90aGlzLm9wdGlvbnMuZ2V0R2F0ZUV2YWx1YXRpb25DYWxsYmFjaygpO1xuICAgICAgICAgICAgaWYgKGNiKSB7XG4gICAgICAgICAgICAgICAgY2IoZ2F0ZU5hbWUsIHJlc3VsdC5nYXRlLnZhbHVlLCB7XG4gICAgICAgICAgICAgICAgICAgIHdpdGhFeHBvc3VyZUxvZ2dpbmdEaXNhYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBlY2IgPSBfdGhpcy5vcHRpb25zLmdldEV2YWx1YXRpb25DYWxsYmFjaygpO1xuICAgICAgICAgICAgaWYgKGVjYikge1xuICAgICAgICAgICAgICAgIHZhciBnYXRlID0gbmV3IEZlYXR1cmVHYXRlXzEuZGVmYXVsdChnYXRlTmFtZSwgcmVzdWx0LmdhdGUudmFsdWUsIHJlc3VsdC5nYXRlLnJ1bGVfaWQsIHJlc3VsdC5ldmFsdWF0aW9uRGV0YWlscywgKF9hID0gcmVzdWx0LmdhdGUuZ3JvdXBfbmFtZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbnVsbCwgKF9iID0gcmVzdWx0LmdhdGUuaWRfdHlwZSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogbnVsbCwgKF9jID0gcmVzdWx0LmdhdGUuc2Vjb25kYXJ5X2V4cG9zdXJlcykgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogW10pO1xuICAgICAgICAgICAgICAgIGVjYih7IHR5cGU6ICdnYXRlJywgZ2F0ZTogZ2F0ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuZ2F0ZS52YWx1ZSA9PT0gdHJ1ZTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gZmFsc2U7IH0pO1xuICAgIH07XG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUubG9nR2F0ZUV4cG9zdXJlID0gZnVuY3Rpb24gKGdhdGVOYW1lKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuZXJyb3JCb3VuZGFyeS5zd2FsbG93KCdsb2dHYXRlRXhwb3N1cmUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5sb2dHYXRlRXhwb3N1cmVJbXBsKGdhdGVOYW1lKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDaGVja3MgdGhlIHZhbHVlIG9mIGEgY29uZmlnIGZvciB0aGUgY3VycmVudCB1c2VyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNvbmZpZ05hbWUgLSB0aGUgbmFtZSBvZiB0aGUgY29uZmlnIHRvIGdldFxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gaWdub3JlT3ZlcnJpZGVzID0gZmFsc2UgaWYgdGhpcyBjaGVjayBzaG91bGQgaWdub3JlIGxvY2FsIG92ZXJyaWRlc1xuICAgICAqIEByZXR1cm5zIHtEeW5hbWljQ29uZmlnfSAtIHZhbHVlIG9mIGEgY29uZmlnIGZvciB0aGUgdXNlclxuICAgICAqIEB0aHJvd3MgRXJyb3IgaWYgaW5pdGlhbGl6ZSgpIGlzIG5vdCBjYWxsZWQgZmlyc3QsIG9yIGNvbmZpZ05hbWUgaXMgbm90IGEgc3RyaW5nXG4gICAgICovXG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUuZ2V0Q29uZmlnID0gZnVuY3Rpb24gKGNvbmZpZ05hbWUsIGlnbm9yZU92ZXJyaWRlcykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoaWdub3JlT3ZlcnJpZGVzID09PSB2b2lkIDApIHsgaWdub3JlT3ZlcnJpZGVzID0gZmFsc2U7IH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JCb3VuZGFyeS5jYXB0dXJlKCdnZXRDb25maWcnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gX3RoaXMuZ2V0Q29uZmlnSW1wbChjb25maWdOYW1lLCBpZ25vcmVPdmVycmlkZXMpO1xuICAgICAgICAgICAgX3RoaXMubG9nQ29uZmlnRXhwb3N1cmVJbXBsKGNvbmZpZ05hbWUsIHJlc3VsdCk7XG4gICAgICAgICAgICB2YXIgZWNiID0gX3RoaXMub3B0aW9ucy5nZXRFdmFsdWF0aW9uQ2FsbGJhY2soKTtcbiAgICAgICAgICAgIGlmIChlY2IpIHtcbiAgICAgICAgICAgICAgICBlY2IoeyB0eXBlOiAnY29uZmlnJywgY29uZmlnOiByZXN1bHQgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5nZXRFbXB0eUNvbmZpZyhjb25maWdOYW1lKTsgfSwgeyBjb25maWdOYW1lOiBjb25maWdOYW1lIH0pO1xuICAgIH07XG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUuZ2V0Q29uZmlnV2l0aEV4cG9zdXJlTG9nZ2luZ0Rpc2FibGVkID0gZnVuY3Rpb24gKGNvbmZpZ05hbWUsIGlnbm9yZU92ZXJyaWRlcykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoaWdub3JlT3ZlcnJpZGVzID09PSB2b2lkIDApIHsgaWdub3JlT3ZlcnJpZGVzID0gZmFsc2U7IH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JCb3VuZGFyeS5jYXB0dXJlKCdnZXRDb25maWcnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5sb2dnZXIuYWRkTm9uRXhwb3NlZENoZWNrKGNvbmZpZ05hbWUpO1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IF90aGlzLmdldENvbmZpZ0ltcGwoY29uZmlnTmFtZSwgaWdub3JlT3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHZhciBlY2IgPSBfdGhpcy5vcHRpb25zLmdldEV2YWx1YXRpb25DYWxsYmFjaygpO1xuICAgICAgICAgICAgaWYgKGVjYikge1xuICAgICAgICAgICAgICAgIGVjYih7IHR5cGU6ICdjb25maWcnLCBjb25maWc6IHJlc3VsdCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmdldEVtcHR5Q29uZmlnKGNvbmZpZ05hbWUpOyB9KTtcbiAgICB9O1xuICAgIFN0YXRzaWdDbGllbnQucHJvdG90eXBlLmxvZ0NvbmZpZ0V4cG9zdXJlID0gZnVuY3Rpb24gKGNvbmZpZ05hbWUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5lcnJvckJvdW5kYXJ5LnN3YWxsb3coJ2xvZ0NvbmZpZ0V4cG9zdXJlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMubG9nQ29uZmlnRXhwb3N1cmVJbXBsKGNvbmZpZ05hbWUpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGV4cGVyaW1lbnQgZm9yIGEgZ2l2ZW4gdXNlclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHBlcmltZW50TmFtZSAtIHRoZSBuYW1lIG9mIHRoZSBleHBlcmltZW50IHRvIGdldFxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0ga2VlcERldmljZVZhbHVlID0gZmFsc2UgaWYgdGhpcyBzaG91bGQgdXNlIFwic3RpY2t5XCIgdmFsdWVzIHBlcnNpc3RlZCBpbiBsb2NhbCBzdG9yYWdlXG4gICAgICogQHBhcmFtIHtib29sZWFufSBpZ25vcmVPdmVycmlkZXMgPSBmYWxzZSBpZiB0aGlzIGNoZWNrIHNob3VsZCBpZ25vcmUgbG9jYWwgb3ZlcnJpZGVzXG4gICAgICogQHJldHVybnMge0R5bmFtaWNDb25maWd9IC0gdmFsdWUgb2YgdGhlIGV4cGVyaW1lbnQgZm9yIHRoZSB1c2VyLCByZXByZXNlbnRlZCBieSBhIER5bmFtaWMgQ29uZmlnIG9iamVjdFxuICAgICAqIEB0aHJvd3MgRXJyb3IgaWYgaW5pdGlhbGl6ZSgpIGlzIG5vdCBjYWxsZWQgZmlyc3QsIG9yIGV4cGVyaW1lbnROYW1lIGlzIG5vdCBhIHN0cmluZ1xuICAgICAqL1xuICAgIFN0YXRzaWdDbGllbnQucHJvdG90eXBlLmdldEV4cGVyaW1lbnQgPSBmdW5jdGlvbiAoZXhwZXJpbWVudE5hbWUsIGtlZXBEZXZpY2VWYWx1ZSwgaWdub3JlT3ZlcnJpZGVzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChrZWVwRGV2aWNlVmFsdWUgPT09IHZvaWQgMCkgeyBrZWVwRGV2aWNlVmFsdWUgPSBmYWxzZTsgfVxuICAgICAgICBpZiAoaWdub3JlT3ZlcnJpZGVzID09PSB2b2lkIDApIHsgaWdub3JlT3ZlcnJpZGVzID0gZmFsc2U7IH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JCb3VuZGFyeS5jYXB0dXJlKCdnZXRFeHBlcmltZW50JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IF90aGlzLmdldEV4cGVyaW1lbnRJbXBsKGV4cGVyaW1lbnROYW1lLCBrZWVwRGV2aWNlVmFsdWUsIGlnbm9yZU92ZXJyaWRlcyk7XG4gICAgICAgICAgICBfdGhpcy5sb2dFeHBlcmltZW50RXhwb3N1cmVJbXBsKGV4cGVyaW1lbnROYW1lLCBrZWVwRGV2aWNlVmFsdWUsIHJlc3VsdCk7XG4gICAgICAgICAgICB2YXIgZWNiID0gX3RoaXMub3B0aW9ucy5nZXRFdmFsdWF0aW9uQ2FsbGJhY2soKTtcbiAgICAgICAgICAgIGlmIChlY2IpIHtcbiAgICAgICAgICAgICAgICBlY2IoeyB0eXBlOiAnZXhwZXJpbWVudCcsIGNvbmZpZzogcmVzdWx0IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuZ2V0RW1wdHlDb25maWcoZXhwZXJpbWVudE5hbWUpOyB9LCB7IGNvbmZpZ05hbWU6IGV4cGVyaW1lbnROYW1lIH0pO1xuICAgIH07XG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUuZ2V0RXhwZXJpbWVudFdpdGhFeHBvc3VyZUxvZ2dpbmdEaXNhYmxlZCA9IGZ1bmN0aW9uIChleHBlcmltZW50TmFtZSwga2VlcERldmljZVZhbHVlLCBpZ25vcmVPdmVycmlkZXMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKGtlZXBEZXZpY2VWYWx1ZSA9PT0gdm9pZCAwKSB7IGtlZXBEZXZpY2VWYWx1ZSA9IGZhbHNlOyB9XG4gICAgICAgIGlmIChpZ25vcmVPdmVycmlkZXMgPT09IHZvaWQgMCkgeyBpZ25vcmVPdmVycmlkZXMgPSBmYWxzZTsgfVxuICAgICAgICByZXR1cm4gdGhpcy5lcnJvckJvdW5kYXJ5LmNhcHR1cmUoJ2dldEV4cGVyaW1lbnRXaXRoRXhwb3N1cmVMb2dnaW5nRGlzYWJsZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5sb2dnZXIuYWRkTm9uRXhwb3NlZENoZWNrKGV4cGVyaW1lbnROYW1lKTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBfdGhpcy5nZXRFeHBlcmltZW50SW1wbChleHBlcmltZW50TmFtZSwga2VlcERldmljZVZhbHVlLCBpZ25vcmVPdmVycmlkZXMpO1xuICAgICAgICAgICAgdmFyIGVjYiA9IF90aGlzLm9wdGlvbnMuZ2V0RXZhbHVhdGlvbkNhbGxiYWNrKCk7XG4gICAgICAgICAgICBpZiAoZWNiKSB7XG4gICAgICAgICAgICAgICAgZWNiKHsgdHlwZTogJ2V4cGVyaW1lbnQnLCBjb25maWc6IHJlc3VsdCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmdldEVtcHR5Q29uZmlnKGV4cGVyaW1lbnROYW1lKTsgfSk7XG4gICAgfTtcbiAgICBTdGF0c2lnQ2xpZW50LnByb3RvdHlwZS5sb2dFeHBlcmltZW50RXhwb3N1cmUgPSBmdW5jdGlvbiAoZXhwZXJpbWVudE5hbWUsIGtlZXBEZXZpY2VWYWx1ZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLmVycm9yQm91bmRhcnkuc3dhbGxvdygnbG9nRXhwZXJpbWVudEV4cG9zdXJlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMubG9nRXhwZXJpbWVudEV4cG9zdXJlSW1wbChleHBlcmltZW50TmFtZSwga2VlcERldmljZVZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBTdGF0c2lnQ2xpZW50LnByb3RvdHlwZS5nZXRMYXllciA9IGZ1bmN0aW9uIChsYXllck5hbWUsIGtlZXBEZXZpY2VWYWx1ZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoa2VlcERldmljZVZhbHVlID09PSB2b2lkIDApIHsga2VlcERldmljZVZhbHVlID0gZmFsc2U7IH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JCb3VuZGFyeS5jYXB0dXJlKCdnZXRMYXllcicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBfdGhpcy5nZXRMYXllckltcGwoX3RoaXMubG9nTGF5ZXJQYXJhbWV0ZXJFeHBvc3VyZUZvckxheWVyLCBsYXllck5hbWUsIGtlZXBEZXZpY2VWYWx1ZSk7XG4gICAgICAgICAgICB2YXIgZWNiID0gX3RoaXMub3B0aW9ucy5nZXRFdmFsdWF0aW9uQ2FsbGJhY2soKTtcbiAgICAgICAgICAgIGlmIChlY2IpIHtcbiAgICAgICAgICAgICAgICBlY2IoeyB0eXBlOiAnbGF5ZXInLCBsYXllcjogcmVzdWx0IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIExheWVyXzEuZGVmYXVsdC5fY3JlYXRlKGxheWVyTmFtZSwge30sICcnLCBfdGhpcy5nZXRFdmFsdXRpb25EZXRhaWxzRm9yRXJyb3IoKSk7XG4gICAgICAgIH0sIHsgY29uZmlnTmFtZTogbGF5ZXJOYW1lIH0pO1xuICAgIH07XG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUuZ2V0TGF5ZXJXaXRoRXhwb3N1cmVMb2dnaW5nRGlzYWJsZWQgPSBmdW5jdGlvbiAobGF5ZXJOYW1lLCBrZWVwRGV2aWNlVmFsdWUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKGtlZXBEZXZpY2VWYWx1ZSA9PT0gdm9pZCAwKSB7IGtlZXBEZXZpY2VWYWx1ZSA9IGZhbHNlOyB9XG4gICAgICAgIHJldHVybiB0aGlzLmVycm9yQm91bmRhcnkuY2FwdHVyZSgnZ2V0TGF5ZXJXaXRoRXhwb3N1cmVMb2dnaW5nRGlzYWJsZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5sb2dnZXIuYWRkTm9uRXhwb3NlZENoZWNrKGxheWVyTmFtZSk7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gX3RoaXMuZ2V0TGF5ZXJJbXBsKG51bGwsIGxheWVyTmFtZSwga2VlcERldmljZVZhbHVlKTtcbiAgICAgICAgICAgIHZhciBlY2IgPSBfdGhpcy5vcHRpb25zLmdldEV2YWx1YXRpb25DYWxsYmFjaygpO1xuICAgICAgICAgICAgaWYgKGVjYikge1xuICAgICAgICAgICAgICAgIGVjYih7IHR5cGU6ICdsYXllcicsIGxheWVyOiByZXN1bHQgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gTGF5ZXJfMS5kZWZhdWx0Ll9jcmVhdGUobGF5ZXJOYW1lLCB7fSwgJycsIF90aGlzLmdldEV2YWx1dGlvbkRldGFpbHNGb3JFcnJvcigpKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBTdGF0c2lnQ2xpZW50LnByb3RvdHlwZS5sb2dMYXllclBhcmFtZXRlckV4cG9zdXJlID0gZnVuY3Rpb24gKGxheWVyTmFtZSwgcGFyYW1ldGVyTmFtZSwga2VlcERldmljZVZhbHVlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChrZWVwRGV2aWNlVmFsdWUgPT09IHZvaWQgMCkgeyBrZWVwRGV2aWNlVmFsdWUgPSBmYWxzZTsgfVxuICAgICAgICB0aGlzLmVycm9yQm91bmRhcnkuc3dhbGxvdygnbG9nTGF5ZXJQYXJhbWV0ZXJFeHBvc3VyZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBsYXllciA9IF90aGlzLmdldExheWVySW1wbChudWxsLCBsYXllck5hbWUsIGtlZXBEZXZpY2VWYWx1ZSk7XG4gICAgICAgICAgICBfdGhpcy5sb2dMYXllclBhcmFtZXRlckV4cG9zdXJlRm9yTGF5ZXIobGF5ZXIsIHBhcmFtZXRlck5hbWUsIHRydWUpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFN0YXRzaWdDbGllbnQucHJvdG90eXBlLmxvZ0V2ZW50ID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgdmFsdWUsIG1ldGFkYXRhKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdm9pZCAwKSB7IHZhbHVlID0gbnVsbDsgfVxuICAgICAgICBpZiAobWV0YWRhdGEgPT09IHZvaWQgMCkgeyBtZXRhZGF0YSA9IG51bGw7IH1cbiAgICAgICAgdGhpcy5lcnJvckJvdW5kYXJ5LnN3YWxsb3coJ2xvZ0V2ZW50JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCFfdGhpcy5sb2dnZXIgfHwgIV90aGlzLnNka0tleSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcnNfMS5TdGF0c2lnVW5pbml0aWFsaXplZEVycm9yKCdNdXN0IGluaXRpYWxpemUoKSBiZWZvcmUgbG9nZ2luZyBldmVudHMuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIGV2ZW50TmFtZSAhPT0gJ3N0cmluZycgfHwgZXZlbnROYW1lLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIE91dHB1dExvZ2dlcl8xLmRlZmF1bHQuZXJyb3IoJ0V2ZW50IG5vdCBsb2dnZWQuIE5vIHZhbGlkIGV2ZW50TmFtZSBwYXNzZWQuJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKF90aGlzLnNob3VsZFRyaW1QYXJhbShldmVudE5hbWUsIE1BWF9WQUxVRV9TSVpFKSkge1xuICAgICAgICAgICAgICAgIE91dHB1dExvZ2dlcl8xLmRlZmF1bHQuaW5mbygnZXZlbnROYW1lIGlzIHRvbyBsb25nLCB0cmltbWluZyB0byAnICtcbiAgICAgICAgICAgICAgICAgICAgTUFYX1ZBTFVFX1NJWkUgK1xuICAgICAgICAgICAgICAgICAgICAnIGNoYXJhY3RlcnMuJyk7XG4gICAgICAgICAgICAgICAgZXZlbnROYW1lID0gZXZlbnROYW1lLnN1YnN0cmluZygwLCBNQVhfVkFMVUVfU0laRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyAmJlxuICAgICAgICAgICAgICAgIF90aGlzLnNob3VsZFRyaW1QYXJhbSh2YWx1ZSwgTUFYX1ZBTFVFX1NJWkUpKSB7XG4gICAgICAgICAgICAgICAgT3V0cHV0TG9nZ2VyXzEuZGVmYXVsdC5pbmZvKCd2YWx1ZSBpcyB0b28gbG9uZywgdHJpbW1pbmcgdG8gJyArIE1BWF9WQUxVRV9TSVpFICsgJy4nKTtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnN1YnN0cmluZygwLCBNQVhfVkFMVUVfU0laRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoX3RoaXMuc2hvdWxkVHJpbVBhcmFtKG1ldGFkYXRhLCBNQVhfT0JKX1NJWkUpKSB7XG4gICAgICAgICAgICAgICAgT3V0cHV0TG9nZ2VyXzEuZGVmYXVsdC5pbmZvKCdtZXRhZGF0YSBpcyB0b28gYmlnLiBEcm9wcGluZyB0aGUgbWV0YWRhdGEuJyk7XG4gICAgICAgICAgICAgICAgbWV0YWRhdGEgPSB7IGVycm9yOiAnbm90IGxvZ2dlZCBkdWUgdG8gc2l6ZSB0b28gbGFyZ2UnIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZXZlbnQgPSBuZXcgTG9nRXZlbnRfMS5kZWZhdWx0KGV2ZW50TmFtZSk7XG4gICAgICAgICAgICBldmVudC5zZXRWYWx1ZSh2YWx1ZSk7XG4gICAgICAgICAgICBldmVudC5zZXRNZXRhZGF0YShtZXRhZGF0YSk7XG4gICAgICAgICAgICBldmVudC5zZXRVc2VyKF90aGlzLmdldEN1cnJlbnRVc2VyKCkpO1xuICAgICAgICAgICAgX3RoaXMubG9nZ2VyLmxvZyhldmVudCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUudXBkYXRlVXNlcldpdGhWYWx1ZXMgPSBmdW5jdGlvbiAodXNlciwgdmFsdWVzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBzdGF0c2lnLWxpbnRlci9wdWJsaWMtbWV0aG9kcy1lcnJvci1ib3VuZGFyeVxuICAgICAgICB2YXIgZmlyZUNvbXBsZXRpb25DYWxsYmFjaztcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JCb3VuZGFyeS5jYXB0dXJlKCd1cGRhdGVVc2VyV2l0aFZhbHVlcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB1cGRhdGVTdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgaWYgKCFfdGhpcy5pbml0aWFsaXplQ2FsbGVkKCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3JzXzEuU3RhdHNpZ1VuaW5pdGlhbGl6ZWRFcnJvcignQ2FsbCBpbml0aWFsaXplKCkgZmlyc3QuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaXJlQ29tcGxldGlvbkNhbGxiYWNrID0gZnVuY3Rpb24gKHN1Y2Nlc3MsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNiID0gX3RoaXMub3B0aW9ucy5nZXRVcGRhdGVVc2VyQ29tcGxldGlvbkNhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgY2IgPT09IG51bGwgfHwgY2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNiKERhdGUubm93KCkgLSB1cGRhdGVTdGFydFRpbWUsIHN1Y2Nlc3MsIGVycm9yKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBfdGhpcy5pZGVudGl0eS51cGRhdGVVc2VyKF90aGlzLm5vcm1hbGl6ZVVzZXIodXNlcikpO1xuICAgICAgICAgICAgX3RoaXMuc3RvcmUuYm9vdHN0cmFwKHZhbHVlcyk7XG4gICAgICAgICAgICBmaXJlQ29tcGxldGlvbkNhbGxiYWNrKHRydWUsIG51bGwpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZpcmVDb21wbGV0aW9uQ2FsbGJhY2sgPT09IG51bGwgfHwgZmlyZUNvbXBsZXRpb25DYWxsYmFjayA9PT0gdm9pZCAwID8gdm9pZCAwIDogZmlyZUNvbXBsZXRpb25DYWxsYmFjayhmYWxzZSwgJ0ZhaWxlZCB0byB1cGRhdGUgdXNlci4gQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cmVkLicpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFN0YXRzaWdDbGllbnQucHJvdG90eXBlLnVwZGF0ZVVzZXIgPSBmdW5jdGlvbiAodXNlcikge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZmlyZUNvbXBsZXRpb25DYWxsYmFjaztcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuZXJyb3JCb3VuZGFyeS5jYXB0dXJlKCd1cGRhdGVVc2VyJywgZnVuY3Rpb24gKCkgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVwZGF0ZVN0YXJ0VGltZSwgdXNlckNhY2hlS2V5LCBpc1VzZXJQcmVmZXRjaGVkLCBjYWNoZWRUaW1lLCBjdXJyZW50VXNlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVTdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmluaXRpYWxpemVDYWxsZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcnNfMS5TdGF0c2lnVW5pbml0aWFsaXplZEVycm9yKCdDYWxsIGluaXRpYWxpemUoKSBmaXJzdC4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVDb21wbGV0aW9uQ2FsbGJhY2sgPSBmdW5jdGlvbiAoc3VjY2VzcywgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2IgPSBfdGhpcy5vcHRpb25zLmdldFVwZGF0ZVVzZXJDb21wbGV0aW9uQ2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYiA9PT0gbnVsbCB8fCBjYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2IoRGF0ZS5ub3coKSAtIHVwZGF0ZVN0YXJ0VGltZSwgc3VjY2VzcywgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKFN0YXRzaWdBc3luY1N0b3JhZ2VfMS5kZWZhdWx0LmFzeW5jU3RvcmFnZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoX2EgPSB0aGlzLmlkZW50aXR5LmdldFN0YXRzaWdNZXRhZGF0YSgpLnN0YWJsZUlEKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJykgPT0gJycpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaWRlbnRpdHkuaW5pdEFzeW5jKCldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaWRlbnRpdHkudXBkYXRlVXNlcih0aGlzLm5vcm1hbGl6ZVVzZXIodXNlcikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlckNhY2hlS2V5ID0gdGhpcy5nZXRDdXJyZW50VXNlckNhY2hlS2V5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1VzZXJQcmVmZXRjaGVkID0gQm9vbGVhbih0aGlzLnByZWZldGNoZWRVc2Vyc0J5Q2FjaGVLZXlbdXNlckNhY2hlS2V5LnYzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZWRUaW1lID0gdGhpcy5zdG9yZS51cGRhdGVVc2VyKGlzVXNlclByZWZldGNoZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGlhZ25vc3RpY3NfMS5kZWZhdWx0LmNsZWFyQ29udGV4dCgnYXBpX2NhbGwnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLnJlc2V0RGVkdXBlS2V5cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlZFRpbWUgIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpc1VzZXJQcmVmZXRjaGVkIHx8IHRoaXMuaXNDYWNoZVZhbGlkRm9yRmV0Y2hNb2RlKGNhY2hlZFRpbWUpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVDb21wbGV0aW9uQ2FsbGJhY2sodHJ1ZSwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFByb21pc2UucmVzb2x2ZSh0cnVlKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0aGlzLnBlbmRpbmdJbml0UHJvbWlzZSAhPSBudWxsKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnBlbmRpbmdJbml0UHJvbWlzZV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gNDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5nZXRMb2NhbE1vZGVFbmFibGVkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlQ29tcGxldGlvbkNhbGxiYWNrKHRydWUsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBQcm9taXNlLnJlc29sdmUodHJ1ZSldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFVzZXIgPSB0aGlzLmlkZW50aXR5LmdldFVzZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZ0luaXRQcm9taXNlID0gdGhpcy5mZXRjaEFuZFNhdmVWYWx1ZXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXI6IGN1cnJlbnRVc2VyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWZldGNoVXNlcnM6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBlbmRpbmdJbml0UHJvbWlzZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnBlbmRpbmdJbml0UHJvbWlzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVDb21wbGV0aW9uQ2FsbGJhY2sodHJ1ZSwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlQ29tcGxldGlvbkNhbGxiYWNrKGZhbHNlLCBcIkZhaWxlZCB0byB1cGRhdGUgdXNlcjogXCIuY29uY2F0KGVycm9yLm1lc3NhZ2UpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTsgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlyZUNvbXBsZXRpb25DYWxsYmFjayA9PT0gbnVsbCB8fCBmaXJlQ29tcGxldGlvbkNhbGxiYWNrID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmaXJlQ29tcGxldGlvbkNhbGxiYWNrKGZhbHNlLCAnRmFpbGVkIHRvIHVwZGF0ZSB1c2VyLiBBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VyZWQuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSW5mb3JtcyB0aGUgc3RhdHNpZyBTREsgdGhhdCB0aGUgY2xpZW50IGlzIGNsb3Npbmcgb3Igc2h1dHRpbmcgZG93blxuICAgICAqIHNvIHRoZSBTREsgY2FuIGNsZWFuIHVwIGludGVybmFsIHN0YXRlXG4gICAgICovXG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUuc2h1dGRvd24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuZXJyb3JCb3VuZGFyeS5zd2FsbG93KCdzaHV0ZG93bicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLmxvZ2dlci5zaHV0ZG93bigpO1xuICAgICAgICAgICAgaWYgKF90aGlzLmFwcFN0YXRlQ2hhbmdlU3Vic2NyaXB0aW9uICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3ViID0gX3RoaXMuYXBwU3RhdGVDaGFuZ2VTdWJzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzdWIucmVtb3ZlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1Yi5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBTdGF0c2lnTG9jYWxTdG9yYWdlXzEuZGVmYXVsdC5jbGVhbnVwKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUuZ2V0SW5pdGlhbGl6ZVJlc3BvbnNlSnNvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JCb3VuZGFyeS5jYXB0dXJlKCdnZXRJbml0aWFsaXplUmVzcG9uc2VKc29uJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB2YWx1ZXM6IF90aGlzLnN0b3JlLmdldEluaXRpYWxpemVSZXNwb25zZUpzb24oKSxcbiAgICAgICAgICAgICAgICBldmFsdWF0aW9uRGV0YWlsczogKF9hID0gX3RoaXMuZ2V0RXZhbHVhdGlvbkRldGFpbHMoKSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge1xuICAgICAgICAgICAgICAgICAgICByZWFzb246IEV2YWx1YXRpb25SZWFzb25fMS5FdmFsdWF0aW9uUmVhc29uLlVuaW5pdGlhbGl6ZWQsXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IDAsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdmFsdWVzOiAnJyxcbiAgICAgICAgICAgICAgICBldmFsdWF0aW9uRGV0YWlsczogKF9hID0gX3RoaXMuZ2V0RXZhbHVhdGlvbkRldGFpbHMoKSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge1xuICAgICAgICAgICAgICAgICAgICByZWFzb246IEV2YWx1YXRpb25SZWFzb25fMS5FdmFsdWF0aW9uUmVhc29uLlVuaW5pdGlhbGl6ZWQsXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IDAsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU3RvcmVzIGEgbG9jYWwgZ2F0ZSBvdmVycmlkZVxuICAgICAqIEBwYXJhbSBnYXRlTmFtZSB0aGUgZ2F0ZSB0byBvdmVycmlkZVxuICAgICAqIEBwYXJhbSB2YWx1ZSB0aGUgdmFsdWUgdG8gb3ZlcnJpZGUgdGhlIGdhdGUgdG9cbiAgICAgKi9cbiAgICBTdGF0c2lnQ2xpZW50LnByb3RvdHlwZS5vdmVycmlkZUdhdGUgPSBmdW5jdGlvbiAoZ2F0ZU5hbWUsIHZhbHVlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuZXJyb3JCb3VuZGFyeS5zd2FsbG93KCdvdmVycmlkZUdhdGUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5lbnN1cmVTdG9yZUxvYWRlZCgpO1xuICAgICAgICAgICAgX3RoaXMuc3RvcmUub3ZlcnJpZGVHYXRlKGdhdGVOYW1lLCB2YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU3RvcmVzIGEgbG9jYWwgY29uZmlnIG92ZXJyaWRlXG4gICAgICogQHBhcmFtIGNvbmZpZ05hbWUgdGhlIGNvbmZpZyB0byBvdmVycmlkZVxuICAgICAqIEBwYXJhbSB2YWx1ZSB0aGUganNvbiB2YWx1ZSB0byBvdmVycmlkZSB0aGUgY29uZmlnIHRvXG4gICAgICovXG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUub3ZlcnJpZGVDb25maWcgPSBmdW5jdGlvbiAoY29uZmlnTmFtZSwgdmFsdWUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5lcnJvckJvdW5kYXJ5LnN3YWxsb3coJ292ZXJyaWRlQ29uZmlnJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMuZW5zdXJlU3RvcmVMb2FkZWQoKTtcbiAgICAgICAgICAgIF90aGlzLnN0b3JlLm92ZXJyaWRlQ29uZmlnKGNvbmZpZ05hbWUsIHZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTdG9yZXMgYSBsb2NhbCBsYXllciBvdmVycmlkZVxuICAgICAqIEBwYXJhbSBsYXllck5hbWUgdGhlIGxheWVyIHRvIG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHZhbHVlIHRoZSBqc29uIHZhbHVlIHRvIG92ZXJyaWRlIHRoZSBjb25maWcgdG9cbiAgICAgKi9cbiAgICBTdGF0c2lnQ2xpZW50LnByb3RvdHlwZS5vdmVycmlkZUxheWVyID0gZnVuY3Rpb24gKGxheWVyTmFtZSwgdmFsdWUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5lcnJvckJvdW5kYXJ5LnN3YWxsb3coJ292ZXJyaWRlTGF5ZXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5lbnN1cmVTdG9yZUxvYWRlZCgpO1xuICAgICAgICAgICAgX3RoaXMuc3RvcmUub3ZlcnJpZGVMYXllcihsYXllck5hbWUsIHZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBnaXZlbiBnYXRlIG92ZXJyaWRlXG4gICAgICogQHBhcmFtIGdhdGVOYW1lXG4gICAgICovXG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUucmVtb3ZlR2F0ZU92ZXJyaWRlID0gZnVuY3Rpb24gKGdhdGVOYW1lKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuZXJyb3JCb3VuZGFyeS5zd2FsbG93KCdyZW1vdmVHYXRlT3ZlcnJpZGUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5lbnN1cmVTdG9yZUxvYWRlZCgpO1xuICAgICAgICAgICAgX3RoaXMuc3RvcmUucmVtb3ZlR2F0ZU92ZXJyaWRlKGdhdGVOYW1lKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBnaXZlbiBjb25maWcgb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0gY29uZmlnTmFtZVxuICAgICAqL1xuICAgIFN0YXRzaWdDbGllbnQucHJvdG90eXBlLnJlbW92ZUNvbmZpZ092ZXJyaWRlID0gZnVuY3Rpb24gKGNvbmZpZ05hbWUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5lcnJvckJvdW5kYXJ5LnN3YWxsb3coJ3JlbW92ZUNvbmZpZ092ZXJyaWRlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMuZW5zdXJlU3RvcmVMb2FkZWQoKTtcbiAgICAgICAgICAgIF90aGlzLnN0b3JlLnJlbW92ZUNvbmZpZ092ZXJyaWRlKGNvbmZpZ05hbWUpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIGdpdmVuIGxheWVyIG92ZXJyaWRlXG4gICAgICogQHBhcmFtIGxheWVyTmFtZVxuICAgICAqL1xuICAgIFN0YXRzaWdDbGllbnQucHJvdG90eXBlLnJlbW92ZUxheWVyT3ZlcnJpZGUgPSBmdW5jdGlvbiAobGF5ZXJOYW1lKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuZXJyb3JCb3VuZGFyeS5zd2FsbG93KCdyZW1vdmVMYXllck92ZXJyaWRlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMuZW5zdXJlU3RvcmVMb2FkZWQoKTtcbiAgICAgICAgICAgIF90aGlzLnN0b3JlLnJlbW92ZUxheWVyT3ZlcnJpZGUobGF5ZXJOYW1lKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCAtIHVzZSByZW1vdmVHYXRlT3ZlcnJpZGUgb3IgcmVtb3ZlQ29uZmlnIG92ZXJyaWRlXG4gICAgICogUmVtb3ZlcyB0aGUgZ2l2ZW4gZ2F0ZSBvdmVycmlkZVxuICAgICAqIEBwYXJhbSBnYXRlTmFtZVxuICAgICAqL1xuICAgIFN0YXRzaWdDbGllbnQucHJvdG90eXBlLnJlbW92ZU92ZXJyaWRlID0gZnVuY3Rpb24gKGdhdGVOYW1lKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuZXJyb3JCb3VuZGFyeS5zd2FsbG93KCdyZW1vdmVPdmVycmlkZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLmVuc3VyZVN0b3JlTG9hZGVkKCk7XG4gICAgICAgICAgICBfdGhpcy5zdG9yZS5yZW1vdmVHYXRlT3ZlcnJpZGUoZ2F0ZU5hbWUpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIC0gdXNlIGdldEFsbE92ZXJyaWRlcyB0byBnZXQgZ2F0ZSBhbmQgY29uZmlnIG92ZXJyaWRlc1xuICAgICAqIEByZXR1cm5zIEdhdGUgb3ZlcnJpZGVzXG4gICAgICovXG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUuZ2V0T3ZlcnJpZGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gdGhpcy5lcnJvckJvdW5kYXJ5LmNhcHR1cmUoJ2dldE92ZXJyaWRlcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLmVuc3VyZVN0b3JlTG9hZGVkKCk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuc3RvcmUuZ2V0QWxsT3ZlcnJpZGVzKCkuZ2F0ZXM7XG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7fSk7IH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgVGhlIGxvY2FsIGdhdGUgYW5kIGNvbmZpZyBvdmVycmlkZXNcbiAgICAgKi9cbiAgICBTdGF0c2lnQ2xpZW50LnByb3RvdHlwZS5nZXRBbGxPdmVycmlkZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0aGlzLmVycm9yQm91bmRhcnkuY2FwdHVyZSgnZ2V0QWxsT3ZlcnJpZGVzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMuZW5zdXJlU3RvcmVMb2FkZWQoKTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5zdG9yZS5nZXRBbGxPdmVycmlkZXMoKTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gKHsgZ2F0ZXM6IHt9LCBjb25maWdzOiB7fSwgbGF5ZXJzOiB7fSB9KTsgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBUaGUgU3RhdHNpZyBzdGFibGUgSUQgdXNlZCBmb3IgZGV2aWNlIGxldmVsIGV4cGVyaW1lbnRzXG4gICAgICovXG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUuZ2V0U3RhYmxlSUQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0aGlzLmVycm9yQm91bmRhcnkuY2FwdHVyZSgnZ2V0U3RhYmxlSUQnLCBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5pZGVudGl0eS5nZXRTdGF0c2lnTWV0YWRhdGEoKS5zdGFibGVJRDsgfSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gJyc7IH0pO1xuICAgIH07XG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUuaW5pdGlhbGl6ZUNhbGxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5pdENhbGxlZDtcbiAgICB9O1xuICAgIC8vIEFsbCBtZXRob2RzIGJlbG93IGFyZSBmb3IgdGhlIHN0YXRzaWcgcmVhY3QgbmF0aXZlIFNESyBpbnRlcm5hbCB1c2FnZSBvbmx5IVxuICAgIC8qIGVzbGludC1kaXNhYmxlIHN0YXRzaWctbGludGVyL3B1YmxpYy1tZXRob2RzLWVycm9yLWJvdW5kYXJ5ICovXG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUuc2V0U0RLUGFja2FnZUluZm8gPSBmdW5jdGlvbiAoc2RrUGFja2FnZUluZm8pIHtcbiAgICAgICAgaWYgKHNka1BhY2thZ2VJbmZvICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuaWRlbnRpdHkuc2V0U0RLUGFja2FnZUluZm8oc2RrUGFja2FnZUluZm8pO1xuICAgICAgICAgICAgdGhpcy5lcnJvckJvdW5kYXJ5LnNldFN0YXRzaWdNZXRhZGF0YSh0aGlzLmdldFN0YXRzaWdNZXRhZGF0YSgpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtcyBEZWJ1ZyBpbmZvcm1hdGlvbiBsb2cgd2l0aCBleHBvc3VyZSBldmVudCwgYW5kIGluZm9ybWF0aW9uIHdpbGwgYmUgbGl2aW5nIGluIG1ldGFkYXRhXG4gICAgICovXG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUuc2V0RGVidWdJbmZvID0gZnVuY3Rpb24gKGRlYnVnSW5mbykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLmVycm9yQm91bmRhcnkuY2FwdHVyZSgnc2V0RGVidWdnaW5nSW5mbycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghX3RoaXMuaW5pdGlhbGl6ZUNhbGxlZCgpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yc18xLlN0YXRzaWdVbmluaXRpYWxpemVkRXJyb3IoJ0NhbGwgaW5pdGlhbGl6ZSgpIGZpcnN0LicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3RoaXMubG9nZ2VyLnNldERlYnVnSW5mbyhkZWJ1Z0luZm8pO1xuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvKiBuby1vcCAqL1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFN0YXRzaWdDbGllbnQuc2V0QXN5bmNTdG9yYWdlID0gZnVuY3Rpb24gKGFzeW5jU3RvcmFnZSkge1xuICAgICAgICBpZiAoYXN5bmNTdG9yYWdlICE9IG51bGwpIHtcbiAgICAgICAgICAgIFN0YXRzaWdBc3luY1N0b3JhZ2VfMS5kZWZhdWx0LmFzeW5jU3RvcmFnZSA9IGFzeW5jU3RvcmFnZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUuc2V0T25DYWNoZUxvYWRlZFJlYWN0Q2FsbGJhY2sgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgdGhpcy5vbkNhY2hlTG9hZGVkRm9yUmVhY3QgPSBmbiAhPT0gbnVsbCAmJiBmbiAhPT0gdm9pZCAwID8gZm4gOiBudWxsO1xuICAgIH07XG4gICAgU3RhdHNpZ0NsaWVudC5zZXRSZWFjdE5hdGl2ZVVVSUQgPSBmdW5jdGlvbiAodXVpZCkge1xuICAgICAgICBpZiAodXVpZCAhPSBudWxsKSB7XG4gICAgICAgICAgICBTdGF0c2lnQ2xpZW50LnJlYWN0TmF0aXZlVVVJRCA9IHV1aWQ7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN0YXRzaWdDbGllbnQucHJvdG90eXBlLnNldEFwcFN0YXRlID0gZnVuY3Rpb24gKGFwcFN0YXRlKSB7XG4gICAgICAgIGlmIChhcHBTdGF0ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmFwcFN0YXRlID0gYXBwU3RhdGU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN0YXRzaWdDbGllbnQucHJvdG90eXBlLnNldE5hdGl2ZU1vZHVsZXMgPSBmdW5jdGlvbiAobmF0aXZlTW9kdWxlcykge1xuICAgICAgICBpZiAobmF0aXZlTW9kdWxlcyAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmlkZW50aXR5LnNldE5hdGl2ZU1vZHVsZXMobmF0aXZlTW9kdWxlcyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN0YXRzaWdDbGllbnQucHJvdG90eXBlLnNldFBsYXRmb3JtID0gZnVuY3Rpb24gKHBsYXRmb3JtKSB7XG4gICAgICAgIGlmIChwbGF0Zm9ybSAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmlkZW50aXR5LnNldFBsYXRmb3JtKHBsYXRmb3JtKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUuc2V0Uk5EZXZpY2VJbmZvID0gZnVuY3Rpb24gKGRldmljZUluZm8pIHtcbiAgICAgICAgaWYgKGRldmljZUluZm8gIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5pZGVudGl0eS5zZXRSTkRldmljZUluZm8oZGV2aWNlSW5mbyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN0YXRzaWdDbGllbnQucHJvdG90eXBlLnNldEV4cG9Db25zdGFudHMgPSBmdW5jdGlvbiAoZXhwb0NvbnN0YW50cykge1xuICAgICAgICBpZiAoZXhwb0NvbnN0YW50cyAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmlkZW50aXR5LnNldEV4cG9Db25zdGFudHMoZXhwb0NvbnN0YW50cyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN0YXRzaWdDbGllbnQucHJvdG90eXBlLnNldEV4cG9EZXZpY2UgPSBmdW5jdGlvbiAoZXhwb0RldmljZSkge1xuICAgICAgICBpZiAoZXhwb0RldmljZSAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmlkZW50aXR5LnNldEV4cG9EZXZpY2UoZXhwb0RldmljZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN0YXRzaWdDbGllbnQucHJvdG90eXBlLmZsdXNoRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmxvZ2dlci5mbHVzaCgpO1xuICAgIH07XG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUucmVlbmFibGVBbGxMb2dnaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmdldE9wdGlvbnMoKS5yZWVuYWJsZUFsbExvZ2dpbmcoKTtcbiAgICB9O1xuICAgIFN0YXRzaWdDbGllbnQucHJvdG90eXBlLmlzQ2FjaGVWYWxpZEZvckZldGNoTW9kZSA9IGZ1bmN0aW9uIChjYWNoZWRUaW1lKSB7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZ2V0RmV0Y2hNb2RlKCkgIT09ICdjYWNoZS1vci1uZXR3b3JrJykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIE9ubHkgdmFsaWQgaWYgdGhlIGNhY2hlIHdhcyBkdXJpbmcgdGhpcyBzZXNzaW9uXG4gICAgICAgIHJldHVybiBjYWNoZWRUaW1lID4gdGhpcy5zdGFydFRpbWU7XG4gICAgfTtcbiAgICBTdGF0c2lnQ2xpZW50LnByb3RvdHlwZS5oYW5kbGVPcHRpb25hbExvZ2dpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBpc0Vycm9yTG9nZ2luZ0Rpc2FibGVkID0gdGhpcy5vcHRpb25zLmdldERpc2FibGVFcnJvckxvZ2dpbmcoKTtcbiAgICAgICAgdmFyIGlzQXV0b01ldHJpY3NMb2dnaW5nRGlzYWJsZWQgPSB0aGlzLm9wdGlvbnMuZ2V0RGlzYWJsZUF1dG9NZXRyaWNzTG9nZ2luZygpO1xuICAgICAgICBpZiAoaXNFcnJvckxvZ2dpbmdEaXNhYmxlZCAmJiBpc0F1dG9NZXRyaWNzTG9nZ2luZ0Rpc2FibGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub3B0aW9uYWxMb2dnaW5nU2V0dXAgfHxcbiAgICAgICAgICAgIHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgICAhd2luZG93IHx8XG4gICAgICAgICAgICAhd2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdXNlciA9IHRoaXMuaWRlbnRpdHkuZ2V0VXNlcigpO1xuICAgICAgICBpZiAoIWlzRXJyb3JMb2dnaW5nRGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgIHZhciBlcnJvck9iaiA9IGUuZXJyb3I7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yT2JqICE9IG51bGwgJiYgdHlwZW9mIGVycm9yT2JqID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JPYmogPSBKU09OLnN0cmluZ2lmeShlcnJvck9iaik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yT2JqID0gJ0ZhaWxlZCB0byBzdHJpbmdpZnkgRXJyb3InO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90aGlzLmxvZ2dlci5sb2dBcHBFcnJvcih1c2VyLCAoX2EgPSBlLm1lc3NhZ2UpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnLCB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiBlLmZpbGVuYW1lLFxuICAgICAgICAgICAgICAgICAgICBsaW5lbm86IGUubGluZW5vLFxuICAgICAgICAgICAgICAgICAgICBjb2xubzogZS5jb2xubyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3Jfb2JqOiBlcnJvck9iaixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNBdXRvTWV0cmljc0xvZ2dpbmdEaXNhYmxlZCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgICAgICAhZG9jdW1lbnQgfHxcbiAgICAgICAgICAgICAgICB0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgICAgICAhc2V0VGltZW91dCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB3b3JrXzEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmxvZ2dlci5sb2dBcHBNZXRyaWNzKHVzZXIpO1xuICAgICAgICAgICAgICAgIH0sIDEwMDApO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB7XG4gICAgICAgICAgICAgICAgd29ya18xKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHdvcmtfMSgpOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9wdGlvbmFsTG9nZ2luZ1NldHVwID0gdHJ1ZTtcbiAgICB9O1xuICAgIFN0YXRzaWdDbGllbnQucHJvdG90eXBlLmhhbmRsZUFwcFN0YXRlQ2hhbmdlID0gZnVuY3Rpb24gKG5leHRBcHBTdGF0ZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50QXBwU3RhdGUgPT09ICdhY3RpdmUnICYmXG4gICAgICAgICAgICBuZXh0QXBwU3RhdGUubWF0Y2goL2luYWN0aXZlfGJhY2tncm91bmQvKSkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZmx1c2godHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5jdXJyZW50QXBwU3RhdGUgIT0gbnVsbCAmJlxuICAgICAgICAgICAgdGhpcy5jdXJyZW50QXBwU3RhdGUubWF0Y2goL2luYWN0aXZlfGJhY2tncm91bmQvKSAmJlxuICAgICAgICAgICAgbmV4dEFwcFN0YXRlID09PSAnYWN0aXZlJykge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXJcbiAgICAgICAgICAgICAgICAuc2VuZFNhdmVkUmVxdWVzdHMoKVxuICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmVycm9yQm91bmRhcnkubG9nRXJyb3IoJ3NlbmRTYXZlZFJlcXVlc3RzOmhhbmRsZUFwcFN0YXRlQ2hhbmdlJywgcmVhc29uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3VycmVudEFwcFN0YXRlID0gbmV4dEFwcFN0YXRlO1xuICAgIH07XG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUuc2hvdWxkVHJpbVBhcmFtID0gZnVuY3Rpb24gKGVudGl0eSwgc2l6ZSkge1xuICAgICAgICBpZiAoZW50aXR5ID09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICh0eXBlb2YgZW50aXR5ID09PSAnc3RyaW5nJylcbiAgICAgICAgICAgIHJldHVybiBlbnRpdHkubGVuZ3RoID4gc2l6ZTtcbiAgICAgICAgaWYgKHR5cGVvZiBlbnRpdHkgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZW50aXR5KS5sZW5ndGggPiBzaXplO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgZW50aXR5ID09PSAnbnVtYmVyJylcbiAgICAgICAgICAgIHJldHVybiBlbnRpdHkudG9TdHJpbmcoKS5sZW5ndGggPiBzaXplO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICBTdGF0c2lnQ2xpZW50LnByb3RvdHlwZS5ub3JtYWxpemVQcmVmZXRjaFVzZXJzID0gZnVuY3Rpb24gKHVzZXJzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICh1c2VycyA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVzZXJzLm1hcChmdW5jdGlvbiAodXNlcikgeyByZXR1cm4gX3RoaXMubm9ybWFsaXplVXNlcih1c2VyKTsgfSk7XG4gICAgfTtcbiAgICBTdGF0c2lnQ2xpZW50LnByb3RvdHlwZS5ub3JtYWxpemVVc2VyID0gZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgdmFyIHVzZXJDb3B5ID0ge307XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB1c2VyQ29weSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodXNlcikpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yc18xLlN0YXRzaWdJbnZhbGlkQXJndW1lbnRFcnJvcignVXNlciBvYmplY3QgbXVzdCBiZSBjb252ZXJ0YWJsZSB0byBKU09OIHN0cmluZy4nKTtcbiAgICAgICAgfVxuICAgICAgICB1c2VyQ29weSA9IHRoaXMudHJpbVVzZXJPYmpJZk5lZWRlZCh1c2VyQ29weSk7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZ2V0RW52aXJvbm1lbnQoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICB1c2VyQ29weS5zdGF0c2lnRW52aXJvbm1lbnQgPSB0aGlzLm9wdGlvbnMuZ2V0RW52aXJvbm1lbnQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXNlckNvcHk7XG4gICAgfTtcbiAgICBTdGF0c2lnQ2xpZW50LnByb3RvdHlwZS50cmltVXNlck9iaklmTmVlZGVkID0gZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgaWYgKHVzZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnNob3VsZFRyaW1QYXJhbSgoX2EgPSB1c2VyLnVzZXJJRCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbnVsbCwgTUFYX1ZBTFVFX1NJWkUpKSB7XG4gICAgICAgICAgICBPdXRwdXRMb2dnZXJfMS5kZWZhdWx0LmluZm8oJ1VzZXIgSUQgaXMgdG9vIGxhcmdlLCB0cmltbWluZyB0byAnICsgTUFYX1ZBTFVFX1NJWkUgKyAnY2hhcmFjdGVycycpO1xuICAgICAgICAgICAgdXNlci51c2VySUQgPSAoX2IgPSB1c2VyLnVzZXJJRCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnRvU3RyaW5nKCkuc3Vic3RyaW5nKDAsIE1BWF9WQUxVRV9TSVpFKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zaG91bGRUcmltUGFyYW0odXNlciwgTUFYX09CSl9TSVpFKSkge1xuICAgICAgICAgICAgdXNlci5jdXN0b20gPSB7fTtcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3VsZFRyaW1QYXJhbSh1c2VyLCBNQVhfT0JKX1NJWkUpKSB7XG4gICAgICAgICAgICAgICAgT3V0cHV0TG9nZ2VyXzEuZGVmYXVsdC5pbmZvKCdVc2VyIG9iamVjdCBpcyB0b28gbGFyZ2UsIG9ubHkga2VlcGluZyB0aGUgdXNlciBJRC4nKTtcbiAgICAgICAgICAgICAgICB1c2VyID0geyB1c2VySUQ6IHVzZXIudXNlcklEIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBPdXRwdXRMb2dnZXJfMS5kZWZhdWx0LmluZm8oJ1VzZXIgb2JqZWN0IGlzIHRvbyBsYXJnZSwgZHJvcHBpbmcgdGhlIGN1c3RvbSBwcm9wZXJ0eS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXNlcjtcbiAgICB9O1xuICAgIFN0YXRzaWdDbGllbnQucHJvdG90eXBlLmVuc3VyZVN0b3JlTG9hZGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuc3RvcmUuaXNMb2FkZWQoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yc18xLlN0YXRzaWdVbmluaXRpYWxpemVkRXJyb3IoJ0NhbGwgYW5kIHdhaXQgZm9yIGluaXRpYWxpemUoKSB0byBmaW5pc2ggZmlyc3QuJyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN0YXRzaWdDbGllbnQucHJvdG90eXBlLmdldEV2YWx1dGlvbkRldGFpbHNGb3JFcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRpbWU6IERhdGUubm93KCksXG4gICAgICAgICAgICByZWFzb246IEV2YWx1YXRpb25SZWFzb25fMS5FdmFsdWF0aW9uUmVhc29uLkVycm9yLFxuICAgICAgICB9O1xuICAgIH07XG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUuZmV0Y2hBbmRTYXZlVmFsdWVzID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdXNlciwgcHJlZmV0Y2hVc2VycywgdGltZW91dCwga2V5ZWRQcmVmZXRjaFVzZXJzLCBzdGFibGVJRCwgc2luY2VUaW1lLCBwcmV2aW91c0hhc2hVc2VkLCBwcmV2aW91c0Rlcml2ZWRGaWVsZHM7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfZSkge1xuICAgICAgICAgICAgICAgIHVzZXIgPSBhcmdzLnVzZXI7XG4gICAgICAgICAgICAgICAgcHJlZmV0Y2hVc2VycyA9IChfYSA9IGFyZ3MucHJlZmV0Y2hVc2VycykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogW107XG4gICAgICAgICAgICAgICAgdGltZW91dCA9IChfYiA9IGFyZ3MudGltZW91dCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogdGhpcy5vcHRpb25zLmdldEluaXRUaW1lb3V0TXMoKTtcbiAgICAgICAgICAgICAgICBpZiAocHJlZmV0Y2hVc2Vycy5sZW5ndGggPiA1KSB7XG4gICAgICAgICAgICAgICAgICAgIE91dHB1dExvZ2dlcl8xLmRlZmF1bHQuaW5mbygnQ2Fubm90IHByZWZldGNoIG1vcmUgdGhhbiA1IHVzZXJzLicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBrZXllZFByZWZldGNoVXNlcnMgPSB0aGlzLm5vcm1hbGl6ZVByZWZldGNoVXNlcnMocHJlZmV0Y2hVc2VycylcbiAgICAgICAgICAgICAgICAgICAgLnNsaWNlKDAsIDUpXG4gICAgICAgICAgICAgICAgICAgIC5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgY3Vycikge1xuICAgICAgICAgICAgICAgICAgICBhY2NbKDAsIEhhc2hpbmdfMS5nZXRVc2VyQ2FjaGVLZXkpKF90aGlzLmdldFN0YWJsZUlEKCksIGN1cnIsIF90aGlzLmdldFNES0tleSgpKS52M10gPVxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycjtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgICAgICB9LCB7fSk7XG4gICAgICAgICAgICAgICAgc3RhYmxlSUQgPSBTdHJpbmcoKF9kID0gKF9jID0gdGhpcy5nZXRTdGF0c2lnTWV0YWRhdGEoKSkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLnN0YWJsZUlEKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiAnJyk7XG4gICAgICAgICAgICAgICAgc2luY2VUaW1lID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAocHJlZmV0Y2hVc2Vycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgc2luY2VUaW1lID0gdGhpcy5zdG9yZS5nZXRMYXN0VXBkYXRlVGltZSh1c2VyLCBzdGFibGVJRCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHByZXZpb3VzSGFzaFVzZWQgPSB0aGlzLnN0b3JlLmdldFByZXZpb3VzSGFzaFVzZWQodXNlciwgc3RhYmxlSUQpO1xuICAgICAgICAgICAgICAgIHByZXZpb3VzRGVyaXZlZEZpZWxkcyA9IHRoaXMuc3RvcmUuZ2V0UHJldmlvdXNEZXJpdmVkRmllbGRzKHVzZXIsIHN0YWJsZUlEKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5uZXR3b3JrXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmV0Y2hWYWx1ZXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcjogdXNlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpbmNlVGltZTogc2luY2VUaW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dDogdGltZW91dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZURlbHRhczogc2luY2VUaW1lICE9IG51bGwgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0hhc2hVc2VkID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5nZXRPcHRpb25zKCkuZ2V0RGlzYWJsZUhhc2hpbmcoKSA/ICdub25lJyA6ICdkamIyJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVmZXRjaFVzZXJzOiBwcmVmZXRjaFVzZXJzLmxlbmd0aCA+IDAgPyBrZXllZFByZWZldGNoVXNlcnMgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0Rlcml2ZWRGaWVsZHM6IHByZXZpb3VzRGVyaXZlZEZpZWxkcyxcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5ldmVudHVhbGx5KGZ1bmN0aW9uIChqc29uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISgwLCBSZXNwb25zZVZlcmlmaWNhdGlvbl8xLnZlcmlmeVNES0tleVVzZWQpKGpzb24sIChfYSA9IF90aGlzLnNka0tleSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycsIF90aGlzLmVycm9yQm91bmRhcnkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpzb24gPT09IG51bGwgfHwganNvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDoganNvbi5oYXNfdXBkYXRlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnN0b3JlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zYXZlV2l0aG91dFVwZGF0aW5nQ2xpZW50U3RhdGUodXNlciwganNvbiwgc3RhYmxlSUQsIHByZWZldGNoVXNlcnMubGVuZ3RoID4gMCA/IGtleWVkUHJlZmV0Y2hVc2VycyA6IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmVycm9yQm91bmRhcnkubG9nRXJyb3IoJ2ZldGNoQW5kU2F2ZVZhbHVlczpldmVudHVhbGx5JywgcmVhc29uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChqc29uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZXJyb3JCb3VuZGFyeS5zd2FsbG93KCdmZXRjaEFuZFNhdmVWYWx1ZXMnLCBmdW5jdGlvbiAoKSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERpYWdub3N0aWNzXzEuZGVmYXVsdC5tYXJrLmluaXRpYWxpemUucHJvY2Vzcy5zdGFydCh7fSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoMCwgUmVzcG9uc2VWZXJpZmljYXRpb25fMS52ZXJpZnlTREtLZXlVc2VkKShqc29uLCAoX2EgPSB0aGlzLnNka0tleSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycsIHRoaXMuZXJyb3JCb3VuZGFyeSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGlhZ25vc3RpY3NfMS5kZWZhdWx0Lm1hcmsuaW5pdGlhbGl6ZS5wcm9jZXNzLmVuZCh7IHN1Y2Nlc3M6IGZhbHNlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGpzb24gPT09IG51bGwgfHwganNvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDoganNvbi5oYXNfdXBkYXRlcykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuc3RvcmUuc2F2ZSh1c2VyLCBqc29uLCBzdGFibGVJRCwgcHJlZmV0Y2hVc2Vycy5sZW5ndGggPiAwID8ga2V5ZWRQcmVmZXRjaFVzZXJzIDogdW5kZWZpbmVkKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uID09PSBudWxsIHx8IGpzb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGpzb24uaXNfbm9fY29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3JlLnNldEV2YWx1YXRpb25SZWFzb24oRXZhbHVhdGlvblJlYXNvbl8xLkV2YWx1YXRpb25SZWFzb24uTmV0d29ya05vdE1vZGlmaWVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSAzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJlZmV0Y2hlZFVzZXJzQnlDYWNoZUtleSA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCB0aGlzLnByZWZldGNoZWRVc2Vyc0J5Q2FjaGVLZXkpLCBrZXllZFByZWZldGNoVXNlcnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERpYWdub3N0aWNzXzEuZGVmYXVsdC5tYXJrLmluaXRpYWxpemUucHJvY2Vzcy5lbmQoeyBzdWNjZXNzOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7IH0pO1xuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBTdGF0c2lnQ2xpZW50LnByb3RvdHlwZS5jaGVja0dhdGVJbXBsID0gZnVuY3Rpb24gKGdhdGVOYW1lLCBpZ25vcmVPdmVycmlkZXMpIHtcbiAgICAgICAgdGhpcy5lbnN1cmVTdG9yZUxvYWRlZCgpO1xuICAgICAgICBpZiAodHlwZW9mIGdhdGVOYW1lICE9PSAnc3RyaW5nJyB8fCBnYXRlTmFtZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcnNfMS5TdGF0c2lnSW52YWxpZEFyZ3VtZW50RXJyb3IoJ011c3QgcGFzcyBhIHZhbGlkIHN0cmluZyBhcyB0aGUgZ2F0ZU5hbWUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc3RvcmUuY2hlY2tHYXRlKGdhdGVOYW1lLCBpZ25vcmVPdmVycmlkZXMpO1xuICAgIH07XG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUubG9nR2F0ZUV4cG9zdXJlSW1wbCA9IGZ1bmN0aW9uIChnYXRlTmFtZSwgZmV0Y2hSZXN1bHQpIHtcbiAgICAgICAgdmFyIGlzTWFudWFsRXhwb3N1cmUgPSAhZmV0Y2hSZXN1bHQ7XG4gICAgICAgIHZhciByZXN1bHQgPSBmZXRjaFJlc3VsdCAhPT0gbnVsbCAmJiBmZXRjaFJlc3VsdCAhPT0gdm9pZCAwID8gZmV0Y2hSZXN1bHQgOiB0aGlzLmNoZWNrR2F0ZUltcGwoZ2F0ZU5hbWUsIGZhbHNlKTtcbiAgICAgICAgdmFyIGdhdGUgPSByZXN1bHQuZ2F0ZTtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nR2F0ZUV4cG9zdXJlKHRoaXMuZ2V0Q3VycmVudFVzZXIoKSwgZ2F0ZU5hbWUsIGdhdGUudmFsdWUsIGdhdGUucnVsZV9pZCwgZ2F0ZS5zZWNvbmRhcnlfZXhwb3N1cmVzLCByZXN1bHQuZXZhbHVhdGlvbkRldGFpbHMsIGlzTWFudWFsRXhwb3N1cmUpO1xuICAgIH07XG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUuZ2V0Q29uZmlnSW1wbCA9IGZ1bmN0aW9uIChjb25maWdOYW1lLCBpZ25vcmVPdmVycmlkZXMpIHtcbiAgICAgICAgdGhpcy5lbnN1cmVTdG9yZUxvYWRlZCgpO1xuICAgICAgICBpZiAodHlwZW9mIGNvbmZpZ05hbWUgIT09ICdzdHJpbmcnIHx8IGNvbmZpZ05hbWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3JzXzEuU3RhdHNpZ0ludmFsaWRBcmd1bWVudEVycm9yKCdNdXN0IHBhc3MgYSB2YWxpZCBzdHJpbmcgYXMgdGhlIGNvbmZpZ05hbWUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc3RvcmUuZ2V0Q29uZmlnKGNvbmZpZ05hbWUsIGlnbm9yZU92ZXJyaWRlcyk7XG4gICAgfTtcbiAgICBTdGF0c2lnQ2xpZW50LnByb3RvdHlwZS5sb2dDb25maWdFeHBvc3VyZUltcGwgPSBmdW5jdGlvbiAoY29uZmlnTmFtZSwgY29uZmlnKSB7XG4gICAgICAgIHZhciBpc01hbnVhbEV4cG9zdXJlID0gIWNvbmZpZztcbiAgICAgICAgdmFyIGxvY2FsQ29uZmlnID0gY29uZmlnICE9PSBudWxsICYmIGNvbmZpZyAhPT0gdm9pZCAwID8gY29uZmlnIDogdGhpcy5nZXRDb25maWdJbXBsKGNvbmZpZ05hbWUsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nQ29uZmlnRXhwb3N1cmUodGhpcy5nZXRDdXJyZW50VXNlcigpLCBjb25maWdOYW1lLCBsb2NhbENvbmZpZy5nZXRSdWxlSUQoKSwgbG9jYWxDb25maWcuX2dldFNlY29uZGFyeUV4cG9zdXJlcygpLCBsb2NhbENvbmZpZy5nZXRFdmFsdWF0aW9uRGV0YWlscygpLCBpc01hbnVhbEV4cG9zdXJlKTtcbiAgICB9O1xuICAgIFN0YXRzaWdDbGllbnQucHJvdG90eXBlLmdldEV4cGVyaW1lbnRJbXBsID0gZnVuY3Rpb24gKGV4cGVyaW1lbnROYW1lLCBrZWVwRGV2aWNlVmFsdWUsIGlnbm9yZU92ZXJyaWRlcykge1xuICAgICAgICB0aGlzLmVuc3VyZVN0b3JlTG9hZGVkKCk7XG4gICAgICAgIGlmICh0eXBlb2YgZXhwZXJpbWVudE5hbWUgIT09ICdzdHJpbmcnIHx8IGV4cGVyaW1lbnROYW1lLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yc18xLlN0YXRzaWdJbnZhbGlkQXJndW1lbnRFcnJvcignTXVzdCBwYXNzIGEgdmFsaWQgc3RyaW5nIGFzIHRoZSBleHBlcmltZW50TmFtZS4nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5zdG9yZS5nZXRFeHBlcmltZW50KGV4cGVyaW1lbnROYW1lLCBrZWVwRGV2aWNlVmFsdWUsIGlnbm9yZU92ZXJyaWRlcyk7XG4gICAgfTtcbiAgICBTdGF0c2lnQ2xpZW50LnByb3RvdHlwZS5sb2dFeHBlcmltZW50RXhwb3N1cmVJbXBsID0gZnVuY3Rpb24gKGV4cGVyaW1lbnROYW1lLCBrZWVwRGV2aWNlVmFsdWUsIGNvbmZpZykge1xuICAgICAgICB2YXIgaXNNYW51YWxFeHBvc3VyZSA9ICFjb25maWc7XG4gICAgICAgIHZhciBsb2NhbENvbmZpZyA9IGNvbmZpZyAhPT0gbnVsbCAmJiBjb25maWcgIT09IHZvaWQgMCA/IGNvbmZpZyA6IHRoaXMuZ2V0RXhwZXJpbWVudEltcGwoZXhwZXJpbWVudE5hbWUsIGtlZXBEZXZpY2VWYWx1ZSwgZmFsc2UpO1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2dDb25maWdFeHBvc3VyZSh0aGlzLmdldEN1cnJlbnRVc2VyKCksIGV4cGVyaW1lbnROYW1lLCBsb2NhbENvbmZpZy5nZXRSdWxlSUQoKSwgbG9jYWxDb25maWcuX2dldFNlY29uZGFyeUV4cG9zdXJlcygpLCBsb2NhbENvbmZpZy5nZXRFdmFsdWF0aW9uRGV0YWlscygpLCBpc01hbnVhbEV4cG9zdXJlKTtcbiAgICB9O1xuICAgIFN0YXRzaWdDbGllbnQucHJvdG90eXBlLmdldExheWVySW1wbCA9IGZ1bmN0aW9uIChsb2dQYXJhbWV0ZXJGdW5jdGlvbiwgbGF5ZXJOYW1lLCBrZWVwRGV2aWNlVmFsdWUpIHtcbiAgICAgICAgdGhpcy5lbnN1cmVTdG9yZUxvYWRlZCgpO1xuICAgICAgICBpZiAodHlwZW9mIGxheWVyTmFtZSAhPT0gJ3N0cmluZycgfHwgbGF5ZXJOYW1lLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yc18xLlN0YXRzaWdJbnZhbGlkQXJndW1lbnRFcnJvcignTXVzdCBwYXNzIGEgdmFsaWQgc3RyaW5nIGFzIHRoZSBsYXllck5hbWUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc3RvcmUuZ2V0TGF5ZXIobG9nUGFyYW1ldGVyRnVuY3Rpb24sIGxheWVyTmFtZSwga2VlcERldmljZVZhbHVlKTtcbiAgICB9O1xuICAgIFN0YXRzaWdDbGllbnQucHJvdG90eXBlLmdldEVtcHR5Q29uZmlnID0gZnVuY3Rpb24gKGNvbmZpZ05hbWUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEeW5hbWljQ29uZmlnXzEuZGVmYXVsdChjb25maWdOYW1lLCB7fSwgJycsIHRoaXMuZ2V0RXZhbHV0aW9uRGV0YWlsc0ZvckVycm9yKCkpO1xuICAgIH07XG4gICAgU3RhdHNpZ0NsaWVudC5wcm90b3R5cGUuZmlyZUFuZEZvcmdldFByZWZlY2hVc2VycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5wcmVmZXRjaFVzZXJzKHRoaXMub3B0aW9ucy5nZXRQcmVmZXRjaFVzZXJzKCkpLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8qIG5vb3AgKi9cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3RhdHNpZ0NsaWVudDtcbn0oKSk7XG5leHBvcnRzLmRlZmF1bHQgPSBTdGF0c2lnQ2xpZW50O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/statsig-js/dist/StatsigClient.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/statsig-js/dist/StatsigIdentity.js":
/*!*********************************************************!*\
  !*** ./node_modules/statsig-js/dist/StatsigIdentity.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar uuid_1 = __webpack_require__(/*! uuid */ \"(ssr)/./node_modules/uuid/dist/esm-node/index.js\");\nvar SDKVersion_1 = __webpack_require__(/*! ./SDKVersion */ \"(ssr)/./node_modules/statsig-js/dist/SDKVersion.js\");\nvar Constants_1 = __webpack_require__(/*! ./utils/Constants */ \"(ssr)/./node_modules/statsig-js/dist/utils/Constants.js\");\nvar StatsigAsyncStorage_1 = __importDefault(__webpack_require__(/*! ./utils/StatsigAsyncStorage */ \"(ssr)/./node_modules/statsig-js/dist/utils/StatsigAsyncStorage.js\"));\nvar StatsigLocalStorage_1 = __importDefault(__webpack_require__(/*! ./utils/StatsigLocalStorage */ \"(ssr)/./node_modules/statsig-js/dist/utils/StatsigLocalStorage.js\"));\nvar Identity = /** @class */ (function () {\n    function Identity(user, overrideStableID, reactNativeUUID) {\n        var _a;\n        this.platform = null;\n        this.nativeModules = null;\n        this.sdkType = 'js-client';\n        this.reactNativeUUID = reactNativeUUID;\n        this.user = user;\n        this.sdkVersion = SDKVersion_1.version;\n        this.statsigMetadata = {\n            sdkType: this.sdkType,\n            sdkVersion: this.sdkVersion,\n        };\n        var stableID = overrideStableID;\n        if (!StatsigAsyncStorage_1.default.asyncStorage) {\n            stableID =\n                (_a = stableID !== null && stableID !== void 0 ? stableID : StatsigLocalStorage_1.default.getItem(Constants_1.STATSIG_STABLE_ID_KEY)) !== null && _a !== void 0 ? _a : this.getUUID();\n        }\n        if (stableID) {\n            this.statsigMetadata.stableID = stableID;\n        }\n    }\n    Identity.prototype.saveStableID = function () {\n        if (this.statsigMetadata.stableID != null) {\n            StatsigLocalStorage_1.default.setItem(Constants_1.STATSIG_STABLE_ID_KEY, this.statsigMetadata.stableID);\n        }\n    };\n    Identity.prototype.initAsync = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var stableID;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        stableID = this.statsigMetadata.stableID;\n                        if (!!stableID) return [3 /*break*/, 2];\n                        return [4 /*yield*/, StatsigAsyncStorage_1.default.getItemAsync(Constants_1.STATSIG_STABLE_ID_KEY)];\n                    case 1:\n                        stableID = _a.sent();\n                        stableID = stableID !== null && stableID !== void 0 ? stableID : this.getUUID();\n                        _a.label = 2;\n                    case 2:\n                        this.statsigMetadata.stableID = stableID;\n                        StatsigAsyncStorage_1.default.setItemAsync(Constants_1.STATSIG_STABLE_ID_KEY, stableID).catch(function () {\n                            //noop\n                        });\n                        return [2 /*return*/, this];\n                }\n            });\n        });\n    };\n    Identity.prototype.getSDKType = function () {\n        return this.sdkType;\n    };\n    Identity.prototype.getSDKVersion = function () {\n        return this.sdkVersion;\n    };\n    Identity.prototype.getStatsigMetadata = function () {\n        this.statsigMetadata.sdkType = this.sdkType;\n        this.statsigMetadata.sdkVersion = this.sdkVersion;\n        return this.statsigMetadata;\n    };\n    Identity.prototype.getUser = function () {\n        return this.user;\n    };\n    Identity.prototype.updateUser = function (user) {\n        this.user = user;\n    };\n    Identity.prototype.setSDKPackageInfo = function (SDKPackageInfo) {\n        this.sdkType = SDKPackageInfo.sdkType;\n        this.sdkVersion = SDKPackageInfo.sdkVersion;\n    };\n    Identity.prototype.setPlatform = function (platform) {\n        this.platform = platform;\n        this.updateMetadataFromNativeModules();\n    };\n    Identity.prototype.setNativeModules = function (nativeModules) {\n        this.nativeModules = nativeModules;\n        this.updateMetadataFromNativeModules();\n    };\n    Identity.prototype.updateMetadataFromNativeModules = function () {\n        var _a, _b, _c, _d, _e, _f, _g;\n        if (this.platform == null || this.nativeModules == null) {\n            return;\n        }\n        if (((_a = this.platform.OS) === null || _a === void 0 ? void 0 : _a.toLocaleLowerCase()) === 'android') {\n            this.statsigMetadata.locale =\n                (_b = this.nativeModules.I18nManager) === null || _b === void 0 ? void 0 : _b.localeIdentifier;\n        }\n        else if (((_c = this.platform.OS) === null || _c === void 0 ? void 0 : _c.toLocaleLowerCase()) === 'ios') {\n            this.statsigMetadata.locale =\n                ((_e = (_d = this.nativeModules.SettingsManager) === null || _d === void 0 ? void 0 : _d.settings) === null || _e === void 0 ? void 0 : _e.AppleLocale) ||\n                    ((_g = (_f = this.nativeModules.SettingsManager) === null || _f === void 0 ? void 0 : _f.settings) === null || _g === void 0 ? void 0 : _g.AppleLanguages[0]);\n        }\n    };\n    Identity.prototype.getUUID = function () {\n        var _a, _b;\n        return (_b = (_a = this.reactNativeUUID) === null || _a === void 0 ? void 0 : _a.v4()) !== null && _b !== void 0 ? _b : (0, uuid_1.v4)();\n    };\n    Identity.prototype.setRNDeviceInfo = function (deviceInfo) {\n        var _a, _b, _c, _d, _e;\n        this.statsigMetadata.appVersion = (_a = deviceInfo.getVersion()) !== null && _a !== void 0 ? _a : ''; // e.g. 1.0.1\n        this.statsigMetadata.systemVersion = (_b = deviceInfo.getSystemVersion()) !== null && _b !== void 0 ? _b : ''; // Android: \"4.0.3\"; iOS: \"12.3.1\"\n        this.statsigMetadata.systemName = (_c = deviceInfo.getSystemName()) !== null && _c !== void 0 ? _c : ''; // e.g. Android, iOS, iPadOS\n        this.statsigMetadata.deviceModelName = (_d = deviceInfo.getModel()) !== null && _d !== void 0 ? _d : ''; // e.g. Pixel 2, iPhone XS\n        this.statsigMetadata.deviceModel = (_e = deviceInfo.getDeviceId()) !== null && _e !== void 0 ? _e : ''; // e.g. iPhone7,2\n    };\n    Identity.prototype.setExpoConstants = function (expoConstants) {\n        var _a, _b;\n        this.statsigMetadata.appVersion =\n            (_b = (_a = expoConstants.nativeAppVersion) !== null && _a !== void 0 ? _a : expoConstants.nativeBuildVersion) !== null && _b !== void 0 ? _b : ''; // e.g. 1.0.1\n    };\n    Identity.prototype.setExpoDevice = function (expoDevice) {\n        var _a, _b, _c, _d;\n        this.statsigMetadata.systemVersion = (_a = expoDevice.osVersion) !== null && _a !== void 0 ? _a : ''; // Android: \"4.0.3\"; iOS: \"12.3.1\"\n        this.statsigMetadata.systemName = (_b = expoDevice.osName) !== null && _b !== void 0 ? _b : ''; // e.g. Android, iOS, iPadOS\n        this.statsigMetadata.deviceModelName = (_c = expoDevice.modelName) !== null && _c !== void 0 ? _c : ''; // e.g. Pixel 2, iPhone XS\n        this.statsigMetadata.deviceModel = (_d = expoDevice.modelId) !== null && _d !== void 0 ? _d : ''; // e.g. iPhone7,2\n    };\n    return Identity;\n}());\nexports[\"default\"] = Identity;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L1N0YXRzaWdJZGVudGl0eS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsNEJBQTRCLCtEQUErRCxpQkFBaUI7QUFDNUc7QUFDQSxvQ0FBb0MsTUFBTSwrQkFBK0IsWUFBWTtBQUNyRixtQ0FBbUMsTUFBTSxtQ0FBbUMsWUFBWTtBQUN4RixnQ0FBZ0M7QUFDaEM7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGNBQWMsNkJBQTZCLDBCQUEwQixjQUFjLHFCQUFxQjtBQUN4RyxpQkFBaUIsb0RBQW9ELHFFQUFxRSxjQUFjO0FBQ3hKLHVCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDLG1DQUFtQyxTQUFTO0FBQzVDLG1DQUFtQyxXQUFXLFVBQVU7QUFDeEQsMENBQTBDLGNBQWM7QUFDeEQ7QUFDQSw4R0FBOEcsT0FBTztBQUNySCxpRkFBaUYsaUJBQWlCO0FBQ2xHLHlEQUF5RCxnQkFBZ0IsUUFBUTtBQUNqRiwrQ0FBK0MsZ0JBQWdCLGdCQUFnQjtBQUMvRTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0EsVUFBVSxZQUFZLGFBQWEsU0FBUyxVQUFVO0FBQ3RELG9DQUFvQyxTQUFTO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxhQUFhLG1CQUFPLENBQUMsOERBQU07QUFDM0IsbUJBQW1CLG1CQUFPLENBQUMsd0VBQWM7QUFDekMsa0JBQWtCLG1CQUFPLENBQUMsa0ZBQW1CO0FBQzdDLDRDQUE0QyxtQkFBTyxDQUFDLHNHQUE2QjtBQUNqRiw0Q0FBNEMsbUJBQU8sQ0FBQyxzR0FBNkI7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4R0FBOEc7QUFDOUcsdUhBQXVILHFCQUFxQjtBQUM1SSxpSEFBaUg7QUFDakgsaUhBQWlIO0FBQ2pILGdIQUFnSDtBQUNoSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdLQUFnSztBQUNoSztBQUNBO0FBQ0E7QUFDQSw4R0FBOEcscUJBQXFCO0FBQ25JLHdHQUF3RztBQUN4RyxnSEFBZ0g7QUFDaEgsMEdBQTBHO0FBQzFHO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsa0JBQWUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbWF6b24tZnJlc2gtZGVtby8uL25vZGVfbW9kdWxlcy9zdGF0c2lnLWpzL2Rpc3QvU3RhdHNpZ0lkZW50aXR5LmpzPzY3NjMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcbiAgICAgICAgd2hpbGUgKGcgJiYgKGcgPSAwLCBvcFswXSAmJiAoXyA9IDApKSwgXykgdHJ5IHtcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xuICAgIH1cbn07XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgdXVpZF8xID0gcmVxdWlyZShcInV1aWRcIik7XG52YXIgU0RLVmVyc2lvbl8xID0gcmVxdWlyZShcIi4vU0RLVmVyc2lvblwiKTtcbnZhciBDb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuL3V0aWxzL0NvbnN0YW50c1wiKTtcbnZhciBTdGF0c2lnQXN5bmNTdG9yYWdlXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vdXRpbHMvU3RhdHNpZ0FzeW5jU3RvcmFnZVwiKSk7XG52YXIgU3RhdHNpZ0xvY2FsU3RvcmFnZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL3V0aWxzL1N0YXRzaWdMb2NhbFN0b3JhZ2VcIikpO1xudmFyIElkZW50aXR5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIElkZW50aXR5KHVzZXIsIG92ZXJyaWRlU3RhYmxlSUQsIHJlYWN0TmF0aXZlVVVJRCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHRoaXMucGxhdGZvcm0gPSBudWxsO1xuICAgICAgICB0aGlzLm5hdGl2ZU1vZHVsZXMgPSBudWxsO1xuICAgICAgICB0aGlzLnNka1R5cGUgPSAnanMtY2xpZW50JztcbiAgICAgICAgdGhpcy5yZWFjdE5hdGl2ZVVVSUQgPSByZWFjdE5hdGl2ZVVVSUQ7XG4gICAgICAgIHRoaXMudXNlciA9IHVzZXI7XG4gICAgICAgIHRoaXMuc2RrVmVyc2lvbiA9IFNES1ZlcnNpb25fMS52ZXJzaW9uO1xuICAgICAgICB0aGlzLnN0YXRzaWdNZXRhZGF0YSA9IHtcbiAgICAgICAgICAgIHNka1R5cGU6IHRoaXMuc2RrVHlwZSxcbiAgICAgICAgICAgIHNka1ZlcnNpb246IHRoaXMuc2RrVmVyc2lvbixcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHN0YWJsZUlEID0gb3ZlcnJpZGVTdGFibGVJRDtcbiAgICAgICAgaWYgKCFTdGF0c2lnQXN5bmNTdG9yYWdlXzEuZGVmYXVsdC5hc3luY1N0b3JhZ2UpIHtcbiAgICAgICAgICAgIHN0YWJsZUlEID1cbiAgICAgICAgICAgICAgICAoX2EgPSBzdGFibGVJRCAhPT0gbnVsbCAmJiBzdGFibGVJRCAhPT0gdm9pZCAwID8gc3RhYmxlSUQgOiBTdGF0c2lnTG9jYWxTdG9yYWdlXzEuZGVmYXVsdC5nZXRJdGVtKENvbnN0YW50c18xLlNUQVRTSUdfU1RBQkxFX0lEX0tFWSkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHRoaXMuZ2V0VVVJRCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGFibGVJRCkge1xuICAgICAgICAgICAgdGhpcy5zdGF0c2lnTWV0YWRhdGEuc3RhYmxlSUQgPSBzdGFibGVJRDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBJZGVudGl0eS5wcm90b3R5cGUuc2F2ZVN0YWJsZUlEID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0c2lnTWV0YWRhdGEuc3RhYmxlSUQgIT0gbnVsbCkge1xuICAgICAgICAgICAgU3RhdHNpZ0xvY2FsU3RvcmFnZV8xLmRlZmF1bHQuc2V0SXRlbShDb25zdGFudHNfMS5TVEFUU0lHX1NUQUJMRV9JRF9LRVksIHRoaXMuc3RhdHNpZ01ldGFkYXRhLnN0YWJsZUlEKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgSWRlbnRpdHkucHJvdG90eXBlLmluaXRBc3luYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHN0YWJsZUlEO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhYmxlSUQgPSB0aGlzLnN0YXRzaWdNZXRhZGF0YS5zdGFibGVJRDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXN0YWJsZUlEKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFN0YXRzaWdBc3luY1N0b3JhZ2VfMS5kZWZhdWx0LmdldEl0ZW1Bc3luYyhDb25zdGFudHNfMS5TVEFUU0lHX1NUQUJMRV9JRF9LRVkpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhYmxlSUQgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFibGVJRCA9IHN0YWJsZUlEICE9PSBudWxsICYmIHN0YWJsZUlEICE9PSB2b2lkIDAgPyBzdGFibGVJRCA6IHRoaXMuZ2V0VVVJRCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRzaWdNZXRhZGF0YS5zdGFibGVJRCA9IHN0YWJsZUlEO1xuICAgICAgICAgICAgICAgICAgICAgICAgU3RhdHNpZ0FzeW5jU3RvcmFnZV8xLmRlZmF1bHQuc2V0SXRlbUFzeW5jKENvbnN0YW50c18xLlNUQVRTSUdfU1RBQkxFX0lEX0tFWSwgc3RhYmxlSUQpLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL25vb3BcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXNdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIElkZW50aXR5LnByb3RvdHlwZS5nZXRTREtUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZGtUeXBlO1xuICAgIH07XG4gICAgSWRlbnRpdHkucHJvdG90eXBlLmdldFNES1ZlcnNpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNka1ZlcnNpb247XG4gICAgfTtcbiAgICBJZGVudGl0eS5wcm90b3R5cGUuZ2V0U3RhdHNpZ01ldGFkYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnN0YXRzaWdNZXRhZGF0YS5zZGtUeXBlID0gdGhpcy5zZGtUeXBlO1xuICAgICAgICB0aGlzLnN0YXRzaWdNZXRhZGF0YS5zZGtWZXJzaW9uID0gdGhpcy5zZGtWZXJzaW9uO1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0c2lnTWV0YWRhdGE7XG4gICAgfTtcbiAgICBJZGVudGl0eS5wcm90b3R5cGUuZ2V0VXNlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXNlcjtcbiAgICB9O1xuICAgIElkZW50aXR5LnByb3RvdHlwZS51cGRhdGVVc2VyID0gZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgdGhpcy51c2VyID0gdXNlcjtcbiAgICB9O1xuICAgIElkZW50aXR5LnByb3RvdHlwZS5zZXRTREtQYWNrYWdlSW5mbyA9IGZ1bmN0aW9uIChTREtQYWNrYWdlSW5mbykge1xuICAgICAgICB0aGlzLnNka1R5cGUgPSBTREtQYWNrYWdlSW5mby5zZGtUeXBlO1xuICAgICAgICB0aGlzLnNka1ZlcnNpb24gPSBTREtQYWNrYWdlSW5mby5zZGtWZXJzaW9uO1xuICAgIH07XG4gICAgSWRlbnRpdHkucHJvdG90eXBlLnNldFBsYXRmb3JtID0gZnVuY3Rpb24gKHBsYXRmb3JtKSB7XG4gICAgICAgIHRoaXMucGxhdGZvcm0gPSBwbGF0Zm9ybTtcbiAgICAgICAgdGhpcy51cGRhdGVNZXRhZGF0YUZyb21OYXRpdmVNb2R1bGVzKCk7XG4gICAgfTtcbiAgICBJZGVudGl0eS5wcm90b3R5cGUuc2V0TmF0aXZlTW9kdWxlcyA9IGZ1bmN0aW9uIChuYXRpdmVNb2R1bGVzKSB7XG4gICAgICAgIHRoaXMubmF0aXZlTW9kdWxlcyA9IG5hdGl2ZU1vZHVsZXM7XG4gICAgICAgIHRoaXMudXBkYXRlTWV0YWRhdGFGcm9tTmF0aXZlTW9kdWxlcygpO1xuICAgIH07XG4gICAgSWRlbnRpdHkucHJvdG90eXBlLnVwZGF0ZU1ldGFkYXRhRnJvbU5hdGl2ZU1vZHVsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZztcbiAgICAgICAgaWYgKHRoaXMucGxhdGZvcm0gPT0gbnVsbCB8fCB0aGlzLm5hdGl2ZU1vZHVsZXMgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoKF9hID0gdGhpcy5wbGF0Zm9ybS5PUykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnRvTG9jYWxlTG93ZXJDYXNlKCkpID09PSAnYW5kcm9pZCcpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdHNpZ01ldGFkYXRhLmxvY2FsZSA9XG4gICAgICAgICAgICAgICAgKF9iID0gdGhpcy5uYXRpdmVNb2R1bGVzLkkxOG5NYW5hZ2VyKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IubG9jYWxlSWRlbnRpZmllcjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgoKF9jID0gdGhpcy5wbGF0Zm9ybS5PUykgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLnRvTG9jYWxlTG93ZXJDYXNlKCkpID09PSAnaW9zJykge1xuICAgICAgICAgICAgdGhpcy5zdGF0c2lnTWV0YWRhdGEubG9jYWxlID1cbiAgICAgICAgICAgICAgICAoKF9lID0gKF9kID0gdGhpcy5uYXRpdmVNb2R1bGVzLlNldHRpbmdzTWFuYWdlcikgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLnNldHRpbmdzKSA9PT0gbnVsbCB8fCBfZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2UuQXBwbGVMb2NhbGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICgoX2cgPSAoX2YgPSB0aGlzLm5hdGl2ZU1vZHVsZXMuU2V0dGluZ3NNYW5hZ2VyKSA9PT0gbnVsbCB8fCBfZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Yuc2V0dGluZ3MpID09PSBudWxsIHx8IF9nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZy5BcHBsZUxhbmd1YWdlc1swXSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIElkZW50aXR5LnByb3RvdHlwZS5nZXRVVUlEID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICByZXR1cm4gKF9iID0gKF9hID0gdGhpcy5yZWFjdE5hdGl2ZVVVSUQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS52NCgpKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAoMCwgdXVpZF8xLnY0KSgpO1xuICAgIH07XG4gICAgSWRlbnRpdHkucHJvdG90eXBlLnNldFJORGV2aWNlSW5mbyA9IGZ1bmN0aW9uIChkZXZpY2VJbmZvKSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2U7XG4gICAgICAgIHRoaXMuc3RhdHNpZ01ldGFkYXRhLmFwcFZlcnNpb24gPSAoX2EgPSBkZXZpY2VJbmZvLmdldFZlcnNpb24oKSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJyc7IC8vIGUuZy4gMS4wLjFcbiAgICAgICAgdGhpcy5zdGF0c2lnTWV0YWRhdGEuc3lzdGVtVmVyc2lvbiA9IChfYiA9IGRldmljZUluZm8uZ2V0U3lzdGVtVmVyc2lvbigpKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAnJzsgLy8gQW5kcm9pZDogXCI0LjAuM1wiOyBpT1M6IFwiMTIuMy4xXCJcbiAgICAgICAgdGhpcy5zdGF0c2lnTWV0YWRhdGEuc3lzdGVtTmFtZSA9IChfYyA9IGRldmljZUluZm8uZ2V0U3lzdGVtTmFtZSgpKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiAnJzsgLy8gZS5nLiBBbmRyb2lkLCBpT1MsIGlQYWRPU1xuICAgICAgICB0aGlzLnN0YXRzaWdNZXRhZGF0YS5kZXZpY2VNb2RlbE5hbWUgPSAoX2QgPSBkZXZpY2VJbmZvLmdldE1vZGVsKCkpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6ICcnOyAvLyBlLmcuIFBpeGVsIDIsIGlQaG9uZSBYU1xuICAgICAgICB0aGlzLnN0YXRzaWdNZXRhZGF0YS5kZXZpY2VNb2RlbCA9IChfZSA9IGRldmljZUluZm8uZ2V0RGV2aWNlSWQoKSkgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogJyc7IC8vIGUuZy4gaVBob25lNywyXG4gICAgfTtcbiAgICBJZGVudGl0eS5wcm90b3R5cGUuc2V0RXhwb0NvbnN0YW50cyA9IGZ1bmN0aW9uIChleHBvQ29uc3RhbnRzKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHRoaXMuc3RhdHNpZ01ldGFkYXRhLmFwcFZlcnNpb24gPVxuICAgICAgICAgICAgKF9iID0gKF9hID0gZXhwb0NvbnN0YW50cy5uYXRpdmVBcHBWZXJzaW9uKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBleHBvQ29uc3RhbnRzLm5hdGl2ZUJ1aWxkVmVyc2lvbikgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogJyc7IC8vIGUuZy4gMS4wLjFcbiAgICB9O1xuICAgIElkZW50aXR5LnByb3RvdHlwZS5zZXRFeHBvRGV2aWNlID0gZnVuY3Rpb24gKGV4cG9EZXZpY2UpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgICAgICB0aGlzLnN0YXRzaWdNZXRhZGF0YS5zeXN0ZW1WZXJzaW9uID0gKF9hID0gZXhwb0RldmljZS5vc1ZlcnNpb24pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnOyAvLyBBbmRyb2lkOiBcIjQuMC4zXCI7IGlPUzogXCIxMi4zLjFcIlxuICAgICAgICB0aGlzLnN0YXRzaWdNZXRhZGF0YS5zeXN0ZW1OYW1lID0gKF9iID0gZXhwb0RldmljZS5vc05hbWUpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6ICcnOyAvLyBlLmcuIEFuZHJvaWQsIGlPUywgaVBhZE9TXG4gICAgICAgIHRoaXMuc3RhdHNpZ01ldGFkYXRhLmRldmljZU1vZGVsTmFtZSA9IChfYyA9IGV4cG9EZXZpY2UubW9kZWxOYW1lKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiAnJzsgLy8gZS5nLiBQaXhlbCAyLCBpUGhvbmUgWFNcbiAgICAgICAgdGhpcy5zdGF0c2lnTWV0YWRhdGEuZGV2aWNlTW9kZWwgPSAoX2QgPSBleHBvRGV2aWNlLm1vZGVsSWQpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6ICcnOyAvLyBlLmcuIGlQaG9uZTcsMlxuICAgIH07XG4gICAgcmV0dXJuIElkZW50aXR5O1xufSgpKTtcbmV4cG9ydHMuZGVmYXVsdCA9IElkZW50aXR5O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/statsig-js/dist/StatsigIdentity.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/statsig-js/dist/StatsigLogger.js":
/*!*******************************************************!*\
  !*** ./node_modules/statsig-js/dist/StatsigLogger.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar uuid_1 = __webpack_require__(/*! uuid */ \"(ssr)/./node_modules/uuid/dist/esm-node/index.js\");\nvar LogEvent_1 = __importDefault(__webpack_require__(/*! ./LogEvent */ \"(ssr)/./node_modules/statsig-js/dist/LogEvent.js\"));\nvar StatsigNetwork_1 = __webpack_require__(/*! ./StatsigNetwork */ \"(ssr)/./node_modules/statsig-js/dist/StatsigNetwork.js\");\nvar Constants_1 = __webpack_require__(/*! ./utils/Constants */ \"(ssr)/./node_modules/statsig-js/dist/utils/Constants.js\");\nvar Diagnostics_1 = __importDefault(__webpack_require__(/*! ./utils/Diagnostics */ \"(ssr)/./node_modules/statsig-js/dist/utils/Diagnostics.js\"));\nvar OutputLogger_1 = __importDefault(__webpack_require__(/*! ./utils/OutputLogger */ \"(ssr)/./node_modules/statsig-js/dist/utils/OutputLogger.js\"));\nvar StatsigAsyncStorage_1 = __importDefault(__webpack_require__(/*! ./utils/StatsigAsyncStorage */ \"(ssr)/./node_modules/statsig-js/dist/utils/StatsigAsyncStorage.js\"));\nvar StatsigLocalStorage_1 = __importDefault(__webpack_require__(/*! ./utils/StatsigLocalStorage */ \"(ssr)/./node_modules/statsig-js/dist/utils/StatsigLocalStorage.js\"));\nvar INTERNAL_EVENT_PREFIX = 'statsig::';\nvar CONFIG_EXPOSURE_EVENT = INTERNAL_EVENT_PREFIX + 'config_exposure';\nvar LAYER_EXPOSURE_EVENT = INTERNAL_EVENT_PREFIX + 'layer_exposure';\nvar GATE_EXPOSURE_EVENT = INTERNAL_EVENT_PREFIX + 'gate_exposure';\nvar LOG_FAILURE_EVENT = INTERNAL_EVENT_PREFIX + 'log_event_failed';\nvar APP_ERROR_EVENT = INTERNAL_EVENT_PREFIX + 'app_error';\nvar APP_METRICS_PAGE_LOAD_EVENT = INTERNAL_EVENT_PREFIX + 'app_metrics::page_load_time';\nvar APP_METRICS_DOM_INTERACTIVE_EVENT = INTERNAL_EVENT_PREFIX + 'app_metrics::dom_interactive_time';\nvar APP_METRICS_SCROLL_DEPTH_EVENT = INTERNAL_EVENT_PREFIX + 'app_metrics::scroll_depth';\nvar APP_METRICS_SESSION_LENGTH_EVENT = INTERNAL_EVENT_PREFIX + 'app_metrics::time_on_page_ms';\nvar DIAGNOSTICS_EVENT = INTERNAL_EVENT_PREFIX + 'diagnostics';\nvar DEFAULT_VALUE_WARNING = INTERNAL_EVENT_PREFIX + 'default_value_type_mismatch';\nvar NON_EXPOSED_CHECKS_EVENT = INTERNAL_EVENT_PREFIX + 'non_exposed_checks';\nvar MS_RETRY_LOGS_CUTOFF = 5 * 24 * 60 * 60 * 1000;\nvar MAX_BATCHES_TO_RETRY = 100;\nvar MAX_FAILED_EVENTS = 1000;\nvar MAX_LOCAL_STORAGE_SIZE = 1024 * MAX_FAILED_EVENTS;\nvar MAX_ERRORS_TO_LOG = 10;\nvar StatsigLogger = /** @class */ (function () {\n    function StatsigLogger(sdkInternal) {\n        this.failedLogEventCount = 0;\n        this.debugInfo = undefined;\n        this.sdkInternal = sdkInternal;\n        this.queue = [];\n        this.nonExposedChecks = {};\n        this.flushInterval = null;\n        this.loggedErrors = new Set();\n        this.failedLogEvents = [];\n        this.exposureDedupeKeys = {};\n        this.failedLogEventCount = 0;\n        this.init();\n    }\n    StatsigLogger.prototype.init = function () {\n        var _this = this;\n        if (typeof window !== 'undefined' &&\n            typeof window.addEventListener === 'function') {\n            window.addEventListener('blur', function () { return _this.flush(true); });\n            window.addEventListener('beforeunload', function () { return _this.flush(true); });\n            window.addEventListener('load', function () {\n                setTimeout(function () { return _this.flush(); }, 100);\n                setTimeout(function () { return _this.flush(); }, 1000);\n            });\n        }\n        if (typeof document !== 'undefined' &&\n            typeof document.addEventListener === 'function') {\n            document.addEventListener('visibilitychange', function () {\n                _this.flush(document.visibilityState !== 'visible');\n            });\n        }\n        if (!this.sdkInternal.getOptions().getIgnoreWindowUndefined() &&\n            (typeof window === 'undefined' || window == null)) {\n            // dont set the flush interval outside of client browser environments\n            return;\n        }\n        if (this.sdkInternal.getOptions().getLocalModeEnabled()) {\n            // unnecessary interval in local mode since logs dont flush anyway\n            return;\n        }\n        this.flushInterval = setInterval(function () {\n            _this.flush();\n        }, this.sdkInternal.getOptions().getLoggingIntervalMillis());\n        // Quick flush\n        setTimeout(function () { return _this.flush(); }, 100);\n        setTimeout(function () { return _this.flush(); }, 1000);\n    };\n    StatsigLogger.prototype.log = function (event) {\n        if (this.sdkInternal.getOptions().isAllLoggingDisabled()) {\n            return;\n        }\n        try {\n            if (!this.sdkInternal.getOptions().getDisableCurrentPageLogging() &&\n                typeof window !== 'undefined' &&\n                window != null &&\n                typeof window.location === 'object' &&\n                typeof window.location.href === 'string') {\n                // https://stackoverflow.com/questions/6257463/how-to-get-the-url-without-any-parameters-in-javascript\n                var parts = window.location.href.split(/[?#]/);\n                if ((parts === null || parts === void 0 ? void 0 : parts.length) > 0) {\n                    event.addStatsigMetadata('currentPage', parts[0]);\n                }\n            }\n        }\n        catch (_a) {\n            // noop\n        }\n        this.queue.push(event.toJsonObject());\n        if (this.queue.length >=\n            this.sdkInternal.getOptions().getLoggingBufferMaxSize()) {\n            this.flush();\n        }\n    };\n    StatsigLogger.prototype.resetDedupeKeys = function () {\n        this.exposureDedupeKeys = {};\n    };\n    StatsigLogger.prototype.setDebugInfo = function (debugInfo) {\n        this.debugInfo = debugInfo;\n    };\n    StatsigLogger.prototype.shouldLogExposure = function (key) {\n        var lastTime = this.exposureDedupeKeys[key];\n        var now = Date.now();\n        if (lastTime == null) {\n            this.exposureDedupeKeys[key] = now;\n            return true;\n        }\n        if (lastTime >= now - 600 * 1000) {\n            return false;\n        }\n        this.exposureDedupeKeys[key] = now;\n        return true;\n    };\n    StatsigLogger.prototype.addNonExposedCheck = function (configName) {\n        if (this.nonExposedChecks[configName] == null) {\n            this.nonExposedChecks[configName] = 1;\n        }\n        else {\n            this.nonExposedChecks[configName]++;\n        }\n    };\n    StatsigLogger.prototype.logGateExposure = function (user, gateName, gateValue, ruleID, secondaryExposures, details, isManualExposure) {\n        var dedupeKey = gateName + String(gateValue) + ruleID + details.reason;\n        if (!this.shouldLogExposure(dedupeKey)) {\n            return;\n        }\n        var metadata = {\n            gate: gateName,\n            gateValue: String(gateValue),\n            ruleID: ruleID,\n            reason: details.reason,\n            time: details.time,\n            debugInfo: this.debugInfo,\n        };\n        if (isManualExposure) {\n            metadata['isManualExposure'] = 'true';\n        }\n        var gateExposure = new LogEvent_1.default(GATE_EXPOSURE_EVENT);\n        gateExposure.setUser(user);\n        gateExposure.setMetadata(metadata);\n        gateExposure.setSecondaryExposures(secondaryExposures);\n        this.log(gateExposure);\n    };\n    StatsigLogger.prototype.logConfigExposure = function (user, configName, ruleID, secondaryExposures, details, isManualExposure) {\n        var dedupeKey = configName + ruleID + details.reason;\n        if (!this.shouldLogExposure(dedupeKey)) {\n            return;\n        }\n        var metadata = {\n            config: configName,\n            ruleID: ruleID,\n            reason: details.reason,\n            time: details.time,\n            debugInfo: this.debugInfo,\n        };\n        if (isManualExposure) {\n            metadata['isManualExposure'] = 'true';\n        }\n        var configExposure = new LogEvent_1.default(CONFIG_EXPOSURE_EVENT);\n        configExposure.setUser(user);\n        configExposure.setMetadata(metadata);\n        configExposure.setSecondaryExposures(secondaryExposures);\n        this.log(configExposure);\n    };\n    StatsigLogger.prototype.logLayerExposure = function (user, configName, ruleID, secondaryExposures, allocatedExperiment, parameterName, isExplicitParameter, details, isManualExposure) {\n        var dedupeKey = [\n            configName,\n            ruleID,\n            allocatedExperiment,\n            parameterName,\n            String(isExplicitParameter),\n            details.reason,\n        ].join('|');\n        if (!this.shouldLogExposure(dedupeKey)) {\n            return;\n        }\n        var metadata = {\n            config: configName,\n            ruleID: ruleID,\n            allocatedExperiment: allocatedExperiment,\n            parameterName: parameterName,\n            isExplicitParameter: String(isExplicitParameter),\n            reason: details.reason,\n            time: details.time,\n            debugInfo: this.debugInfo,\n        };\n        if (isManualExposure) {\n            metadata['isManualExposure'] = 'true';\n        }\n        var configExposure = new LogEvent_1.default(LAYER_EXPOSURE_EVENT);\n        configExposure.setUser(user);\n        configExposure.setMetadata(metadata);\n        configExposure.setSecondaryExposures(secondaryExposures);\n        this.log(configExposure);\n    };\n    StatsigLogger.prototype.logConfigDefaultValueFallback = function (user, message, metadata) {\n        this.logGenericEvent(DEFAULT_VALUE_WARNING, user, message, metadata);\n        this.loggedErrors.add(message);\n        OutputLogger_1.default.error(message);\n    };\n    StatsigLogger.prototype.logAppError = function (user, message, metadata) {\n        var trimmedMessage = message.substring(0, 128);\n        if (this.loggedErrors.has(trimmedMessage) ||\n            this.loggedErrors.size > MAX_ERRORS_TO_LOG) {\n            return;\n        }\n        this.logGenericEvent(APP_ERROR_EVENT, user, trimmedMessage, metadata);\n        this.loggedErrors.add(trimmedMessage);\n    };\n    StatsigLogger.prototype.logDiagnostics = function (user, context) {\n        var markers = Diagnostics_1.default.getMarkers(context);\n        if (markers.length <= 0) {\n            return;\n        }\n        Diagnostics_1.default.clearContext(context);\n        var event = this.makeDiagnosticsEvent(user, {\n            markers: markers,\n            context: context,\n            statsigOptions: this.sdkInternal.getOptions().getLoggingCopy(),\n        });\n        this.log(event);\n    };\n    StatsigLogger.prototype.logAppMetrics = function (user) {\n        var _this = this;\n        var _a;\n        if (typeof ((_a = window === null || window === void 0 ? void 0 : window.performance) === null || _a === void 0 ? void 0 : _a.getEntriesByType) !== 'function') {\n            return;\n        }\n        var entries = window.performance.getEntriesByType('navigation');\n        if (!entries || entries.length < 1) {\n            return;\n        }\n        var navEntry = entries[0];\n        var metadata = {\n            url: navEntry.name,\n        };\n        if (navEntry instanceof PerformanceNavigationTiming) {\n            this.logGenericEvent(APP_METRICS_PAGE_LOAD_EVENT, user, navEntry.duration, metadata);\n            this.logGenericEvent(APP_METRICS_DOM_INTERACTIVE_EVENT, user, navEntry.domInteractive - navEntry.startTime, metadata);\n        }\n        if (typeof (window === null || window === void 0 ? void 0 : window.addEventListener) === 'function' && (document === null || document === void 0 ? void 0 : document.body)) {\n            var deepestScroll_1 = 0;\n            var canLogScrollEvent_1 = false;\n            window.addEventListener('scroll', function () {\n                if ((document === null || document === void 0 ? void 0 : document.body) == null) {\n                    return;\n                }\n                try {\n                    var scrollHeight = document.body.scrollHeight || 1;\n                    var scrollDepth = Math.min(100, Math.round(((window.scrollY + window.innerHeight) / scrollHeight) * 100));\n                    if (scrollDepth > deepestScroll_1) {\n                        deepestScroll_1 = scrollDepth;\n                    }\n                    canLogScrollEvent_1 = true;\n                }\n                catch (_) {\n                    // best effort for auto metrics\n                }\n            });\n            window.addEventListener('beforeunload', function () {\n                if (canLogScrollEvent_1) {\n                    _this.logGenericEvent(APP_METRICS_SCROLL_DEPTH_EVENT, user, deepestScroll_1, metadata);\n                }\n                _this.logGenericEvent(APP_METRICS_SESSION_LENGTH_EVENT, user, window.performance.now(), metadata);\n            });\n        }\n    };\n    StatsigLogger.prototype.logGenericEvent = function (eventName, user, value, metadata) {\n        var evt = new LogEvent_1.default(eventName);\n        evt.setUser(user);\n        evt.setValue(value);\n        evt.setMetadata(metadata);\n        this.log(evt);\n        return evt;\n    };\n    StatsigLogger.prototype.shutdown = function () {\n        if (this.flushInterval) {\n            clearInterval(this.flushInterval);\n            this.flushInterval = null;\n        }\n        this.flush(true);\n    };\n    StatsigLogger.prototype.flush = function (isClosing) {\n        var _this = this;\n        if (isClosing === void 0) { isClosing = false; }\n        this.addErrorBoundaryDiagnostics();\n        this.addNonExposedChecksEvent();\n        if (this.queue.length === 0) {\n            if (isClosing) {\n                this.saveFailedRequests();\n            }\n            return;\n        }\n        var statsigMetadata = this.sdkInternal.getStatsigMetadata();\n        if (statsigMetadata.sessionID == null) {\n            statsigMetadata.sessionID = (0, uuid_1.v4)();\n        }\n        var oldQueue = this.queue;\n        this.queue = [];\n        if (isClosing &&\n            !this.sdkInternal.getNetwork().supportsKeepalive() &&\n            typeof navigator !== 'undefined' &&\n            (navigator === null || navigator === void 0 ? void 0 : navigator.sendBeacon) != null) {\n            var beacon = this.sdkInternal.getNetwork().sendLogBeacon({\n                events: oldQueue,\n                statsigMetadata: this.sdkInternal.getStatsigMetadata(),\n            });\n            if (!beacon) {\n                this.queue = oldQueue.concat(this.queue);\n                if (this.queue.length > 0) {\n                    this.addFailedRequest({\n                        events: this.queue,\n                        statsigMetadata: this.sdkInternal.getStatsigMetadata(),\n                        time: Date.now(),\n                    });\n                    this.queue = [];\n                }\n            }\n            this.saveFailedRequests();\n            return;\n        }\n        this.sdkInternal\n            .getNetwork()\n            .postToEndpoint(StatsigNetwork_1.StatsigEndpoint.Rgstr, {\n            events: oldQueue,\n            statsigMetadata: this.sdkInternal.getStatsigMetadata(),\n        }, {\n            retryOptions: {\n                retryLimit: 3,\n                backoff: 1000,\n            },\n            useKeepalive: isClosing,\n            additionalHeaders: { 'STATSIG-EVENT-COUNT': String(oldQueue.length) },\n        })\n            .then(function (response) {\n            if (!response.ok) {\n                throw response;\n            }\n        })\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            .catch(function (error) {\n            _this.addFailedRequest({\n                events: oldQueue,\n                statsigMetadata: _this.sdkInternal.getStatsigMetadata(),\n                time: Date.now(),\n            });\n        })\n            .finally(function () {\n            if (isClosing) {\n                _this.saveFailedRequests();\n            }\n        });\n    };\n    StatsigLogger.prototype.saveFailedRequests = function () {\n        var _this = this;\n        if (this.failedLogEvents.length > 0) {\n            var requestsCopy = JSON.stringify(this.failedLogEvents);\n            if (requestsCopy.length > MAX_LOCAL_STORAGE_SIZE) {\n                this.logDroppedLogEventsException(this.failedLogEventCount, 'Exceeds local storage size');\n                return;\n            }\n            if (StatsigAsyncStorage_1.default.asyncStorage) {\n                StatsigAsyncStorage_1.default.setItemAsync(Constants_1.STATSIG_LOCAL_STORAGE_LOGGING_REQUEST_KEY, requestsCopy).catch(function (reason) {\n                    return _this.sdkInternal\n                        .getErrorBoundary()\n                        .logError('saveFailedRequests', reason);\n                });\n                return;\n            }\n            StatsigLocalStorage_1.default.setItem(Constants_1.STATSIG_LOCAL_STORAGE_LOGGING_REQUEST_KEY, requestsCopy);\n        }\n    };\n    StatsigLogger.prototype.sendSavedRequests = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var failedRequests, fireAndForget, requestBodies, _loop_1, this_1, _i, requestBodies_1, requestBody;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        fireAndForget = false;\n                        if (!StatsigAsyncStorage_1.default.asyncStorage) return [3 /*break*/, 2];\n                        return [4 /*yield*/, StatsigAsyncStorage_1.default.getItemAsync(Constants_1.STATSIG_LOCAL_STORAGE_LOGGING_REQUEST_KEY)];\n                    case 1:\n                        failedRequests = _a.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        failedRequests = StatsigLocalStorage_1.default.getItem(Constants_1.STATSIG_LOCAL_STORAGE_LOGGING_REQUEST_KEY);\n                        _a.label = 3;\n                    case 3:\n                        if (failedRequests == null) {\n                            return [2 /*return*/];\n                        }\n                        if (failedRequests.length > MAX_LOCAL_STORAGE_SIZE) {\n                            fireAndForget = true;\n                        }\n                        requestBodies = [];\n                        try {\n                            requestBodies = JSON.parse(failedRequests);\n                            _loop_1 = function (requestBody) {\n                                if (requestBody != null &&\n                                    requestBody.events &&\n                                    Array.isArray(requestBody.events)) {\n                                    this_1.sdkInternal\n                                        .getNetwork()\n                                        .postToEndpoint(StatsigNetwork_1.StatsigEndpoint.Rgstr, requestBody, {\n                                        additionalHeaders: {\n                                            'STATSIG-EVENT-COUNT': String(requestBody.events.length),\n                                        },\n                                    })\n                                        .then(function (response) {\n                                        if (!response.ok) {\n                                            throw Error(response.status + '');\n                                        }\n                                    })\n                                        .catch(function () {\n                                        if (fireAndForget) {\n                                            _this.logDroppedLogEventsException(requestBody.events.length, 'Flush while shutting down');\n                                            return;\n                                        }\n                                        _this.addFailedRequest(requestBody);\n                                    });\n                                }\n                            };\n                            this_1 = this;\n                            for (_i = 0, requestBodies_1 = requestBodies; _i < requestBodies_1.length; _i++) {\n                                requestBody = requestBodies_1[_i];\n                                _loop_1(requestBody);\n                            }\n                        }\n                        catch (e) {\n                            OutputLogger_1.default.error('sendSavedRequests ', e);\n                            this.sdkInternal.getErrorBoundary().logError('sendSavedRequests', e);\n                        }\n                        finally {\n                            this.clearLocalStorageRequests();\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    StatsigLogger.prototype.addFailedRequest = function (requestBody) {\n        var eventSize = requestBody.events.length;\n        if (requestBody.time < Date.now() - MS_RETRY_LOGS_CUTOFF) {\n            this.logDroppedLogEventsException(eventSize, 'Events too old');\n            return;\n        }\n        if (this.failedLogEvents.length > MAX_BATCHES_TO_RETRY) {\n            this.logDroppedLogEventsException(eventSize, 'Exceed max batches to retry');\n            return;\n        }\n        var additionalEvents = requestBody.events.length;\n        if (this.failedLogEventCount + additionalEvents > MAX_FAILED_EVENTS) {\n            this.logDroppedLogEventsException(eventSize, 'Exceeds max failed events');\n            return;\n        }\n        this.failedLogEvents.push(requestBody);\n        this.failedLogEventCount += additionalEvents;\n    };\n    StatsigLogger.prototype.clearLocalStorageRequests = function () {\n        var _this = this;\n        if (StatsigAsyncStorage_1.default.asyncStorage) {\n            StatsigAsyncStorage_1.default.removeItemAsync(Constants_1.STATSIG_LOCAL_STORAGE_LOGGING_REQUEST_KEY).catch(function (reason) {\n                return _this.sdkInternal\n                    .getErrorBoundary()\n                    .logError('clearLocalStorageRequests', reason);\n            });\n        }\n        else {\n            StatsigLocalStorage_1.default.removeItem(Constants_1.STATSIG_LOCAL_STORAGE_LOGGING_REQUEST_KEY);\n        }\n    };\n    StatsigLogger.prototype.makeDiagnosticsEvent = function (user, data) {\n        var latencyEvent = new LogEvent_1.default(DIAGNOSTICS_EVENT);\n        latencyEvent.setUser(user);\n        latencyEvent.setMetadata(data);\n        return latencyEvent;\n    };\n    StatsigLogger.prototype.addErrorBoundaryDiagnostics = function () {\n        if (Diagnostics_1.default.getMarkerCount('api_call') === 0) {\n            return;\n        }\n        var diagEvent = this.makeDiagnosticsEvent(this.sdkInternal.getCurrentUser(), {\n            context: 'api_call',\n            markers: Diagnostics_1.default.getMarkers('api_call'),\n        });\n        this.queue.push(diagEvent);\n        Diagnostics_1.default.clearContext('api_call');\n    };\n    StatsigLogger.prototype.addNonExposedChecksEvent = function () {\n        if (Object.keys(this.nonExposedChecks).length === 0) {\n            return;\n        }\n        var event = new LogEvent_1.default(NON_EXPOSED_CHECKS_EVENT);\n        event.setMetadata({\n            checks: __assign({}, this.nonExposedChecks),\n        });\n        this.queue.push(event);\n        this.nonExposedChecks = {};\n    };\n    StatsigLogger.prototype.logDroppedLogEventsException = function (count, reason) {\n        this.sdkInternal\n            .getErrorBoundary()\n            .logError(LOG_FAILURE_EVENT, new Error(reason), {\n            getExtraData: function () {\n                return {\n                    eventCount: count,\n                };\n            },\n        });\n    };\n    return StatsigLogger;\n}());\nexports[\"default\"] = StatsigLogger;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L1N0YXRzaWdMb2dnZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0EsaURBQWlELE9BQU87QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLCtEQUErRCxpQkFBaUI7QUFDNUc7QUFDQSxvQ0FBb0MsTUFBTSwrQkFBK0IsWUFBWTtBQUNyRixtQ0FBbUMsTUFBTSxtQ0FBbUMsWUFBWTtBQUN4RixnQ0FBZ0M7QUFDaEM7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGNBQWMsNkJBQTZCLDBCQUEwQixjQUFjLHFCQUFxQjtBQUN4RyxpQkFBaUIsb0RBQW9ELHFFQUFxRSxjQUFjO0FBQ3hKLHVCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDLG1DQUFtQyxTQUFTO0FBQzVDLG1DQUFtQyxXQUFXLFVBQVU7QUFDeEQsMENBQTBDLGNBQWM7QUFDeEQ7QUFDQSw4R0FBOEcsT0FBTztBQUNySCxpRkFBaUYsaUJBQWlCO0FBQ2xHLHlEQUF5RCxnQkFBZ0IsUUFBUTtBQUNqRiwrQ0FBK0MsZ0JBQWdCLGdCQUFnQjtBQUMvRTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0EsVUFBVSxZQUFZLGFBQWEsU0FBUyxVQUFVO0FBQ3RELG9DQUFvQyxTQUFTO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxhQUFhLG1CQUFPLENBQUMsOERBQU07QUFDM0IsaUNBQWlDLG1CQUFPLENBQUMsb0VBQVk7QUFDckQsdUJBQXVCLG1CQUFPLENBQUMsZ0ZBQWtCO0FBQ2pELGtCQUFrQixtQkFBTyxDQUFDLGtGQUFtQjtBQUM3QyxvQ0FBb0MsbUJBQU8sQ0FBQyxzRkFBcUI7QUFDakUscUNBQXFDLG1CQUFPLENBQUMsd0ZBQXNCO0FBQ25FLDRDQUE0QyxtQkFBTyxDQUFDLHNHQUE2QjtBQUNqRiw0Q0FBNEMsbUJBQU8sQ0FBQyxzR0FBNkI7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELDJCQUEyQjtBQUNyRixrRUFBa0UsMkJBQTJCO0FBQzdGO0FBQ0EseUNBQXlDLHVCQUF1QjtBQUNoRSx5Q0FBeUMsdUJBQXVCO0FBQ2hFLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLGlDQUFpQyx1QkFBdUI7QUFDeEQsaUNBQWlDLHVCQUF1QjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxpQ0FBaUMsZ0RBQWdEO0FBQ2pGLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekMscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQSwwRUFBMEUsNkJBQTZCO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsa0JBQWUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbWF6b24tZnJlc2gtZGVtby8uL25vZGVfbW9kdWxlcy9zdGF0c2lnLWpzL2Rpc3QvU3RhdHNpZ0xvZ2dlci5qcz9lYmYzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXNzaWduID0gKHRoaXMgJiYgdGhpcy5fX2Fzc2lnbikgfHwgZnVuY3Rpb24gKCkge1xuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSlcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9O1xuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xudmFyIF9fZ2VuZXJhdG9yID0gKHRoaXMgJiYgdGhpcy5fX2dlbmVyYXRvcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIGJvZHkpIHtcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xuICAgICAgICB3aGlsZSAoZyAmJiAoZyA9IDAsIG9wWzBdICYmIChfID0gMCkpLCBfKSB0cnkge1xuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciB1dWlkXzEgPSByZXF1aXJlKFwidXVpZFwiKTtcbnZhciBMb2dFdmVudF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL0xvZ0V2ZW50XCIpKTtcbnZhciBTdGF0c2lnTmV0d29ya18xID0gcmVxdWlyZShcIi4vU3RhdHNpZ05ldHdvcmtcIik7XG52YXIgQ29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi91dGlscy9Db25zdGFudHNcIik7XG52YXIgRGlhZ25vc3RpY3NfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi91dGlscy9EaWFnbm9zdGljc1wiKSk7XG52YXIgT3V0cHV0TG9nZ2VyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vdXRpbHMvT3V0cHV0TG9nZ2VyXCIpKTtcbnZhciBTdGF0c2lnQXN5bmNTdG9yYWdlXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vdXRpbHMvU3RhdHNpZ0FzeW5jU3RvcmFnZVwiKSk7XG52YXIgU3RhdHNpZ0xvY2FsU3RvcmFnZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL3V0aWxzL1N0YXRzaWdMb2NhbFN0b3JhZ2VcIikpO1xudmFyIElOVEVSTkFMX0VWRU5UX1BSRUZJWCA9ICdzdGF0c2lnOjonO1xudmFyIENPTkZJR19FWFBPU1VSRV9FVkVOVCA9IElOVEVSTkFMX0VWRU5UX1BSRUZJWCArICdjb25maWdfZXhwb3N1cmUnO1xudmFyIExBWUVSX0VYUE9TVVJFX0VWRU5UID0gSU5URVJOQUxfRVZFTlRfUFJFRklYICsgJ2xheWVyX2V4cG9zdXJlJztcbnZhciBHQVRFX0VYUE9TVVJFX0VWRU5UID0gSU5URVJOQUxfRVZFTlRfUFJFRklYICsgJ2dhdGVfZXhwb3N1cmUnO1xudmFyIExPR19GQUlMVVJFX0VWRU5UID0gSU5URVJOQUxfRVZFTlRfUFJFRklYICsgJ2xvZ19ldmVudF9mYWlsZWQnO1xudmFyIEFQUF9FUlJPUl9FVkVOVCA9IElOVEVSTkFMX0VWRU5UX1BSRUZJWCArICdhcHBfZXJyb3InO1xudmFyIEFQUF9NRVRSSUNTX1BBR0VfTE9BRF9FVkVOVCA9IElOVEVSTkFMX0VWRU5UX1BSRUZJWCArICdhcHBfbWV0cmljczo6cGFnZV9sb2FkX3RpbWUnO1xudmFyIEFQUF9NRVRSSUNTX0RPTV9JTlRFUkFDVElWRV9FVkVOVCA9IElOVEVSTkFMX0VWRU5UX1BSRUZJWCArICdhcHBfbWV0cmljczo6ZG9tX2ludGVyYWN0aXZlX3RpbWUnO1xudmFyIEFQUF9NRVRSSUNTX1NDUk9MTF9ERVBUSF9FVkVOVCA9IElOVEVSTkFMX0VWRU5UX1BSRUZJWCArICdhcHBfbWV0cmljczo6c2Nyb2xsX2RlcHRoJztcbnZhciBBUFBfTUVUUklDU19TRVNTSU9OX0xFTkdUSF9FVkVOVCA9IElOVEVSTkFMX0VWRU5UX1BSRUZJWCArICdhcHBfbWV0cmljczo6dGltZV9vbl9wYWdlX21zJztcbnZhciBESUFHTk9TVElDU19FVkVOVCA9IElOVEVSTkFMX0VWRU5UX1BSRUZJWCArICdkaWFnbm9zdGljcyc7XG52YXIgREVGQVVMVF9WQUxVRV9XQVJOSU5HID0gSU5URVJOQUxfRVZFTlRfUFJFRklYICsgJ2RlZmF1bHRfdmFsdWVfdHlwZV9taXNtYXRjaCc7XG52YXIgTk9OX0VYUE9TRURfQ0hFQ0tTX0VWRU5UID0gSU5URVJOQUxfRVZFTlRfUFJFRklYICsgJ25vbl9leHBvc2VkX2NoZWNrcyc7XG52YXIgTVNfUkVUUllfTE9HU19DVVRPRkYgPSA1ICogMjQgKiA2MCAqIDYwICogMTAwMDtcbnZhciBNQVhfQkFUQ0hFU19UT19SRVRSWSA9IDEwMDtcbnZhciBNQVhfRkFJTEVEX0VWRU5UUyA9IDEwMDA7XG52YXIgTUFYX0xPQ0FMX1NUT1JBR0VfU0laRSA9IDEwMjQgKiBNQVhfRkFJTEVEX0VWRU5UUztcbnZhciBNQVhfRVJST1JTX1RPX0xPRyA9IDEwO1xudmFyIFN0YXRzaWdMb2dnZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3RhdHNpZ0xvZ2dlcihzZGtJbnRlcm5hbCkge1xuICAgICAgICB0aGlzLmZhaWxlZExvZ0V2ZW50Q291bnQgPSAwO1xuICAgICAgICB0aGlzLmRlYnVnSW5mbyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5zZGtJbnRlcm5hbCA9IHNka0ludGVybmFsO1xuICAgICAgICB0aGlzLnF1ZXVlID0gW107XG4gICAgICAgIHRoaXMubm9uRXhwb3NlZENoZWNrcyA9IHt9O1xuICAgICAgICB0aGlzLmZsdXNoSW50ZXJ2YWwgPSBudWxsO1xuICAgICAgICB0aGlzLmxvZ2dlZEVycm9ycyA9IG5ldyBTZXQoKTtcbiAgICAgICAgdGhpcy5mYWlsZWRMb2dFdmVudHMgPSBbXTtcbiAgICAgICAgdGhpcy5leHBvc3VyZURlZHVwZUtleXMgPSB7fTtcbiAgICAgICAgdGhpcy5mYWlsZWRMb2dFdmVudENvdW50ID0gMDtcbiAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgfVxuICAgIFN0YXRzaWdMb2dnZXIucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgICAgdHlwZW9mIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmZsdXNoKHRydWUpOyB9KTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5mbHVzaCh0cnVlKTsgfSk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmZsdXNoKCk7IH0sIDEwMCk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5mbHVzaCgpOyB9LCAxMDAwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgICB0eXBlb2YgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5mbHVzaChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgIT09ICd2aXNpYmxlJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuc2RrSW50ZXJuYWwuZ2V0T3B0aW9ucygpLmdldElnbm9yZVdpbmRvd1VuZGVmaW5lZCgpICYmXG4gICAgICAgICAgICAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgfHwgd2luZG93ID09IG51bGwpKSB7XG4gICAgICAgICAgICAvLyBkb250IHNldCB0aGUgZmx1c2ggaW50ZXJ2YWwgb3V0c2lkZSBvZiBjbGllbnQgYnJvd3NlciBlbnZpcm9ubWVudHNcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zZGtJbnRlcm5hbC5nZXRPcHRpb25zKCkuZ2V0TG9jYWxNb2RlRW5hYmxlZCgpKSB7XG4gICAgICAgICAgICAvLyB1bm5lY2Vzc2FyeSBpbnRlcnZhbCBpbiBsb2NhbCBtb2RlIHNpbmNlIGxvZ3MgZG9udCBmbHVzaCBhbnl3YXlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZsdXNoSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5mbHVzaCgpO1xuICAgICAgICB9LCB0aGlzLnNka0ludGVybmFsLmdldE9wdGlvbnMoKS5nZXRMb2dnaW5nSW50ZXJ2YWxNaWxsaXMoKSk7XG4gICAgICAgIC8vIFF1aWNrIGZsdXNoXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuZmx1c2goKTsgfSwgMTAwKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5mbHVzaCgpOyB9LCAxMDAwKTtcbiAgICB9O1xuICAgIFN0YXRzaWdMb2dnZXIucHJvdG90eXBlLmxvZyA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBpZiAodGhpcy5zZGtJbnRlcm5hbC5nZXRPcHRpb25zKCkuaXNBbGxMb2dnaW5nRGlzYWJsZWQoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuc2RrSW50ZXJuYWwuZ2V0T3B0aW9ucygpLmdldERpc2FibGVDdXJyZW50UGFnZUxvZ2dpbmcoKSAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgICAgICAgd2luZG93ICE9IG51bGwgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2Ygd2luZG93LmxvY2F0aW9uID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiB3aW5kb3cubG9jYXRpb24uaHJlZiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy82MjU3NDYzL2hvdy10by1nZXQtdGhlLXVybC13aXRob3V0LWFueS1wYXJhbWV0ZXJzLWluLWphdmFzY3JpcHRcbiAgICAgICAgICAgICAgICB2YXIgcGFydHMgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5zcGxpdCgvWz8jXS8pO1xuICAgICAgICAgICAgICAgIGlmICgocGFydHMgPT09IG51bGwgfHwgcGFydHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcnRzLmxlbmd0aCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LmFkZFN0YXRzaWdNZXRhZGF0YSgnY3VycmVudFBhZ2UnLCBwYXJ0c1swXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChfYSkge1xuICAgICAgICAgICAgLy8gbm9vcFxuICAgICAgICB9XG4gICAgICAgIHRoaXMucXVldWUucHVzaChldmVudC50b0pzb25PYmplY3QoKSk7XG4gICAgICAgIGlmICh0aGlzLnF1ZXVlLmxlbmd0aCA+PVxuICAgICAgICAgICAgdGhpcy5zZGtJbnRlcm5hbC5nZXRPcHRpb25zKCkuZ2V0TG9nZ2luZ0J1ZmZlck1heFNpemUoKSkge1xuICAgICAgICAgICAgdGhpcy5mbHVzaCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdGF0c2lnTG9nZ2VyLnByb3RvdHlwZS5yZXNldERlZHVwZUtleXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZXhwb3N1cmVEZWR1cGVLZXlzID0ge307XG4gICAgfTtcbiAgICBTdGF0c2lnTG9nZ2VyLnByb3RvdHlwZS5zZXREZWJ1Z0luZm8gPSBmdW5jdGlvbiAoZGVidWdJbmZvKSB7XG4gICAgICAgIHRoaXMuZGVidWdJbmZvID0gZGVidWdJbmZvO1xuICAgIH07XG4gICAgU3RhdHNpZ0xvZ2dlci5wcm90b3R5cGUuc2hvdWxkTG9nRXhwb3N1cmUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciBsYXN0VGltZSA9IHRoaXMuZXhwb3N1cmVEZWR1cGVLZXlzW2tleV07XG4gICAgICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICBpZiAobGFzdFRpbWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5leHBvc3VyZURlZHVwZUtleXNba2V5XSA9IG5vdztcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsYXN0VGltZSA+PSBub3cgLSA2MDAgKiAxMDAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5leHBvc3VyZURlZHVwZUtleXNba2V5XSA9IG5vdztcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICBTdGF0c2lnTG9nZ2VyLnByb3RvdHlwZS5hZGROb25FeHBvc2VkQ2hlY2sgPSBmdW5jdGlvbiAoY29uZmlnTmFtZSkge1xuICAgICAgICBpZiAodGhpcy5ub25FeHBvc2VkQ2hlY2tzW2NvbmZpZ05hbWVdID09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMubm9uRXhwb3NlZENoZWNrc1tjb25maWdOYW1lXSA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm5vbkV4cG9zZWRDaGVja3NbY29uZmlnTmFtZV0rKztcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3RhdHNpZ0xvZ2dlci5wcm90b3R5cGUubG9nR2F0ZUV4cG9zdXJlID0gZnVuY3Rpb24gKHVzZXIsIGdhdGVOYW1lLCBnYXRlVmFsdWUsIHJ1bGVJRCwgc2Vjb25kYXJ5RXhwb3N1cmVzLCBkZXRhaWxzLCBpc01hbnVhbEV4cG9zdXJlKSB7XG4gICAgICAgIHZhciBkZWR1cGVLZXkgPSBnYXRlTmFtZSArIFN0cmluZyhnYXRlVmFsdWUpICsgcnVsZUlEICsgZGV0YWlscy5yZWFzb247XG4gICAgICAgIGlmICghdGhpcy5zaG91bGRMb2dFeHBvc3VyZShkZWR1cGVLZXkpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG1ldGFkYXRhID0ge1xuICAgICAgICAgICAgZ2F0ZTogZ2F0ZU5hbWUsXG4gICAgICAgICAgICBnYXRlVmFsdWU6IFN0cmluZyhnYXRlVmFsdWUpLFxuICAgICAgICAgICAgcnVsZUlEOiBydWxlSUQsXG4gICAgICAgICAgICByZWFzb246IGRldGFpbHMucmVhc29uLFxuICAgICAgICAgICAgdGltZTogZGV0YWlscy50aW1lLFxuICAgICAgICAgICAgZGVidWdJbmZvOiB0aGlzLmRlYnVnSW5mbyxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGlzTWFudWFsRXhwb3N1cmUpIHtcbiAgICAgICAgICAgIG1ldGFkYXRhWydpc01hbnVhbEV4cG9zdXJlJ10gPSAndHJ1ZSc7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGdhdGVFeHBvc3VyZSA9IG5ldyBMb2dFdmVudF8xLmRlZmF1bHQoR0FURV9FWFBPU1VSRV9FVkVOVCk7XG4gICAgICAgIGdhdGVFeHBvc3VyZS5zZXRVc2VyKHVzZXIpO1xuICAgICAgICBnYXRlRXhwb3N1cmUuc2V0TWV0YWRhdGEobWV0YWRhdGEpO1xuICAgICAgICBnYXRlRXhwb3N1cmUuc2V0U2Vjb25kYXJ5RXhwb3N1cmVzKHNlY29uZGFyeUV4cG9zdXJlcyk7XG4gICAgICAgIHRoaXMubG9nKGdhdGVFeHBvc3VyZSk7XG4gICAgfTtcbiAgICBTdGF0c2lnTG9nZ2VyLnByb3RvdHlwZS5sb2dDb25maWdFeHBvc3VyZSA9IGZ1bmN0aW9uICh1c2VyLCBjb25maWdOYW1lLCBydWxlSUQsIHNlY29uZGFyeUV4cG9zdXJlcywgZGV0YWlscywgaXNNYW51YWxFeHBvc3VyZSkge1xuICAgICAgICB2YXIgZGVkdXBlS2V5ID0gY29uZmlnTmFtZSArIHJ1bGVJRCArIGRldGFpbHMucmVhc29uO1xuICAgICAgICBpZiAoIXRoaXMuc2hvdWxkTG9nRXhwb3N1cmUoZGVkdXBlS2V5KSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtZXRhZGF0YSA9IHtcbiAgICAgICAgICAgIGNvbmZpZzogY29uZmlnTmFtZSxcbiAgICAgICAgICAgIHJ1bGVJRDogcnVsZUlELFxuICAgICAgICAgICAgcmVhc29uOiBkZXRhaWxzLnJlYXNvbixcbiAgICAgICAgICAgIHRpbWU6IGRldGFpbHMudGltZSxcbiAgICAgICAgICAgIGRlYnVnSW5mbzogdGhpcy5kZWJ1Z0luZm8sXG4gICAgICAgIH07XG4gICAgICAgIGlmIChpc01hbnVhbEV4cG9zdXJlKSB7XG4gICAgICAgICAgICBtZXRhZGF0YVsnaXNNYW51YWxFeHBvc3VyZSddID0gJ3RydWUnO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjb25maWdFeHBvc3VyZSA9IG5ldyBMb2dFdmVudF8xLmRlZmF1bHQoQ09ORklHX0VYUE9TVVJFX0VWRU5UKTtcbiAgICAgICAgY29uZmlnRXhwb3N1cmUuc2V0VXNlcih1c2VyKTtcbiAgICAgICAgY29uZmlnRXhwb3N1cmUuc2V0TWV0YWRhdGEobWV0YWRhdGEpO1xuICAgICAgICBjb25maWdFeHBvc3VyZS5zZXRTZWNvbmRhcnlFeHBvc3VyZXMoc2Vjb25kYXJ5RXhwb3N1cmVzKTtcbiAgICAgICAgdGhpcy5sb2coY29uZmlnRXhwb3N1cmUpO1xuICAgIH07XG4gICAgU3RhdHNpZ0xvZ2dlci5wcm90b3R5cGUubG9nTGF5ZXJFeHBvc3VyZSA9IGZ1bmN0aW9uICh1c2VyLCBjb25maWdOYW1lLCBydWxlSUQsIHNlY29uZGFyeUV4cG9zdXJlcywgYWxsb2NhdGVkRXhwZXJpbWVudCwgcGFyYW1ldGVyTmFtZSwgaXNFeHBsaWNpdFBhcmFtZXRlciwgZGV0YWlscywgaXNNYW51YWxFeHBvc3VyZSkge1xuICAgICAgICB2YXIgZGVkdXBlS2V5ID0gW1xuICAgICAgICAgICAgY29uZmlnTmFtZSxcbiAgICAgICAgICAgIHJ1bGVJRCxcbiAgICAgICAgICAgIGFsbG9jYXRlZEV4cGVyaW1lbnQsXG4gICAgICAgICAgICBwYXJhbWV0ZXJOYW1lLFxuICAgICAgICAgICAgU3RyaW5nKGlzRXhwbGljaXRQYXJhbWV0ZXIpLFxuICAgICAgICAgICAgZGV0YWlscy5yZWFzb24sXG4gICAgICAgIF0uam9pbignfCcpO1xuICAgICAgICBpZiAoIXRoaXMuc2hvdWxkTG9nRXhwb3N1cmUoZGVkdXBlS2V5KSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtZXRhZGF0YSA9IHtcbiAgICAgICAgICAgIGNvbmZpZzogY29uZmlnTmFtZSxcbiAgICAgICAgICAgIHJ1bGVJRDogcnVsZUlELFxuICAgICAgICAgICAgYWxsb2NhdGVkRXhwZXJpbWVudDogYWxsb2NhdGVkRXhwZXJpbWVudCxcbiAgICAgICAgICAgIHBhcmFtZXRlck5hbWU6IHBhcmFtZXRlck5hbWUsXG4gICAgICAgICAgICBpc0V4cGxpY2l0UGFyYW1ldGVyOiBTdHJpbmcoaXNFeHBsaWNpdFBhcmFtZXRlciksXG4gICAgICAgICAgICByZWFzb246IGRldGFpbHMucmVhc29uLFxuICAgICAgICAgICAgdGltZTogZGV0YWlscy50aW1lLFxuICAgICAgICAgICAgZGVidWdJbmZvOiB0aGlzLmRlYnVnSW5mbyxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGlzTWFudWFsRXhwb3N1cmUpIHtcbiAgICAgICAgICAgIG1ldGFkYXRhWydpc01hbnVhbEV4cG9zdXJlJ10gPSAndHJ1ZSc7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNvbmZpZ0V4cG9zdXJlID0gbmV3IExvZ0V2ZW50XzEuZGVmYXVsdChMQVlFUl9FWFBPU1VSRV9FVkVOVCk7XG4gICAgICAgIGNvbmZpZ0V4cG9zdXJlLnNldFVzZXIodXNlcik7XG4gICAgICAgIGNvbmZpZ0V4cG9zdXJlLnNldE1ldGFkYXRhKG1ldGFkYXRhKTtcbiAgICAgICAgY29uZmlnRXhwb3N1cmUuc2V0U2Vjb25kYXJ5RXhwb3N1cmVzKHNlY29uZGFyeUV4cG9zdXJlcyk7XG4gICAgICAgIHRoaXMubG9nKGNvbmZpZ0V4cG9zdXJlKTtcbiAgICB9O1xuICAgIFN0YXRzaWdMb2dnZXIucHJvdG90eXBlLmxvZ0NvbmZpZ0RlZmF1bHRWYWx1ZUZhbGxiYWNrID0gZnVuY3Rpb24gKHVzZXIsIG1lc3NhZ2UsIG1ldGFkYXRhKSB7XG4gICAgICAgIHRoaXMubG9nR2VuZXJpY0V2ZW50KERFRkFVTFRfVkFMVUVfV0FSTklORywgdXNlciwgbWVzc2FnZSwgbWV0YWRhdGEpO1xuICAgICAgICB0aGlzLmxvZ2dlZEVycm9ycy5hZGQobWVzc2FnZSk7XG4gICAgICAgIE91dHB1dExvZ2dlcl8xLmRlZmF1bHQuZXJyb3IobWVzc2FnZSk7XG4gICAgfTtcbiAgICBTdGF0c2lnTG9nZ2VyLnByb3RvdHlwZS5sb2dBcHBFcnJvciA9IGZ1bmN0aW9uICh1c2VyLCBtZXNzYWdlLCBtZXRhZGF0YSkge1xuICAgICAgICB2YXIgdHJpbW1lZE1lc3NhZ2UgPSBtZXNzYWdlLnN1YnN0cmluZygwLCAxMjgpO1xuICAgICAgICBpZiAodGhpcy5sb2dnZWRFcnJvcnMuaGFzKHRyaW1tZWRNZXNzYWdlKSB8fFxuICAgICAgICAgICAgdGhpcy5sb2dnZWRFcnJvcnMuc2l6ZSA+IE1BWF9FUlJPUlNfVE9fTE9HKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sb2dHZW5lcmljRXZlbnQoQVBQX0VSUk9SX0VWRU5ULCB1c2VyLCB0cmltbWVkTWVzc2FnZSwgbWV0YWRhdGEpO1xuICAgICAgICB0aGlzLmxvZ2dlZEVycm9ycy5hZGQodHJpbW1lZE1lc3NhZ2UpO1xuICAgIH07XG4gICAgU3RhdHNpZ0xvZ2dlci5wcm90b3R5cGUubG9nRGlhZ25vc3RpY3MgPSBmdW5jdGlvbiAodXNlciwgY29udGV4dCkge1xuICAgICAgICB2YXIgbWFya2VycyA9IERpYWdub3N0aWNzXzEuZGVmYXVsdC5nZXRNYXJrZXJzKGNvbnRleHQpO1xuICAgICAgICBpZiAobWFya2Vycy5sZW5ndGggPD0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIERpYWdub3N0aWNzXzEuZGVmYXVsdC5jbGVhckNvbnRleHQoY29udGV4dCk7XG4gICAgICAgIHZhciBldmVudCA9IHRoaXMubWFrZURpYWdub3N0aWNzRXZlbnQodXNlciwge1xuICAgICAgICAgICAgbWFya2VyczogbWFya2VycyxcbiAgICAgICAgICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgICAgICAgICBzdGF0c2lnT3B0aW9uczogdGhpcy5zZGtJbnRlcm5hbC5nZXRPcHRpb25zKCkuZ2V0TG9nZ2luZ0NvcHkoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubG9nKGV2ZW50KTtcbiAgICB9O1xuICAgIFN0YXRzaWdMb2dnZXIucHJvdG90eXBlLmxvZ0FwcE1ldHJpY3MgPSBmdW5jdGlvbiAodXNlcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICh0eXBlb2YgKChfYSA9IHdpbmRvdyA9PT0gbnVsbCB8fCB3aW5kb3cgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHdpbmRvdy5wZXJmb3JtYW5jZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldEVudHJpZXNCeVR5cGUpICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVudHJpZXMgPSB3aW5kb3cucGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5VHlwZSgnbmF2aWdhdGlvbicpO1xuICAgICAgICBpZiAoIWVudHJpZXMgfHwgZW50cmllcy5sZW5ndGggPCAxKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5hdkVudHJ5ID0gZW50cmllc1swXTtcbiAgICAgICAgdmFyIG1ldGFkYXRhID0ge1xuICAgICAgICAgICAgdXJsOiBuYXZFbnRyeS5uYW1lLFxuICAgICAgICB9O1xuICAgICAgICBpZiAobmF2RW50cnkgaW5zdGFuY2VvZiBQZXJmb3JtYW5jZU5hdmlnYXRpb25UaW1pbmcpIHtcbiAgICAgICAgICAgIHRoaXMubG9nR2VuZXJpY0V2ZW50KEFQUF9NRVRSSUNTX1BBR0VfTE9BRF9FVkVOVCwgdXNlciwgbmF2RW50cnkuZHVyYXRpb24sIG1ldGFkYXRhKTtcbiAgICAgICAgICAgIHRoaXMubG9nR2VuZXJpY0V2ZW50KEFQUF9NRVRSSUNTX0RPTV9JTlRFUkFDVElWRV9FVkVOVCwgdXNlciwgbmF2RW50cnkuZG9tSW50ZXJhY3RpdmUgLSBuYXZFbnRyeS5zdGFydFRpbWUsIG1ldGFkYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mICh3aW5kb3cgPT09IG51bGwgfHwgd2luZG93ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcikgPT09ICdmdW5jdGlvbicgJiYgKGRvY3VtZW50ID09PSBudWxsIHx8IGRvY3VtZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkb2N1bWVudC5ib2R5KSkge1xuICAgICAgICAgICAgdmFyIGRlZXBlc3RTY3JvbGxfMSA9IDA7XG4gICAgICAgICAgICB2YXIgY2FuTG9nU2Nyb2xsRXZlbnRfMSA9IGZhbHNlO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoKGRvY3VtZW50ID09PSBudWxsIHx8IGRvY3VtZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkb2N1bWVudC5ib2R5KSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjcm9sbEhlaWdodCA9IGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0IHx8IDE7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzY3JvbGxEZXB0aCA9IE1hdGgubWluKDEwMCwgTWF0aC5yb3VuZCgoKHdpbmRvdy5zY3JvbGxZICsgd2luZG93LmlubmVySGVpZ2h0KSAvIHNjcm9sbEhlaWdodCkgKiAxMDApKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNjcm9sbERlcHRoID4gZGVlcGVzdFNjcm9sbF8xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWVwZXN0U2Nyb2xsXzEgPSBzY3JvbGxEZXB0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYW5Mb2dTY3JvbGxFdmVudF8xID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKF8pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gYmVzdCBlZmZvcnQgZm9yIGF1dG8gbWV0cmljc1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2FuTG9nU2Nyb2xsRXZlbnRfMSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5sb2dHZW5lcmljRXZlbnQoQVBQX01FVFJJQ1NfU0NST0xMX0RFUFRIX0VWRU5ULCB1c2VyLCBkZWVwZXN0U2Nyb2xsXzEsIG1ldGFkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMubG9nR2VuZXJpY0V2ZW50KEFQUF9NRVRSSUNTX1NFU1NJT05fTEVOR1RIX0VWRU5ULCB1c2VyLCB3aW5kb3cucGVyZm9ybWFuY2Uubm93KCksIG1ldGFkYXRhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdGF0c2lnTG9nZ2VyLnByb3RvdHlwZS5sb2dHZW5lcmljRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnROYW1lLCB1c2VyLCB2YWx1ZSwgbWV0YWRhdGEpIHtcbiAgICAgICAgdmFyIGV2dCA9IG5ldyBMb2dFdmVudF8xLmRlZmF1bHQoZXZlbnROYW1lKTtcbiAgICAgICAgZXZ0LnNldFVzZXIodXNlcik7XG4gICAgICAgIGV2dC5zZXRWYWx1ZSh2YWx1ZSk7XG4gICAgICAgIGV2dC5zZXRNZXRhZGF0YShtZXRhZGF0YSk7XG4gICAgICAgIHRoaXMubG9nKGV2dCk7XG4gICAgICAgIHJldHVybiBldnQ7XG4gICAgfTtcbiAgICBTdGF0c2lnTG9nZ2VyLnByb3RvdHlwZS5zaHV0ZG93biA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuZmx1c2hJbnRlcnZhbCkge1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmZsdXNoSW50ZXJ2YWwpO1xuICAgICAgICAgICAgdGhpcy5mbHVzaEludGVydmFsID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZsdXNoKHRydWUpO1xuICAgIH07XG4gICAgU3RhdHNpZ0xvZ2dlci5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbiAoaXNDbG9zaW5nKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChpc0Nsb3NpbmcgPT09IHZvaWQgMCkgeyBpc0Nsb3NpbmcgPSBmYWxzZTsgfVxuICAgICAgICB0aGlzLmFkZEVycm9yQm91bmRhcnlEaWFnbm9zdGljcygpO1xuICAgICAgICB0aGlzLmFkZE5vbkV4cG9zZWRDaGVja3NFdmVudCgpO1xuICAgICAgICBpZiAodGhpcy5xdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGlmIChpc0Nsb3NpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVGYWlsZWRSZXF1ZXN0cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdGF0c2lnTWV0YWRhdGEgPSB0aGlzLnNka0ludGVybmFsLmdldFN0YXRzaWdNZXRhZGF0YSgpO1xuICAgICAgICBpZiAoc3RhdHNpZ01ldGFkYXRhLnNlc3Npb25JRCA9PSBudWxsKSB7XG4gICAgICAgICAgICBzdGF0c2lnTWV0YWRhdGEuc2Vzc2lvbklEID0gKDAsIHV1aWRfMS52NCkoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb2xkUXVldWUgPSB0aGlzLnF1ZXVlO1xuICAgICAgICB0aGlzLnF1ZXVlID0gW107XG4gICAgICAgIGlmIChpc0Nsb3NpbmcgJiZcbiAgICAgICAgICAgICF0aGlzLnNka0ludGVybmFsLmdldE5ldHdvcmsoKS5zdXBwb3J0c0tlZXBhbGl2ZSgpICYmXG4gICAgICAgICAgICB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgICAgKG5hdmlnYXRvciA9PT0gbnVsbCB8fCBuYXZpZ2F0b3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG5hdmlnYXRvci5zZW5kQmVhY29uKSAhPSBudWxsKSB7XG4gICAgICAgICAgICB2YXIgYmVhY29uID0gdGhpcy5zZGtJbnRlcm5hbC5nZXROZXR3b3JrKCkuc2VuZExvZ0JlYWNvbih7XG4gICAgICAgICAgICAgICAgZXZlbnRzOiBvbGRRdWV1ZSxcbiAgICAgICAgICAgICAgICBzdGF0c2lnTWV0YWRhdGE6IHRoaXMuc2RrSW50ZXJuYWwuZ2V0U3RhdHNpZ01ldGFkYXRhKCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghYmVhY29uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5xdWV1ZSA9IG9sZFF1ZXVlLmNvbmNhdCh0aGlzLnF1ZXVlKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5xdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkRmFpbGVkUmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudHM6IHRoaXMucXVldWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0c2lnTWV0YWRhdGE6IHRoaXMuc2RrSW50ZXJuYWwuZ2V0U3RhdHNpZ01ldGFkYXRhKCksXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2F2ZUZhaWxlZFJlcXVlc3RzKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZGtJbnRlcm5hbFxuICAgICAgICAgICAgLmdldE5ldHdvcmsoKVxuICAgICAgICAgICAgLnBvc3RUb0VuZHBvaW50KFN0YXRzaWdOZXR3b3JrXzEuU3RhdHNpZ0VuZHBvaW50LlJnc3RyLCB7XG4gICAgICAgICAgICBldmVudHM6IG9sZFF1ZXVlLFxuICAgICAgICAgICAgc3RhdHNpZ01ldGFkYXRhOiB0aGlzLnNka0ludGVybmFsLmdldFN0YXRzaWdNZXRhZGF0YSgpLFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICByZXRyeU9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICByZXRyeUxpbWl0OiAzLFxuICAgICAgICAgICAgICAgIGJhY2tvZmY6IDEwMDAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdXNlS2VlcGFsaXZlOiBpc0Nsb3NpbmcsXG4gICAgICAgICAgICBhZGRpdGlvbmFsSGVhZGVyczogeyAnU1RBVFNJRy1FVkVOVC1DT1VOVCc6IFN0cmluZyhvbGRRdWV1ZS5sZW5ndGgpIH0sXG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICB0aHJvdyByZXNwb25zZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIF90aGlzLmFkZEZhaWxlZFJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIGV2ZW50czogb2xkUXVldWUsXG4gICAgICAgICAgICAgICAgc3RhdHNpZ01ldGFkYXRhOiBfdGhpcy5zZGtJbnRlcm5hbC5nZXRTdGF0c2lnTWV0YWRhdGEoKSxcbiAgICAgICAgICAgICAgICB0aW1lOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoaXNDbG9zaW5nKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuc2F2ZUZhaWxlZFJlcXVlc3RzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgU3RhdHNpZ0xvZ2dlci5wcm90b3R5cGUuc2F2ZUZhaWxlZFJlcXVlc3RzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAodGhpcy5mYWlsZWRMb2dFdmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIHJlcXVlc3RzQ29weSA9IEpTT04uc3RyaW5naWZ5KHRoaXMuZmFpbGVkTG9nRXZlbnRzKTtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0c0NvcHkubGVuZ3RoID4gTUFYX0xPQ0FMX1NUT1JBR0VfU0laRSkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nRHJvcHBlZExvZ0V2ZW50c0V4Y2VwdGlvbih0aGlzLmZhaWxlZExvZ0V2ZW50Q291bnQsICdFeGNlZWRzIGxvY2FsIHN0b3JhZ2Ugc2l6ZScpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChTdGF0c2lnQXN5bmNTdG9yYWdlXzEuZGVmYXVsdC5hc3luY1N0b3JhZ2UpIHtcbiAgICAgICAgICAgICAgICBTdGF0c2lnQXN5bmNTdG9yYWdlXzEuZGVmYXVsdC5zZXRJdGVtQXN5bmMoQ29uc3RhbnRzXzEuU1RBVFNJR19MT0NBTF9TVE9SQUdFX0xPR0dJTkdfUkVRVUVTVF9LRVksIHJlcXVlc3RzQ29weSkuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc2RrSW50ZXJuYWxcbiAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRFcnJvckJvdW5kYXJ5KClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5sb2dFcnJvcignc2F2ZUZhaWxlZFJlcXVlc3RzJywgcmVhc29uKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBTdGF0c2lnTG9jYWxTdG9yYWdlXzEuZGVmYXVsdC5zZXRJdGVtKENvbnN0YW50c18xLlNUQVRTSUdfTE9DQUxfU1RPUkFHRV9MT0dHSU5HX1JFUVVFU1RfS0VZLCByZXF1ZXN0c0NvcHkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdGF0c2lnTG9nZ2VyLnByb3RvdHlwZS5zZW5kU2F2ZWRSZXF1ZXN0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGZhaWxlZFJlcXVlc3RzLCBmaXJlQW5kRm9yZ2V0LCByZXF1ZXN0Qm9kaWVzLCBfbG9vcF8xLCB0aGlzXzEsIF9pLCByZXF1ZXN0Qm9kaWVzXzEsIHJlcXVlc3RCb2R5O1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVBbmRGb3JnZXQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghU3RhdHNpZ0FzeW5jU3RvcmFnZV8xLmRlZmF1bHQuYXN5bmNTdG9yYWdlKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFN0YXRzaWdBc3luY1N0b3JhZ2VfMS5kZWZhdWx0LmdldEl0ZW1Bc3luYyhDb25zdGFudHNfMS5TVEFUU0lHX0xPQ0FMX1NUT1JBR0VfTE9HR0lOR19SRVFVRVNUX0tFWSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBmYWlsZWRSZXF1ZXN0cyA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBmYWlsZWRSZXF1ZXN0cyA9IFN0YXRzaWdMb2NhbFN0b3JhZ2VfMS5kZWZhdWx0LmdldEl0ZW0oQ29uc3RhbnRzXzEuU1RBVFNJR19MT0NBTF9TVE9SQUdFX0xPR0dJTkdfUkVRVUVTVF9LRVkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAzO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmFpbGVkUmVxdWVzdHMgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmYWlsZWRSZXF1ZXN0cy5sZW5ndGggPiBNQVhfTE9DQUxfU1RPUkFHRV9TSVpFKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZUFuZEZvcmdldCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0Qm9kaWVzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RCb2RpZXMgPSBKU09OLnBhcnNlKGZhaWxlZFJlcXVlc3RzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9vcF8xID0gZnVuY3Rpb24gKHJlcXVlc3RCb2R5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0Qm9keSAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0Qm9keS5ldmVudHMgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkocmVxdWVzdEJvZHkuZXZlbnRzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc18xLnNka0ludGVybmFsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldE5ldHdvcmsoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wb3N0VG9FbmRwb2ludChTdGF0c2lnTmV0d29ya18xLlN0YXRzaWdFbmRwb2ludC5SZ3N0ciwgcmVxdWVzdEJvZHksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRpdGlvbmFsSGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU1RBVFNJRy1FVkVOVC1DT1VOVCc6IFN0cmluZyhyZXF1ZXN0Qm9keS5ldmVudHMubGVuZ3RoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IEVycm9yKHJlc3BvbnNlLnN0YXR1cyArICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpcmVBbmRGb3JnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9nRHJvcHBlZExvZ0V2ZW50c0V4Y2VwdGlvbihyZXF1ZXN0Qm9keS5ldmVudHMubGVuZ3RoLCAnRmx1c2ggd2hpbGUgc2h1dHRpbmcgZG93bicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmFkZEZhaWxlZFJlcXVlc3QocmVxdWVzdEJvZHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNfMSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChfaSA9IDAsIHJlcXVlc3RCb2RpZXNfMSA9IHJlcXVlc3RCb2RpZXM7IF9pIDwgcmVxdWVzdEJvZGllc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0Qm9keSA9IHJlcXVlc3RCb2RpZXNfMVtfaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sb29wXzEocmVxdWVzdEJvZHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgT3V0cHV0TG9nZ2VyXzEuZGVmYXVsdC5lcnJvcignc2VuZFNhdmVkUmVxdWVzdHMgJywgZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZGtJbnRlcm5hbC5nZXRFcnJvckJvdW5kYXJ5KCkubG9nRXJyb3IoJ3NlbmRTYXZlZFJlcXVlc3RzJywgZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyTG9jYWxTdG9yYWdlUmVxdWVzdHMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBTdGF0c2lnTG9nZ2VyLnByb3RvdHlwZS5hZGRGYWlsZWRSZXF1ZXN0ID0gZnVuY3Rpb24gKHJlcXVlc3RCb2R5KSB7XG4gICAgICAgIHZhciBldmVudFNpemUgPSByZXF1ZXN0Qm9keS5ldmVudHMubGVuZ3RoO1xuICAgICAgICBpZiAocmVxdWVzdEJvZHkudGltZSA8IERhdGUubm93KCkgLSBNU19SRVRSWV9MT0dTX0NVVE9GRikge1xuICAgICAgICAgICAgdGhpcy5sb2dEcm9wcGVkTG9nRXZlbnRzRXhjZXB0aW9uKGV2ZW50U2l6ZSwgJ0V2ZW50cyB0b28gb2xkJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZmFpbGVkTG9nRXZlbnRzLmxlbmd0aCA+IE1BWF9CQVRDSEVTX1RPX1JFVFJZKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ0Ryb3BwZWRMb2dFdmVudHNFeGNlcHRpb24oZXZlbnRTaXplLCAnRXhjZWVkIG1heCBiYXRjaGVzIHRvIHJldHJ5Jyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFkZGl0aW9uYWxFdmVudHMgPSByZXF1ZXN0Qm9keS5ldmVudHMubGVuZ3RoO1xuICAgICAgICBpZiAodGhpcy5mYWlsZWRMb2dFdmVudENvdW50ICsgYWRkaXRpb25hbEV2ZW50cyA+IE1BWF9GQUlMRURfRVZFTlRTKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ0Ryb3BwZWRMb2dFdmVudHNFeGNlcHRpb24oZXZlbnRTaXplLCAnRXhjZWVkcyBtYXggZmFpbGVkIGV2ZW50cycpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmFpbGVkTG9nRXZlbnRzLnB1c2gocmVxdWVzdEJvZHkpO1xuICAgICAgICB0aGlzLmZhaWxlZExvZ0V2ZW50Q291bnQgKz0gYWRkaXRpb25hbEV2ZW50cztcbiAgICB9O1xuICAgIFN0YXRzaWdMb2dnZXIucHJvdG90eXBlLmNsZWFyTG9jYWxTdG9yYWdlUmVxdWVzdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChTdGF0c2lnQXN5bmNTdG9yYWdlXzEuZGVmYXVsdC5hc3luY1N0b3JhZ2UpIHtcbiAgICAgICAgICAgIFN0YXRzaWdBc3luY1N0b3JhZ2VfMS5kZWZhdWx0LnJlbW92ZUl0ZW1Bc3luYyhDb25zdGFudHNfMS5TVEFUU0lHX0xPQ0FMX1NUT1JBR0VfTE9HR0lOR19SRVFVRVNUX0tFWSkuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zZGtJbnRlcm5hbFxuICAgICAgICAgICAgICAgICAgICAuZ2V0RXJyb3JCb3VuZGFyeSgpXG4gICAgICAgICAgICAgICAgICAgIC5sb2dFcnJvcignY2xlYXJMb2NhbFN0b3JhZ2VSZXF1ZXN0cycsIHJlYXNvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIFN0YXRzaWdMb2NhbFN0b3JhZ2VfMS5kZWZhdWx0LnJlbW92ZUl0ZW0oQ29uc3RhbnRzXzEuU1RBVFNJR19MT0NBTF9TVE9SQUdFX0xPR0dJTkdfUkVRVUVTVF9LRVkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdGF0c2lnTG9nZ2VyLnByb3RvdHlwZS5tYWtlRGlhZ25vc3RpY3NFdmVudCA9IGZ1bmN0aW9uICh1c2VyLCBkYXRhKSB7XG4gICAgICAgIHZhciBsYXRlbmN5RXZlbnQgPSBuZXcgTG9nRXZlbnRfMS5kZWZhdWx0KERJQUdOT1NUSUNTX0VWRU5UKTtcbiAgICAgICAgbGF0ZW5jeUV2ZW50LnNldFVzZXIodXNlcik7XG4gICAgICAgIGxhdGVuY3lFdmVudC5zZXRNZXRhZGF0YShkYXRhKTtcbiAgICAgICAgcmV0dXJuIGxhdGVuY3lFdmVudDtcbiAgICB9O1xuICAgIFN0YXRzaWdMb2dnZXIucHJvdG90eXBlLmFkZEVycm9yQm91bmRhcnlEaWFnbm9zdGljcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKERpYWdub3N0aWNzXzEuZGVmYXVsdC5nZXRNYXJrZXJDb3VudCgnYXBpX2NhbGwnKSA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkaWFnRXZlbnQgPSB0aGlzLm1ha2VEaWFnbm9zdGljc0V2ZW50KHRoaXMuc2RrSW50ZXJuYWwuZ2V0Q3VycmVudFVzZXIoKSwge1xuICAgICAgICAgICAgY29udGV4dDogJ2FwaV9jYWxsJyxcbiAgICAgICAgICAgIG1hcmtlcnM6IERpYWdub3N0aWNzXzEuZGVmYXVsdC5nZXRNYXJrZXJzKCdhcGlfY2FsbCcpLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKGRpYWdFdmVudCk7XG4gICAgICAgIERpYWdub3N0aWNzXzEuZGVmYXVsdC5jbGVhckNvbnRleHQoJ2FwaV9jYWxsJyk7XG4gICAgfTtcbiAgICBTdGF0c2lnTG9nZ2VyLnByb3RvdHlwZS5hZGROb25FeHBvc2VkQ2hlY2tzRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLm5vbkV4cG9zZWRDaGVja3MpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBldmVudCA9IG5ldyBMb2dFdmVudF8xLmRlZmF1bHQoTk9OX0VYUE9TRURfQ0hFQ0tTX0VWRU5UKTtcbiAgICAgICAgZXZlbnQuc2V0TWV0YWRhdGEoe1xuICAgICAgICAgICAgY2hlY2tzOiBfX2Fzc2lnbih7fSwgdGhpcy5ub25FeHBvc2VkQ2hlY2tzKSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucXVldWUucHVzaChldmVudCk7XG4gICAgICAgIHRoaXMubm9uRXhwb3NlZENoZWNrcyA9IHt9O1xuICAgIH07XG4gICAgU3RhdHNpZ0xvZ2dlci5wcm90b3R5cGUubG9nRHJvcHBlZExvZ0V2ZW50c0V4Y2VwdGlvbiA9IGZ1bmN0aW9uIChjb3VudCwgcmVhc29uKSB7XG4gICAgICAgIHRoaXMuc2RrSW50ZXJuYWxcbiAgICAgICAgICAgIC5nZXRFcnJvckJvdW5kYXJ5KClcbiAgICAgICAgICAgIC5sb2dFcnJvcihMT0dfRkFJTFVSRV9FVkVOVCwgbmV3IEVycm9yKHJlYXNvbiksIHtcbiAgICAgICAgICAgIGdldEV4dHJhRGF0YTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50Q291bnQ6IGNvdW50LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBTdGF0c2lnTG9nZ2VyO1xufSgpKTtcbmV4cG9ydHMuZGVmYXVsdCA9IFN0YXRzaWdMb2dnZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/statsig-js/dist/StatsigLogger.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/statsig-js/dist/StatsigNetwork.js":
/*!********************************************************!*\
  !*** ./node_modules/statsig-js/dist/StatsigNetwork.js ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.StatsigEndpoint = void 0;\nvar Errors_1 = __webpack_require__(/*! ./Errors */ \"(ssr)/./node_modules/statsig-js/dist/Errors.js\");\nvar StatsigRuntime_1 = __importDefault(__webpack_require__(/*! ./StatsigRuntime */ \"(ssr)/./node_modules/statsig-js/dist/StatsigRuntime.js\"));\nvar Diagnostics_1 = __importDefault(__webpack_require__(/*! ./utils/Diagnostics */ \"(ssr)/./node_modules/statsig-js/dist/utils/Diagnostics.js\"));\nvar OutputLogger_1 = __importDefault(__webpack_require__(/*! ./utils/OutputLogger */ \"(ssr)/./node_modules/statsig-js/dist/utils/OutputLogger.js\"));\nvar StatsigEndpoint;\n(function (StatsigEndpoint) {\n    StatsigEndpoint[\"Initialize\"] = \"initialize\";\n    StatsigEndpoint[\"Rgstr\"] = \"rgstr\";\n    StatsigEndpoint[\"LogEventBeacon\"] = \"log_event_beacon\";\n})(StatsigEndpoint = exports.StatsigEndpoint || (exports.StatsigEndpoint = {}));\nvar NO_CONTENT = 204;\nvar StatsigNetwork = /** @class */ (function () {\n    function StatsigNetwork(sdkInternal) {\n        this.retryCodes = {\n            408: true,\n            500: true,\n            502: true,\n            503: true,\n            504: true,\n            522: true,\n            524: true,\n            599: true,\n        };\n        this.canUseKeepalive = false;\n        this.sdkInternal = sdkInternal;\n        this.leakyBucket = {};\n        this.init();\n    }\n    StatsigNetwork.prototype.init = function () {\n        if (!this.sdkInternal.getOptions().getDisableNetworkKeepalive()) {\n            try {\n                this.canUseKeepalive = 'keepalive' in new Request('');\n            }\n            catch (_e) {\n                this.canUseKeepalive = false;\n            }\n        }\n    };\n    StatsigNetwork.prototype.fetchValues = function (args) {\n        var user = args.user, sinceTime = args.sinceTime, timeout = args.timeout, useDeltas = args.useDeltas, prefetchUsers = args.prefetchUsers, previousDerivedFields = args.previousDerivedFields, hadBadDeltaChecksum = args.hadBadDeltaChecksum, badChecksum = args.badChecksum, badMergedConfigs = args.badMergedConfigs, badFullResponse = args.badFullResponse;\n        var input = {\n            user: user,\n            prefetchUsers: prefetchUsers,\n            statsigMetadata: this.sdkInternal.getStatsigMetadata(),\n            sinceTime: sinceTime !== null && sinceTime !== void 0 ? sinceTime : undefined,\n            deltasResponseRequested: useDeltas,\n            hash: this.sdkInternal.getOptions().getDisableHashing() ? 'none' : 'djb2',\n            previousDerivedFields: previousDerivedFields,\n            hadBadDeltaChecksum: hadBadDeltaChecksum,\n            badChecksum: badChecksum,\n            badMergedConfigs: badMergedConfigs,\n            badFullResponse: badFullResponse,\n        };\n        return this.postWithTimeout(StatsigEndpoint.Initialize, input, {\n            timeout: timeout,\n            retries: this.sdkInternal.getOptions().getInitRequestRetries(),\n            diagnostics: Diagnostics_1.default.mark.initialize.networkRequest,\n        });\n    };\n    StatsigNetwork.prototype.postWithTimeout = function (endpointName, body, options) {\n        var _this = this;\n        var _a = options !== null && options !== void 0 ? options : {}, _b = _a.timeout, timeout = _b === void 0 ? 0 : _b, _c = _a.retries, retries = _c === void 0 ? 0 : _c, _d = _a.backoff, backoff = _d === void 0 ? 1000 : _d, _f = _a.diagnostics, diagnostics = _f === void 0 ? null : _f;\n        var hasTimedOut = false;\n        var timer = null;\n        var timerId;\n        var cachedReturnValue = null;\n        var eventuals = [];\n        var eventually = function (boundScope) { return function (fn) {\n            if (hasTimedOut && cachedReturnValue) {\n                fn(cachedReturnValue);\n            }\n            else {\n                eventuals.push(fn);\n            }\n            return boundScope;\n        }; };\n        if (timeout != 0) {\n            timer = new Promise(function (_, reject) {\n                timerId = setTimeout(function () {\n                    hasTimedOut = true;\n                    reject(new Errors_1.StatsigInitializationTimeoutError(timeout));\n                }, timeout);\n            });\n        }\n        var res;\n        var fetchPromise = this.postToEndpoint(endpointName, body, {\n            retryOptions: {\n                retryLimit: retries,\n                backoff: backoff,\n            },\n            diagnostics: diagnostics,\n        })\n            .then(function (localRes) {\n            res = localRes;\n            if (!res.ok) {\n                var errorMessage = \"Request to \".concat(endpointName, \" failed with status \").concat(res.status);\n                OutputLogger_1.default.error(errorMessage);\n                return Promise.reject(new Error(errorMessage));\n            }\n            if (typeof res.data !== 'object') {\n                var errorMessage = \"Request to \".concat(endpointName, \" received invalid response type. Expected 'object' but got '\").concat(typeof res.data, \"'\");\n                OutputLogger_1.default.error(errorMessage);\n                var error = new Error(errorMessage);\n                _this.sdkInternal\n                    .getErrorBoundary()\n                    .logError('postWithTimeoutInvalidRes', error, {\n                    getExtraData: function () {\n                        return _this.getErrorData(endpointName, body, retries, backoff, res);\n                    },\n                });\n                return Promise.reject(error);\n            }\n            var json = res.data;\n            return _this.sdkInternal.getErrorBoundary().capture('postWithTimeout', function () { return __awaiter(_this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    cachedReturnValue = json;\n                    if (hasTimedOut) {\n                        eventuals.forEach(function (fn) { return fn(json); });\n                        eventuals = [];\n                    }\n                    return [2 /*return*/, Promise.resolve(json)];\n                });\n            }); }, function () {\n                return Promise.resolve({});\n            }, {\n                getExtraData: function () {\n                    return _this.getErrorData(endpointName, body, retries, backoff, res);\n                },\n            });\n        })\n            .catch(function (e) {\n            return Promise.reject(e);\n        })\n            .finally(function () {\n            clearTimeout(timerId);\n        });\n        var racingPromise = (timer ? Promise.race([fetchPromise, timer]) : fetchPromise);\n        racingPromise.eventually = eventually(racingPromise);\n        return racingPromise;\n    };\n    StatsigNetwork.prototype.sendLogBeacon = function (payload) {\n        var statsigOpts = this.sdkInternal.getOptions();\n        if (statsigOpts.getLocalModeEnabled()) {\n            return true;\n        }\n        var url = new URL(statsigOpts.getEventLoggingApi() + StatsigEndpoint.LogEventBeacon);\n        url.searchParams.append('k', this.sdkInternal.getSDKKey());\n        payload.clientTime = Date.now() + '';\n        var stringPayload = null;\n        try {\n            stringPayload = JSON.stringify(payload);\n        }\n        catch (_e) {\n            return false;\n        }\n        return navigator.sendBeacon(url.toString(), stringPayload);\n    };\n    StatsigNetwork.prototype.postToEndpoint = function (endpointName, body, options) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            var _b, _c, useKeepalive, _d, diagnostics, _f, _g, retryLimit, _h, attempt, _j, backoff, statsigOpts, api, url, counter, shouldEncode, postBody, encoded, params, res, isRetryCode;\n            var _this = this;\n            return __generator(this, function (_k) {\n                _b = options !== null && options !== void 0 ? options : {}, _c = _b.useKeepalive, useKeepalive = _c === void 0 ? false : _c, _d = _b.diagnostics, diagnostics = _d === void 0 ? null : _d;\n                _f = (_a = options === null || options === void 0 ? void 0 : options.retryOptions) !== null && _a !== void 0 ? _a : {}, _g = _f.retryLimit, retryLimit = _g === void 0 ? 0 : _g, _h = _f.attempt, attempt = _h === void 0 ? 1 : _h, _j = _f.backoff, backoff = _j === void 0 ? 1000 : _j;\n                statsigOpts = this.sdkInternal.getOptions();\n                if (statsigOpts.getLocalModeEnabled()) {\n                    return [2 /*return*/, Promise.reject('no network requests in localMode')];\n                }\n                if (typeof fetch !== 'function') {\n                    // fetch is not defined in this environment, short circuit\n                    return [2 /*return*/, Promise.reject('fetch is not defined')];\n                }\n                if (typeof window === 'undefined' &&\n                    !statsigOpts.getIgnoreWindowUndefined()) {\n                    // by default, dont issue requests from the server\n                    return [2 /*return*/, Promise.reject('window is not defined')];\n                }\n                api = [StatsigEndpoint.Initialize].includes(endpointName)\n                    ? statsigOpts.getApi()\n                    : statsigOpts.getEventLoggingApi();\n                url = api + endpointName;\n                counter = this.leakyBucket[url];\n                if (counter != null && counter >= 30) {\n                    return [2 /*return*/, Promise.reject(new Error('Request failed because you are making the same request too frequently.'))];\n                }\n                if (counter == null) {\n                    this.leakyBucket[url] = 1;\n                }\n                else {\n                    this.leakyBucket[url] = counter + 1;\n                }\n                shouldEncode = endpointName === StatsigEndpoint.Initialize &&\n                    StatsigRuntime_1.default.encodeInitializeCall &&\n                    typeof window !== 'undefined' &&\n                    typeof (window === null || window === void 0 ? void 0 : window.btoa) === 'function';\n                postBody = JSON.stringify(body);\n                if (shouldEncode) {\n                    try {\n                        encoded = window.btoa(postBody).split('').reverse().join('');\n                        postBody = encoded;\n                    }\n                    catch (_e) {\n                        shouldEncode = false;\n                    }\n                }\n                params = {\n                    method: 'POST',\n                    body: postBody,\n                    headers: __assign({ 'Content-type': 'application/json; charset=UTF-8', 'STATSIG-API-KEY': this.sdkInternal.getSDKKey(), 'STATSIG-CLIENT-TIME': Date.now() + '', 'STATSIG-SDK-TYPE': this.sdkInternal.getSDKType(), 'STATSIG-SDK-VERSION': this.sdkInternal.getSDKVersion(), 'STATSIG-ENCODED': shouldEncode ? '1' : '0' }, options === null || options === void 0 ? void 0 : options.additionalHeaders),\n                };\n                if (this.canUseKeepalive && useKeepalive) {\n                    params.keepalive = true;\n                }\n                diagnostics === null || diagnostics === void 0 ? void 0 : diagnostics.start({ attempt: attempt });\n                isRetryCode = true;\n                return [2 /*return*/, fetch(url, params)\n                        .then(function (localRes) { return __awaiter(_this, void 0, void 0, function () {\n                        var networkResponse, text, errorText;\n                        return __generator(this, function (_a) {\n                            switch (_a.label) {\n                                case 0:\n                                    res = localRes;\n                                    if (!res.ok) return [3 /*break*/, 4];\n                                    networkResponse = res;\n                                    if (!(res.status === NO_CONTENT)) return [3 /*break*/, 1];\n                                    networkResponse.data = { has_updates: false, is_no_content: true };\n                                    return [3 /*break*/, 3];\n                                case 1: return [4 /*yield*/, res.text()];\n                                case 2:\n                                    text = _a.sent();\n                                    networkResponse.data = JSON.parse(text);\n                                    _a.label = 3;\n                                case 3:\n                                    diagnostics === null || diagnostics === void 0 ? void 0 : diagnostics.end(this.getDiagnosticsData(res, attempt));\n                                    return [2 /*return*/, Promise.resolve(networkResponse)];\n                                case 4:\n                                    if (!this.retryCodes[res.status]) {\n                                        isRetryCode = false;\n                                    }\n                                    return [4 /*yield*/, res.text()];\n                                case 5:\n                                    errorText = _a.sent();\n                                    return [2 /*return*/, Promise.reject(new Error(\"\".concat(res.status, \": \").concat(errorText)))];\n                            }\n                        });\n                    }); })\n                        .catch(function (e) {\n                        diagnostics === null || diagnostics === void 0 ? void 0 : diagnostics.end(_this.getDiagnosticsData(res, attempt, e));\n                        var errorMessage = \"Error occurred while posting to endpoint: \".concat(e.message, \"\\n\") +\n                            \"Error Details: \".concat(JSON.stringify(e), \"\\n\") +\n                            \"Endpoint: \".concat(endpointName, \"\\n\") +\n                            \"Attempt: \".concat(attempt, \"\\n\") +\n                            \"Retry Limit: \".concat(retryLimit, \"\\n\") +\n                            \"Backoff: \".concat(backoff);\n                        OutputLogger_1.default.error(errorMessage);\n                        if (attempt < retryLimit && isRetryCode) {\n                            return new Promise(function (resolve, reject) {\n                                setTimeout(function () {\n                                    _this.leakyBucket[url] = Math.max(_this.leakyBucket[url] - 1, 0);\n                                    _this.postToEndpoint(endpointName, body, {\n                                        retryOptions: {\n                                            retryLimit: retryLimit,\n                                            attempt: attempt + 1,\n                                            backoff: backoff * 2,\n                                        },\n                                        useKeepalive: useKeepalive,\n                                        diagnostics: diagnostics,\n                                    })\n                                        .then(resolve)\n                                        .catch(reject);\n                                }, backoff);\n                            });\n                        }\n                        return Promise.reject(e);\n                    })\n                        .finally(function () {\n                        _this.leakyBucket[url] = Math.max(_this.leakyBucket[url] - 1, 0);\n                    })];\n            });\n        });\n    };\n    StatsigNetwork.prototype.supportsKeepalive = function () {\n        return this.canUseKeepalive;\n    };\n    StatsigNetwork.prototype.getDiagnosticsData = function (res, attempt, e) {\n        var _a, _b;\n        return {\n            success: (res === null || res === void 0 ? void 0 : res.ok) === true,\n            statusCode: res === null || res === void 0 ? void 0 : res.status,\n            sdkRegion: (_a = res === null || res === void 0 ? void 0 : res.headers) === null || _a === void 0 ? void 0 : _a.get('x-statsig-region'),\n            isDelta: ((_b = res === null || res === void 0 ? void 0 : res.data) === null || _b === void 0 ? void 0 : _b.is_delta) === true,\n            attempt: attempt,\n            error: Diagnostics_1.default.formatError(e),\n        };\n    };\n    StatsigNetwork.prototype.getErrorData = function (endpointName, body, retries, backoff, res) {\n        var _a;\n        try {\n            var headers_1 = {};\n            ((_a = res.headers) !== null && _a !== void 0 ? _a : []).forEach(function (value, key) {\n                headers_1[key] = value;\n            });\n            return {\n                responseInfo: {\n                    headers: headers_1,\n                    status: res.status,\n                    statusText: res.statusText,\n                    type: res.type,\n                    url: res.url,\n                    redirected: res.redirected,\n                    bodySnippet: res.data ? JSON.stringify(res.data).slice(0, 500) : null,\n                },\n                requestInfo: {\n                    endpointName: endpointName,\n                    bodySnippet: JSON.stringify(body).slice(0, 500),\n                    retries: retries,\n                    backoff: backoff,\n                },\n            };\n        }\n        catch (_e) {\n            return {\n                statusText: 'statsig::failed to extract extra data',\n            };\n        }\n    };\n    return StatsigNetwork;\n}());\nexports[\"default\"] = StatsigNetwork;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L1N0YXRzaWdOZXR3b3JrLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBLGlEQUFpRCxPQUFPO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QiwrREFBK0QsaUJBQWlCO0FBQzVHO0FBQ0Esb0NBQW9DLE1BQU0sK0JBQStCLFlBQVk7QUFDckYsbUNBQW1DLE1BQU0sbUNBQW1DLFlBQVk7QUFDeEYsZ0NBQWdDO0FBQ2hDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxjQUFjLDZCQUE2QiwwQkFBMEIsY0FBYyxxQkFBcUI7QUFDeEcsaUJBQWlCLG9EQUFvRCxxRUFBcUUsY0FBYztBQUN4Six1QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QztBQUN4QyxtQ0FBbUMsU0FBUztBQUM1QyxtQ0FBbUMsV0FBVyxVQUFVO0FBQ3hELDBDQUEwQyxjQUFjO0FBQ3hEO0FBQ0EsOEdBQThHLE9BQU87QUFDckgsaUZBQWlGLGlCQUFpQjtBQUNsRyx5REFBeUQsZ0JBQWdCLFFBQVE7QUFDakYsK0NBQStDLGdCQUFnQixnQkFBZ0I7QUFDL0U7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBLFVBQVUsWUFBWSxhQUFhLFNBQVMsVUFBVTtBQUN0RCxvQ0FBb0MsU0FBUztBQUM3QztBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsdUJBQXVCO0FBQ3ZCLGVBQWUsbUJBQU8sQ0FBQyxnRUFBVTtBQUNqQyx1Q0FBdUMsbUJBQU8sQ0FBQyxnRkFBa0I7QUFDakUsb0NBQW9DLG1CQUFPLENBQUMsc0ZBQXFCO0FBQ2pFLHFDQUFxQyxtQkFBTyxDQUFDLHdGQUFzQjtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnREFBZ0QsdUJBQXVCLEtBQUs7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxzRUFBc0U7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxpR0FBaUc7QUFDakc7QUFDQTtBQUNBO0FBQ0EsMERBQTBELGtCQUFrQjtBQUM1RTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYSxJQUFJO0FBQ2pCLHlDQUF5QztBQUN6QyxhQUFhO0FBQ2I7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwRUFBMEU7QUFDMUUsc0lBQXNJO0FBQ3RJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsbUNBQW1DLGtRQUFrUTtBQUM3VTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhGQUE4RixrQkFBa0I7QUFDaEg7QUFDQTtBQUNBLG9EQUFvRDtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZEO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QixxQkFBcUIsSUFBSTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELGtCQUFlIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYW1hem9uLWZyZXNoLWRlbW8vLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L1N0YXRzaWdOZXR3b3JrLmpzPzkxMDIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKVxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH07XG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICAgIHdoaWxlIChnICYmIChnID0gMCwgb3BbMF0gJiYgKF8gPSAwKSksIF8pIHRyeSB7XG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcbiAgICB9XG59O1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5TdGF0c2lnRW5kcG9pbnQgPSB2b2lkIDA7XG52YXIgRXJyb3JzXzEgPSByZXF1aXJlKFwiLi9FcnJvcnNcIik7XG52YXIgU3RhdHNpZ1J1bnRpbWVfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9TdGF0c2lnUnVudGltZVwiKSk7XG52YXIgRGlhZ25vc3RpY3NfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi91dGlscy9EaWFnbm9zdGljc1wiKSk7XG52YXIgT3V0cHV0TG9nZ2VyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vdXRpbHMvT3V0cHV0TG9nZ2VyXCIpKTtcbnZhciBTdGF0c2lnRW5kcG9pbnQ7XG4oZnVuY3Rpb24gKFN0YXRzaWdFbmRwb2ludCkge1xuICAgIFN0YXRzaWdFbmRwb2ludFtcIkluaXRpYWxpemVcIl0gPSBcImluaXRpYWxpemVcIjtcbiAgICBTdGF0c2lnRW5kcG9pbnRbXCJSZ3N0clwiXSA9IFwicmdzdHJcIjtcbiAgICBTdGF0c2lnRW5kcG9pbnRbXCJMb2dFdmVudEJlYWNvblwiXSA9IFwibG9nX2V2ZW50X2JlYWNvblwiO1xufSkoU3RhdHNpZ0VuZHBvaW50ID0gZXhwb3J0cy5TdGF0c2lnRW5kcG9pbnQgfHwgKGV4cG9ydHMuU3RhdHNpZ0VuZHBvaW50ID0ge30pKTtcbnZhciBOT19DT05URU5UID0gMjA0O1xudmFyIFN0YXRzaWdOZXR3b3JrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFN0YXRzaWdOZXR3b3JrKHNka0ludGVybmFsKSB7XG4gICAgICAgIHRoaXMucmV0cnlDb2RlcyA9IHtcbiAgICAgICAgICAgIDQwODogdHJ1ZSxcbiAgICAgICAgICAgIDUwMDogdHJ1ZSxcbiAgICAgICAgICAgIDUwMjogdHJ1ZSxcbiAgICAgICAgICAgIDUwMzogdHJ1ZSxcbiAgICAgICAgICAgIDUwNDogdHJ1ZSxcbiAgICAgICAgICAgIDUyMjogdHJ1ZSxcbiAgICAgICAgICAgIDUyNDogdHJ1ZSxcbiAgICAgICAgICAgIDU5OTogdHJ1ZSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jYW5Vc2VLZWVwYWxpdmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zZGtJbnRlcm5hbCA9IHNka0ludGVybmFsO1xuICAgICAgICB0aGlzLmxlYWt5QnVja2V0ID0ge307XG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgIH1cbiAgICBTdGF0c2lnTmV0d29yay5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnNka0ludGVybmFsLmdldE9wdGlvbnMoKS5nZXREaXNhYmxlTmV0d29ya0tlZXBhbGl2ZSgpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FuVXNlS2VlcGFsaXZlID0gJ2tlZXBhbGl2ZScgaW4gbmV3IFJlcXVlc3QoJycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKF9lKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW5Vc2VLZWVwYWxpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU3RhdHNpZ05ldHdvcmsucHJvdG90eXBlLmZldGNoVmFsdWVzID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgdmFyIHVzZXIgPSBhcmdzLnVzZXIsIHNpbmNlVGltZSA9IGFyZ3Muc2luY2VUaW1lLCB0aW1lb3V0ID0gYXJncy50aW1lb3V0LCB1c2VEZWx0YXMgPSBhcmdzLnVzZURlbHRhcywgcHJlZmV0Y2hVc2VycyA9IGFyZ3MucHJlZmV0Y2hVc2VycywgcHJldmlvdXNEZXJpdmVkRmllbGRzID0gYXJncy5wcmV2aW91c0Rlcml2ZWRGaWVsZHMsIGhhZEJhZERlbHRhQ2hlY2tzdW0gPSBhcmdzLmhhZEJhZERlbHRhQ2hlY2tzdW0sIGJhZENoZWNrc3VtID0gYXJncy5iYWRDaGVja3N1bSwgYmFkTWVyZ2VkQ29uZmlncyA9IGFyZ3MuYmFkTWVyZ2VkQ29uZmlncywgYmFkRnVsbFJlc3BvbnNlID0gYXJncy5iYWRGdWxsUmVzcG9uc2U7XG4gICAgICAgIHZhciBpbnB1dCA9IHtcbiAgICAgICAgICAgIHVzZXI6IHVzZXIsXG4gICAgICAgICAgICBwcmVmZXRjaFVzZXJzOiBwcmVmZXRjaFVzZXJzLFxuICAgICAgICAgICAgc3RhdHNpZ01ldGFkYXRhOiB0aGlzLnNka0ludGVybmFsLmdldFN0YXRzaWdNZXRhZGF0YSgpLFxuICAgICAgICAgICAgc2luY2VUaW1lOiBzaW5jZVRpbWUgIT09IG51bGwgJiYgc2luY2VUaW1lICE9PSB2b2lkIDAgPyBzaW5jZVRpbWUgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBkZWx0YXNSZXNwb25zZVJlcXVlc3RlZDogdXNlRGVsdGFzLFxuICAgICAgICAgICAgaGFzaDogdGhpcy5zZGtJbnRlcm5hbC5nZXRPcHRpb25zKCkuZ2V0RGlzYWJsZUhhc2hpbmcoKSA/ICdub25lJyA6ICdkamIyJyxcbiAgICAgICAgICAgIHByZXZpb3VzRGVyaXZlZEZpZWxkczogcHJldmlvdXNEZXJpdmVkRmllbGRzLFxuICAgICAgICAgICAgaGFkQmFkRGVsdGFDaGVja3N1bTogaGFkQmFkRGVsdGFDaGVja3N1bSxcbiAgICAgICAgICAgIGJhZENoZWNrc3VtOiBiYWRDaGVja3N1bSxcbiAgICAgICAgICAgIGJhZE1lcmdlZENvbmZpZ3M6IGJhZE1lcmdlZENvbmZpZ3MsXG4gICAgICAgICAgICBiYWRGdWxsUmVzcG9uc2U6IGJhZEZ1bGxSZXNwb25zZSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zdFdpdGhUaW1lb3V0KFN0YXRzaWdFbmRwb2ludC5Jbml0aWFsaXplLCBpbnB1dCwge1xuICAgICAgICAgICAgdGltZW91dDogdGltZW91dCxcbiAgICAgICAgICAgIHJldHJpZXM6IHRoaXMuc2RrSW50ZXJuYWwuZ2V0T3B0aW9ucygpLmdldEluaXRSZXF1ZXN0UmV0cmllcygpLFxuICAgICAgICAgICAgZGlhZ25vc3RpY3M6IERpYWdub3N0aWNzXzEuZGVmYXVsdC5tYXJrLmluaXRpYWxpemUubmV0d29ya1JlcXVlc3QsXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgU3RhdHNpZ05ldHdvcmsucHJvdG90eXBlLnBvc3RXaXRoVGltZW91dCA9IGZ1bmN0aW9uIChlbmRwb2ludE5hbWUsIGJvZHksIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIF9hID0gb3B0aW9ucyAhPT0gbnVsbCAmJiBvcHRpb25zICE9PSB2b2lkIDAgPyBvcHRpb25zIDoge30sIF9iID0gX2EudGltZW91dCwgdGltZW91dCA9IF9iID09PSB2b2lkIDAgPyAwIDogX2IsIF9jID0gX2EucmV0cmllcywgcmV0cmllcyA9IF9jID09PSB2b2lkIDAgPyAwIDogX2MsIF9kID0gX2EuYmFja29mZiwgYmFja29mZiA9IF9kID09PSB2b2lkIDAgPyAxMDAwIDogX2QsIF9mID0gX2EuZGlhZ25vc3RpY3MsIGRpYWdub3N0aWNzID0gX2YgPT09IHZvaWQgMCA/IG51bGwgOiBfZjtcbiAgICAgICAgdmFyIGhhc1RpbWVkT3V0ID0gZmFsc2U7XG4gICAgICAgIHZhciB0aW1lciA9IG51bGw7XG4gICAgICAgIHZhciB0aW1lcklkO1xuICAgICAgICB2YXIgY2FjaGVkUmV0dXJuVmFsdWUgPSBudWxsO1xuICAgICAgICB2YXIgZXZlbnR1YWxzID0gW107XG4gICAgICAgIHZhciBldmVudHVhbGx5ID0gZnVuY3Rpb24gKGJvdW5kU2NvcGUpIHsgcmV0dXJuIGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgICAgaWYgKGhhc1RpbWVkT3V0ICYmIGNhY2hlZFJldHVyblZhbHVlKSB7XG4gICAgICAgICAgICAgICAgZm4oY2FjaGVkUmV0dXJuVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZXZlbnR1YWxzLnB1c2goZm4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGJvdW5kU2NvcGU7XG4gICAgICAgIH07IH07XG4gICAgICAgIGlmICh0aW1lb3V0ICE9IDApIHtcbiAgICAgICAgICAgIHRpbWVyID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKF8sIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFzVGltZWRPdXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yc18xLlN0YXRzaWdJbml0aWFsaXphdGlvblRpbWVvdXRFcnJvcih0aW1lb3V0KSk7XG4gICAgICAgICAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVzO1xuICAgICAgICB2YXIgZmV0Y2hQcm9taXNlID0gdGhpcy5wb3N0VG9FbmRwb2ludChlbmRwb2ludE5hbWUsIGJvZHksIHtcbiAgICAgICAgICAgIHJldHJ5T3B0aW9uczoge1xuICAgICAgICAgICAgICAgIHJldHJ5TGltaXQ6IHJldHJpZXMsXG4gICAgICAgICAgICAgICAgYmFja29mZjogYmFja29mZixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkaWFnbm9zdGljczogZGlhZ25vc3RpY3MsXG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAobG9jYWxSZXMpIHtcbiAgICAgICAgICAgIHJlcyA9IGxvY2FsUmVzO1xuICAgICAgICAgICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gXCJSZXF1ZXN0IHRvIFwiLmNvbmNhdChlbmRwb2ludE5hbWUsIFwiIGZhaWxlZCB3aXRoIHN0YXR1cyBcIikuY29uY2F0KHJlcy5zdGF0dXMpO1xuICAgICAgICAgICAgICAgIE91dHB1dExvZ2dlcl8xLmRlZmF1bHQuZXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKGVycm9yTWVzc2FnZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiByZXMuZGF0YSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gXCJSZXF1ZXN0IHRvIFwiLmNvbmNhdChlbmRwb2ludE5hbWUsIFwiIHJlY2VpdmVkIGludmFsaWQgcmVzcG9uc2UgdHlwZS4gRXhwZWN0ZWQgJ29iamVjdCcgYnV0IGdvdCAnXCIpLmNvbmNhdCh0eXBlb2YgcmVzLmRhdGEsIFwiJ1wiKTtcbiAgICAgICAgICAgICAgICBPdXRwdXRMb2dnZXJfMS5kZWZhdWx0LmVycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgdmFyIGVycm9yID0gbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgX3RoaXMuc2RrSW50ZXJuYWxcbiAgICAgICAgICAgICAgICAgICAgLmdldEVycm9yQm91bmRhcnkoKVxuICAgICAgICAgICAgICAgICAgICAubG9nRXJyb3IoJ3Bvc3RXaXRoVGltZW91dEludmFsaWRSZXMnLCBlcnJvciwge1xuICAgICAgICAgICAgICAgICAgICBnZXRFeHRyYURhdGE6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5nZXRFcnJvckRhdGEoZW5kcG9pbnROYW1lLCBib2R5LCByZXRyaWVzLCBiYWNrb2ZmLCByZXMpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIganNvbiA9IHJlcy5kYXRhO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNka0ludGVybmFsLmdldEVycm9yQm91bmRhcnkoKS5jYXB0dXJlKCdwb3N0V2l0aFRpbWVvdXQnLCBmdW5jdGlvbiAoKSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICBjYWNoZWRSZXR1cm5WYWx1ZSA9IGpzb247XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNUaW1lZE91dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnR1YWxzLmZvckVhY2goZnVuY3Rpb24gKGZuKSB7IHJldHVybiBmbihqc29uKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudHVhbHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgUHJvbWlzZS5yZXNvbHZlKGpzb24pXTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pOyB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7fSk7XG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgZ2V0RXh0cmFEYXRhOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5nZXRFcnJvckRhdGEoZW5kcG9pbnROYW1lLCBib2R5LCByZXRyaWVzLCBiYWNrb2ZmLCByZXMpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVySWQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIHJhY2luZ1Byb21pc2UgPSAodGltZXIgPyBQcm9taXNlLnJhY2UoW2ZldGNoUHJvbWlzZSwgdGltZXJdKSA6IGZldGNoUHJvbWlzZSk7XG4gICAgICAgIHJhY2luZ1Byb21pc2UuZXZlbnR1YWxseSA9IGV2ZW50dWFsbHkocmFjaW5nUHJvbWlzZSk7XG4gICAgICAgIHJldHVybiByYWNpbmdQcm9taXNlO1xuICAgIH07XG4gICAgU3RhdHNpZ05ldHdvcmsucHJvdG90eXBlLnNlbmRMb2dCZWFjb24gPSBmdW5jdGlvbiAocGF5bG9hZCkge1xuICAgICAgICB2YXIgc3RhdHNpZ09wdHMgPSB0aGlzLnNka0ludGVybmFsLmdldE9wdGlvbnMoKTtcbiAgICAgICAgaWYgKHN0YXRzaWdPcHRzLmdldExvY2FsTW9kZUVuYWJsZWQoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHVybCA9IG5ldyBVUkwoc3RhdHNpZ09wdHMuZ2V0RXZlbnRMb2dnaW5nQXBpKCkgKyBTdGF0c2lnRW5kcG9pbnQuTG9nRXZlbnRCZWFjb24pO1xuICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZCgnaycsIHRoaXMuc2RrSW50ZXJuYWwuZ2V0U0RLS2V5KCkpO1xuICAgICAgICBwYXlsb2FkLmNsaWVudFRpbWUgPSBEYXRlLm5vdygpICsgJyc7XG4gICAgICAgIHZhciBzdHJpbmdQYXlsb2FkID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHN0cmluZ1BheWxvYWQgPSBKU09OLnN0cmluZ2lmeShwYXlsb2FkKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoX2UpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmF2aWdhdG9yLnNlbmRCZWFjb24odXJsLnRvU3RyaW5nKCksIHN0cmluZ1BheWxvYWQpO1xuICAgIH07XG4gICAgU3RhdHNpZ05ldHdvcmsucHJvdG90eXBlLnBvc3RUb0VuZHBvaW50ID0gZnVuY3Rpb24gKGVuZHBvaW50TmFtZSwgYm9keSwgb3B0aW9ucykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfYiwgX2MsIHVzZUtlZXBhbGl2ZSwgX2QsIGRpYWdub3N0aWNzLCBfZiwgX2csIHJldHJ5TGltaXQsIF9oLCBhdHRlbXB0LCBfaiwgYmFja29mZiwgc3RhdHNpZ09wdHMsIGFwaSwgdXJsLCBjb3VudGVyLCBzaG91bGRFbmNvZGUsIHBvc3RCb2R5LCBlbmNvZGVkLCBwYXJhbXMsIHJlcywgaXNSZXRyeUNvZGU7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfaykge1xuICAgICAgICAgICAgICAgIF9iID0gb3B0aW9ucyAhPT0gbnVsbCAmJiBvcHRpb25zICE9PSB2b2lkIDAgPyBvcHRpb25zIDoge30sIF9jID0gX2IudXNlS2VlcGFsaXZlLCB1c2VLZWVwYWxpdmUgPSBfYyA9PT0gdm9pZCAwID8gZmFsc2UgOiBfYywgX2QgPSBfYi5kaWFnbm9zdGljcywgZGlhZ25vc3RpY3MgPSBfZCA9PT0gdm9pZCAwID8gbnVsbCA6IF9kO1xuICAgICAgICAgICAgICAgIF9mID0gKF9hID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnJldHJ5T3B0aW9ucykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge30sIF9nID0gX2YucmV0cnlMaW1pdCwgcmV0cnlMaW1pdCA9IF9nID09PSB2b2lkIDAgPyAwIDogX2csIF9oID0gX2YuYXR0ZW1wdCwgYXR0ZW1wdCA9IF9oID09PSB2b2lkIDAgPyAxIDogX2gsIF9qID0gX2YuYmFja29mZiwgYmFja29mZiA9IF9qID09PSB2b2lkIDAgPyAxMDAwIDogX2o7XG4gICAgICAgICAgICAgICAgc3RhdHNpZ09wdHMgPSB0aGlzLnNka0ludGVybmFsLmdldE9wdGlvbnMoKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdHNpZ09wdHMuZ2V0TG9jYWxNb2RlRW5hYmxlZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBQcm9taXNlLnJlamVjdCgnbm8gbmV0d29yayByZXF1ZXN0cyBpbiBsb2NhbE1vZGUnKV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZmV0Y2ggIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZmV0Y2ggaXMgbm90IGRlZmluZWQgaW4gdGhpcyBlbnZpcm9ubWVudCwgc2hvcnQgY2lyY3VpdFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgUHJvbWlzZS5yZWplY3QoJ2ZldGNoIGlzIG5vdCBkZWZpbmVkJyldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICAgICAgICAgICAgIXN0YXRzaWdPcHRzLmdldElnbm9yZVdpbmRvd1VuZGVmaW5lZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGJ5IGRlZmF1bHQsIGRvbnQgaXNzdWUgcmVxdWVzdHMgZnJvbSB0aGUgc2VydmVyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBQcm9taXNlLnJlamVjdCgnd2luZG93IGlzIG5vdCBkZWZpbmVkJyldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhcGkgPSBbU3RhdHNpZ0VuZHBvaW50LkluaXRpYWxpemVdLmluY2x1ZGVzKGVuZHBvaW50TmFtZSlcbiAgICAgICAgICAgICAgICAgICAgPyBzdGF0c2lnT3B0cy5nZXRBcGkoKVxuICAgICAgICAgICAgICAgICAgICA6IHN0YXRzaWdPcHRzLmdldEV2ZW50TG9nZ2luZ0FwaSgpO1xuICAgICAgICAgICAgICAgIHVybCA9IGFwaSArIGVuZHBvaW50TmFtZTtcbiAgICAgICAgICAgICAgICBjb3VudGVyID0gdGhpcy5sZWFreUJ1Y2tldFt1cmxdO1xuICAgICAgICAgICAgICAgIGlmIChjb3VudGVyICE9IG51bGwgJiYgY291bnRlciA+PSAzMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdSZXF1ZXN0IGZhaWxlZCBiZWNhdXNlIHlvdSBhcmUgbWFraW5nIHRoZSBzYW1lIHJlcXVlc3QgdG9vIGZyZXF1ZW50bHkuJykpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNvdW50ZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxlYWt5QnVja2V0W3VybF0gPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sZWFreUJ1Y2tldFt1cmxdID0gY291bnRlciArIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNob3VsZEVuY29kZSA9IGVuZHBvaW50TmFtZSA9PT0gU3RhdHNpZ0VuZHBvaW50LkluaXRpYWxpemUgJiZcbiAgICAgICAgICAgICAgICAgICAgU3RhdHNpZ1J1bnRpbWVfMS5kZWZhdWx0LmVuY29kZUluaXRpYWxpemVDYWxsICYmXG4gICAgICAgICAgICAgICAgICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgICAgICAgICAgIHR5cGVvZiAod2luZG93ID09PSBudWxsIHx8IHdpbmRvdyA9PT0gdm9pZCAwID8gdm9pZCAwIDogd2luZG93LmJ0b2EpID09PSAnZnVuY3Rpb24nO1xuICAgICAgICAgICAgICAgIHBvc3RCb2R5ID0gSlNPTi5zdHJpbmdpZnkoYm9keSk7XG4gICAgICAgICAgICAgICAgaWYgKHNob3VsZEVuY29kZSkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5jb2RlZCA9IHdpbmRvdy5idG9hKHBvc3RCb2R5KS5zcGxpdCgnJykucmV2ZXJzZSgpLmpvaW4oJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zdEJvZHkgPSBlbmNvZGVkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChfZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hvdWxkRW5jb2RlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGFyYW1zID0ge1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgYm9keTogcG9zdEJvZHksXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IF9fYXNzaWduKHsgJ0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PVVURi04JywgJ1NUQVRTSUctQVBJLUtFWSc6IHRoaXMuc2RrSW50ZXJuYWwuZ2V0U0RLS2V5KCksICdTVEFUU0lHLUNMSUVOVC1USU1FJzogRGF0ZS5ub3coKSArICcnLCAnU1RBVFNJRy1TREstVFlQRSc6IHRoaXMuc2RrSW50ZXJuYWwuZ2V0U0RLVHlwZSgpLCAnU1RBVFNJRy1TREstVkVSU0lPTic6IHRoaXMuc2RrSW50ZXJuYWwuZ2V0U0RLVmVyc2lvbigpLCAnU1RBVFNJRy1FTkNPREVEJzogc2hvdWxkRW5jb2RlID8gJzEnIDogJzAnIH0sIG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5hZGRpdGlvbmFsSGVhZGVycyksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jYW5Vc2VLZWVwYWxpdmUgJiYgdXNlS2VlcGFsaXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtcy5rZWVwYWxpdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkaWFnbm9zdGljcyA9PT0gbnVsbCB8fCBkaWFnbm9zdGljcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGlhZ25vc3RpY3Muc3RhcnQoeyBhdHRlbXB0OiBhdHRlbXB0IH0pO1xuICAgICAgICAgICAgICAgIGlzUmV0cnlDb2RlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgZmV0Y2godXJsLCBwYXJhbXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAobG9jYWxSZXMpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXR3b3JrUmVzcG9uc2UsIHRleHQsIGVycm9yVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IGxvY2FsUmVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXMub2spIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV0d29ya1Jlc3BvbnNlID0gcmVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzLnN0YXR1cyA9PT0gTk9fQ09OVEVOVCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV0d29ya1Jlc3BvbnNlLmRhdGEgPSB7IGhhc191cGRhdGVzOiBmYWxzZSwgaXNfbm9fY29udGVudDogdHJ1ZSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTogcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLnRleHQoKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXR3b3JrUmVzcG9uc2UuZGF0YSA9IEpTT04ucGFyc2UodGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYWdub3N0aWNzID09PSBudWxsIHx8IGRpYWdub3N0aWNzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkaWFnbm9zdGljcy5lbmQodGhpcy5nZXREaWFnbm9zdGljc0RhdGEocmVzLCBhdHRlbXB0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgUHJvbWlzZS5yZXNvbHZlKG5ldHdvcmtSZXNwb25zZSldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucmV0cnlDb2Rlc1tyZXMuc3RhdHVzXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUmV0cnlDb2RlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXMudGV4dCgpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JUZXh0ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIlwiLmNvbmNhdChyZXMuc3RhdHVzLCBcIjogXCIpLmNvbmNhdChlcnJvclRleHQpKSldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTsgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlhZ25vc3RpY3MgPT09IG51bGwgfHwgZGlhZ25vc3RpY3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRpYWdub3N0aWNzLmVuZChfdGhpcy5nZXREaWFnbm9zdGljc0RhdGEocmVzLCBhdHRlbXB0LCBlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gXCJFcnJvciBvY2N1cnJlZCB3aGlsZSBwb3N0aW5nIHRvIGVuZHBvaW50OiBcIi5jb25jYXQoZS5tZXNzYWdlLCBcIlxcblwiKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJFcnJvciBEZXRhaWxzOiBcIi5jb25jYXQoSlNPTi5zdHJpbmdpZnkoZSksIFwiXFxuXCIpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkVuZHBvaW50OiBcIi5jb25jYXQoZW5kcG9pbnROYW1lLCBcIlxcblwiKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJBdHRlbXB0OiBcIi5jb25jYXQoYXR0ZW1wdCwgXCJcXG5cIikgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiUmV0cnkgTGltaXQ6IFwiLmNvbmNhdChyZXRyeUxpbWl0LCBcIlxcblwiKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJCYWNrb2ZmOiBcIi5jb25jYXQoYmFja29mZik7XG4gICAgICAgICAgICAgICAgICAgICAgICBPdXRwdXRMb2dnZXJfMS5kZWZhdWx0LmVycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0ZW1wdCA8IHJldHJ5TGltaXQgJiYgaXNSZXRyeUNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmxlYWt5QnVja2V0W3VybF0gPSBNYXRoLm1heChfdGhpcy5sZWFreUJ1Y2tldFt1cmxdIC0gMSwgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wb3N0VG9FbmRwb2ludChlbmRwb2ludE5hbWUsIGJvZHksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXRyeU9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0cnlMaW1pdDogcmV0cnlMaW1pdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0ZW1wdDogYXR0ZW1wdCArIDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tvZmY6IGJhY2tvZmYgKiAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlS2VlcGFsaXZlOiB1c2VLZWVwYWxpdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlhZ25vc3RpY3M6IGRpYWdub3N0aWNzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXNvbHZlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChyZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBiYWNrb2ZmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmxlYWt5QnVja2V0W3VybF0gPSBNYXRoLm1heChfdGhpcy5sZWFreUJ1Y2tldFt1cmxdIC0gMSwgMCk7XG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFN0YXRzaWdOZXR3b3JrLnByb3RvdHlwZS5zdXBwb3J0c0tlZXBhbGl2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FuVXNlS2VlcGFsaXZlO1xuICAgIH07XG4gICAgU3RhdHNpZ05ldHdvcmsucHJvdG90eXBlLmdldERpYWdub3N0aWNzRGF0YSA9IGZ1bmN0aW9uIChyZXMsIGF0dGVtcHQsIGUpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IChyZXMgPT09IG51bGwgfHwgcmVzID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXMub2spID09PSB0cnVlLFxuICAgICAgICAgICAgc3RhdHVzQ29kZTogcmVzID09PSBudWxsIHx8IHJlcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzLnN0YXR1cyxcbiAgICAgICAgICAgIHNka1JlZ2lvbjogKF9hID0gcmVzID09PSBudWxsIHx8IHJlcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzLmhlYWRlcnMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXQoJ3gtc3RhdHNpZy1yZWdpb24nKSxcbiAgICAgICAgICAgIGlzRGVsdGE6ICgoX2IgPSByZXMgPT09IG51bGwgfHwgcmVzID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXMuZGF0YSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmlzX2RlbHRhKSA9PT0gdHJ1ZSxcbiAgICAgICAgICAgIGF0dGVtcHQ6IGF0dGVtcHQsXG4gICAgICAgICAgICBlcnJvcjogRGlhZ25vc3RpY3NfMS5kZWZhdWx0LmZvcm1hdEVycm9yKGUpLFxuICAgICAgICB9O1xuICAgIH07XG4gICAgU3RhdHNpZ05ldHdvcmsucHJvdG90eXBlLmdldEVycm9yRGF0YSA9IGZ1bmN0aW9uIChlbmRwb2ludE5hbWUsIGJvZHksIHJldHJpZXMsIGJhY2tvZmYsIHJlcykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVyc18xID0ge307XG4gICAgICAgICAgICAoKF9hID0gcmVzLmhlYWRlcnMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFtdKS5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyc18xW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZUluZm86IHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyc18xLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHJlcy5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6IHJlcy5zdGF0dXNUZXh0LFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiByZXMudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiByZXMudXJsLFxuICAgICAgICAgICAgICAgICAgICByZWRpcmVjdGVkOiByZXMucmVkaXJlY3RlZCxcbiAgICAgICAgICAgICAgICAgICAgYm9keVNuaXBwZXQ6IHJlcy5kYXRhID8gSlNPTi5zdHJpbmdpZnkocmVzLmRhdGEpLnNsaWNlKDAsIDUwMCkgOiBudWxsLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWVzdEluZm86IHtcbiAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnROYW1lOiBlbmRwb2ludE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGJvZHlTbmlwcGV0OiBKU09OLnN0cmluZ2lmeShib2R5KS5zbGljZSgwLCA1MDApLFxuICAgICAgICAgICAgICAgICAgICByZXRyaWVzOiByZXRyaWVzLFxuICAgICAgICAgICAgICAgICAgICBiYWNrb2ZmOiBiYWNrb2ZmLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChfZSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiAnc3RhdHNpZzo6ZmFpbGVkIHRvIGV4dHJhY3QgZXh0cmEgZGF0YScsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gU3RhdHNpZ05ldHdvcms7XG59KCkpO1xuZXhwb3J0cy5kZWZhdWx0ID0gU3RhdHNpZ05ldHdvcms7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/statsig-js/dist/StatsigNetwork.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/statsig-js/dist/StatsigRuntime.js":
/*!********************************************************!*\
  !*** ./node_modules/statsig-js/dist/StatsigRuntime.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar StatsigRuntime = /** @class */ (function () {\n    function StatsigRuntime() {\n    }\n    StatsigRuntime.encodeInitializeCall = true;\n    return StatsigRuntime;\n}());\nexports[\"default\"] = StatsigRuntime;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L1N0YXRzaWdSdW50aW1lLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsa0JBQWUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbWF6b24tZnJlc2gtZGVtby8uL25vZGVfbW9kdWxlcy9zdGF0c2lnLWpzL2Rpc3QvU3RhdHNpZ1J1bnRpbWUuanM/NDJjNCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBTdGF0c2lnUnVudGltZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTdGF0c2lnUnVudGltZSgpIHtcbiAgICB9XG4gICAgU3RhdHNpZ1J1bnRpbWUuZW5jb2RlSW5pdGlhbGl6ZUNhbGwgPSB0cnVlO1xuICAgIHJldHVybiBTdGF0c2lnUnVudGltZTtcbn0oKSk7XG5leHBvcnRzLmRlZmF1bHQgPSBTdGF0c2lnUnVudGltZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/statsig-js/dist/StatsigRuntime.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/statsig-js/dist/StatsigSDKOptions.js":
/*!***********************************************************!*\
  !*** ./node_modules/statsig-js/dist/StatsigSDKOptions.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.LogLevel = exports.INIT_TIMEOUT_DEFAULT_MS = void 0;\nvar DEFAULT_FEATURE_GATE_API = 'https://featuregates.org/v1/';\nvar DEFAULT_EVENT_LOGGING_API = 'https://events.statsigapi.net/v1/';\nvar DEFAULT_INIT_NETWORK_RETRIES = 3;\nexports.INIT_TIMEOUT_DEFAULT_MS = 3000;\nvar LogLevel;\n(function (LogLevel) {\n    LogLevel[\"NONE\"] = \"NONE\";\n    LogLevel[\"INFO\"] = \"INFO\";\n    LogLevel[\"DEBUG\"] = \"DEBUG\";\n    LogLevel[\"WARN\"] = \"WARN\";\n    LogLevel[\"ERROR\"] = \"ERROR\";\n})(LogLevel = exports.LogLevel || (exports.LogLevel = {}));\nvar StatsigSDKOptions = /** @class */ (function () {\n    function StatsigSDKOptions(options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2;\n        if (options == null) {\n            options = {};\n        }\n        var api = (_a = options.api) !== null && _a !== void 0 ? _a : DEFAULT_FEATURE_GATE_API;\n        this.api = api.endsWith('/') ? api : api + '/';\n        this.disableCurrentPageLogging = (_b = options.disableCurrentPageLogging) !== null && _b !== void 0 ? _b : false;\n        this.environment = (_c = options.environment) !== null && _c !== void 0 ? _c : null;\n        this.loggingIntervalMillis = this.normalizeNumberInput(options.loggingIntervalMillis, {\n            default: 10000,\n            min: 1000,\n            max: 60000,\n        });\n        this.loggingBufferMaxSize = this.normalizeNumberInput(options.loggingBufferMaxSize, {\n            default: 100,\n            min: 2,\n            max: 500,\n        });\n        this.disableNetworkKeepalive = (_d = options.disableNetworkKeepalive) !== null && _d !== void 0 ? _d : false;\n        this.initRequestRetries =\n            (_e = options.initRequestRetries) !== null && _e !== void 0 ? _e : DEFAULT_INIT_NETWORK_RETRIES;\n        this.overrideStableID = (_f = options.overrideStableID) !== null && _f !== void 0 ? _f : null;\n        this.localMode = (_g = options.localMode) !== null && _g !== void 0 ? _g : false;\n        this.initTimeoutMs =\n            options.initTimeoutMs && options.initTimeoutMs >= 0\n                ? options.initTimeoutMs\n                : exports.INIT_TIMEOUT_DEFAULT_MS;\n        this.disableErrorLogging = (_h = options.disableErrorLogging) !== null && _h !== void 0 ? _h : false;\n        this.disableAutoMetricsLogging = (_j = options.disableAutoMetricsLogging) !== null && _j !== void 0 ? _j : false;\n        this.initializeValues = (_k = options.initializeValues) !== null && _k !== void 0 ? _k : null;\n        var eventLoggingApi = (_m = (_l = options.eventLoggingApi) !== null && _l !== void 0 ? _l : options.api) !== null && _m !== void 0 ? _m : DEFAULT_EVENT_LOGGING_API;\n        this.eventLoggingApi = eventLoggingApi.endsWith('/')\n            ? eventLoggingApi\n            : eventLoggingApi + '/';\n        this.prefetchUsers = (_o = options.prefetchUsers) !== null && _o !== void 0 ? _o : [];\n        this.disableLocalStorage = (_p = options.disableLocalStorage) !== null && _p !== void 0 ? _p : false;\n        this.initCompletionCallback = (_q = options.initCompletionCallback) !== null && _q !== void 0 ? _q : null;\n        this.updateCompletionCallback =\n            (_r = options.updateUserCompletionCallback) !== null && _r !== void 0 ? _r : null;\n        this.disableDiagnosticsLogging = (_s = options.disableDiagnosticsLogging) !== null && _s !== void 0 ? _s : false;\n        this.logLevel = (_t = options === null || options === void 0 ? void 0 : options.logLevel) !== null && _t !== void 0 ? _t : LogLevel.NONE;\n        this.logger = (_u = options === null || options === void 0 ? void 0 : options.logger) !== null && _u !== void 0 ? _u : console;\n        this.ignoreWindowUndefined = (_v = options === null || options === void 0 ? void 0 : options.ignoreWindowUndefined) !== null && _v !== void 0 ? _v : false;\n        this.fetchMode = (_w = options.fetchMode) !== null && _w !== void 0 ? _w : 'network-only';\n        this.disableLocalOverrides = (_x = options === null || options === void 0 ? void 0 : options.disableLocalOverrides) !== null && _x !== void 0 ? _x : false;\n        this.gateEvaluationCallback = (_y = options === null || options === void 0 ? void 0 : options.gateEvaluationCallback) !== null && _y !== void 0 ? _y : null;\n        this.userPersistentStorage = (_z = options === null || options === void 0 ? void 0 : options.userPersistentStorage) !== null && _z !== void 0 ? _z : null;\n        this.disableAllLogging = (_0 = options.disableAllLogging) !== null && _0 !== void 0 ? _0 : false;\n        this.setLoggingCopy(options);\n        this.disableHashing = (_1 = options.disableHashing) !== null && _1 !== void 0 ? _1 : false;\n        this.evaluationCallback = (_2 = options.evaluationCallback) !== null && _2 !== void 0 ? _2 : null;\n    }\n    StatsigSDKOptions.prototype.setLoggingCopy = function (options) {\n        if (options == null || this.loggingCopy != null) {\n            return;\n        }\n        var loggingCopy = {};\n        Object.entries(options).forEach(function (_a) {\n            var _b, _c;\n            var option = _a[0], value = _a[1];\n            var valueType = typeof value;\n            switch (valueType) {\n                case 'number':\n                case 'bigint':\n                case 'boolean':\n                    loggingCopy[String(option)] = value;\n                    break;\n                case 'string':\n                    if (value.length < 50) {\n                        loggingCopy[String(option)] = value;\n                    }\n                    else {\n                        loggingCopy[String(option)] = 'set';\n                    }\n                    break;\n                case 'object':\n                    if (option === 'environment') {\n                        loggingCopy['environment'] = value;\n                    }\n                    else if (option === 'prefetchUsers') {\n                        loggingCopy['prefetchUsers'] =\n                            ((_c = (_b = options.prefetchUsers) === null || _b === void 0 ? void 0 : _b.length) !== null && _c !== void 0 ? _c : 0) > 0;\n                    }\n                    else {\n                        loggingCopy[String(option)] = value != null ? 'set' : 'unset';\n                    }\n                    break;\n                case 'function':\n                    if (option === 'userPersistentStorage') {\n                        loggingCopy['userPersistentStorage'] =\n                            value != null ? 'set' : 'unset';\n                    }\n            }\n        });\n        this.loggingCopy = loggingCopy;\n    };\n    StatsigSDKOptions.prototype.getLoggingCopy = function () {\n        return this.loggingCopy;\n    };\n    StatsigSDKOptions.prototype.getOutputLogger = function () {\n        return this.logger;\n    };\n    StatsigSDKOptions.prototype.getApi = function () {\n        return this.api;\n    };\n    StatsigSDKOptions.prototype.getEnvironment = function () {\n        return this.environment;\n    };\n    StatsigSDKOptions.prototype.getDisableCurrentPageLogging = function () {\n        return this.disableCurrentPageLogging;\n    };\n    StatsigSDKOptions.prototype.getLoggingIntervalMillis = function () {\n        return this.loggingIntervalMillis;\n    };\n    StatsigSDKOptions.prototype.getLoggingBufferMaxSize = function () {\n        return this.loggingBufferMaxSize;\n    };\n    StatsigSDKOptions.prototype.getDisableNetworkKeepalive = function () {\n        return this.disableNetworkKeepalive;\n    };\n    StatsigSDKOptions.prototype.getOverrideStableID = function () {\n        return this.overrideStableID;\n    };\n    StatsigSDKOptions.prototype.getLocalModeEnabled = function () {\n        return this.localMode;\n    };\n    StatsigSDKOptions.prototype.getInitTimeoutMs = function () {\n        return this.initTimeoutMs;\n    };\n    StatsigSDKOptions.prototype.getDisableErrorLogging = function () {\n        return this.disableErrorLogging;\n    };\n    StatsigSDKOptions.prototype.getDisableAutoMetricsLogging = function () {\n        return this.disableAutoMetricsLogging;\n    };\n    StatsigSDKOptions.prototype.getInitializeValues = function () {\n        return this.initializeValues;\n    };\n    StatsigSDKOptions.prototype.getEventLoggingApi = function () {\n        return this.eventLoggingApi;\n    };\n    StatsigSDKOptions.prototype.getPrefetchUsers = function () {\n        return this.prefetchUsers;\n    };\n    StatsigSDKOptions.prototype.getDisableLocalStorage = function () {\n        return this.disableLocalStorage;\n    };\n    StatsigSDKOptions.prototype.getInitCompletionCallback = function () {\n        return this.initCompletionCallback;\n    };\n    StatsigSDKOptions.prototype.getUpdateUserCompletionCallback = function () {\n        return this.updateCompletionCallback;\n    };\n    StatsigSDKOptions.prototype.getDisableDiagnosticsLogging = function () {\n        return this.disableDiagnosticsLogging;\n    };\n    StatsigSDKOptions.prototype.getLogLevel = function () {\n        return this.logLevel;\n    };\n    StatsigSDKOptions.prototype.getIgnoreWindowUndefined = function () {\n        return this.ignoreWindowUndefined;\n    };\n    StatsigSDKOptions.prototype.getFetchMode = function () {\n        return this.fetchMode;\n    };\n    StatsigSDKOptions.prototype.getDisableLocalOverrides = function () {\n        return this.disableLocalOverrides;\n    };\n    StatsigSDKOptions.prototype.getGateEvaluationCallback = function () {\n        return this.gateEvaluationCallback;\n    };\n    StatsigSDKOptions.prototype.getUserPersistentStorage = function () {\n        return this.userPersistentStorage;\n    };\n    StatsigSDKOptions.prototype.getDisableHashing = function () {\n        return this.disableHashing;\n    };\n    StatsigSDKOptions.prototype.getInitRequestRetries = function () {\n        return this.initRequestRetries;\n    };\n    StatsigSDKOptions.prototype.isAllLoggingDisabled = function () {\n        return this.disableAllLogging;\n    };\n    StatsigSDKOptions.prototype.reenableAllLogging = function () {\n        this.disableAllLogging = false;\n    };\n    StatsigSDKOptions.prototype.getEvaluationCallback = function () {\n        return this.evaluationCallback;\n    };\n    StatsigSDKOptions.prototype.normalizeNumberInput = function (input, bounds) {\n        if (input == null) {\n            return bounds.default;\n        }\n        return Math.max(Math.min(input, bounds.max), bounds.min);\n    };\n    return StatsigSDKOptions;\n}());\nexports[\"default\"] = StatsigSDKOptions;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L1N0YXRzaWdTREtPcHRpb25zLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGdCQUFnQixHQUFHLCtCQUErQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGtDQUFrQyxnQkFBZ0IsS0FBSztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsa0JBQWUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbWF6b24tZnJlc2gtZGVtby8uL25vZGVfbW9kdWxlcy9zdGF0c2lnLWpzL2Rpc3QvU3RhdHNpZ1NES09wdGlvbnMuanM/MzU5YSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuTG9nTGV2ZWwgPSBleHBvcnRzLklOSVRfVElNRU9VVF9ERUZBVUxUX01TID0gdm9pZCAwO1xudmFyIERFRkFVTFRfRkVBVFVSRV9HQVRFX0FQSSA9ICdodHRwczovL2ZlYXR1cmVnYXRlcy5vcmcvdjEvJztcbnZhciBERUZBVUxUX0VWRU5UX0xPR0dJTkdfQVBJID0gJ2h0dHBzOi8vZXZlbnRzLnN0YXRzaWdhcGkubmV0L3YxLyc7XG52YXIgREVGQVVMVF9JTklUX05FVFdPUktfUkVUUklFUyA9IDM7XG5leHBvcnRzLklOSVRfVElNRU9VVF9ERUZBVUxUX01TID0gMzAwMDtcbnZhciBMb2dMZXZlbDtcbihmdW5jdGlvbiAoTG9nTGV2ZWwpIHtcbiAgICBMb2dMZXZlbFtcIk5PTkVcIl0gPSBcIk5PTkVcIjtcbiAgICBMb2dMZXZlbFtcIklORk9cIl0gPSBcIklORk9cIjtcbiAgICBMb2dMZXZlbFtcIkRFQlVHXCJdID0gXCJERUJVR1wiO1xuICAgIExvZ0xldmVsW1wiV0FSTlwiXSA9IFwiV0FSTlwiO1xuICAgIExvZ0xldmVsW1wiRVJST1JcIl0gPSBcIkVSUk9SXCI7XG59KShMb2dMZXZlbCA9IGV4cG9ydHMuTG9nTGV2ZWwgfHwgKGV4cG9ydHMuTG9nTGV2ZWwgPSB7fSkpO1xudmFyIFN0YXRzaWdTREtPcHRpb25zID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFN0YXRzaWdTREtPcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaCwgX2osIF9rLCBfbCwgX20sIF9vLCBfcCwgX3EsIF9yLCBfcywgX3QsIF91LCBfdiwgX3csIF94LCBfeSwgX3osIF8wLCBfMSwgXzI7XG4gICAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYXBpID0gKF9hID0gb3B0aW9ucy5hcGkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IERFRkFVTFRfRkVBVFVSRV9HQVRFX0FQSTtcbiAgICAgICAgdGhpcy5hcGkgPSBhcGkuZW5kc1dpdGgoJy8nKSA/IGFwaSA6IGFwaSArICcvJztcbiAgICAgICAgdGhpcy5kaXNhYmxlQ3VycmVudFBhZ2VMb2dnaW5nID0gKF9iID0gb3B0aW9ucy5kaXNhYmxlQ3VycmVudFBhZ2VMb2dnaW5nKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBmYWxzZTtcbiAgICAgICAgdGhpcy5lbnZpcm9ubWVudCA9IChfYyA9IG9wdGlvbnMuZW52aXJvbm1lbnQpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IG51bGw7XG4gICAgICAgIHRoaXMubG9nZ2luZ0ludGVydmFsTWlsbGlzID0gdGhpcy5ub3JtYWxpemVOdW1iZXJJbnB1dChvcHRpb25zLmxvZ2dpbmdJbnRlcnZhbE1pbGxpcywge1xuICAgICAgICAgICAgZGVmYXVsdDogMTAwMDAsXG4gICAgICAgICAgICBtaW46IDEwMDAsXG4gICAgICAgICAgICBtYXg6IDYwMDAwLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5sb2dnaW5nQnVmZmVyTWF4U2l6ZSA9IHRoaXMubm9ybWFsaXplTnVtYmVySW5wdXQob3B0aW9ucy5sb2dnaW5nQnVmZmVyTWF4U2l6ZSwge1xuICAgICAgICAgICAgZGVmYXVsdDogMTAwLFxuICAgICAgICAgICAgbWluOiAyLFxuICAgICAgICAgICAgbWF4OiA1MDAsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmRpc2FibGVOZXR3b3JrS2VlcGFsaXZlID0gKF9kID0gb3B0aW9ucy5kaXNhYmxlTmV0d29ya0tlZXBhbGl2ZSkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogZmFsc2U7XG4gICAgICAgIHRoaXMuaW5pdFJlcXVlc3RSZXRyaWVzID1cbiAgICAgICAgICAgIChfZSA9IG9wdGlvbnMuaW5pdFJlcXVlc3RSZXRyaWVzKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiBERUZBVUxUX0lOSVRfTkVUV09SS19SRVRSSUVTO1xuICAgICAgICB0aGlzLm92ZXJyaWRlU3RhYmxlSUQgPSAoX2YgPSBvcHRpb25zLm92ZXJyaWRlU3RhYmxlSUQpICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IG51bGw7XG4gICAgICAgIHRoaXMubG9jYWxNb2RlID0gKF9nID0gb3B0aW9ucy5sb2NhbE1vZGUpICE9PSBudWxsICYmIF9nICE9PSB2b2lkIDAgPyBfZyA6IGZhbHNlO1xuICAgICAgICB0aGlzLmluaXRUaW1lb3V0TXMgPVxuICAgICAgICAgICAgb3B0aW9ucy5pbml0VGltZW91dE1zICYmIG9wdGlvbnMuaW5pdFRpbWVvdXRNcyA+PSAwXG4gICAgICAgICAgICAgICAgPyBvcHRpb25zLmluaXRUaW1lb3V0TXNcbiAgICAgICAgICAgICAgICA6IGV4cG9ydHMuSU5JVF9USU1FT1VUX0RFRkFVTFRfTVM7XG4gICAgICAgIHRoaXMuZGlzYWJsZUVycm9yTG9nZ2luZyA9IChfaCA9IG9wdGlvbnMuZGlzYWJsZUVycm9yTG9nZ2luZykgIT09IG51bGwgJiYgX2ggIT09IHZvaWQgMCA/IF9oIDogZmFsc2U7XG4gICAgICAgIHRoaXMuZGlzYWJsZUF1dG9NZXRyaWNzTG9nZ2luZyA9IChfaiA9IG9wdGlvbnMuZGlzYWJsZUF1dG9NZXRyaWNzTG9nZ2luZykgIT09IG51bGwgJiYgX2ogIT09IHZvaWQgMCA/IF9qIDogZmFsc2U7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVZhbHVlcyA9IChfayA9IG9wdGlvbnMuaW5pdGlhbGl6ZVZhbHVlcykgIT09IG51bGwgJiYgX2sgIT09IHZvaWQgMCA/IF9rIDogbnVsbDtcbiAgICAgICAgdmFyIGV2ZW50TG9nZ2luZ0FwaSA9IChfbSA9IChfbCA9IG9wdGlvbnMuZXZlbnRMb2dnaW5nQXBpKSAhPT0gbnVsbCAmJiBfbCAhPT0gdm9pZCAwID8gX2wgOiBvcHRpb25zLmFwaSkgIT09IG51bGwgJiYgX20gIT09IHZvaWQgMCA/IF9tIDogREVGQVVMVF9FVkVOVF9MT0dHSU5HX0FQSTtcbiAgICAgICAgdGhpcy5ldmVudExvZ2dpbmdBcGkgPSBldmVudExvZ2dpbmdBcGkuZW5kc1dpdGgoJy8nKVxuICAgICAgICAgICAgPyBldmVudExvZ2dpbmdBcGlcbiAgICAgICAgICAgIDogZXZlbnRMb2dnaW5nQXBpICsgJy8nO1xuICAgICAgICB0aGlzLnByZWZldGNoVXNlcnMgPSAoX28gPSBvcHRpb25zLnByZWZldGNoVXNlcnMpICE9PSBudWxsICYmIF9vICE9PSB2b2lkIDAgPyBfbyA6IFtdO1xuICAgICAgICB0aGlzLmRpc2FibGVMb2NhbFN0b3JhZ2UgPSAoX3AgPSBvcHRpb25zLmRpc2FibGVMb2NhbFN0b3JhZ2UpICE9PSBudWxsICYmIF9wICE9PSB2b2lkIDAgPyBfcCA6IGZhbHNlO1xuICAgICAgICB0aGlzLmluaXRDb21wbGV0aW9uQ2FsbGJhY2sgPSAoX3EgPSBvcHRpb25zLmluaXRDb21wbGV0aW9uQ2FsbGJhY2spICE9PSBudWxsICYmIF9xICE9PSB2b2lkIDAgPyBfcSA6IG51bGw7XG4gICAgICAgIHRoaXMudXBkYXRlQ29tcGxldGlvbkNhbGxiYWNrID1cbiAgICAgICAgICAgIChfciA9IG9wdGlvbnMudXBkYXRlVXNlckNvbXBsZXRpb25DYWxsYmFjaykgIT09IG51bGwgJiYgX3IgIT09IHZvaWQgMCA/IF9yIDogbnVsbDtcbiAgICAgICAgdGhpcy5kaXNhYmxlRGlhZ25vc3RpY3NMb2dnaW5nID0gKF9zID0gb3B0aW9ucy5kaXNhYmxlRGlhZ25vc3RpY3NMb2dnaW5nKSAhPT0gbnVsbCAmJiBfcyAhPT0gdm9pZCAwID8gX3MgOiBmYWxzZTtcbiAgICAgICAgdGhpcy5sb2dMZXZlbCA9IChfdCA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5sb2dMZXZlbCkgIT09IG51bGwgJiYgX3QgIT09IHZvaWQgMCA/IF90IDogTG9nTGV2ZWwuTk9ORTtcbiAgICAgICAgdGhpcy5sb2dnZXIgPSAoX3UgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMubG9nZ2VyKSAhPT0gbnVsbCAmJiBfdSAhPT0gdm9pZCAwID8gX3UgOiBjb25zb2xlO1xuICAgICAgICB0aGlzLmlnbm9yZVdpbmRvd1VuZGVmaW5lZCA9IChfdiA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5pZ25vcmVXaW5kb3dVbmRlZmluZWQpICE9PSBudWxsICYmIF92ICE9PSB2b2lkIDAgPyBfdiA6IGZhbHNlO1xuICAgICAgICB0aGlzLmZldGNoTW9kZSA9IChfdyA9IG9wdGlvbnMuZmV0Y2hNb2RlKSAhPT0gbnVsbCAmJiBfdyAhPT0gdm9pZCAwID8gX3cgOiAnbmV0d29yay1vbmx5JztcbiAgICAgICAgdGhpcy5kaXNhYmxlTG9jYWxPdmVycmlkZXMgPSAoX3ggPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuZGlzYWJsZUxvY2FsT3ZlcnJpZGVzKSAhPT0gbnVsbCAmJiBfeCAhPT0gdm9pZCAwID8gX3ggOiBmYWxzZTtcbiAgICAgICAgdGhpcy5nYXRlRXZhbHVhdGlvbkNhbGxiYWNrID0gKF95ID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmdhdGVFdmFsdWF0aW9uQ2FsbGJhY2spICE9PSBudWxsICYmIF95ICE9PSB2b2lkIDAgPyBfeSA6IG51bGw7XG4gICAgICAgIHRoaXMudXNlclBlcnNpc3RlbnRTdG9yYWdlID0gKF96ID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnVzZXJQZXJzaXN0ZW50U3RvcmFnZSkgIT09IG51bGwgJiYgX3ogIT09IHZvaWQgMCA/IF96IDogbnVsbDtcbiAgICAgICAgdGhpcy5kaXNhYmxlQWxsTG9nZ2luZyA9IChfMCA9IG9wdGlvbnMuZGlzYWJsZUFsbExvZ2dpbmcpICE9PSBudWxsICYmIF8wICE9PSB2b2lkIDAgPyBfMCA6IGZhbHNlO1xuICAgICAgICB0aGlzLnNldExvZ2dpbmdDb3B5KG9wdGlvbnMpO1xuICAgICAgICB0aGlzLmRpc2FibGVIYXNoaW5nID0gKF8xID0gb3B0aW9ucy5kaXNhYmxlSGFzaGluZykgIT09IG51bGwgJiYgXzEgIT09IHZvaWQgMCA/IF8xIDogZmFsc2U7XG4gICAgICAgIHRoaXMuZXZhbHVhdGlvbkNhbGxiYWNrID0gKF8yID0gb3B0aW9ucy5ldmFsdWF0aW9uQ2FsbGJhY2spICE9PSBudWxsICYmIF8yICE9PSB2b2lkIDAgPyBfMiA6IG51bGw7XG4gICAgfVxuICAgIFN0YXRzaWdTREtPcHRpb25zLnByb3RvdHlwZS5zZXRMb2dnaW5nQ29weSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zID09IG51bGwgfHwgdGhpcy5sb2dnaW5nQ29weSAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxvZ2dpbmdDb3B5ID0ge307XG4gICAgICAgIE9iamVjdC5lbnRyaWVzKG9wdGlvbnMpLmZvckVhY2goZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgX2IsIF9jO1xuICAgICAgICAgICAgdmFyIG9wdGlvbiA9IF9hWzBdLCB2YWx1ZSA9IF9hWzFdO1xuICAgICAgICAgICAgdmFyIHZhbHVlVHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgICAgICAgICAgIHN3aXRjaCAodmFsdWVUeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgICAgICAgICBjYXNlICdiaWdpbnQnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgICAgICAgICAgICAgICBsb2dnaW5nQ29weVtTdHJpbmcob3B0aW9uKV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA8IDUwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnaW5nQ29weVtTdHJpbmcob3B0aW9uKV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dpbmdDb3B5W1N0cmluZyhvcHRpb24pXSA9ICdzZXQnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb24gPT09ICdlbnZpcm9ubWVudCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dpbmdDb3B5WydlbnZpcm9ubWVudCddID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob3B0aW9uID09PSAncHJlZmV0Y2hVc2VycycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dpbmdDb3B5WydwcmVmZXRjaFVzZXJzJ10gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoX2MgPSAoX2IgPSBvcHRpb25zLnByZWZldGNoVXNlcnMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5sZW5ndGgpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IDApID4gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dpbmdDb3B5W1N0cmluZyhvcHRpb24pXSA9IHZhbHVlICE9IG51bGwgPyAnc2V0JyA6ICd1bnNldCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZnVuY3Rpb24nOlxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9uID09PSAndXNlclBlcnNpc3RlbnRTdG9yYWdlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2luZ0NvcHlbJ3VzZXJQZXJzaXN0ZW50U3RvcmFnZSddID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSAhPSBudWxsID8gJ3NldCcgOiAndW5zZXQnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmxvZ2dpbmdDb3B5ID0gbG9nZ2luZ0NvcHk7XG4gICAgfTtcbiAgICBTdGF0c2lnU0RLT3B0aW9ucy5wcm90b3R5cGUuZ2V0TG9nZ2luZ0NvcHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvZ2dpbmdDb3B5O1xuICAgIH07XG4gICAgU3RhdHNpZ1NES09wdGlvbnMucHJvdG90eXBlLmdldE91dHB1dExvZ2dlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9nZ2VyO1xuICAgIH07XG4gICAgU3RhdHNpZ1NES09wdGlvbnMucHJvdG90eXBlLmdldEFwaSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBpO1xuICAgIH07XG4gICAgU3RhdHNpZ1NES09wdGlvbnMucHJvdG90eXBlLmdldEVudmlyb25tZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbnZpcm9ubWVudDtcbiAgICB9O1xuICAgIFN0YXRzaWdTREtPcHRpb25zLnByb3RvdHlwZS5nZXREaXNhYmxlQ3VycmVudFBhZ2VMb2dnaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXNhYmxlQ3VycmVudFBhZ2VMb2dnaW5nO1xuICAgIH07XG4gICAgU3RhdHNpZ1NES09wdGlvbnMucHJvdG90eXBlLmdldExvZ2dpbmdJbnRlcnZhbE1pbGxpcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9nZ2luZ0ludGVydmFsTWlsbGlzO1xuICAgIH07XG4gICAgU3RhdHNpZ1NES09wdGlvbnMucHJvdG90eXBlLmdldExvZ2dpbmdCdWZmZXJNYXhTaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2dnaW5nQnVmZmVyTWF4U2l6ZTtcbiAgICB9O1xuICAgIFN0YXRzaWdTREtPcHRpb25zLnByb3RvdHlwZS5nZXREaXNhYmxlTmV0d29ya0tlZXBhbGl2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZU5ldHdvcmtLZWVwYWxpdmU7XG4gICAgfTtcbiAgICBTdGF0c2lnU0RLT3B0aW9ucy5wcm90b3R5cGUuZ2V0T3ZlcnJpZGVTdGFibGVJRCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3ZlcnJpZGVTdGFibGVJRDtcbiAgICB9O1xuICAgIFN0YXRzaWdTREtPcHRpb25zLnByb3RvdHlwZS5nZXRMb2NhbE1vZGVFbmFibGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbE1vZGU7XG4gICAgfTtcbiAgICBTdGF0c2lnU0RLT3B0aW9ucy5wcm90b3R5cGUuZ2V0SW5pdFRpbWVvdXRNcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5pdFRpbWVvdXRNcztcbiAgICB9O1xuICAgIFN0YXRzaWdTREtPcHRpb25zLnByb3RvdHlwZS5nZXREaXNhYmxlRXJyb3JMb2dnaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXNhYmxlRXJyb3JMb2dnaW5nO1xuICAgIH07XG4gICAgU3RhdHNpZ1NES09wdGlvbnMucHJvdG90eXBlLmdldERpc2FibGVBdXRvTWV0cmljc0xvZ2dpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVBdXRvTWV0cmljc0xvZ2dpbmc7XG4gICAgfTtcbiAgICBTdGF0c2lnU0RLT3B0aW9ucy5wcm90b3R5cGUuZ2V0SW5pdGlhbGl6ZVZhbHVlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5pdGlhbGl6ZVZhbHVlcztcbiAgICB9O1xuICAgIFN0YXRzaWdTREtPcHRpb25zLnByb3RvdHlwZS5nZXRFdmVudExvZ2dpbmdBcGkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50TG9nZ2luZ0FwaTtcbiAgICB9O1xuICAgIFN0YXRzaWdTREtPcHRpb25zLnByb3RvdHlwZS5nZXRQcmVmZXRjaFVzZXJzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmVmZXRjaFVzZXJzO1xuICAgIH07XG4gICAgU3RhdHNpZ1NES09wdGlvbnMucHJvdG90eXBlLmdldERpc2FibGVMb2NhbFN0b3JhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVMb2NhbFN0b3JhZ2U7XG4gICAgfTtcbiAgICBTdGF0c2lnU0RLT3B0aW9ucy5wcm90b3R5cGUuZ2V0SW5pdENvbXBsZXRpb25DYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5pdENvbXBsZXRpb25DYWxsYmFjaztcbiAgICB9O1xuICAgIFN0YXRzaWdTREtPcHRpb25zLnByb3RvdHlwZS5nZXRVcGRhdGVVc2VyQ29tcGxldGlvbkNhbGxiYWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVDb21wbGV0aW9uQ2FsbGJhY2s7XG4gICAgfTtcbiAgICBTdGF0c2lnU0RLT3B0aW9ucy5wcm90b3R5cGUuZ2V0RGlzYWJsZURpYWdub3N0aWNzTG9nZ2luZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZURpYWdub3N0aWNzTG9nZ2luZztcbiAgICB9O1xuICAgIFN0YXRzaWdTREtPcHRpb25zLnByb3RvdHlwZS5nZXRMb2dMZXZlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9nTGV2ZWw7XG4gICAgfTtcbiAgICBTdGF0c2lnU0RLT3B0aW9ucy5wcm90b3R5cGUuZ2V0SWdub3JlV2luZG93VW5kZWZpbmVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pZ25vcmVXaW5kb3dVbmRlZmluZWQ7XG4gICAgfTtcbiAgICBTdGF0c2lnU0RLT3B0aW9ucy5wcm90b3R5cGUuZ2V0RmV0Y2hNb2RlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mZXRjaE1vZGU7XG4gICAgfTtcbiAgICBTdGF0c2lnU0RLT3B0aW9ucy5wcm90b3R5cGUuZ2V0RGlzYWJsZUxvY2FsT3ZlcnJpZGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXNhYmxlTG9jYWxPdmVycmlkZXM7XG4gICAgfTtcbiAgICBTdGF0c2lnU0RLT3B0aW9ucy5wcm90b3R5cGUuZ2V0R2F0ZUV2YWx1YXRpb25DYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2F0ZUV2YWx1YXRpb25DYWxsYmFjaztcbiAgICB9O1xuICAgIFN0YXRzaWdTREtPcHRpb25zLnByb3RvdHlwZS5nZXRVc2VyUGVyc2lzdGVudFN0b3JhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVzZXJQZXJzaXN0ZW50U3RvcmFnZTtcbiAgICB9O1xuICAgIFN0YXRzaWdTREtPcHRpb25zLnByb3RvdHlwZS5nZXREaXNhYmxlSGFzaGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZUhhc2hpbmc7XG4gICAgfTtcbiAgICBTdGF0c2lnU0RLT3B0aW9ucy5wcm90b3R5cGUuZ2V0SW5pdFJlcXVlc3RSZXRyaWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbml0UmVxdWVzdFJldHJpZXM7XG4gICAgfTtcbiAgICBTdGF0c2lnU0RLT3B0aW9ucy5wcm90b3R5cGUuaXNBbGxMb2dnaW5nRGlzYWJsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVBbGxMb2dnaW5nO1xuICAgIH07XG4gICAgU3RhdHNpZ1NES09wdGlvbnMucHJvdG90eXBlLnJlZW5hYmxlQWxsTG9nZ2luZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kaXNhYmxlQWxsTG9nZ2luZyA9IGZhbHNlO1xuICAgIH07XG4gICAgU3RhdHNpZ1NES09wdGlvbnMucHJvdG90eXBlLmdldEV2YWx1YXRpb25DYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZhbHVhdGlvbkNhbGxiYWNrO1xuICAgIH07XG4gICAgU3RhdHNpZ1NES09wdGlvbnMucHJvdG90eXBlLm5vcm1hbGl6ZU51bWJlcklucHV0ID0gZnVuY3Rpb24gKGlucHV0LCBib3VuZHMpIHtcbiAgICAgICAgaWYgKGlucHV0ID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBib3VuZHMuZGVmYXVsdDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTWF0aC5tYXgoTWF0aC5taW4oaW5wdXQsIGJvdW5kcy5tYXgpLCBib3VuZHMubWluKTtcbiAgICB9O1xuICAgIHJldHVybiBTdGF0c2lnU0RLT3B0aW9ucztcbn0oKSk7XG5leHBvcnRzLmRlZmF1bHQgPSBTdGF0c2lnU0RLT3B0aW9ucztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/statsig-js/dist/StatsigSDKOptions.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/statsig-js/dist/StatsigStore.js":
/*!******************************************************!*\
  !*** ./node_modules/statsig-js/dist/StatsigStore.js ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar DynamicConfig_1 = __importDefault(__webpack_require__(/*! ./DynamicConfig */ \"(ssr)/./node_modules/statsig-js/dist/DynamicConfig.js\"));\nvar Layer_1 = __importDefault(__webpack_require__(/*! ./Layer */ \"(ssr)/./node_modules/statsig-js/dist/Layer.js\"));\nvar BootstrapValidator_1 = __importDefault(__webpack_require__(/*! ./utils/BootstrapValidator */ \"(ssr)/./node_modules/statsig-js/dist/utils/BootstrapValidator.js\"));\nvar Constants_1 = __webpack_require__(/*! ./utils/Constants */ \"(ssr)/./node_modules/statsig-js/dist/utils/Constants.js\");\nvar EvaluationReason_1 = __webpack_require__(/*! ./utils/EvaluationReason */ \"(ssr)/./node_modules/statsig-js/dist/utils/EvaluationReason.js\");\nvar Hashing_1 = __webpack_require__(/*! ./utils/Hashing */ \"(ssr)/./node_modules/statsig-js/dist/utils/Hashing.js\");\nvar OutputLogger_1 = __importDefault(__webpack_require__(/*! ./utils/OutputLogger */ \"(ssr)/./node_modules/statsig-js/dist/utils/OutputLogger.js\"));\nvar ResponseVerification_1 = __webpack_require__(/*! ./utils/ResponseVerification */ \"(ssr)/./node_modules/statsig-js/dist/utils/ResponseVerification.js\");\nvar StatsigAsyncStorage_1 = __importDefault(__webpack_require__(/*! ./utils/StatsigAsyncStorage */ \"(ssr)/./node_modules/statsig-js/dist/utils/StatsigAsyncStorage.js\"));\nvar StatsigLocalStorage_1 = __importDefault(__webpack_require__(/*! ./utils/StatsigLocalStorage */ \"(ssr)/./node_modules/statsig-js/dist/utils/StatsigLocalStorage.js\"));\nvar MAX_USER_VALUE_CACHED = 10;\nvar StatsigStore = /** @class */ (function () {\n    function StatsigStore(sdkInternal, initializeValues) {\n        this.overrides = {\n            gates: {},\n            configs: {},\n            layers: {},\n        };\n        this.sdkInternal = sdkInternal;\n        this.userCacheKey = this.sdkInternal.getCurrentUserCacheKey();\n        this.values = {};\n        this.userValues = {\n            feature_gates: {},\n            dynamic_configs: {},\n            sticky_experiments: {},\n            layer_configs: {},\n            has_updates: false,\n            time: 0,\n            evaluation_time: 0,\n            derived_fields: {},\n        };\n        this.stickyDeviceExperiments = {};\n        this.loaded = false;\n        this.reason = EvaluationReason_1.EvaluationReason.Uninitialized;\n        this.userPersistentStorageAdapter = this.sdkInternal\n            .getOptions()\n            .getUserPersistentStorage();\n        this.userPersistentStorageData = { experiments: {} };\n        if (initializeValues) {\n            this.bootstrap(initializeValues);\n        }\n        else {\n            this.load();\n        }\n    }\n    StatsigStore.prototype.load = function () {\n        this.loadFromLocalStorage();\n        this.partialLoadFromPersistentStorageAdapter();\n    };\n    StatsigStore.prototype.loadAsync = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.loadFromAsyncStorage()];\n                    case 1:\n                        _a.sent();\n                        this.partialLoadFromPersistentStorageAdapter();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    StatsigStore.prototype.updateUser = function (isUserPrefetched) {\n        this.userCacheKey = this.sdkInternal.getCurrentUserCacheKey();\n        var evaluationTime = this.setUserValueFromCache(isUserPrefetched);\n        this.partialLoadFromPersistentStorageAdapter();\n        return evaluationTime;\n    };\n    StatsigStore.prototype.getInitializeResponseJson = function () {\n        return JSON.stringify(this.userValues);\n    };\n    StatsigStore.prototype.loadFromAsyncStorage = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, _b;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        _a = this.parseCachedValues;\n                        return [4 /*yield*/, StatsigAsyncStorage_1.default.getItemAsync(Constants_1.INTERNAL_STORE_KEY)];\n                    case 1:\n                        _b = [_c.sent()];\n                        return [4 /*yield*/, StatsigAsyncStorage_1.default.getItemAsync(Constants_1.STICKY_DEVICE_EXPERIMENTS_KEY)];\n                    case 2:\n                        _a.apply(this, _b.concat([_c.sent()]));\n                        // triggered for react native, when async storage is setup.  Need to update the cache key\n                        // as the stableID is not available when this is set in the constructor (RN/async storage clients only)\n                        this.userCacheKey = this.sdkInternal.getCurrentUserCacheKey();\n                        this.loaded = true;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    StatsigStore.prototype.bootstrap = function (initializeValues) {\n        var _a, _b, _c, _d, _f, _g;\n        var key = this.sdkInternal.getCurrentUserCacheKey();\n        var user = this.sdkInternal.getCurrentUser();\n        var stableID = (_c = (_b = (_a = user === null || user === void 0 ? void 0 : user.customIDs) === null || _a === void 0 ? void 0 : _a.stableID) !== null && _b !== void 0 ? _b : this.sdkInternal.getStatsigMetadata().stableID) !== null && _c !== void 0 ? _c : null;\n        var reason = BootstrapValidator_1.default.getEvaluationReasonForBootstrap(user, initializeValues, stableID);\n        // clients are going to assume that the SDK is bootstraped after this method runs\n        // if we fail to parse, we will fall back to defaults, but we dont want to throw\n        // when clients try to check gates/configs/etc after this point\n        this.loaded = true;\n        try {\n            /* eslint-disable @typescript-eslint/no-explicit-any */\n            var values = initializeValues;\n            this.userValues.feature_gates = (_d = values.feature_gates) !== null && _d !== void 0 ? _d : {};\n            this.userValues.dynamic_configs = (_f = values.dynamic_configs) !== null && _f !== void 0 ? _f : {};\n            this.userValues.layer_configs = (_g = values.layer_configs) !== null && _g !== void 0 ? _g : {};\n            this.userValues.evaluation_time = Date.now();\n            this.userValues.time = Date.now();\n            this.userValues.hash_used = values.hash_used;\n            this.values[key.v3] = this.userValues;\n            this.reason = reason;\n            this.loadOverrides();\n        }\n        catch (_e) {\n            return;\n        }\n    };\n    StatsigStore.prototype.loadFromLocalStorage = function () {\n        if (StatsigAsyncStorage_1.default.asyncStorage) {\n            return;\n        }\n        this.parseCachedValues(StatsigLocalStorage_1.default.getItem(Constants_1.INTERNAL_STORE_KEY), StatsigLocalStorage_1.default.getItem(Constants_1.STICKY_DEVICE_EXPERIMENTS_KEY));\n        this.loaded = true;\n    };\n    // Currently only loads experiments, cannot rely on storage adapter for all user values.\n    StatsigStore.prototype.partialLoadFromPersistentStorageAdapter = function () {\n        var _a;\n        if (this.userPersistentStorageAdapter) {\n            var idType = (_a = this.userPersistentStorageAdapter.userIDType) !== null && _a !== void 0 ? _a : 'userID';\n            var unitID = this.sdkInternal.getCurrentUserUnitID(idType);\n            if (unitID) {\n                try {\n                    this.userPersistentStorageData = JSON.parse(this.userPersistentStorageAdapter.load(\"\".concat(unitID, \":\").concat(idType)));\n                }\n                catch (e) {\n                    OutputLogger_1.default.warn('Failed to load from user persistent storage.', e);\n                }\n                this.userValues.sticky_experiments = this.userPersistentStorageData\n                    .experiments;\n            }\n        }\n    };\n    StatsigStore.prototype.saveStickyExperimentsToPersistentStorageAdapter = function () {\n        var _a;\n        if (this.userPersistentStorageAdapter) {\n            var idType = (_a = this.userPersistentStorageAdapter.userIDType) !== null && _a !== void 0 ? _a : 'userID';\n            var unitID = this.sdkInternal.getCurrentUserUnitID(idType);\n            if (unitID) {\n                var data = __assign(__assign({}, this.userPersistentStorageData), { experiments: this.userValues.sticky_experiments });\n                try {\n                    this.userPersistentStorageAdapter.save(\"\".concat(unitID, \":\").concat(idType), JSON.stringify(data));\n                }\n                catch (e) {\n                    OutputLogger_1.default.warn('Failed to save user experiment values to persistent storage.', e);\n                }\n            }\n        }\n    };\n    StatsigStore.prototype.isLoaded = function () {\n        return this.loaded;\n    };\n    StatsigStore.prototype.getLastUpdateTime = function (user, stableID) {\n        var requestedUserCacheKey = (0, Hashing_1.getUserCacheKey)(stableID, user, this.sdkInternal.getSDKKey());\n        var userValues = this.getUserValues(requestedUserCacheKey);\n        var userHash = (0, Hashing_1.djb2HashForObject)(__assign(__assign({}, user), { stableID: stableID }));\n        if ((userValues === null || userValues === void 0 ? void 0 : userValues.user_hash) == userHash) {\n            return this.userValues.time;\n        }\n        return null;\n    };\n    StatsigStore.prototype.getPreviousDerivedFields = function (user, stableID) {\n        var requestedUserCacheKey = (0, Hashing_1.getUserCacheKey)(stableID, user, this.sdkInternal.getSDKKey());\n        var userValues = this.getUserValues(requestedUserCacheKey);\n        var userHash = (0, Hashing_1.djb2HashForObject)(__assign(__assign({}, user), { stableID: stableID }));\n        if ((userValues === null || userValues === void 0 ? void 0 : userValues.user_hash) == userHash) {\n            return this.userValues.derived_fields;\n        }\n        return undefined;\n    };\n    StatsigStore.prototype.getPreviousHashUsed = function (user, stableID) {\n        var requestedUserCacheKey = (0, Hashing_1.getUserCacheKey)(stableID, user, this.sdkInternal.getSDKKey());\n        var userValues = this.getUserValues(requestedUserCacheKey);\n        return userValues === null || userValues === void 0 ? void 0 : userValues.hash_used;\n    };\n    StatsigStore.prototype.parseCachedValues = function (allValues, deviceExperiments) {\n        try {\n            this.values = allValues ? JSON.parse(allValues) : this.values;\n            this.setUserValueFromCache();\n        }\n        catch (e) {\n            // Cached value corrupted, remove cache\n            this.removeFromStorage(Constants_1.INTERNAL_STORE_KEY);\n        }\n        try {\n            var deviceExpParsed = deviceExperiments\n                ? JSON.parse(deviceExperiments)\n                : null;\n            if (deviceExpParsed) {\n                this.stickyDeviceExperiments = deviceExpParsed;\n            }\n        }\n        catch (e) {\n            this.removeFromStorage(Constants_1.STICKY_DEVICE_EXPERIMENTS_KEY);\n        }\n        this.loadOverrides();\n    };\n    StatsigStore.prototype.getUserValues = function (key) {\n        var _a, _b;\n        return (_b = (_a = this.values[key.v3]) !== null && _a !== void 0 ? _a : this.values[key.v2]) !== null && _b !== void 0 ? _b : this.values[key.v1];\n    };\n    StatsigStore.prototype.setUserValueFromCache = function (isUserPrefetched) {\n        var _a, _b;\n        if (isUserPrefetched === void 0) { isUserPrefetched = false; }\n        var cachedValues = this.getUserValues(this.userCacheKey);\n        if (cachedValues == null) {\n            this.resetUserValues();\n            this.reason = EvaluationReason_1.EvaluationReason.Uninitialized;\n            return null;\n        }\n        if (cachedValues.stableIDUsed != null &&\n            cachedValues.stableIDUsed !== this.getStableID()) {\n            this.sdkInternal.getErrorBoundary().logError('stableIDChanged', new Error(\"StableID changed from \".concat(cachedValues.stableIDUsed, \" to \").concat(this.getStableID(), \",\\n            override stableID \").concat((_a = this.sdkInternal.getOptions().getOverrideStableID()) !== null && _a !== void 0 ? _a : '')));\n        }\n        this.userValues = cachedValues;\n        this.reason = isUserPrefetched\n            ? EvaluationReason_1.EvaluationReason.Prefetch\n            : EvaluationReason_1.EvaluationReason.Cache;\n        return (_b = cachedValues.evaluation_time) !== null && _b !== void 0 ? _b : 0;\n    };\n    StatsigStore.prototype.removeFromStorage = function (key) {\n        var _this = this;\n        StatsigAsyncStorage_1.default.removeItemAsync(key).catch(function (reason) {\n            return _this.sdkInternal.getErrorBoundary().logError('removeFromStorage', reason);\n        });\n        StatsigLocalStorage_1.default.removeItem(key);\n    };\n    StatsigStore.prototype.loadOverrides = function () {\n        if (this.sdkInternal.getOptions().getDisableLocalOverrides()) {\n            return;\n        }\n        var overrides = StatsigLocalStorage_1.default.getItem(Constants_1.OVERRIDES_STORE_KEY);\n        if (overrides != null) {\n            try {\n                this.overrides = JSON.parse(overrides);\n            }\n            catch (e) {\n                StatsigLocalStorage_1.default.removeItem(Constants_1.OVERRIDES_STORE_KEY);\n            }\n        }\n    };\n    StatsigStore.prototype.setEvaluationReason = function (evalReason) {\n        this.reason = evalReason;\n    };\n    StatsigStore.prototype.save = function (user, response, stableID, prefetchUsers) {\n        return __awaiter(this, void 0, void 0, function () {\n            var requestedUserCacheKey, initResponse, userValues, _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        requestedUserCacheKey = (0, Hashing_1.getUserCacheKey)(stableID, user, this.sdkInternal.getSDKKey());\n                        initResponse = response;\n                        if (initResponse.is_delta) {\n                            return [2 /*return*/, this.saveInitDeltas(user, response, true, stableID, prefetchUsers)];\n                        }\n                        this.mergeInitializeResponseIntoUserMap(initResponse, this.values, requestedUserCacheKey, user, function (userValues) { return userValues; }, stableID, prefetchUsers);\n                        userValues = this.getUserValues(requestedUserCacheKey);\n                        if (userValues &&\n                            requestedUserCacheKey &&\n                            requestedUserCacheKey.v3 === this.userCacheKey.v3) {\n                            this.userValues = userValues;\n                            this.reason = EvaluationReason_1.EvaluationReason.Network;\n                        }\n                        _a = this;\n                        return [4 /*yield*/, this.writeValuesToStorage(this.values)];\n                    case 1:\n                        _a.values = _b.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Persists the init values to storage, but DOES NOT update the state of the store.\n     */\n    StatsigStore.prototype.saveWithoutUpdatingClientState = function (user, response, stableID, prefetchUsers) {\n        return __awaiter(this, void 0, void 0, function () {\n            var requestedUserCacheKey, initResponse, copiedValues;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        requestedUserCacheKey = (0, Hashing_1.getUserCacheKey)(stableID, user, this.sdkInternal.getSDKKey());\n                        initResponse = response;\n                        if (initResponse.is_delta) {\n                            return [2 /*return*/, this.saveInitDeltas(user, response, false, stableID, prefetchUsers)];\n                        }\n                        copiedValues = JSON.parse(JSON.stringify(this.values));\n                        this.mergeInitializeResponseIntoUserMap(initResponse, copiedValues, requestedUserCacheKey, user, function (userValues) { return userValues; }, stableID, prefetchUsers);\n                        return [4 /*yield*/, this.writeValuesToStorage(copiedValues)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    StatsigStore.prototype.getDeltasMergeFunction = function (mergedValues) {\n        var _this = this;\n        return function (deltas, key) {\n            var _a, _b, _c;\n            var baseValues = (_c = (_b = (_a = mergedValues[key.v3]) !== null && _a !== void 0 ? _a : mergedValues[key.v2]) !== null && _b !== void 0 ? _b : mergedValues[key.v1]) !== null && _c !== void 0 ? _c : _this.getDefaultUserCacheValues();\n            return _this.mergeUserCacheValues(baseValues, deltas);\n        };\n    };\n    StatsigStore.prototype.saveInitDeltas = function (user, response, updateState, stableID, prefetchUsers) {\n        var _a, _b, _c;\n        return __awaiter(this, void 0, void 0, function () {\n            var requestedUserCacheKey, initResponse, mergedValues, hasBadHash, badChecksum, hashChanged, cacheKeys, userValues, expectedFullHash, mergedConfigs, currentFullHash, _d;\n            var _this = this;\n            return __generator(this, function (_f) {\n                switch (_f.label) {\n                    case 0:\n                        requestedUserCacheKey = (0, Hashing_1.getUserCacheKey)(stableID, user, this.sdkInternal.getSDKKey());\n                        initResponse = response;\n                        mergedValues = JSON.parse(JSON.stringify(this.values));\n                        // Merge delta values into the previous values\n                        this.mergeInitializeResponseIntoUserMap(initResponse, mergedValues, requestedUserCacheKey, user, this.getDeltasMergeFunction(mergedValues), stableID, prefetchUsers);\n                        hasBadHash = false;\n                        badChecksum = undefined;\n                        hashChanged = false;\n                        cacheKeys = Object.keys((_a = initResponse.prefetched_user_values) !== null && _a !== void 0 ? _a : {});\n                        cacheKeys.forEach(function (userKey) {\n                            var _a;\n                            var user = mergedValues[userKey];\n                            var reponseForUser = (_a = initResponse.prefetched_user_values) === null || _a === void 0 ? void 0 : _a[userKey];\n                            if (user && reponseForUser) {\n                                removeDeletedKeysFromUserValues(reponseForUser, user);\n                                var expectedFullHash_1 = reponseForUser.checksum;\n                                var currentFullHash_1 = (0, Hashing_1.djb2HashForObject)({\n                                    feature_gates: mergedValues[userKey].feature_gates,\n                                    dynamic_configs: mergedValues[userKey].dynamic_configs,\n                                    layer_configs: mergedValues[userKey].layer_configs,\n                                });\n                                if (expectedFullHash_1 && expectedFullHash_1 !== currentFullHash_1) {\n                                    hasBadHash = true;\n                                    badChecksum = currentFullHash_1;\n                                }\n                                if (userValues.hash_used !== initResponse.hash_used) {\n                                    hashChanged = true;\n                                }\n                            }\n                        });\n                        userValues = (_c = (_b = mergedValues[requestedUserCacheKey.v3]) !== null && _b !== void 0 ? _b : mergedValues[requestedUserCacheKey.v2]) !== null && _c !== void 0 ? _c : mergedValues[requestedUserCacheKey.v1];\n                        removeDeletedKeysFromUserValues(initResponse, userValues);\n                        expectedFullHash = initResponse.checksum;\n                        mergedConfigs = {\n                            feature_gates: userValues.feature_gates,\n                            dynamic_configs: userValues.dynamic_configs,\n                            layer_configs: userValues.layer_configs,\n                        };\n                        currentFullHash = (0, Hashing_1.djb2HashForObject)(mergedConfigs);\n                        if (expectedFullHash && expectedFullHash !== currentFullHash) {\n                            hasBadHash = true;\n                            badChecksum = currentFullHash;\n                        }\n                        if (userValues.hash_used !== initResponse.hash_used) {\n                            hashChanged = true;\n                        }\n                        if (hasBadHash || hashChanged) {\n                            if (initResponse.deltas_full_response != null) {\n                                // retry\n                                this.refetchAndSaveValues(user, stableID, prefetchUsers, undefined, badChecksum, hasBadHash, mergedConfigs, initResponse.deltas_full_response).catch(function (reason) {\n                                    return _this.sdkInternal\n                                        .getErrorBoundary()\n                                        .logError('refetchAndSaveValues', reason);\n                                });\n                                return [2 /*return*/];\n                            }\n                            // retry\n                            this.refetchAndSaveValues(user, stableID, prefetchUsers, undefined, badChecksum, hasBadHash).catch(function (reason) {\n                                return _this.sdkInternal\n                                    .getErrorBoundary()\n                                    .logError('refetchAndSaveValues', reason);\n                            });\n                            return [2 /*return*/];\n                        }\n                        if (!updateState) return [3 /*break*/, 2];\n                        if (userValues && requestedUserCacheKey.v3 === this.userCacheKey.v3) {\n                            this.userValues = userValues;\n                            this.reason = EvaluationReason_1.EvaluationReason.Network;\n                        }\n                        _d = this;\n                        return [4 /*yield*/, this.writeValuesToStorage(mergedValues)];\n                    case 1:\n                        _d.values = _f.sent();\n                        return [3 /*break*/, 4];\n                    case 2: return [4 /*yield*/, this.writeValuesToStorage(mergedValues)];\n                    case 3:\n                        _f.sent();\n                        _f.label = 4;\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    StatsigStore.prototype.refetchAndSaveValues = function (user, stableID, prefetchUsers, timeout, badChecksum, hadBadChecksum, badMergedConfigs, badFullResponse) {\n        if (timeout === void 0) { timeout = this.sdkInternal.getOptions().getInitTimeoutMs(); }\n        return __awaiter(this, void 0, void 0, function () {\n            var sinceTime, previousDerivedFields;\n            var _this = this;\n            return __generator(this, function (_a) {\n                sinceTime = this.getLastUpdateTime(user, stableID);\n                previousDerivedFields = this.getPreviousDerivedFields(user, stableID);\n                return [2 /*return*/, this.sdkInternal\n                        .getNetwork()\n                        .fetchValues({\n                        user: user,\n                        sinceTime: sinceTime,\n                        timeout: timeout,\n                        useDeltas: false,\n                        prefetchUsers: prefetchUsers,\n                        previousDerivedFields: previousDerivedFields,\n                        hadBadDeltaChecksum: hadBadChecksum,\n                        badChecksum: badChecksum,\n                        badMergedConfigs: badMergedConfigs,\n                        badFullResponse: badFullResponse,\n                    })\n                        .then(function (json) {\n                        if (!(0, ResponseVerification_1.verifySDKKeyUsed)(json, _this.sdkInternal.getSDKKey(), _this.sdkInternal.getErrorBoundary())) {\n                            return;\n                        }\n                        if (json === null || json === void 0 ? void 0 : json.has_updates) {\n                            _this.saveWithoutUpdatingClientState(user, json, stableID, prefetchUsers).catch(function (reason) {\n                                return _this.sdkInternal\n                                    .getErrorBoundary()\n                                    .logError('refetchAndSaveValues:then', reason);\n                            });\n                        }\n                    })\n                        .catch(function (reason) {\n                        return _this.sdkInternal\n                            .getErrorBoundary()\n                            .logError('refetchAndSaveValues', reason);\n                    })];\n            });\n        });\n    };\n    StatsigStore.prototype.getStableID = function () {\n        return this.sdkInternal.getStableID();\n    };\n    /**\n     * Merges the provided init configs into the provided config map, according to the provided merge function\n     */\n    StatsigStore.prototype.mergeInitializeResponseIntoUserMap = function (data, configMap, requestedUserCacheKey, user, mergeFn, stableID, prefetchUsers) {\n        if (data.prefetched_user_values) {\n            var cacheKeys = Object.keys(data.prefetched_user_values);\n            for (var _i = 0, cacheKeys_1 = cacheKeys; _i < cacheKeys_1.length; _i++) {\n                var key = cacheKeys_1[_i];\n                var prefetched = data.prefetched_user_values[key];\n                var values = mergeFn(this.convertAPIDataToCacheValues(prefetched, key), { v1: key, v2: key, v3: key });\n                if (prefetchUsers) {\n                    var userHash = (0, Hashing_1.djb2HashForObject)(prefetchUsers[key]);\n                    values.user_hash = userHash;\n                    values.stableIDUsed = stableID;\n                }\n                configMap[key] = values;\n            }\n        }\n        if (requestedUserCacheKey) {\n            var requestedUserValues = this.convertAPIDataToCacheValues(data, requestedUserCacheKey.v3);\n            var userHash = (0, Hashing_1.djb2HashForObject)(__assign(__assign({}, user), { stableID: stableID }));\n            requestedUserValues.user_hash = userHash;\n            requestedUserValues.stableIDUsed = stableID;\n            configMap[requestedUserCacheKey.v3] = mergeFn(requestedUserValues, requestedUserCacheKey);\n        }\n    };\n    StatsigStore.prototype.getDefaultUserCacheValues = function () {\n        return {\n            feature_gates: {},\n            layer_configs: {},\n            dynamic_configs: {},\n            sticky_experiments: {},\n            time: 0,\n            evaluation_time: 0,\n            derived_fields: {},\n        };\n    };\n    StatsigStore.prototype.mergeUserCacheValues = function (baseValues, valuesToMerge) {\n        return {\n            feature_gates: __assign(__assign({}, baseValues.feature_gates), valuesToMerge.feature_gates),\n            layer_configs: __assign(__assign({}, baseValues.layer_configs), valuesToMerge.layer_configs),\n            dynamic_configs: __assign(__assign({}, baseValues.dynamic_configs), valuesToMerge.dynamic_configs),\n            sticky_experiments: baseValues.sticky_experiments,\n            time: valuesToMerge.time,\n            evaluation_time: valuesToMerge.evaluation_time,\n            derived_fields: valuesToMerge.derived_fields,\n            hash_used: valuesToMerge.hash_used,\n            user_hash: valuesToMerge.user_hash,\n            stableIDUsed: valuesToMerge.stableIDUsed,\n        };\n    };\n    /**\n     * Writes the provided values to storage, truncating down to\n     * MAX_USER_VALUE_CACHED number entries.\n     * @returns The truncated entry list\n     */\n    StatsigStore.prototype.writeValuesToStorage = function (valuesToWrite) {\n        return __awaiter(this, void 0, void 0, function () {\n            var filteredValues;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        // delete the older version of cache\n                        if (valuesToWrite[this.userCacheKey.v3]) {\n                            delete valuesToWrite[this.userCacheKey.v2];\n                            delete valuesToWrite[this.userCacheKey.v1];\n                        }\n                        else if (valuesToWrite[this.userCacheKey.v2]) {\n                            delete valuesToWrite[this.userCacheKey.v1];\n                        }\n                        filteredValues = Object.entries(valuesToWrite)\n                            .sort(function (_a, _b) {\n                            var _c, _d;\n                            var a = _a[1];\n                            var b = _b[1];\n                            if (a == null) {\n                                return 1;\n                            }\n                            if (b == null) {\n                                return -1;\n                            }\n                            return (((_c = b === null || b === void 0 ? void 0 : b.evaluation_time) !== null && _c !== void 0 ? _c : b === null || b === void 0 ? void 0 : b.time) - ((_d = a === null || a === void 0 ? void 0 : a.evaluation_time) !== null && _d !== void 0 ? _d : a === null || a === void 0 ? void 0 : a.time));\n                        })\n                            .slice(0, MAX_USER_VALUE_CACHED);\n                        valuesToWrite = Object.fromEntries(filteredValues);\n                        if (!StatsigAsyncStorage_1.default.asyncStorage) return [3 /*break*/, 2];\n                        return [4 /*yield*/, StatsigAsyncStorage_1.default.setItemAsync(Constants_1.INTERNAL_STORE_KEY, JSON.stringify(valuesToWrite))];\n                    case 1:\n                        _a.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        StatsigLocalStorage_1.default.setItem(Constants_1.INTERNAL_STORE_KEY, JSON.stringify(valuesToWrite));\n                        _a.label = 3;\n                    case 3: return [2 /*return*/, valuesToWrite];\n                }\n            });\n        });\n    };\n    StatsigStore.prototype.checkGate = function (gateName, ignoreOverrides) {\n        var _a;\n        if (ignoreOverrides === void 0) { ignoreOverrides = false; }\n        var gateNameHash = this.getHashedSpecName(gateName);\n        var gateValue = {\n            name: gateName,\n            value: false,\n            rule_id: '',\n            secondary_exposures: [],\n        };\n        var details;\n        if (!ignoreOverrides && this.overrides.gates[gateName] != null) {\n            gateValue = {\n                name: gateName,\n                value: this.overrides.gates[gateName],\n                rule_id: 'override',\n                secondary_exposures: [],\n            };\n            details = this.getEvaluationDetails(false, EvaluationReason_1.EvaluationReason.LocalOverride);\n        }\n        else {\n            var value = (_a = this.userValues) === null || _a === void 0 ? void 0 : _a.feature_gates[gateNameHash];\n            if (value) {\n                gateValue = value;\n            }\n            details = this.getEvaluationDetails(value != null);\n        }\n        return { evaluationDetails: details, gate: gateValue };\n    };\n    StatsigStore.prototype.getConfig = function (configName, ignoreOverrides) {\n        var _a, _b;\n        if (ignoreOverrides === void 0) { ignoreOverrides = false; }\n        var configNameHash = this.getHashedSpecName(configName);\n        var configValue;\n        var details;\n        if (!ignoreOverrides && this.overrides.configs[configName] != null) {\n            details = this.getEvaluationDetails(false, EvaluationReason_1.EvaluationReason.LocalOverride);\n            configValue = new DynamicConfig_1.default(configName, this.overrides.configs[configName], 'override', details, [], '', this.makeOnConfigDefaultValueFallback(this.sdkInternal.getCurrentUser()));\n        }\n        else if (((_a = this.userValues) === null || _a === void 0 ? void 0 : _a.dynamic_configs[configNameHash]) != null) {\n            var rawConfigValue = (_b = this.userValues) === null || _b === void 0 ? void 0 : _b.dynamic_configs[configNameHash];\n            details = this.getEvaluationDetails(true);\n            configValue = this.createDynamicConfig(configName, rawConfigValue, details);\n        }\n        else {\n            details = this.getEvaluationDetails(false);\n            configValue = new DynamicConfig_1.default(configName, {}, '', details);\n        }\n        return configValue;\n    };\n    StatsigStore.prototype.getExperiment = function (expName, keepDeviceValue, ignoreOverrides) {\n        if (keepDeviceValue === void 0) { keepDeviceValue = false; }\n        if (ignoreOverrides === void 0) { ignoreOverrides = false; }\n        var exp;\n        var details;\n        if (!ignoreOverrides && this.overrides.configs[expName] != null) {\n            details = this.getEvaluationDetails(false, EvaluationReason_1.EvaluationReason.LocalOverride);\n            exp = new DynamicConfig_1.default(expName, this.overrides.configs[expName], 'override', details);\n        }\n        else {\n            var latestValue = this.getLatestValue(expName, 'dynamic_configs');\n            details = this.getEvaluationDetails(latestValue != null);\n            var finalValue = this.getPossiblyStickyValue(expName, latestValue, keepDeviceValue, false /* isLayer */, details);\n            exp = this.createDynamicConfig(expName, finalValue, details);\n        }\n        return exp;\n    };\n    StatsigStore.prototype.getLayer = function (logParameterFunction, layerName, keepDeviceValue) {\n        var _a, _b, _c, _d;\n        if (this.overrides.layers[layerName] != null) {\n            var details_1 = this.getEvaluationDetails(false, EvaluationReason_1.EvaluationReason.LocalOverride);\n            return Layer_1.default._create(layerName, (_a = this.overrides.layers[layerName]) !== null && _a !== void 0 ? _a : {}, 'override', details_1, logParameterFunction);\n        }\n        var latestValue = this.getLatestValue(layerName, 'layer_configs');\n        var details = this.getEvaluationDetails(latestValue != null);\n        var finalValue = this.getPossiblyStickyValue(layerName, latestValue, keepDeviceValue, true /* isLayer */, details);\n        return Layer_1.default._create(layerName, (_b = finalValue === null || finalValue === void 0 ? void 0 : finalValue.value) !== null && _b !== void 0 ? _b : {}, (_c = finalValue === null || finalValue === void 0 ? void 0 : finalValue.rule_id) !== null && _c !== void 0 ? _c : '', details, logParameterFunction, finalValue === null || finalValue === void 0 ? void 0 : finalValue.secondary_exposures, finalValue === null || finalValue === void 0 ? void 0 : finalValue.undelegated_secondary_exposures, (_d = finalValue === null || finalValue === void 0 ? void 0 : finalValue.allocated_experiment_name) !== null && _d !== void 0 ? _d : '', finalValue === null || finalValue === void 0 ? void 0 : finalValue.explicit_parameters, finalValue === null || finalValue === void 0 ? void 0 : finalValue.group_name);\n    };\n    StatsigStore.prototype.overrideConfig = function (configName, value) {\n        try {\n            JSON.stringify(value);\n        }\n        catch (e) {\n            OutputLogger_1.default.warn('Failed to stringify given config override.  Dropping', e);\n            return;\n        }\n        this.overrides.configs[configName] = value;\n        this.saveOverrides();\n    };\n    StatsigStore.prototype.overrideLayer = function (layerName, value) {\n        try {\n            JSON.stringify(value);\n        }\n        catch (e) {\n            OutputLogger_1.default.warn('Failed to stringify given layer override.  Dropping', e);\n            return;\n        }\n        this.overrides.layers[layerName] = value;\n        this.saveOverrides();\n    };\n    StatsigStore.prototype.overrideGate = function (gateName, value) {\n        this.overrides.gates[gateName] = value;\n        this.saveOverrides();\n    };\n    StatsigStore.prototype.removeGateOverride = function (gateName) {\n        if (gateName == null) {\n            this.overrides.gates = {};\n        }\n        else {\n            delete this.overrides.gates[gateName];\n        }\n        this.saveOverrides();\n    };\n    StatsigStore.prototype.removeConfigOverride = function (configName) {\n        if (configName == null) {\n            this.overrides.configs = {};\n        }\n        else {\n            delete this.overrides.configs[configName];\n        }\n        this.saveOverrides();\n    };\n    StatsigStore.prototype.removeLayerOverride = function (layerName) {\n        if (layerName == null) {\n            this.overrides.layers = {};\n        }\n        else {\n            delete this.overrides.layers[layerName];\n        }\n        this.saveOverrides();\n    };\n    StatsigStore.prototype.getAllOverrides = function () {\n        return this.overrides;\n    };\n    StatsigStore.prototype.saveOverrides = function () {\n        try {\n            StatsigLocalStorage_1.default.setItem(Constants_1.OVERRIDES_STORE_KEY, JSON.stringify(this.overrides));\n        }\n        catch (e) {\n            OutputLogger_1.default.warn('Failed to persist gate/config overrides');\n        }\n    };\n    StatsigStore.prototype.getLatestValue = function (name, topLevelKey) {\n        var _a, _b, _c, _d, _f;\n        var hash = this.getHashedSpecName(name);\n        return ((_c = (_b = (_a = this.userValues) === null || _a === void 0 ? void 0 : _a[topLevelKey]) === null || _b === void 0 ? void 0 : _b[hash]) !== null && _c !== void 0 ? _c : (_f = (_d = this.userValues) === null || _d === void 0 ? void 0 : _d[topLevelKey]) === null || _f === void 0 ? void 0 : _f[name]);\n    };\n    // Sticky Logic: https://gist.github.com/daniel-statsig/3d8dfc9bdee531cffc96901c1a06a402\n    StatsigStore.prototype.getPossiblyStickyValue = function (name, latestValue, keepDeviceValue, isLayer, details) {\n        var _a;\n        var key = this.getHashedSpecName(name);\n        // We don't want sticky behavior. Clear any sticky values and return latest.\n        if (!keepDeviceValue) {\n            this.removeStickyValue(key);\n            return latestValue;\n        }\n        // If there is no sticky value, save latest as sticky and return latest.\n        var stickyValue = this.getStickyValue(key);\n        if (!stickyValue) {\n            this.attemptToSaveStickyValue(key, latestValue);\n            return latestValue;\n        }\n        // Get the latest config value. Layers require a lookup by allocated_experiment_name.\n        var latestExperimentValue = null;\n        if (isLayer) {\n            latestExperimentValue = this.getLatestValue((_a = stickyValue === null || stickyValue === void 0 ? void 0 : stickyValue.allocated_experiment_name) !== null && _a !== void 0 ? _a : '', 'dynamic_configs');\n        }\n        else {\n            latestExperimentValue = latestValue;\n        }\n        if ((latestExperimentValue === null || latestExperimentValue === void 0 ? void 0 : latestExperimentValue.is_experiment_active) == true) {\n            details.reason = EvaluationReason_1.EvaluationReason.Sticky;\n            return stickyValue;\n        }\n        if ((latestValue === null || latestValue === void 0 ? void 0 : latestValue.is_experiment_active) == true) {\n            this.attemptToSaveStickyValue(key, latestValue);\n        }\n        else {\n            this.removeStickyValue(key);\n        }\n        return latestValue;\n    };\n    StatsigStore.prototype.createDynamicConfig = function (name, apiConfig, details) {\n        var _a, _b, _c;\n        return new DynamicConfig_1.default(name, (_a = apiConfig === null || apiConfig === void 0 ? void 0 : apiConfig.value) !== null && _a !== void 0 ? _a : {}, (_b = apiConfig === null || apiConfig === void 0 ? void 0 : apiConfig.rule_id) !== null && _b !== void 0 ? _b : '', details, apiConfig === null || apiConfig === void 0 ? void 0 : apiConfig.secondary_exposures, (_c = apiConfig === null || apiConfig === void 0 ? void 0 : apiConfig.allocated_experiment_name) !== null && _c !== void 0 ? _c : '', this.makeOnConfigDefaultValueFallback(this.sdkInternal.getCurrentUser()), apiConfig === null || apiConfig === void 0 ? void 0 : apiConfig.group_name, apiConfig === null || apiConfig === void 0 ? void 0 : apiConfig.id_type, apiConfig === null || apiConfig === void 0 ? void 0 : apiConfig.is_experiment_active);\n    };\n    StatsigStore.prototype.getStickyValue = function (key) {\n        var _a, _b;\n        return ((_b = (_a = this.userValues) === null || _a === void 0 ? void 0 : _a.sticky_experiments[key]) !== null && _b !== void 0 ? _b : this.stickyDeviceExperiments[key]);\n    };\n    StatsigStore.prototype.attemptToSaveStickyValue = function (key, config) {\n        var _a;\n        if (!config ||\n            !config.is_user_in_experiment ||\n            !config.is_experiment_active) {\n            return;\n        }\n        if (config.is_device_based === true) {\n            // save sticky values in memory\n            this.stickyDeviceExperiments[key] = config;\n        }\n        else if ((_a = this.userValues) === null || _a === void 0 ? void 0 : _a.sticky_experiments) {\n            this.userValues.sticky_experiments[key] = config;\n        }\n        // also save to persistent storage\n        this.saveStickyValuesToStorage();\n    };\n    StatsigStore.prototype.removeStickyValue = function (key) {\n        var _a, _b, _c, _d;\n        if (Object.keys((_b = (_a = this.userValues) === null || _a === void 0 ? void 0 : _a.sticky_experiments) !== null && _b !== void 0 ? _b : {}).length === 0 &&\n            Object.keys((_c = this.stickyDeviceExperiments) !== null && _c !== void 0 ? _c : {}).length === 0) {\n            return;\n        }\n        (_d = this.userValues) === null || _d === void 0 ? true : delete _d.sticky_experiments[key];\n        delete this.stickyDeviceExperiments[key];\n        this.saveStickyValuesToStorage();\n    };\n    StatsigStore.prototype.saveStickyValuesToStorage = function () {\n        if (this.userPersistentStorageAdapter) {\n            this.saveStickyExperimentsToPersistentStorageAdapter();\n        }\n        else {\n            this.values[this.userCacheKey.v3] = this.userValues;\n            this.setItemToStorage(Constants_1.INTERNAL_STORE_KEY, JSON.stringify(this.values));\n            this.setItemToStorage(Constants_1.STICKY_DEVICE_EXPERIMENTS_KEY, JSON.stringify(this.stickyDeviceExperiments));\n        }\n    };\n    StatsigStore.prototype.getGlobalEvaluationDetails = function () {\n        var _a, _b;\n        return {\n            reason: (_a = this.reason) !== null && _a !== void 0 ? _a : EvaluationReason_1.EvaluationReason.Uninitialized,\n            time: (_b = this.userValues.evaluation_time) !== null && _b !== void 0 ? _b : 0,\n        };\n    };\n    StatsigStore.prototype.getEvaluationDetails = function (valueExists, reasonOverride) {\n        var _a;\n        if (valueExists) {\n            return {\n                reason: this.reason,\n                time: (_a = this.userValues.evaluation_time) !== null && _a !== void 0 ? _a : Date.now(),\n            };\n        }\n        else {\n            return {\n                reason: reasonOverride !== null && reasonOverride !== void 0 ? reasonOverride : (this.reason == EvaluationReason_1.EvaluationReason.Uninitialized\n                    ? EvaluationReason_1.EvaluationReason.Uninitialized\n                    : EvaluationReason_1.EvaluationReason.Unrecognized),\n                time: Date.now(),\n            };\n        }\n    };\n    StatsigStore.prototype.resetUserValues = function () {\n        this.userValues = {\n            feature_gates: {},\n            dynamic_configs: {},\n            sticky_experiments: {},\n            layer_configs: {},\n            time: 0,\n            evaluation_time: 0,\n            derived_fields: {},\n        };\n    };\n    StatsigStore.prototype.getHashedSpecName = function (input) {\n        switch (this.userValues.hash_used) {\n            case 'djb2':\n                return (0, Hashing_1.djb2Hash)(input);\n            case 'none':\n                return input;\n            default:\n                return (0, Hashing_1.sha256Hash)(input);\n        }\n    };\n    StatsigStore.prototype.convertAPIDataToCacheValues = function (data, cacheKey) {\n        var _a, _b;\n        // Specifically pulling keys from data here to avoid pulling in unwanted keys\n        return {\n            feature_gates: data.feature_gates,\n            layer_configs: data.layer_configs,\n            dynamic_configs: data.dynamic_configs,\n            sticky_experiments: (_b = (_a = this.values[cacheKey]) === null || _a === void 0 ? void 0 : _a.sticky_experiments) !== null && _b !== void 0 ? _b : {},\n            time: data.time == null || isNaN(data.time) ? 0 : data.time,\n            evaluation_time: Date.now(),\n            hash_used: data.hash_used,\n            derived_fields: data.derived_fields,\n        };\n    };\n    StatsigStore.prototype.setItemToStorage = function (key, value) {\n        var _this = this;\n        if (StatsigAsyncStorage_1.default.asyncStorage) {\n            StatsigAsyncStorage_1.default.setItemAsync(key, value).catch(function (reason) {\n                void _this.sdkInternal\n                    .getErrorBoundary()\n                    .logError('setItemToStorage', reason);\n            });\n        }\n        else {\n            StatsigLocalStorage_1.default.setItem(key, value);\n        }\n    };\n    StatsigStore.prototype.makeOnConfigDefaultValueFallback = function (user) {\n        var _this = this;\n        return function (config, parameter, defaultValueType, valueType) {\n            if (!_this.isLoaded()) {\n                return;\n            }\n            _this.sdkInternal.getLogger().logConfigDefaultValueFallback(user, \"Parameter \".concat(parameter, \" is a value of type \").concat(valueType, \".\\n          Returning requested defaultValue type \").concat(defaultValueType), {\n                name: config.getName(),\n                ruleID: config.getRuleID(),\n                parameter: parameter,\n                defaultValueType: defaultValueType,\n                valueType: valueType,\n            });\n        };\n    };\n    return StatsigStore;\n}());\nexports[\"default\"] = StatsigStore;\nfunction removeDeletedKeysFromUserValues(initResponse, userValues) {\n    var _a, _b, _c;\n    ((_a = initResponse.deleted_configs) !== null && _a !== void 0 ? _a : []).forEach(function (key) {\n        delete userValues.dynamic_configs[key];\n    });\n    ((_b = initResponse.deleted_gates) !== null && _b !== void 0 ? _b : []).forEach(function (key) {\n        delete userValues.feature_gates[key];\n    });\n    ((_c = initResponse.deleted_layers) !== null && _c !== void 0 ? _c : []).forEach(function (key) {\n        delete userValues.layer_configs[key];\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L1N0YXRzaWdTdG9yZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQSxpREFBaUQsT0FBTztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsK0RBQStELGlCQUFpQjtBQUM1RztBQUNBLG9DQUFvQyxNQUFNLCtCQUErQixZQUFZO0FBQ3JGLG1DQUFtQyxNQUFNLG1DQUFtQyxZQUFZO0FBQ3hGLGdDQUFnQztBQUNoQztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsY0FBYyw2QkFBNkIsMEJBQTBCLGNBQWMscUJBQXFCO0FBQ3hHLGlCQUFpQixvREFBb0QscUVBQXFFLGNBQWM7QUFDeEosdUJBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEMsbUNBQW1DLFNBQVM7QUFDNUMsbUNBQW1DLFdBQVcsVUFBVTtBQUN4RCwwQ0FBMEMsY0FBYztBQUN4RDtBQUNBLDhHQUE4RyxPQUFPO0FBQ3JILGlGQUFpRixpQkFBaUI7QUFDbEcseURBQXlELGdCQUFnQixRQUFRO0FBQ2pGLCtDQUErQyxnQkFBZ0IsZ0JBQWdCO0FBQy9FO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQSxVQUFVLFlBQVksYUFBYSxTQUFTLFVBQVU7QUFDdEQsb0NBQW9DLFNBQVM7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELHNDQUFzQyxtQkFBTyxDQUFDLDhFQUFpQjtBQUMvRCw4QkFBOEIsbUJBQU8sQ0FBQyw4REFBUztBQUMvQywyQ0FBMkMsbUJBQU8sQ0FBQyxvR0FBNEI7QUFDL0Usa0JBQWtCLG1CQUFPLENBQUMsa0ZBQW1CO0FBQzdDLHlCQUF5QixtQkFBTyxDQUFDLGdHQUEwQjtBQUMzRCxnQkFBZ0IsbUJBQU8sQ0FBQyw4RUFBaUI7QUFDekMscUNBQXFDLG1CQUFPLENBQUMsd0ZBQXNCO0FBQ25FLDZCQUE2QixtQkFBTyxDQUFDLHdHQUE4QjtBQUNuRSw0Q0FBNEMsbUJBQU8sQ0FBQyxzR0FBNkI7QUFDakYsNENBQTRDLG1CQUFPLENBQUMsc0dBQTZCO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLHVCQUF1QjtBQUN2QixzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QiwrQkFBK0I7QUFDL0Isa0NBQWtDO0FBQ2xDLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLHFDQUFxQyxpREFBaUQ7QUFDckk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEVBQTRFLFdBQVcsb0JBQW9CO0FBQzNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0RUFBNEUsV0FBVyxvQkFBb0I7QUFDM0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdKQUFnSixvQkFBb0I7QUFDcEs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUpBQWlKLG9CQUFvQjtBQUNySztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhIQUE4SDtBQUM5SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QseUJBQXlCO0FBQy9FO0FBQ0E7QUFDQSwwRkFBMEYsMkJBQTJCO0FBQ3JIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0ZBQWdGLFdBQVcsb0JBQW9CO0FBQy9HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCLDZCQUE2QjtBQUM3QiwrQkFBK0I7QUFDL0Isa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0M7QUFDL0MsK0NBQStDO0FBQy9DLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvRUFBb0U7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUMsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlJQUFpSTtBQUNqSTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFLQUFxSztBQUNySztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUtBQWlLO0FBQ2pLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9KQUFvSjtBQUNwSiwrRkFBK0Y7QUFDL0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCLCtCQUErQjtBQUMvQixrQ0FBa0M7QUFDbEMsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrS0FBa0s7QUFDbEs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsa0JBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbWF6b24tZnJlc2gtZGVtby8uL25vZGVfbW9kdWxlcy9zdGF0c2lnLWpzL2Rpc3QvU3RhdHNpZ1N0b3JlLmpzP2QxZWYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKVxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH07XG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICAgIHdoaWxlIChnICYmIChnID0gMCwgb3BbMF0gJiYgKF8gPSAwKSksIF8pIHRyeSB7XG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcbiAgICB9XG59O1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIER5bmFtaWNDb25maWdfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9EeW5hbWljQ29uZmlnXCIpKTtcbnZhciBMYXllcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL0xheWVyXCIpKTtcbnZhciBCb290c3RyYXBWYWxpZGF0b3JfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi91dGlscy9Cb290c3RyYXBWYWxpZGF0b3JcIikpO1xudmFyIENvbnN0YW50c18xID0gcmVxdWlyZShcIi4vdXRpbHMvQ29uc3RhbnRzXCIpO1xudmFyIEV2YWx1YXRpb25SZWFzb25fMSA9IHJlcXVpcmUoXCIuL3V0aWxzL0V2YWx1YXRpb25SZWFzb25cIik7XG52YXIgSGFzaGluZ18xID0gcmVxdWlyZShcIi4vdXRpbHMvSGFzaGluZ1wiKTtcbnZhciBPdXRwdXRMb2dnZXJfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi91dGlscy9PdXRwdXRMb2dnZXJcIikpO1xudmFyIFJlc3BvbnNlVmVyaWZpY2F0aW9uXzEgPSByZXF1aXJlKFwiLi91dGlscy9SZXNwb25zZVZlcmlmaWNhdGlvblwiKTtcbnZhciBTdGF0c2lnQXN5bmNTdG9yYWdlXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vdXRpbHMvU3RhdHNpZ0FzeW5jU3RvcmFnZVwiKSk7XG52YXIgU3RhdHNpZ0xvY2FsU3RvcmFnZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL3V0aWxzL1N0YXRzaWdMb2NhbFN0b3JhZ2VcIikpO1xudmFyIE1BWF9VU0VSX1ZBTFVFX0NBQ0hFRCA9IDEwO1xudmFyIFN0YXRzaWdTdG9yZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTdGF0c2lnU3RvcmUoc2RrSW50ZXJuYWwsIGluaXRpYWxpemVWYWx1ZXMpIHtcbiAgICAgICAgdGhpcy5vdmVycmlkZXMgPSB7XG4gICAgICAgICAgICBnYXRlczoge30sXG4gICAgICAgICAgICBjb25maWdzOiB7fSxcbiAgICAgICAgICAgIGxheWVyczoge30sXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2RrSW50ZXJuYWwgPSBzZGtJbnRlcm5hbDtcbiAgICAgICAgdGhpcy51c2VyQ2FjaGVLZXkgPSB0aGlzLnNka0ludGVybmFsLmdldEN1cnJlbnRVc2VyQ2FjaGVLZXkoKTtcbiAgICAgICAgdGhpcy52YWx1ZXMgPSB7fTtcbiAgICAgICAgdGhpcy51c2VyVmFsdWVzID0ge1xuICAgICAgICAgICAgZmVhdHVyZV9nYXRlczoge30sXG4gICAgICAgICAgICBkeW5hbWljX2NvbmZpZ3M6IHt9LFxuICAgICAgICAgICAgc3RpY2t5X2V4cGVyaW1lbnRzOiB7fSxcbiAgICAgICAgICAgIGxheWVyX2NvbmZpZ3M6IHt9LFxuICAgICAgICAgICAgaGFzX3VwZGF0ZXM6IGZhbHNlLFxuICAgICAgICAgICAgdGltZTogMCxcbiAgICAgICAgICAgIGV2YWx1YXRpb25fdGltZTogMCxcbiAgICAgICAgICAgIGRlcml2ZWRfZmllbGRzOiB7fSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zdGlja3lEZXZpY2VFeHBlcmltZW50cyA9IHt9O1xuICAgICAgICB0aGlzLmxvYWRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJlYXNvbiA9IEV2YWx1YXRpb25SZWFzb25fMS5FdmFsdWF0aW9uUmVhc29uLlVuaW5pdGlhbGl6ZWQ7XG4gICAgICAgIHRoaXMudXNlclBlcnNpc3RlbnRTdG9yYWdlQWRhcHRlciA9IHRoaXMuc2RrSW50ZXJuYWxcbiAgICAgICAgICAgIC5nZXRPcHRpb25zKClcbiAgICAgICAgICAgIC5nZXRVc2VyUGVyc2lzdGVudFN0b3JhZ2UoKTtcbiAgICAgICAgdGhpcy51c2VyUGVyc2lzdGVudFN0b3JhZ2VEYXRhID0geyBleHBlcmltZW50czoge30gfTtcbiAgICAgICAgaWYgKGluaXRpYWxpemVWYWx1ZXMpIHtcbiAgICAgICAgICAgIHRoaXMuYm9vdHN0cmFwKGluaXRpYWxpemVWYWx1ZXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb2FkKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgU3RhdHNpZ1N0b3JlLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmxvYWRGcm9tTG9jYWxTdG9yYWdlKCk7XG4gICAgICAgIHRoaXMucGFydGlhbExvYWRGcm9tUGVyc2lzdGVudFN0b3JhZ2VBZGFwdGVyKCk7XG4gICAgfTtcbiAgICBTdGF0c2lnU3RvcmUucHJvdG90eXBlLmxvYWRBc3luYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvYWRGcm9tQXN5bmNTdG9yYWdlKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnRpYWxMb2FkRnJvbVBlcnNpc3RlbnRTdG9yYWdlQWRhcHRlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFN0YXRzaWdTdG9yZS5wcm90b3R5cGUudXBkYXRlVXNlciA9IGZ1bmN0aW9uIChpc1VzZXJQcmVmZXRjaGVkKSB7XG4gICAgICAgIHRoaXMudXNlckNhY2hlS2V5ID0gdGhpcy5zZGtJbnRlcm5hbC5nZXRDdXJyZW50VXNlckNhY2hlS2V5KCk7XG4gICAgICAgIHZhciBldmFsdWF0aW9uVGltZSA9IHRoaXMuc2V0VXNlclZhbHVlRnJvbUNhY2hlKGlzVXNlclByZWZldGNoZWQpO1xuICAgICAgICB0aGlzLnBhcnRpYWxMb2FkRnJvbVBlcnNpc3RlbnRTdG9yYWdlQWRhcHRlcigpO1xuICAgICAgICByZXR1cm4gZXZhbHVhdGlvblRpbWU7XG4gICAgfTtcbiAgICBTdGF0c2lnU3RvcmUucHJvdG90eXBlLmdldEluaXRpYWxpemVSZXNwb25zZUpzb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLnVzZXJWYWx1ZXMpO1xuICAgIH07XG4gICAgU3RhdHNpZ1N0b3JlLnByb3RvdHlwZS5sb2FkRnJvbUFzeW5jU3RvcmFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2MpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gdGhpcy5wYXJzZUNhY2hlZFZhbHVlcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFN0YXRzaWdBc3luY1N0b3JhZ2VfMS5kZWZhdWx0LmdldEl0ZW1Bc3luYyhDb25zdGFudHNfMS5JTlRFUk5BTF9TVE9SRV9LRVkpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2IgPSBbX2Muc2VudCgpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFN0YXRzaWdBc3luY1N0b3JhZ2VfMS5kZWZhdWx0LmdldEl0ZW1Bc3luYyhDb25zdGFudHNfMS5TVElDS1lfREVWSUNFX0VYUEVSSU1FTlRTX0tFWSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5hcHBseSh0aGlzLCBfYi5jb25jYXQoW19jLnNlbnQoKV0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaWdnZXJlZCBmb3IgcmVhY3QgbmF0aXZlLCB3aGVuIGFzeW5jIHN0b3JhZ2UgaXMgc2V0dXAuICBOZWVkIHRvIHVwZGF0ZSB0aGUgY2FjaGUga2V5XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhcyB0aGUgc3RhYmxlSUQgaXMgbm90IGF2YWlsYWJsZSB3aGVuIHRoaXMgaXMgc2V0IGluIHRoZSBjb25zdHJ1Y3RvciAoUk4vYXN5bmMgc3RvcmFnZSBjbGllbnRzIG9ubHkpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVzZXJDYWNoZUtleSA9IHRoaXMuc2RrSW50ZXJuYWwuZ2V0Q3VycmVudFVzZXJDYWNoZUtleSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFN0YXRzaWdTdG9yZS5wcm90b3R5cGUuYm9vdHN0cmFwID0gZnVuY3Rpb24gKGluaXRpYWxpemVWYWx1ZXMpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZiwgX2c7XG4gICAgICAgIHZhciBrZXkgPSB0aGlzLnNka0ludGVybmFsLmdldEN1cnJlbnRVc2VyQ2FjaGVLZXkoKTtcbiAgICAgICAgdmFyIHVzZXIgPSB0aGlzLnNka0ludGVybmFsLmdldEN1cnJlbnRVc2VyKCk7XG4gICAgICAgIHZhciBzdGFibGVJRCA9IChfYyA9IChfYiA9IChfYSA9IHVzZXIgPT09IG51bGwgfHwgdXNlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogdXNlci5jdXN0b21JRHMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zdGFibGVJRCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogdGhpcy5zZGtJbnRlcm5hbC5nZXRTdGF0c2lnTWV0YWRhdGEoKS5zdGFibGVJRCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogbnVsbDtcbiAgICAgICAgdmFyIHJlYXNvbiA9IEJvb3RzdHJhcFZhbGlkYXRvcl8xLmRlZmF1bHQuZ2V0RXZhbHVhdGlvblJlYXNvbkZvckJvb3RzdHJhcCh1c2VyLCBpbml0aWFsaXplVmFsdWVzLCBzdGFibGVJRCk7XG4gICAgICAgIC8vIGNsaWVudHMgYXJlIGdvaW5nIHRvIGFzc3VtZSB0aGF0IHRoZSBTREsgaXMgYm9vdHN0cmFwZWQgYWZ0ZXIgdGhpcyBtZXRob2QgcnVuc1xuICAgICAgICAvLyBpZiB3ZSBmYWlsIHRvIHBhcnNlLCB3ZSB3aWxsIGZhbGwgYmFjayB0byBkZWZhdWx0cywgYnV0IHdlIGRvbnQgd2FudCB0byB0aHJvd1xuICAgICAgICAvLyB3aGVuIGNsaWVudHMgdHJ5IHRvIGNoZWNrIGdhdGVzL2NvbmZpZ3MvZXRjIGFmdGVyIHRoaXMgcG9pbnRcbiAgICAgICAgdGhpcy5sb2FkZWQgPSB0cnVlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAqL1xuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IGluaXRpYWxpemVWYWx1ZXM7XG4gICAgICAgICAgICB0aGlzLnVzZXJWYWx1ZXMuZmVhdHVyZV9nYXRlcyA9IChfZCA9IHZhbHVlcy5mZWF0dXJlX2dhdGVzKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiB7fTtcbiAgICAgICAgICAgIHRoaXMudXNlclZhbHVlcy5keW5hbWljX2NvbmZpZ3MgPSAoX2YgPSB2YWx1ZXMuZHluYW1pY19jb25maWdzKSAhPT0gbnVsbCAmJiBfZiAhPT0gdm9pZCAwID8gX2YgOiB7fTtcbiAgICAgICAgICAgIHRoaXMudXNlclZhbHVlcy5sYXllcl9jb25maWdzID0gKF9nID0gdmFsdWVzLmxheWVyX2NvbmZpZ3MpICE9PSBudWxsICYmIF9nICE9PSB2b2lkIDAgPyBfZyA6IHt9O1xuICAgICAgICAgICAgdGhpcy51c2VyVmFsdWVzLmV2YWx1YXRpb25fdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgICB0aGlzLnVzZXJWYWx1ZXMudGltZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgICB0aGlzLnVzZXJWYWx1ZXMuaGFzaF91c2VkID0gdmFsdWVzLmhhc2hfdXNlZDtcbiAgICAgICAgICAgIHRoaXMudmFsdWVzW2tleS52M10gPSB0aGlzLnVzZXJWYWx1ZXM7XG4gICAgICAgICAgICB0aGlzLnJlYXNvbiA9IHJlYXNvbjtcbiAgICAgICAgICAgIHRoaXMubG9hZE92ZXJyaWRlcygpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChfZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdGF0c2lnU3RvcmUucHJvdG90eXBlLmxvYWRGcm9tTG9jYWxTdG9yYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoU3RhdHNpZ0FzeW5jU3RvcmFnZV8xLmRlZmF1bHQuYXN5bmNTdG9yYWdlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXJzZUNhY2hlZFZhbHVlcyhTdGF0c2lnTG9jYWxTdG9yYWdlXzEuZGVmYXVsdC5nZXRJdGVtKENvbnN0YW50c18xLklOVEVSTkFMX1NUT1JFX0tFWSksIFN0YXRzaWdMb2NhbFN0b3JhZ2VfMS5kZWZhdWx0LmdldEl0ZW0oQ29uc3RhbnRzXzEuU1RJQ0tZX0RFVklDRV9FWFBFUklNRU5UU19LRVkpKTtcbiAgICAgICAgdGhpcy5sb2FkZWQgPSB0cnVlO1xuICAgIH07XG4gICAgLy8gQ3VycmVudGx5IG9ubHkgbG9hZHMgZXhwZXJpbWVudHMsIGNhbm5vdCByZWx5IG9uIHN0b3JhZ2UgYWRhcHRlciBmb3IgYWxsIHVzZXIgdmFsdWVzLlxuICAgIFN0YXRzaWdTdG9yZS5wcm90b3R5cGUucGFydGlhbExvYWRGcm9tUGVyc2lzdGVudFN0b3JhZ2VBZGFwdGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICh0aGlzLnVzZXJQZXJzaXN0ZW50U3RvcmFnZUFkYXB0ZXIpIHtcbiAgICAgICAgICAgIHZhciBpZFR5cGUgPSAoX2EgPSB0aGlzLnVzZXJQZXJzaXN0ZW50U3RvcmFnZUFkYXB0ZXIudXNlcklEVHlwZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJ3VzZXJJRCc7XG4gICAgICAgICAgICB2YXIgdW5pdElEID0gdGhpcy5zZGtJbnRlcm5hbC5nZXRDdXJyZW50VXNlclVuaXRJRChpZFR5cGUpO1xuICAgICAgICAgICAgaWYgKHVuaXRJRCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXNlclBlcnNpc3RlbnRTdG9yYWdlRGF0YSA9IEpTT04ucGFyc2UodGhpcy51c2VyUGVyc2lzdGVudFN0b3JhZ2VBZGFwdGVyLmxvYWQoXCJcIi5jb25jYXQodW5pdElELCBcIjpcIikuY29uY2F0KGlkVHlwZSkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgT3V0cHV0TG9nZ2VyXzEuZGVmYXVsdC53YXJuKCdGYWlsZWQgdG8gbG9hZCBmcm9tIHVzZXIgcGVyc2lzdGVudCBzdG9yYWdlLicsIGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnVzZXJWYWx1ZXMuc3RpY2t5X2V4cGVyaW1lbnRzID0gdGhpcy51c2VyUGVyc2lzdGVudFN0b3JhZ2VEYXRhXG4gICAgICAgICAgICAgICAgICAgIC5leHBlcmltZW50cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU3RhdHNpZ1N0b3JlLnByb3RvdHlwZS5zYXZlU3RpY2t5RXhwZXJpbWVudHNUb1BlcnNpc3RlbnRTdG9yYWdlQWRhcHRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAodGhpcy51c2VyUGVyc2lzdGVudFN0b3JhZ2VBZGFwdGVyKSB7XG4gICAgICAgICAgICB2YXIgaWRUeXBlID0gKF9hID0gdGhpcy51c2VyUGVyc2lzdGVudFN0b3JhZ2VBZGFwdGVyLnVzZXJJRFR5cGUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICd1c2VySUQnO1xuICAgICAgICAgICAgdmFyIHVuaXRJRCA9IHRoaXMuc2RrSW50ZXJuYWwuZ2V0Q3VycmVudFVzZXJVbml0SUQoaWRUeXBlKTtcbiAgICAgICAgICAgIGlmICh1bml0SUQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCB0aGlzLnVzZXJQZXJzaXN0ZW50U3RvcmFnZURhdGEpLCB7IGV4cGVyaW1lbnRzOiB0aGlzLnVzZXJWYWx1ZXMuc3RpY2t5X2V4cGVyaW1lbnRzIH0pO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXNlclBlcnNpc3RlbnRTdG9yYWdlQWRhcHRlci5zYXZlKFwiXCIuY29uY2F0KHVuaXRJRCwgXCI6XCIpLmNvbmNhdChpZFR5cGUpLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIE91dHB1dExvZ2dlcl8xLmRlZmF1bHQud2FybignRmFpbGVkIHRvIHNhdmUgdXNlciBleHBlcmltZW50IHZhbHVlcyB0byBwZXJzaXN0ZW50IHN0b3JhZ2UuJywgZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBTdGF0c2lnU3RvcmUucHJvdG90eXBlLmlzTG9hZGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2FkZWQ7XG4gICAgfTtcbiAgICBTdGF0c2lnU3RvcmUucHJvdG90eXBlLmdldExhc3RVcGRhdGVUaW1lID0gZnVuY3Rpb24gKHVzZXIsIHN0YWJsZUlEKSB7XG4gICAgICAgIHZhciByZXF1ZXN0ZWRVc2VyQ2FjaGVLZXkgPSAoMCwgSGFzaGluZ18xLmdldFVzZXJDYWNoZUtleSkoc3RhYmxlSUQsIHVzZXIsIHRoaXMuc2RrSW50ZXJuYWwuZ2V0U0RLS2V5KCkpO1xuICAgICAgICB2YXIgdXNlclZhbHVlcyA9IHRoaXMuZ2V0VXNlclZhbHVlcyhyZXF1ZXN0ZWRVc2VyQ2FjaGVLZXkpO1xuICAgICAgICB2YXIgdXNlckhhc2ggPSAoMCwgSGFzaGluZ18xLmRqYjJIYXNoRm9yT2JqZWN0KShfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdXNlciksIHsgc3RhYmxlSUQ6IHN0YWJsZUlEIH0pKTtcbiAgICAgICAgaWYgKCh1c2VyVmFsdWVzID09PSBudWxsIHx8IHVzZXJWYWx1ZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHVzZXJWYWx1ZXMudXNlcl9oYXNoKSA9PSB1c2VySGFzaCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXNlclZhbHVlcy50aW1lO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgU3RhdHNpZ1N0b3JlLnByb3RvdHlwZS5nZXRQcmV2aW91c0Rlcml2ZWRGaWVsZHMgPSBmdW5jdGlvbiAodXNlciwgc3RhYmxlSUQpIHtcbiAgICAgICAgdmFyIHJlcXVlc3RlZFVzZXJDYWNoZUtleSA9ICgwLCBIYXNoaW5nXzEuZ2V0VXNlckNhY2hlS2V5KShzdGFibGVJRCwgdXNlciwgdGhpcy5zZGtJbnRlcm5hbC5nZXRTREtLZXkoKSk7XG4gICAgICAgIHZhciB1c2VyVmFsdWVzID0gdGhpcy5nZXRVc2VyVmFsdWVzKHJlcXVlc3RlZFVzZXJDYWNoZUtleSk7XG4gICAgICAgIHZhciB1c2VySGFzaCA9ICgwLCBIYXNoaW5nXzEuZGpiMkhhc2hGb3JPYmplY3QpKF9fYXNzaWduKF9fYXNzaWduKHt9LCB1c2VyKSwgeyBzdGFibGVJRDogc3RhYmxlSUQgfSkpO1xuICAgICAgICBpZiAoKHVzZXJWYWx1ZXMgPT09IG51bGwgfHwgdXNlclZhbHVlcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogdXNlclZhbHVlcy51c2VyX2hhc2gpID09IHVzZXJIYXNoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy51c2VyVmFsdWVzLmRlcml2ZWRfZmllbGRzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICBTdGF0c2lnU3RvcmUucHJvdG90eXBlLmdldFByZXZpb3VzSGFzaFVzZWQgPSBmdW5jdGlvbiAodXNlciwgc3RhYmxlSUQpIHtcbiAgICAgICAgdmFyIHJlcXVlc3RlZFVzZXJDYWNoZUtleSA9ICgwLCBIYXNoaW5nXzEuZ2V0VXNlckNhY2hlS2V5KShzdGFibGVJRCwgdXNlciwgdGhpcy5zZGtJbnRlcm5hbC5nZXRTREtLZXkoKSk7XG4gICAgICAgIHZhciB1c2VyVmFsdWVzID0gdGhpcy5nZXRVc2VyVmFsdWVzKHJlcXVlc3RlZFVzZXJDYWNoZUtleSk7XG4gICAgICAgIHJldHVybiB1c2VyVmFsdWVzID09PSBudWxsIHx8IHVzZXJWYWx1ZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHVzZXJWYWx1ZXMuaGFzaF91c2VkO1xuICAgIH07XG4gICAgU3RhdHNpZ1N0b3JlLnByb3RvdHlwZS5wYXJzZUNhY2hlZFZhbHVlcyA9IGZ1bmN0aW9uIChhbGxWYWx1ZXMsIGRldmljZUV4cGVyaW1lbnRzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlcyA9IGFsbFZhbHVlcyA/IEpTT04ucGFyc2UoYWxsVmFsdWVzKSA6IHRoaXMudmFsdWVzO1xuICAgICAgICAgICAgdGhpcy5zZXRVc2VyVmFsdWVGcm9tQ2FjaGUoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gQ2FjaGVkIHZhbHVlIGNvcnJ1cHRlZCwgcmVtb3ZlIGNhY2hlXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUZyb21TdG9yYWdlKENvbnN0YW50c18xLklOVEVSTkFMX1NUT1JFX0tFWSk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBkZXZpY2VFeHBQYXJzZWQgPSBkZXZpY2VFeHBlcmltZW50c1xuICAgICAgICAgICAgICAgID8gSlNPTi5wYXJzZShkZXZpY2VFeHBlcmltZW50cylcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICBpZiAoZGV2aWNlRXhwUGFyc2VkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGlja3lEZXZpY2VFeHBlcmltZW50cyA9IGRldmljZUV4cFBhcnNlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVGcm9tU3RvcmFnZShDb25zdGFudHNfMS5TVElDS1lfREVWSUNFX0VYUEVSSU1FTlRTX0tFWSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sb2FkT3ZlcnJpZGVzKCk7XG4gICAgfTtcbiAgICBTdGF0c2lnU3RvcmUucHJvdG90eXBlLmdldFVzZXJWYWx1ZXMgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHJldHVybiAoX2IgPSAoX2EgPSB0aGlzLnZhbHVlc1trZXkudjNdKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB0aGlzLnZhbHVlc1trZXkudjJdKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiB0aGlzLnZhbHVlc1trZXkudjFdO1xuICAgIH07XG4gICAgU3RhdHNpZ1N0b3JlLnByb3RvdHlwZS5zZXRVc2VyVmFsdWVGcm9tQ2FjaGUgPSBmdW5jdGlvbiAoaXNVc2VyUHJlZmV0Y2hlZCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBpZiAoaXNVc2VyUHJlZmV0Y2hlZCA9PT0gdm9pZCAwKSB7IGlzVXNlclByZWZldGNoZWQgPSBmYWxzZTsgfVxuICAgICAgICB2YXIgY2FjaGVkVmFsdWVzID0gdGhpcy5nZXRVc2VyVmFsdWVzKHRoaXMudXNlckNhY2hlS2V5KTtcbiAgICAgICAgaWYgKGNhY2hlZFZhbHVlcyA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0VXNlclZhbHVlcygpO1xuICAgICAgICAgICAgdGhpcy5yZWFzb24gPSBFdmFsdWF0aW9uUmVhc29uXzEuRXZhbHVhdGlvblJlYXNvbi5VbmluaXRpYWxpemVkO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNhY2hlZFZhbHVlcy5zdGFibGVJRFVzZWQgIT0gbnVsbCAmJlxuICAgICAgICAgICAgY2FjaGVkVmFsdWVzLnN0YWJsZUlEVXNlZCAhPT0gdGhpcy5nZXRTdGFibGVJRCgpKSB7XG4gICAgICAgICAgICB0aGlzLnNka0ludGVybmFsLmdldEVycm9yQm91bmRhcnkoKS5sb2dFcnJvcignc3RhYmxlSURDaGFuZ2VkJywgbmV3IEVycm9yKFwiU3RhYmxlSUQgY2hhbmdlZCBmcm9tIFwiLmNvbmNhdChjYWNoZWRWYWx1ZXMuc3RhYmxlSURVc2VkLCBcIiB0byBcIikuY29uY2F0KHRoaXMuZ2V0U3RhYmxlSUQoKSwgXCIsXFxuICAgICAgICAgICAgb3ZlcnJpZGUgc3RhYmxlSUQgXCIpLmNvbmNhdCgoX2EgPSB0aGlzLnNka0ludGVybmFsLmdldE9wdGlvbnMoKS5nZXRPdmVycmlkZVN0YWJsZUlEKCkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnKSkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXNlclZhbHVlcyA9IGNhY2hlZFZhbHVlcztcbiAgICAgICAgdGhpcy5yZWFzb24gPSBpc1VzZXJQcmVmZXRjaGVkXG4gICAgICAgICAgICA/IEV2YWx1YXRpb25SZWFzb25fMS5FdmFsdWF0aW9uUmVhc29uLlByZWZldGNoXG4gICAgICAgICAgICA6IEV2YWx1YXRpb25SZWFzb25fMS5FdmFsdWF0aW9uUmVhc29uLkNhY2hlO1xuICAgICAgICByZXR1cm4gKF9iID0gY2FjaGVkVmFsdWVzLmV2YWx1YXRpb25fdGltZSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogMDtcbiAgICB9O1xuICAgIFN0YXRzaWdTdG9yZS5wcm90b3R5cGUucmVtb3ZlRnJvbVN0b3JhZ2UgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIFN0YXRzaWdBc3luY1N0b3JhZ2VfMS5kZWZhdWx0LnJlbW92ZUl0ZW1Bc3luYyhrZXkpLmNhdGNoKGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5zZGtJbnRlcm5hbC5nZXRFcnJvckJvdW5kYXJ5KCkubG9nRXJyb3IoJ3JlbW92ZUZyb21TdG9yYWdlJywgcmVhc29uKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFN0YXRzaWdMb2NhbFN0b3JhZ2VfMS5kZWZhdWx0LnJlbW92ZUl0ZW0oa2V5KTtcbiAgICB9O1xuICAgIFN0YXRzaWdTdG9yZS5wcm90b3R5cGUubG9hZE92ZXJyaWRlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuc2RrSW50ZXJuYWwuZ2V0T3B0aW9ucygpLmdldERpc2FibGVMb2NhbE92ZXJyaWRlcygpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG92ZXJyaWRlcyA9IFN0YXRzaWdMb2NhbFN0b3JhZ2VfMS5kZWZhdWx0LmdldEl0ZW0oQ29uc3RhbnRzXzEuT1ZFUlJJREVTX1NUT1JFX0tFWSk7XG4gICAgICAgIGlmIChvdmVycmlkZXMgIT0gbnVsbCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLm92ZXJyaWRlcyA9IEpTT04ucGFyc2Uob3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgU3RhdHNpZ0xvY2FsU3RvcmFnZV8xLmRlZmF1bHQucmVtb3ZlSXRlbShDb25zdGFudHNfMS5PVkVSUklERVNfU1RPUkVfS0VZKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU3RhdHNpZ1N0b3JlLnByb3RvdHlwZS5zZXRFdmFsdWF0aW9uUmVhc29uID0gZnVuY3Rpb24gKGV2YWxSZWFzb24pIHtcbiAgICAgICAgdGhpcy5yZWFzb24gPSBldmFsUmVhc29uO1xuICAgIH07XG4gICAgU3RhdHNpZ1N0b3JlLnByb3RvdHlwZS5zYXZlID0gZnVuY3Rpb24gKHVzZXIsIHJlc3BvbnNlLCBzdGFibGVJRCwgcHJlZmV0Y2hVc2Vycykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVxdWVzdGVkVXNlckNhY2hlS2V5LCBpbml0UmVzcG9uc2UsIHVzZXJWYWx1ZXMsIF9hO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdGVkVXNlckNhY2hlS2V5ID0gKDAsIEhhc2hpbmdfMS5nZXRVc2VyQ2FjaGVLZXkpKHN0YWJsZUlELCB1c2VyLCB0aGlzLnNka0ludGVybmFsLmdldFNES0tleSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXRSZXNwb25zZSA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluaXRSZXNwb25zZS5pc19kZWx0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnNhdmVJbml0RGVsdGFzKHVzZXIsIHJlc3BvbnNlLCB0cnVlLCBzdGFibGVJRCwgcHJlZmV0Y2hVc2VycyldO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXJnZUluaXRpYWxpemVSZXNwb25zZUludG9Vc2VyTWFwKGluaXRSZXNwb25zZSwgdGhpcy52YWx1ZXMsIHJlcXVlc3RlZFVzZXJDYWNoZUtleSwgdXNlciwgZnVuY3Rpb24gKHVzZXJWYWx1ZXMpIHsgcmV0dXJuIHVzZXJWYWx1ZXM7IH0sIHN0YWJsZUlELCBwcmVmZXRjaFVzZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJWYWx1ZXMgPSB0aGlzLmdldFVzZXJWYWx1ZXMocmVxdWVzdGVkVXNlckNhY2hlS2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1c2VyVmFsdWVzICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdGVkVXNlckNhY2hlS2V5ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdGVkVXNlckNhY2hlS2V5LnYzID09PSB0aGlzLnVzZXJDYWNoZUtleS52Mykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXNlclZhbHVlcyA9IHVzZXJWYWx1ZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWFzb24gPSBFdmFsdWF0aW9uUmVhc29uXzEuRXZhbHVhdGlvblJlYXNvbi5OZXR3b3JrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy53cml0ZVZhbHVlc1RvU3RvcmFnZSh0aGlzLnZhbHVlcyldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS52YWx1ZXMgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUGVyc2lzdHMgdGhlIGluaXQgdmFsdWVzIHRvIHN0b3JhZ2UsIGJ1dCBET0VTIE5PVCB1cGRhdGUgdGhlIHN0YXRlIG9mIHRoZSBzdG9yZS5cbiAgICAgKi9cbiAgICBTdGF0c2lnU3RvcmUucHJvdG90eXBlLnNhdmVXaXRob3V0VXBkYXRpbmdDbGllbnRTdGF0ZSA9IGZ1bmN0aW9uICh1c2VyLCByZXNwb25zZSwgc3RhYmxlSUQsIHByZWZldGNoVXNlcnMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlcXVlc3RlZFVzZXJDYWNoZUtleSwgaW5pdFJlc3BvbnNlLCBjb3BpZWRWYWx1ZXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ZWRVc2VyQ2FjaGVLZXkgPSAoMCwgSGFzaGluZ18xLmdldFVzZXJDYWNoZUtleSkoc3RhYmxlSUQsIHVzZXIsIHRoaXMuc2RrSW50ZXJuYWwuZ2V0U0RLS2V5KCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdFJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5pdFJlc3BvbnNlLmlzX2RlbHRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuc2F2ZUluaXREZWx0YXModXNlciwgcmVzcG9uc2UsIGZhbHNlLCBzdGFibGVJRCwgcHJlZmV0Y2hVc2VycyldO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29waWVkVmFsdWVzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnZhbHVlcykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXJnZUluaXRpYWxpemVSZXNwb25zZUludG9Vc2VyTWFwKGluaXRSZXNwb25zZSwgY29waWVkVmFsdWVzLCByZXF1ZXN0ZWRVc2VyQ2FjaGVLZXksIHVzZXIsIGZ1bmN0aW9uICh1c2VyVmFsdWVzKSB7IHJldHVybiB1c2VyVmFsdWVzOyB9LCBzdGFibGVJRCwgcHJlZmV0Y2hVc2Vycyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLndyaXRlVmFsdWVzVG9TdG9yYWdlKGNvcGllZFZhbHVlcyldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgU3RhdHNpZ1N0b3JlLnByb3RvdHlwZS5nZXREZWx0YXNNZXJnZUZ1bmN0aW9uID0gZnVuY3Rpb24gKG1lcmdlZFZhbHVlcykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGRlbHRhcywga2V5KSB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgICAgIHZhciBiYXNlVmFsdWVzID0gKF9jID0gKF9iID0gKF9hID0gbWVyZ2VkVmFsdWVzW2tleS52M10pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IG1lcmdlZFZhbHVlc1trZXkudjJdKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBtZXJnZWRWYWx1ZXNba2V5LnYxXSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogX3RoaXMuZ2V0RGVmYXVsdFVzZXJDYWNoZVZhbHVlcygpO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLm1lcmdlVXNlckNhY2hlVmFsdWVzKGJhc2VWYWx1ZXMsIGRlbHRhcyk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBTdGF0c2lnU3RvcmUucHJvdG90eXBlLnNhdmVJbml0RGVsdGFzID0gZnVuY3Rpb24gKHVzZXIsIHJlc3BvbnNlLCB1cGRhdGVTdGF0ZSwgc3RhYmxlSUQsIHByZWZldGNoVXNlcnMpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXF1ZXN0ZWRVc2VyQ2FjaGVLZXksIGluaXRSZXNwb25zZSwgbWVyZ2VkVmFsdWVzLCBoYXNCYWRIYXNoLCBiYWRDaGVja3N1bSwgaGFzaENoYW5nZWQsIGNhY2hlS2V5cywgdXNlclZhbHVlcywgZXhwZWN0ZWRGdWxsSGFzaCwgbWVyZ2VkQ29uZmlncywgY3VycmVudEZ1bGxIYXNoLCBfZDtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9mKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfZi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ZWRVc2VyQ2FjaGVLZXkgPSAoMCwgSGFzaGluZ18xLmdldFVzZXJDYWNoZUtleSkoc3RhYmxlSUQsIHVzZXIsIHRoaXMuc2RrSW50ZXJuYWwuZ2V0U0RLS2V5KCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdFJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXJnZWRWYWx1ZXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMudmFsdWVzKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBNZXJnZSBkZWx0YSB2YWx1ZXMgaW50byB0aGUgcHJldmlvdXMgdmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lcmdlSW5pdGlhbGl6ZVJlc3BvbnNlSW50b1VzZXJNYXAoaW5pdFJlc3BvbnNlLCBtZXJnZWRWYWx1ZXMsIHJlcXVlc3RlZFVzZXJDYWNoZUtleSwgdXNlciwgdGhpcy5nZXREZWx0YXNNZXJnZUZ1bmN0aW9uKG1lcmdlZFZhbHVlcyksIHN0YWJsZUlELCBwcmVmZXRjaFVzZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0JhZEhhc2ggPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhZENoZWNrc3VtID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFzaENoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlS2V5cyA9IE9iamVjdC5rZXlzKChfYSA9IGluaXRSZXNwb25zZS5wcmVmZXRjaGVkX3VzZXJfdmFsdWVzKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB7fSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZUtleXMuZm9yRWFjaChmdW5jdGlvbiAodXNlcktleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXNlciA9IG1lcmdlZFZhbHVlc1t1c2VyS2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVwb25zZUZvclVzZXIgPSAoX2EgPSBpbml0UmVzcG9uc2UucHJlZmV0Y2hlZF91c2VyX3ZhbHVlcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hW3VzZXJLZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1c2VyICYmIHJlcG9uc2VGb3JVc2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZURlbGV0ZWRLZXlzRnJvbVVzZXJWYWx1ZXMocmVwb25zZUZvclVzZXIsIHVzZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXhwZWN0ZWRGdWxsSGFzaF8xID0gcmVwb25zZUZvclVzZXIuY2hlY2tzdW07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50RnVsbEhhc2hfMSA9ICgwLCBIYXNoaW5nXzEuZGpiMkhhc2hGb3JPYmplY3QpKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVfZ2F0ZXM6IG1lcmdlZFZhbHVlc1t1c2VyS2V5XS5mZWF0dXJlX2dhdGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHluYW1pY19jb25maWdzOiBtZXJnZWRWYWx1ZXNbdXNlcktleV0uZHluYW1pY19jb25maWdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJfY29uZmlnczogbWVyZ2VkVmFsdWVzW3VzZXJLZXldLmxheWVyX2NvbmZpZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhwZWN0ZWRGdWxsSGFzaF8xICYmIGV4cGVjdGVkRnVsbEhhc2hfMSAhPT0gY3VycmVudEZ1bGxIYXNoXzEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0JhZEhhc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFkQ2hlY2tzdW0gPSBjdXJyZW50RnVsbEhhc2hfMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodXNlclZhbHVlcy5oYXNoX3VzZWQgIT09IGluaXRSZXNwb25zZS5oYXNoX3VzZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc2hDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlclZhbHVlcyA9IChfYyA9IChfYiA9IG1lcmdlZFZhbHVlc1tyZXF1ZXN0ZWRVc2VyQ2FjaGVLZXkudjNdKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBtZXJnZWRWYWx1ZXNbcmVxdWVzdGVkVXNlckNhY2hlS2V5LnYyXSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogbWVyZ2VkVmFsdWVzW3JlcXVlc3RlZFVzZXJDYWNoZUtleS52MV07XG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVEZWxldGVkS2V5c0Zyb21Vc2VyVmFsdWVzKGluaXRSZXNwb25zZSwgdXNlclZhbHVlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZEZ1bGxIYXNoID0gaW5pdFJlc3BvbnNlLmNoZWNrc3VtO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2VkQ29uZmlncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlX2dhdGVzOiB1c2VyVmFsdWVzLmZlYXR1cmVfZ2F0ZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHluYW1pY19jb25maWdzOiB1c2VyVmFsdWVzLmR5bmFtaWNfY29uZmlncyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllcl9jb25maWdzOiB1c2VyVmFsdWVzLmxheWVyX2NvbmZpZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEZ1bGxIYXNoID0gKDAsIEhhc2hpbmdfMS5kamIySGFzaEZvck9iamVjdCkobWVyZ2VkQ29uZmlncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhwZWN0ZWRGdWxsSGFzaCAmJiBleHBlY3RlZEZ1bGxIYXNoICE9PSBjdXJyZW50RnVsbEhhc2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNCYWRIYXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWRDaGVja3N1bSA9IGN1cnJlbnRGdWxsSGFzaDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1c2VyVmFsdWVzLmhhc2hfdXNlZCAhPT0gaW5pdFJlc3BvbnNlLmhhc2hfdXNlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc2hDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNCYWRIYXNoIHx8IGhhc2hDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluaXRSZXNwb25zZS5kZWx0YXNfZnVsbF9yZXNwb25zZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHJ5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmZXRjaEFuZFNhdmVWYWx1ZXModXNlciwgc3RhYmxlSUQsIHByZWZldGNoVXNlcnMsIHVuZGVmaW5lZCwgYmFkQ2hlY2tzdW0sIGhhc0JhZEhhc2gsIG1lcmdlZENvbmZpZ3MsIGluaXRSZXNwb25zZS5kZWx0YXNfZnVsbF9yZXNwb25zZSkuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNka0ludGVybmFsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldEVycm9yQm91bmRhcnkoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5sb2dFcnJvcigncmVmZXRjaEFuZFNhdmVWYWx1ZXMnLCByZWFzb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXRyeVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmZXRjaEFuZFNhdmVWYWx1ZXModXNlciwgc3RhYmxlSUQsIHByZWZldGNoVXNlcnMsIHVuZGVmaW5lZCwgYmFkQ2hlY2tzdW0sIGhhc0JhZEhhc2gpLmNhdGNoKGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNka0ludGVybmFsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0RXJyb3JCb3VuZGFyeSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubG9nRXJyb3IoJ3JlZmV0Y2hBbmRTYXZlVmFsdWVzJywgcmVhc29uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXVwZGF0ZVN0YXRlKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1c2VyVmFsdWVzICYmIHJlcXVlc3RlZFVzZXJDYWNoZUtleS52MyA9PT0gdGhpcy51c2VyQ2FjaGVLZXkudjMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVzZXJWYWx1ZXMgPSB1c2VyVmFsdWVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVhc29uID0gRXZhbHVhdGlvblJlYXNvbl8xLkV2YWx1YXRpb25SZWFzb24uTmV0d29yaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF9kID0gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMud3JpdGVWYWx1ZXNUb1N0b3JhZ2UobWVyZ2VkVmFsdWVzKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kLnZhbHVlcyA9IF9mLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMud3JpdGVWYWx1ZXNUb1N0b3JhZ2UobWVyZ2VkVmFsdWVzKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9mLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9mLmxhYmVsID0gNDtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgU3RhdHNpZ1N0b3JlLnByb3RvdHlwZS5yZWZldGNoQW5kU2F2ZVZhbHVlcyA9IGZ1bmN0aW9uICh1c2VyLCBzdGFibGVJRCwgcHJlZmV0Y2hVc2VycywgdGltZW91dCwgYmFkQ2hlY2tzdW0sIGhhZEJhZENoZWNrc3VtLCBiYWRNZXJnZWRDb25maWdzLCBiYWRGdWxsUmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKHRpbWVvdXQgPT09IHZvaWQgMCkgeyB0aW1lb3V0ID0gdGhpcy5zZGtJbnRlcm5hbC5nZXRPcHRpb25zKCkuZ2V0SW5pdFRpbWVvdXRNcygpOyB9XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzaW5jZVRpbWUsIHByZXZpb3VzRGVyaXZlZEZpZWxkcztcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc2luY2VUaW1lID0gdGhpcy5nZXRMYXN0VXBkYXRlVGltZSh1c2VyLCBzdGFibGVJRCk7XG4gICAgICAgICAgICAgICAgcHJldmlvdXNEZXJpdmVkRmllbGRzID0gdGhpcy5nZXRQcmV2aW91c0Rlcml2ZWRGaWVsZHModXNlciwgc3RhYmxlSUQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnNka0ludGVybmFsXG4gICAgICAgICAgICAgICAgICAgICAgICAuZ2V0TmV0d29yaygpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmV0Y2hWYWx1ZXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcjogdXNlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpbmNlVGltZTogc2luY2VUaW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dDogdGltZW91dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZURlbHRhczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVmZXRjaFVzZXJzOiBwcmVmZXRjaFVzZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNEZXJpdmVkRmllbGRzOiBwcmV2aW91c0Rlcml2ZWRGaWVsZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBoYWRCYWREZWx0YUNoZWNrc3VtOiBoYWRCYWRDaGVja3N1bSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhZENoZWNrc3VtOiBiYWRDaGVja3N1bSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhZE1lcmdlZENvbmZpZ3M6IGJhZE1lcmdlZENvbmZpZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWRGdWxsUmVzcG9uc2U6IGJhZEZ1bGxSZXNwb25zZSxcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChqc29uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISgwLCBSZXNwb25zZVZlcmlmaWNhdGlvbl8xLnZlcmlmeVNES0tleVVzZWQpKGpzb24sIF90aGlzLnNka0ludGVybmFsLmdldFNES0tleSgpLCBfdGhpcy5zZGtJbnRlcm5hbC5nZXRFcnJvckJvdW5kYXJ5KCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpzb24gPT09IG51bGwgfHwganNvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDoganNvbi5oYXNfdXBkYXRlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNhdmVXaXRob3V0VXBkYXRpbmdDbGllbnRTdGF0ZSh1c2VyLCBqc29uLCBzdGFibGVJRCwgcHJlZmV0Y2hVc2VycykuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc2RrSW50ZXJuYWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRFcnJvckJvdW5kYXJ5KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5sb2dFcnJvcigncmVmZXRjaEFuZFNhdmVWYWx1ZXM6dGhlbicsIHJlYXNvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNka0ludGVybmFsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldEVycm9yQm91bmRhcnkoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5sb2dFcnJvcigncmVmZXRjaEFuZFNhdmVWYWx1ZXMnLCByZWFzb24pO1xuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBTdGF0c2lnU3RvcmUucHJvdG90eXBlLmdldFN0YWJsZUlEID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZGtJbnRlcm5hbC5nZXRTdGFibGVJRCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTWVyZ2VzIHRoZSBwcm92aWRlZCBpbml0IGNvbmZpZ3MgaW50byB0aGUgcHJvdmlkZWQgY29uZmlnIG1hcCwgYWNjb3JkaW5nIHRvIHRoZSBwcm92aWRlZCBtZXJnZSBmdW5jdGlvblxuICAgICAqL1xuICAgIFN0YXRzaWdTdG9yZS5wcm90b3R5cGUubWVyZ2VJbml0aWFsaXplUmVzcG9uc2VJbnRvVXNlck1hcCA9IGZ1bmN0aW9uIChkYXRhLCBjb25maWdNYXAsIHJlcXVlc3RlZFVzZXJDYWNoZUtleSwgdXNlciwgbWVyZ2VGbiwgc3RhYmxlSUQsIHByZWZldGNoVXNlcnMpIHtcbiAgICAgICAgaWYgKGRhdGEucHJlZmV0Y2hlZF91c2VyX3ZhbHVlcykge1xuICAgICAgICAgICAgdmFyIGNhY2hlS2V5cyA9IE9iamVjdC5rZXlzKGRhdGEucHJlZmV0Y2hlZF91c2VyX3ZhbHVlcyk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNhY2hlS2V5c18xID0gY2FjaGVLZXlzOyBfaSA8IGNhY2hlS2V5c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBjYWNoZUtleXNfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIHByZWZldGNoZWQgPSBkYXRhLnByZWZldGNoZWRfdXNlcl92YWx1ZXNba2V5XTtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWVzID0gbWVyZ2VGbih0aGlzLmNvbnZlcnRBUElEYXRhVG9DYWNoZVZhbHVlcyhwcmVmZXRjaGVkLCBrZXkpLCB7IHYxOiBrZXksIHYyOiBrZXksIHYzOiBrZXkgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHByZWZldGNoVXNlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVzZXJIYXNoID0gKDAsIEhhc2hpbmdfMS5kamIySGFzaEZvck9iamVjdCkocHJlZmV0Y2hVc2Vyc1trZXldKTtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzLnVzZXJfaGFzaCA9IHVzZXJIYXNoO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXMuc3RhYmxlSURVc2VkID0gc3RhYmxlSUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbmZpZ01hcFtrZXldID0gdmFsdWVzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChyZXF1ZXN0ZWRVc2VyQ2FjaGVLZXkpIHtcbiAgICAgICAgICAgIHZhciByZXF1ZXN0ZWRVc2VyVmFsdWVzID0gdGhpcy5jb252ZXJ0QVBJRGF0YVRvQ2FjaGVWYWx1ZXMoZGF0YSwgcmVxdWVzdGVkVXNlckNhY2hlS2V5LnYzKTtcbiAgICAgICAgICAgIHZhciB1c2VySGFzaCA9ICgwLCBIYXNoaW5nXzEuZGpiMkhhc2hGb3JPYmplY3QpKF9fYXNzaWduKF9fYXNzaWduKHt9LCB1c2VyKSwgeyBzdGFibGVJRDogc3RhYmxlSUQgfSkpO1xuICAgICAgICAgICAgcmVxdWVzdGVkVXNlclZhbHVlcy51c2VyX2hhc2ggPSB1c2VySGFzaDtcbiAgICAgICAgICAgIHJlcXVlc3RlZFVzZXJWYWx1ZXMuc3RhYmxlSURVc2VkID0gc3RhYmxlSUQ7XG4gICAgICAgICAgICBjb25maWdNYXBbcmVxdWVzdGVkVXNlckNhY2hlS2V5LnYzXSA9IG1lcmdlRm4ocmVxdWVzdGVkVXNlclZhbHVlcywgcmVxdWVzdGVkVXNlckNhY2hlS2V5KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3RhdHNpZ1N0b3JlLnByb3RvdHlwZS5nZXREZWZhdWx0VXNlckNhY2hlVmFsdWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmVhdHVyZV9nYXRlczoge30sXG4gICAgICAgICAgICBsYXllcl9jb25maWdzOiB7fSxcbiAgICAgICAgICAgIGR5bmFtaWNfY29uZmlnczoge30sXG4gICAgICAgICAgICBzdGlja3lfZXhwZXJpbWVudHM6IHt9LFxuICAgICAgICAgICAgdGltZTogMCxcbiAgICAgICAgICAgIGV2YWx1YXRpb25fdGltZTogMCxcbiAgICAgICAgICAgIGRlcml2ZWRfZmllbGRzOiB7fSxcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIFN0YXRzaWdTdG9yZS5wcm90b3R5cGUubWVyZ2VVc2VyQ2FjaGVWYWx1ZXMgPSBmdW5jdGlvbiAoYmFzZVZhbHVlcywgdmFsdWVzVG9NZXJnZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmVhdHVyZV9nYXRlczogX19hc3NpZ24oX19hc3NpZ24oe30sIGJhc2VWYWx1ZXMuZmVhdHVyZV9nYXRlcyksIHZhbHVlc1RvTWVyZ2UuZmVhdHVyZV9nYXRlcyksXG4gICAgICAgICAgICBsYXllcl9jb25maWdzOiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgYmFzZVZhbHVlcy5sYXllcl9jb25maWdzKSwgdmFsdWVzVG9NZXJnZS5sYXllcl9jb25maWdzKSxcbiAgICAgICAgICAgIGR5bmFtaWNfY29uZmlnczogX19hc3NpZ24oX19hc3NpZ24oe30sIGJhc2VWYWx1ZXMuZHluYW1pY19jb25maWdzKSwgdmFsdWVzVG9NZXJnZS5keW5hbWljX2NvbmZpZ3MpLFxuICAgICAgICAgICAgc3RpY2t5X2V4cGVyaW1lbnRzOiBiYXNlVmFsdWVzLnN0aWNreV9leHBlcmltZW50cyxcbiAgICAgICAgICAgIHRpbWU6IHZhbHVlc1RvTWVyZ2UudGltZSxcbiAgICAgICAgICAgIGV2YWx1YXRpb25fdGltZTogdmFsdWVzVG9NZXJnZS5ldmFsdWF0aW9uX3RpbWUsXG4gICAgICAgICAgICBkZXJpdmVkX2ZpZWxkczogdmFsdWVzVG9NZXJnZS5kZXJpdmVkX2ZpZWxkcyxcbiAgICAgICAgICAgIGhhc2hfdXNlZDogdmFsdWVzVG9NZXJnZS5oYXNoX3VzZWQsXG4gICAgICAgICAgICB1c2VyX2hhc2g6IHZhbHVlc1RvTWVyZ2UudXNlcl9oYXNoLFxuICAgICAgICAgICAgc3RhYmxlSURVc2VkOiB2YWx1ZXNUb01lcmdlLnN0YWJsZUlEVXNlZCxcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFdyaXRlcyB0aGUgcHJvdmlkZWQgdmFsdWVzIHRvIHN0b3JhZ2UsIHRydW5jYXRpbmcgZG93biB0b1xuICAgICAqIE1BWF9VU0VSX1ZBTFVFX0NBQ0hFRCBudW1iZXIgZW50cmllcy5cbiAgICAgKiBAcmV0dXJucyBUaGUgdHJ1bmNhdGVkIGVudHJ5IGxpc3RcbiAgICAgKi9cbiAgICBTdGF0c2lnU3RvcmUucHJvdG90eXBlLndyaXRlVmFsdWVzVG9TdG9yYWdlID0gZnVuY3Rpb24gKHZhbHVlc1RvV3JpdGUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGZpbHRlcmVkVmFsdWVzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVsZXRlIHRoZSBvbGRlciB2ZXJzaW9uIG9mIGNhY2hlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVzVG9Xcml0ZVt0aGlzLnVzZXJDYWNoZUtleS52M10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdmFsdWVzVG9Xcml0ZVt0aGlzLnVzZXJDYWNoZUtleS52Ml07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHZhbHVlc1RvV3JpdGVbdGhpcy51c2VyQ2FjaGVLZXkudjFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWVzVG9Xcml0ZVt0aGlzLnVzZXJDYWNoZUtleS52Ml0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdmFsdWVzVG9Xcml0ZVt0aGlzLnVzZXJDYWNoZUtleS52MV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZFZhbHVlcyA9IE9iamVjdC5lbnRyaWVzKHZhbHVlc1RvV3JpdGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNvcnQoZnVuY3Rpb24gKF9hLCBfYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYywgX2Q7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBfYVsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IF9iWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCgoX2MgPSBiID09PSBudWxsIHx8IGIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGIuZXZhbHVhdGlvbl90aW1lKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBiID09PSBudWxsIHx8IGIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGIudGltZSkgLSAoKF9kID0gYSA9PT0gbnVsbCB8fCBhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhLmV2YWx1YXRpb25fdGltZSkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogYSA9PT0gbnVsbCB8fCBhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhLnRpbWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNsaWNlKDAsIE1BWF9VU0VSX1ZBTFVFX0NBQ0hFRCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXNUb1dyaXRlID0gT2JqZWN0LmZyb21FbnRyaWVzKGZpbHRlcmVkVmFsdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghU3RhdHNpZ0FzeW5jU3RvcmFnZV8xLmRlZmF1bHQuYXN5bmNTdG9yYWdlKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFN0YXRzaWdBc3luY1N0b3JhZ2VfMS5kZWZhdWx0LnNldEl0ZW1Bc3luYyhDb25zdGFudHNfMS5JTlRFUk5BTF9TVE9SRV9LRVksIEpTT04uc3RyaW5naWZ5KHZhbHVlc1RvV3JpdGUpKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBTdGF0c2lnTG9jYWxTdG9yYWdlXzEuZGVmYXVsdC5zZXRJdGVtKENvbnN0YW50c18xLklOVEVSTkFMX1NUT1JFX0tFWSwgSlNPTi5zdHJpbmdpZnkodmFsdWVzVG9Xcml0ZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAzO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovLCB2YWx1ZXNUb1dyaXRlXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBTdGF0c2lnU3RvcmUucHJvdG90eXBlLmNoZWNrR2F0ZSA9IGZ1bmN0aW9uIChnYXRlTmFtZSwgaWdub3JlT3ZlcnJpZGVzKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKGlnbm9yZU92ZXJyaWRlcyA9PT0gdm9pZCAwKSB7IGlnbm9yZU92ZXJyaWRlcyA9IGZhbHNlOyB9XG4gICAgICAgIHZhciBnYXRlTmFtZUhhc2ggPSB0aGlzLmdldEhhc2hlZFNwZWNOYW1lKGdhdGVOYW1lKTtcbiAgICAgICAgdmFyIGdhdGVWYWx1ZSA9IHtcbiAgICAgICAgICAgIG5hbWU6IGdhdGVOYW1lLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlLFxuICAgICAgICAgICAgcnVsZV9pZDogJycsXG4gICAgICAgICAgICBzZWNvbmRhcnlfZXhwb3N1cmVzOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGRldGFpbHM7XG4gICAgICAgIGlmICghaWdub3JlT3ZlcnJpZGVzICYmIHRoaXMub3ZlcnJpZGVzLmdhdGVzW2dhdGVOYW1lXSAhPSBudWxsKSB7XG4gICAgICAgICAgICBnYXRlVmFsdWUgPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogZ2F0ZU5hbWUsXG4gICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMub3ZlcnJpZGVzLmdhdGVzW2dhdGVOYW1lXSxcbiAgICAgICAgICAgICAgICBydWxlX2lkOiAnb3ZlcnJpZGUnLFxuICAgICAgICAgICAgICAgIHNlY29uZGFyeV9leHBvc3VyZXM6IFtdLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGRldGFpbHMgPSB0aGlzLmdldEV2YWx1YXRpb25EZXRhaWxzKGZhbHNlLCBFdmFsdWF0aW9uUmVhc29uXzEuRXZhbHVhdGlvblJlYXNvbi5Mb2NhbE92ZXJyaWRlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IChfYSA9IHRoaXMudXNlclZhbHVlcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZlYXR1cmVfZ2F0ZXNbZ2F0ZU5hbWVIYXNoXTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGdhdGVWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGV0YWlscyA9IHRoaXMuZ2V0RXZhbHVhdGlvbkRldGFpbHModmFsdWUgIT0gbnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgZXZhbHVhdGlvbkRldGFpbHM6IGRldGFpbHMsIGdhdGU6IGdhdGVWYWx1ZSB9O1xuICAgIH07XG4gICAgU3RhdHNpZ1N0b3JlLnByb3RvdHlwZS5nZXRDb25maWcgPSBmdW5jdGlvbiAoY29uZmlnTmFtZSwgaWdub3JlT3ZlcnJpZGVzKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIGlmIChpZ25vcmVPdmVycmlkZXMgPT09IHZvaWQgMCkgeyBpZ25vcmVPdmVycmlkZXMgPSBmYWxzZTsgfVxuICAgICAgICB2YXIgY29uZmlnTmFtZUhhc2ggPSB0aGlzLmdldEhhc2hlZFNwZWNOYW1lKGNvbmZpZ05hbWUpO1xuICAgICAgICB2YXIgY29uZmlnVmFsdWU7XG4gICAgICAgIHZhciBkZXRhaWxzO1xuICAgICAgICBpZiAoIWlnbm9yZU92ZXJyaWRlcyAmJiB0aGlzLm92ZXJyaWRlcy5jb25maWdzW2NvbmZpZ05hbWVdICE9IG51bGwpIHtcbiAgICAgICAgICAgIGRldGFpbHMgPSB0aGlzLmdldEV2YWx1YXRpb25EZXRhaWxzKGZhbHNlLCBFdmFsdWF0aW9uUmVhc29uXzEuRXZhbHVhdGlvblJlYXNvbi5Mb2NhbE92ZXJyaWRlKTtcbiAgICAgICAgICAgIGNvbmZpZ1ZhbHVlID0gbmV3IER5bmFtaWNDb25maWdfMS5kZWZhdWx0KGNvbmZpZ05hbWUsIHRoaXMub3ZlcnJpZGVzLmNvbmZpZ3NbY29uZmlnTmFtZV0sICdvdmVycmlkZScsIGRldGFpbHMsIFtdLCAnJywgdGhpcy5tYWtlT25Db25maWdEZWZhdWx0VmFsdWVGYWxsYmFjayh0aGlzLnNka0ludGVybmFsLmdldEN1cnJlbnRVc2VyKCkpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgoKF9hID0gdGhpcy51c2VyVmFsdWVzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZHluYW1pY19jb25maWdzW2NvbmZpZ05hbWVIYXNoXSkgIT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyIHJhd0NvbmZpZ1ZhbHVlID0gKF9iID0gdGhpcy51c2VyVmFsdWVzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuZHluYW1pY19jb25maWdzW2NvbmZpZ05hbWVIYXNoXTtcbiAgICAgICAgICAgIGRldGFpbHMgPSB0aGlzLmdldEV2YWx1YXRpb25EZXRhaWxzKHRydWUpO1xuICAgICAgICAgICAgY29uZmlnVmFsdWUgPSB0aGlzLmNyZWF0ZUR5bmFtaWNDb25maWcoY29uZmlnTmFtZSwgcmF3Q29uZmlnVmFsdWUsIGRldGFpbHMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGV0YWlscyA9IHRoaXMuZ2V0RXZhbHVhdGlvbkRldGFpbHMoZmFsc2UpO1xuICAgICAgICAgICAgY29uZmlnVmFsdWUgPSBuZXcgRHluYW1pY0NvbmZpZ18xLmRlZmF1bHQoY29uZmlnTmFtZSwge30sICcnLCBkZXRhaWxzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29uZmlnVmFsdWU7XG4gICAgfTtcbiAgICBTdGF0c2lnU3RvcmUucHJvdG90eXBlLmdldEV4cGVyaW1lbnQgPSBmdW5jdGlvbiAoZXhwTmFtZSwga2VlcERldmljZVZhbHVlLCBpZ25vcmVPdmVycmlkZXMpIHtcbiAgICAgICAgaWYgKGtlZXBEZXZpY2VWYWx1ZSA9PT0gdm9pZCAwKSB7IGtlZXBEZXZpY2VWYWx1ZSA9IGZhbHNlOyB9XG4gICAgICAgIGlmIChpZ25vcmVPdmVycmlkZXMgPT09IHZvaWQgMCkgeyBpZ25vcmVPdmVycmlkZXMgPSBmYWxzZTsgfVxuICAgICAgICB2YXIgZXhwO1xuICAgICAgICB2YXIgZGV0YWlscztcbiAgICAgICAgaWYgKCFpZ25vcmVPdmVycmlkZXMgJiYgdGhpcy5vdmVycmlkZXMuY29uZmlnc1tleHBOYW1lXSAhPSBudWxsKSB7XG4gICAgICAgICAgICBkZXRhaWxzID0gdGhpcy5nZXRFdmFsdWF0aW9uRGV0YWlscyhmYWxzZSwgRXZhbHVhdGlvblJlYXNvbl8xLkV2YWx1YXRpb25SZWFzb24uTG9jYWxPdmVycmlkZSk7XG4gICAgICAgICAgICBleHAgPSBuZXcgRHluYW1pY0NvbmZpZ18xLmRlZmF1bHQoZXhwTmFtZSwgdGhpcy5vdmVycmlkZXMuY29uZmlnc1tleHBOYW1lXSwgJ292ZXJyaWRlJywgZGV0YWlscyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgbGF0ZXN0VmFsdWUgPSB0aGlzLmdldExhdGVzdFZhbHVlKGV4cE5hbWUsICdkeW5hbWljX2NvbmZpZ3MnKTtcbiAgICAgICAgICAgIGRldGFpbHMgPSB0aGlzLmdldEV2YWx1YXRpb25EZXRhaWxzKGxhdGVzdFZhbHVlICE9IG51bGwpO1xuICAgICAgICAgICAgdmFyIGZpbmFsVmFsdWUgPSB0aGlzLmdldFBvc3NpYmx5U3RpY2t5VmFsdWUoZXhwTmFtZSwgbGF0ZXN0VmFsdWUsIGtlZXBEZXZpY2VWYWx1ZSwgZmFsc2UgLyogaXNMYXllciAqLywgZGV0YWlscyk7XG4gICAgICAgICAgICBleHAgPSB0aGlzLmNyZWF0ZUR5bmFtaWNDb25maWcoZXhwTmFtZSwgZmluYWxWYWx1ZSwgZGV0YWlscyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV4cDtcbiAgICB9O1xuICAgIFN0YXRzaWdTdG9yZS5wcm90b3R5cGUuZ2V0TGF5ZXIgPSBmdW5jdGlvbiAobG9nUGFyYW1ldGVyRnVuY3Rpb24sIGxheWVyTmFtZSwga2VlcERldmljZVZhbHVlKSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgICAgICAgaWYgKHRoaXMub3ZlcnJpZGVzLmxheWVyc1tsYXllck5hbWVdICE9IG51bGwpIHtcbiAgICAgICAgICAgIHZhciBkZXRhaWxzXzEgPSB0aGlzLmdldEV2YWx1YXRpb25EZXRhaWxzKGZhbHNlLCBFdmFsdWF0aW9uUmVhc29uXzEuRXZhbHVhdGlvblJlYXNvbi5Mb2NhbE92ZXJyaWRlKTtcbiAgICAgICAgICAgIHJldHVybiBMYXllcl8xLmRlZmF1bHQuX2NyZWF0ZShsYXllck5hbWUsIChfYSA9IHRoaXMub3ZlcnJpZGVzLmxheWVyc1tsYXllck5hbWVdKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB7fSwgJ292ZXJyaWRlJywgZGV0YWlsc18xLCBsb2dQYXJhbWV0ZXJGdW5jdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxhdGVzdFZhbHVlID0gdGhpcy5nZXRMYXRlc3RWYWx1ZShsYXllck5hbWUsICdsYXllcl9jb25maWdzJyk7XG4gICAgICAgIHZhciBkZXRhaWxzID0gdGhpcy5nZXRFdmFsdWF0aW9uRGV0YWlscyhsYXRlc3RWYWx1ZSAhPSBudWxsKTtcbiAgICAgICAgdmFyIGZpbmFsVmFsdWUgPSB0aGlzLmdldFBvc3NpYmx5U3RpY2t5VmFsdWUobGF5ZXJOYW1lLCBsYXRlc3RWYWx1ZSwga2VlcERldmljZVZhbHVlLCB0cnVlIC8qIGlzTGF5ZXIgKi8sIGRldGFpbHMpO1xuICAgICAgICByZXR1cm4gTGF5ZXJfMS5kZWZhdWx0Ll9jcmVhdGUobGF5ZXJOYW1lLCAoX2IgPSBmaW5hbFZhbHVlID09PSBudWxsIHx8IGZpbmFsVmFsdWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZpbmFsVmFsdWUudmFsdWUpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHt9LCAoX2MgPSBmaW5hbFZhbHVlID09PSBudWxsIHx8IGZpbmFsVmFsdWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZpbmFsVmFsdWUucnVsZV9pZCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogJycsIGRldGFpbHMsIGxvZ1BhcmFtZXRlckZ1bmN0aW9uLCBmaW5hbFZhbHVlID09PSBudWxsIHx8IGZpbmFsVmFsdWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZpbmFsVmFsdWUuc2Vjb25kYXJ5X2V4cG9zdXJlcywgZmluYWxWYWx1ZSA9PT0gbnVsbCB8fCBmaW5hbFZhbHVlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmaW5hbFZhbHVlLnVuZGVsZWdhdGVkX3NlY29uZGFyeV9leHBvc3VyZXMsIChfZCA9IGZpbmFsVmFsdWUgPT09IG51bGwgfHwgZmluYWxWYWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZmluYWxWYWx1ZS5hbGxvY2F0ZWRfZXhwZXJpbWVudF9uYW1lKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiAnJywgZmluYWxWYWx1ZSA9PT0gbnVsbCB8fCBmaW5hbFZhbHVlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmaW5hbFZhbHVlLmV4cGxpY2l0X3BhcmFtZXRlcnMsIGZpbmFsVmFsdWUgPT09IG51bGwgfHwgZmluYWxWYWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZmluYWxWYWx1ZS5ncm91cF9uYW1lKTtcbiAgICB9O1xuICAgIFN0YXRzaWdTdG9yZS5wcm90b3R5cGUub3ZlcnJpZGVDb25maWcgPSBmdW5jdGlvbiAoY29uZmlnTmFtZSwgdmFsdWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgT3V0cHV0TG9nZ2VyXzEuZGVmYXVsdC53YXJuKCdGYWlsZWQgdG8gc3RyaW5naWZ5IGdpdmVuIGNvbmZpZyBvdmVycmlkZS4gIERyb3BwaW5nJywgZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vdmVycmlkZXMuY29uZmlnc1tjb25maWdOYW1lXSA9IHZhbHVlO1xuICAgICAgICB0aGlzLnNhdmVPdmVycmlkZXMoKTtcbiAgICB9O1xuICAgIFN0YXRzaWdTdG9yZS5wcm90b3R5cGUub3ZlcnJpZGVMYXllciA9IGZ1bmN0aW9uIChsYXllck5hbWUsIHZhbHVlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIE91dHB1dExvZ2dlcl8xLmRlZmF1bHQud2FybignRmFpbGVkIHRvIHN0cmluZ2lmeSBnaXZlbiBsYXllciBvdmVycmlkZS4gIERyb3BwaW5nJywgZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vdmVycmlkZXMubGF5ZXJzW2xheWVyTmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5zYXZlT3ZlcnJpZGVzKCk7XG4gICAgfTtcbiAgICBTdGF0c2lnU3RvcmUucHJvdG90eXBlLm92ZXJyaWRlR2F0ZSA9IGZ1bmN0aW9uIChnYXRlTmFtZSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5vdmVycmlkZXMuZ2F0ZXNbZ2F0ZU5hbWVdID0gdmFsdWU7XG4gICAgICAgIHRoaXMuc2F2ZU92ZXJyaWRlcygpO1xuICAgIH07XG4gICAgU3RhdHNpZ1N0b3JlLnByb3RvdHlwZS5yZW1vdmVHYXRlT3ZlcnJpZGUgPSBmdW5jdGlvbiAoZ2F0ZU5hbWUpIHtcbiAgICAgICAgaWYgKGdhdGVOYW1lID09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMub3ZlcnJpZGVzLmdhdGVzID0ge307XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5vdmVycmlkZXMuZ2F0ZXNbZ2F0ZU5hbWVdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2F2ZU92ZXJyaWRlcygpO1xuICAgIH07XG4gICAgU3RhdHNpZ1N0b3JlLnByb3RvdHlwZS5yZW1vdmVDb25maWdPdmVycmlkZSA9IGZ1bmN0aW9uIChjb25maWdOYW1lKSB7XG4gICAgICAgIGlmIChjb25maWdOYW1lID09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMub3ZlcnJpZGVzLmNvbmZpZ3MgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLm92ZXJyaWRlcy5jb25maWdzW2NvbmZpZ05hbWVdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2F2ZU92ZXJyaWRlcygpO1xuICAgIH07XG4gICAgU3RhdHNpZ1N0b3JlLnByb3RvdHlwZS5yZW1vdmVMYXllck92ZXJyaWRlID0gZnVuY3Rpb24gKGxheWVyTmFtZSkge1xuICAgICAgICBpZiAobGF5ZXJOYW1lID09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMub3ZlcnJpZGVzLmxheWVycyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMub3ZlcnJpZGVzLmxheWVyc1tsYXllck5hbWVdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2F2ZU92ZXJyaWRlcygpO1xuICAgIH07XG4gICAgU3RhdHNpZ1N0b3JlLnByb3RvdHlwZS5nZXRBbGxPdmVycmlkZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm92ZXJyaWRlcztcbiAgICB9O1xuICAgIFN0YXRzaWdTdG9yZS5wcm90b3R5cGUuc2F2ZU92ZXJyaWRlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIFN0YXRzaWdMb2NhbFN0b3JhZ2VfMS5kZWZhdWx0LnNldEl0ZW0oQ29uc3RhbnRzXzEuT1ZFUlJJREVTX1NUT1JFX0tFWSwgSlNPTi5zdHJpbmdpZnkodGhpcy5vdmVycmlkZXMpKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgT3V0cHV0TG9nZ2VyXzEuZGVmYXVsdC53YXJuKCdGYWlsZWQgdG8gcGVyc2lzdCBnYXRlL2NvbmZpZyBvdmVycmlkZXMnKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3RhdHNpZ1N0b3JlLnByb3RvdHlwZS5nZXRMYXRlc3RWYWx1ZSA9IGZ1bmN0aW9uIChuYW1lLCB0b3BMZXZlbEtleSkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9mO1xuICAgICAgICB2YXIgaGFzaCA9IHRoaXMuZ2V0SGFzaGVkU3BlY05hbWUobmFtZSk7XG4gICAgICAgIHJldHVybiAoKF9jID0gKF9iID0gKF9hID0gdGhpcy51c2VyVmFsdWVzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbdG9wTGV2ZWxLZXldKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2JbaGFzaF0pICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IChfZiA9IChfZCA9IHRoaXMudXNlclZhbHVlcykgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kW3RvcExldmVsS2V5XSkgPT09IG51bGwgfHwgX2YgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9mW25hbWVdKTtcbiAgICB9O1xuICAgIC8vIFN0aWNreSBMb2dpYzogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vZGFuaWVsLXN0YXRzaWcvM2Q4ZGZjOWJkZWU1MzFjZmZjOTY5MDFjMWEwNmE0MDJcbiAgICBTdGF0c2lnU3RvcmUucHJvdG90eXBlLmdldFBvc3NpYmx5U3RpY2t5VmFsdWUgPSBmdW5jdGlvbiAobmFtZSwgbGF0ZXN0VmFsdWUsIGtlZXBEZXZpY2VWYWx1ZSwgaXNMYXllciwgZGV0YWlscykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHZhciBrZXkgPSB0aGlzLmdldEhhc2hlZFNwZWNOYW1lKG5hbWUpO1xuICAgICAgICAvLyBXZSBkb24ndCB3YW50IHN0aWNreSBiZWhhdmlvci4gQ2xlYXIgYW55IHN0aWNreSB2YWx1ZXMgYW5kIHJldHVybiBsYXRlc3QuXG4gICAgICAgIGlmICgha2VlcERldmljZVZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVN0aWNreVZhbHVlKGtleSk7XG4gICAgICAgICAgICByZXR1cm4gbGF0ZXN0VmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gc3RpY2t5IHZhbHVlLCBzYXZlIGxhdGVzdCBhcyBzdGlja3kgYW5kIHJldHVybiBsYXRlc3QuXG4gICAgICAgIHZhciBzdGlja3lWYWx1ZSA9IHRoaXMuZ2V0U3RpY2t5VmFsdWUoa2V5KTtcbiAgICAgICAgaWYgKCFzdGlja3lWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5hdHRlbXB0VG9TYXZlU3RpY2t5VmFsdWUoa2V5LCBsYXRlc3RWYWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gbGF0ZXN0VmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gR2V0IHRoZSBsYXRlc3QgY29uZmlnIHZhbHVlLiBMYXllcnMgcmVxdWlyZSBhIGxvb2t1cCBieSBhbGxvY2F0ZWRfZXhwZXJpbWVudF9uYW1lLlxuICAgICAgICB2YXIgbGF0ZXN0RXhwZXJpbWVudFZhbHVlID0gbnVsbDtcbiAgICAgICAgaWYgKGlzTGF5ZXIpIHtcbiAgICAgICAgICAgIGxhdGVzdEV4cGVyaW1lbnRWYWx1ZSA9IHRoaXMuZ2V0TGF0ZXN0VmFsdWUoKF9hID0gc3RpY2t5VmFsdWUgPT09IG51bGwgfHwgc3RpY2t5VmFsdWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHN0aWNreVZhbHVlLmFsbG9jYXRlZF9leHBlcmltZW50X25hbWUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnLCAnZHluYW1pY19jb25maWdzJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsYXRlc3RFeHBlcmltZW50VmFsdWUgPSBsYXRlc3RWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKGxhdGVzdEV4cGVyaW1lbnRWYWx1ZSA9PT0gbnVsbCB8fCBsYXRlc3RFeHBlcmltZW50VmFsdWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGxhdGVzdEV4cGVyaW1lbnRWYWx1ZS5pc19leHBlcmltZW50X2FjdGl2ZSkgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgZGV0YWlscy5yZWFzb24gPSBFdmFsdWF0aW9uUmVhc29uXzEuRXZhbHVhdGlvblJlYXNvbi5TdGlja3k7XG4gICAgICAgICAgICByZXR1cm4gc3RpY2t5VmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChsYXRlc3RWYWx1ZSA9PT0gbnVsbCB8fCBsYXRlc3RWYWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogbGF0ZXN0VmFsdWUuaXNfZXhwZXJpbWVudF9hY3RpdmUpID09IHRydWUpIHtcbiAgICAgICAgICAgIHRoaXMuYXR0ZW1wdFRvU2F2ZVN0aWNreVZhbHVlKGtleSwgbGF0ZXN0VmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVTdGlja3lWYWx1ZShrZXkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsYXRlc3RWYWx1ZTtcbiAgICB9O1xuICAgIFN0YXRzaWdTdG9yZS5wcm90b3R5cGUuY3JlYXRlRHluYW1pY0NvbmZpZyA9IGZ1bmN0aW9uIChuYW1lLCBhcGlDb25maWcsIGRldGFpbHMpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIHJldHVybiBuZXcgRHluYW1pY0NvbmZpZ18xLmRlZmF1bHQobmFtZSwgKF9hID0gYXBpQ29uZmlnID09PSBudWxsIHx8IGFwaUNvbmZpZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYXBpQ29uZmlnLnZhbHVlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB7fSwgKF9iID0gYXBpQ29uZmlnID09PSBudWxsIHx8IGFwaUNvbmZpZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYXBpQ29uZmlnLnJ1bGVfaWQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6ICcnLCBkZXRhaWxzLCBhcGlDb25maWcgPT09IG51bGwgfHwgYXBpQ29uZmlnID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhcGlDb25maWcuc2Vjb25kYXJ5X2V4cG9zdXJlcywgKF9jID0gYXBpQ29uZmlnID09PSBudWxsIHx8IGFwaUNvbmZpZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYXBpQ29uZmlnLmFsbG9jYXRlZF9leHBlcmltZW50X25hbWUpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6ICcnLCB0aGlzLm1ha2VPbkNvbmZpZ0RlZmF1bHRWYWx1ZUZhbGxiYWNrKHRoaXMuc2RrSW50ZXJuYWwuZ2V0Q3VycmVudFVzZXIoKSksIGFwaUNvbmZpZyA9PT0gbnVsbCB8fCBhcGlDb25maWcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFwaUNvbmZpZy5ncm91cF9uYW1lLCBhcGlDb25maWcgPT09IG51bGwgfHwgYXBpQ29uZmlnID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhcGlDb25maWcuaWRfdHlwZSwgYXBpQ29uZmlnID09PSBudWxsIHx8IGFwaUNvbmZpZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYXBpQ29uZmlnLmlzX2V4cGVyaW1lbnRfYWN0aXZlKTtcbiAgICB9O1xuICAgIFN0YXRzaWdTdG9yZS5wcm90b3R5cGUuZ2V0U3RpY2t5VmFsdWUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHJldHVybiAoKF9iID0gKF9hID0gdGhpcy51c2VyVmFsdWVzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc3RpY2t5X2V4cGVyaW1lbnRzW2tleV0pICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHRoaXMuc3RpY2t5RGV2aWNlRXhwZXJpbWVudHNba2V5XSk7XG4gICAgfTtcbiAgICBTdGF0c2lnU3RvcmUucHJvdG90eXBlLmF0dGVtcHRUb1NhdmVTdGlja3lWYWx1ZSA9IGZ1bmN0aW9uIChrZXksIGNvbmZpZykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICghY29uZmlnIHx8XG4gICAgICAgICAgICAhY29uZmlnLmlzX3VzZXJfaW5fZXhwZXJpbWVudCB8fFxuICAgICAgICAgICAgIWNvbmZpZy5pc19leHBlcmltZW50X2FjdGl2ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb25maWcuaXNfZGV2aWNlX2Jhc2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAvLyBzYXZlIHN0aWNreSB2YWx1ZXMgaW4gbWVtb3J5XG4gICAgICAgICAgICB0aGlzLnN0aWNreURldmljZUV4cGVyaW1lbnRzW2tleV0gPSBjb25maWc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoKF9hID0gdGhpcy51c2VyVmFsdWVzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc3RpY2t5X2V4cGVyaW1lbnRzKSB7XG4gICAgICAgICAgICB0aGlzLnVzZXJWYWx1ZXMuc3RpY2t5X2V4cGVyaW1lbnRzW2tleV0gPSBjb25maWc7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYWxzbyBzYXZlIHRvIHBlcnNpc3RlbnQgc3RvcmFnZVxuICAgICAgICB0aGlzLnNhdmVTdGlja3lWYWx1ZXNUb1N0b3JhZ2UoKTtcbiAgICB9O1xuICAgIFN0YXRzaWdTdG9yZS5wcm90b3R5cGUucmVtb3ZlU3RpY2t5VmFsdWUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKChfYiA9IChfYSA9IHRoaXMudXNlclZhbHVlcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnN0aWNreV9leHBlcmltZW50cykgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDoge30pLmxlbmd0aCA9PT0gMCAmJlxuICAgICAgICAgICAgT2JqZWN0LmtleXMoKF9jID0gdGhpcy5zdGlja3lEZXZpY2VFeHBlcmltZW50cykgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDoge30pLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIChfZCA9IHRoaXMudXNlclZhbHVlcykgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHRydWUgOiBkZWxldGUgX2Quc3RpY2t5X2V4cGVyaW1lbnRzW2tleV07XG4gICAgICAgIGRlbGV0ZSB0aGlzLnN0aWNreURldmljZUV4cGVyaW1lbnRzW2tleV07XG4gICAgICAgIHRoaXMuc2F2ZVN0aWNreVZhbHVlc1RvU3RvcmFnZSgpO1xuICAgIH07XG4gICAgU3RhdHNpZ1N0b3JlLnByb3RvdHlwZS5zYXZlU3RpY2t5VmFsdWVzVG9TdG9yYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy51c2VyUGVyc2lzdGVudFN0b3JhZ2VBZGFwdGVyKSB7XG4gICAgICAgICAgICB0aGlzLnNhdmVTdGlja3lFeHBlcmltZW50c1RvUGVyc2lzdGVudFN0b3JhZ2VBZGFwdGVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlc1t0aGlzLnVzZXJDYWNoZUtleS52M10gPSB0aGlzLnVzZXJWYWx1ZXM7XG4gICAgICAgICAgICB0aGlzLnNldEl0ZW1Ub1N0b3JhZ2UoQ29uc3RhbnRzXzEuSU5URVJOQUxfU1RPUkVfS0VZLCBKU09OLnN0cmluZ2lmeSh0aGlzLnZhbHVlcykpO1xuICAgICAgICAgICAgdGhpcy5zZXRJdGVtVG9TdG9yYWdlKENvbnN0YW50c18xLlNUSUNLWV9ERVZJQ0VfRVhQRVJJTUVOVFNfS0VZLCBKU09OLnN0cmluZ2lmeSh0aGlzLnN0aWNreURldmljZUV4cGVyaW1lbnRzKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN0YXRzaWdTdG9yZS5wcm90b3R5cGUuZ2V0R2xvYmFsRXZhbHVhdGlvbkRldGFpbHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZWFzb246IChfYSA9IHRoaXMucmVhc29uKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBFdmFsdWF0aW9uUmVhc29uXzEuRXZhbHVhdGlvblJlYXNvbi5VbmluaXRpYWxpemVkLFxuICAgICAgICAgICAgdGltZTogKF9iID0gdGhpcy51c2VyVmFsdWVzLmV2YWx1YXRpb25fdGltZSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogMCxcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIFN0YXRzaWdTdG9yZS5wcm90b3R5cGUuZ2V0RXZhbHVhdGlvbkRldGFpbHMgPSBmdW5jdGlvbiAodmFsdWVFeGlzdHMsIHJlYXNvbk92ZXJyaWRlKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKHZhbHVlRXhpc3RzKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHJlYXNvbjogdGhpcy5yZWFzb24sXG4gICAgICAgICAgICAgICAgdGltZTogKF9hID0gdGhpcy51c2VyVmFsdWVzLmV2YWx1YXRpb25fdGltZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHJlYXNvbjogcmVhc29uT3ZlcnJpZGUgIT09IG51bGwgJiYgcmVhc29uT3ZlcnJpZGUgIT09IHZvaWQgMCA/IHJlYXNvbk92ZXJyaWRlIDogKHRoaXMucmVhc29uID09IEV2YWx1YXRpb25SZWFzb25fMS5FdmFsdWF0aW9uUmVhc29uLlVuaW5pdGlhbGl6ZWRcbiAgICAgICAgICAgICAgICAgICAgPyBFdmFsdWF0aW9uUmVhc29uXzEuRXZhbHVhdGlvblJlYXNvbi5VbmluaXRpYWxpemVkXG4gICAgICAgICAgICAgICAgICAgIDogRXZhbHVhdGlvblJlYXNvbl8xLkV2YWx1YXRpb25SZWFzb24uVW5yZWNvZ25pemVkKSxcbiAgICAgICAgICAgICAgICB0aW1lOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3RhdHNpZ1N0b3JlLnByb3RvdHlwZS5yZXNldFVzZXJWYWx1ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudXNlclZhbHVlcyA9IHtcbiAgICAgICAgICAgIGZlYXR1cmVfZ2F0ZXM6IHt9LFxuICAgICAgICAgICAgZHluYW1pY19jb25maWdzOiB7fSxcbiAgICAgICAgICAgIHN0aWNreV9leHBlcmltZW50czoge30sXG4gICAgICAgICAgICBsYXllcl9jb25maWdzOiB7fSxcbiAgICAgICAgICAgIHRpbWU6IDAsXG4gICAgICAgICAgICBldmFsdWF0aW9uX3RpbWU6IDAsXG4gICAgICAgICAgICBkZXJpdmVkX2ZpZWxkczoge30sXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBTdGF0c2lnU3RvcmUucHJvdG90eXBlLmdldEhhc2hlZFNwZWNOYW1lID0gZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy51c2VyVmFsdWVzLmhhc2hfdXNlZCkge1xuICAgICAgICAgICAgY2FzZSAnZGpiMic6XG4gICAgICAgICAgICAgICAgcmV0dXJuICgwLCBIYXNoaW5nXzEuZGpiMkhhc2gpKGlucHV0KTtcbiAgICAgICAgICAgIGNhc2UgJ25vbmUnOlxuICAgICAgICAgICAgICAgIHJldHVybiBpbnB1dDtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuICgwLCBIYXNoaW5nXzEuc2hhMjU2SGFzaCkoaW5wdXQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdGF0c2lnU3RvcmUucHJvdG90eXBlLmNvbnZlcnRBUElEYXRhVG9DYWNoZVZhbHVlcyA9IGZ1bmN0aW9uIChkYXRhLCBjYWNoZUtleSkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAvLyBTcGVjaWZpY2FsbHkgcHVsbGluZyBrZXlzIGZyb20gZGF0YSBoZXJlIHRvIGF2b2lkIHB1bGxpbmcgaW4gdW53YW50ZWQga2V5c1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmVhdHVyZV9nYXRlczogZGF0YS5mZWF0dXJlX2dhdGVzLFxuICAgICAgICAgICAgbGF5ZXJfY29uZmlnczogZGF0YS5sYXllcl9jb25maWdzLFxuICAgICAgICAgICAgZHluYW1pY19jb25maWdzOiBkYXRhLmR5bmFtaWNfY29uZmlncyxcbiAgICAgICAgICAgIHN0aWNreV9leHBlcmltZW50czogKF9iID0gKF9hID0gdGhpcy52YWx1ZXNbY2FjaGVLZXldKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc3RpY2t5X2V4cGVyaW1lbnRzKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiB7fSxcbiAgICAgICAgICAgIHRpbWU6IGRhdGEudGltZSA9PSBudWxsIHx8IGlzTmFOKGRhdGEudGltZSkgPyAwIDogZGF0YS50aW1lLFxuICAgICAgICAgICAgZXZhbHVhdGlvbl90aW1lOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgaGFzaF91c2VkOiBkYXRhLmhhc2hfdXNlZCxcbiAgICAgICAgICAgIGRlcml2ZWRfZmllbGRzOiBkYXRhLmRlcml2ZWRfZmllbGRzLFxuICAgICAgICB9O1xuICAgIH07XG4gICAgU3RhdHNpZ1N0b3JlLnByb3RvdHlwZS5zZXRJdGVtVG9TdG9yYWdlID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKFN0YXRzaWdBc3luY1N0b3JhZ2VfMS5kZWZhdWx0LmFzeW5jU3RvcmFnZSkge1xuICAgICAgICAgICAgU3RhdHNpZ0FzeW5jU3RvcmFnZV8xLmRlZmF1bHQuc2V0SXRlbUFzeW5jKGtleSwgdmFsdWUpLmNhdGNoKGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgICAgICAgICB2b2lkIF90aGlzLnNka0ludGVybmFsXG4gICAgICAgICAgICAgICAgICAgIC5nZXRFcnJvckJvdW5kYXJ5KClcbiAgICAgICAgICAgICAgICAgICAgLmxvZ0Vycm9yKCdzZXRJdGVtVG9TdG9yYWdlJywgcmVhc29uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgU3RhdHNpZ0xvY2FsU3RvcmFnZV8xLmRlZmF1bHQuc2V0SXRlbShrZXksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3RhdHNpZ1N0b3JlLnByb3RvdHlwZS5tYWtlT25Db25maWdEZWZhdWx0VmFsdWVGYWxsYmFjayA9IGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoY29uZmlnLCBwYXJhbWV0ZXIsIGRlZmF1bHRWYWx1ZVR5cGUsIHZhbHVlVHlwZSkge1xuICAgICAgICAgICAgaWYgKCFfdGhpcy5pc0xvYWRlZCgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3RoaXMuc2RrSW50ZXJuYWwuZ2V0TG9nZ2VyKCkubG9nQ29uZmlnRGVmYXVsdFZhbHVlRmFsbGJhY2sodXNlciwgXCJQYXJhbWV0ZXIgXCIuY29uY2F0KHBhcmFtZXRlciwgXCIgaXMgYSB2YWx1ZSBvZiB0eXBlIFwiKS5jb25jYXQodmFsdWVUeXBlLCBcIi5cXG4gICAgICAgICAgUmV0dXJuaW5nIHJlcXVlc3RlZCBkZWZhdWx0VmFsdWUgdHlwZSBcIikuY29uY2F0KGRlZmF1bHRWYWx1ZVR5cGUpLCB7XG4gICAgICAgICAgICAgICAgbmFtZTogY29uZmlnLmdldE5hbWUoKSxcbiAgICAgICAgICAgICAgICBydWxlSUQ6IGNvbmZpZy5nZXRSdWxlSUQoKSxcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXI6IHBhcmFtZXRlcixcbiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWVUeXBlOiBkZWZhdWx0VmFsdWVUeXBlLFxuICAgICAgICAgICAgICAgIHZhbHVlVHlwZTogdmFsdWVUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICByZXR1cm4gU3RhdHNpZ1N0b3JlO1xufSgpKTtcbmV4cG9ydHMuZGVmYXVsdCA9IFN0YXRzaWdTdG9yZTtcbmZ1bmN0aW9uIHJlbW92ZURlbGV0ZWRLZXlzRnJvbVVzZXJWYWx1ZXMoaW5pdFJlc3BvbnNlLCB1c2VyVmFsdWVzKSB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgKChfYSA9IGluaXRSZXNwb25zZS5kZWxldGVkX2NvbmZpZ3MpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFtdKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgZGVsZXRlIHVzZXJWYWx1ZXMuZHluYW1pY19jb25maWdzW2tleV07XG4gICAgfSk7XG4gICAgKChfYiA9IGluaXRSZXNwb25zZS5kZWxldGVkX2dhdGVzKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBbXSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGRlbGV0ZSB1c2VyVmFsdWVzLmZlYXR1cmVfZ2F0ZXNba2V5XTtcbiAgICB9KTtcbiAgICAoKF9jID0gaW5pdFJlc3BvbnNlLmRlbGV0ZWRfbGF5ZXJzKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBbXSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGRlbGV0ZSB1c2VyVmFsdWVzLmxheWVyX2NvbmZpZ3Nba2V5XTtcbiAgICB9KTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/statsig-js/dist/StatsigStore.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/statsig-js/dist/StatsigUser.js":
/*!*****************************************************!*\
  !*** ./node_modules/statsig-js/dist/StatsigUser.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.getUserHashWithoutStableID = void 0;\nvar Hashing_1 = __webpack_require__(/*! ./utils/Hashing */ \"(ssr)/./node_modules/statsig-js/dist/utils/Hashing.js\");\nfunction getUserHashWithoutStableID(user) {\n    var customIDs = user.customIDs, rest = __rest(user, [\"customIDs\"]);\n    var copyCustomIDs = __assign({}, customIDs);\n    delete copyCustomIDs.stableID;\n    return (0, Hashing_1.djb2HashForObject)(__assign(__assign({}, rest), { customIDs: copyCustomIDs }));\n}\nexports.getUserHashWithoutStableID = getUserHashWithoutStableID;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L1N0YXRzaWdVc2VyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBLGlEQUFpRCxPQUFPO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELGNBQWM7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxrQ0FBa0M7QUFDbEMsZ0JBQWdCLG1CQUFPLENBQUMsOEVBQWlCO0FBQ3pDO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkM7QUFDQSxnRUFBZ0UsV0FBVywwQkFBMEI7QUFDckc7QUFDQSxrQ0FBa0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbWF6b24tZnJlc2gtZGVtby8uL25vZGVfbW9kdWxlcy9zdGF0c2lnLWpzL2Rpc3QvU3RhdHNpZ1VzZXIuanM/OTA4NCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHtcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXG4gICAgICAgICAgICAgICAgdFtwXSA9IHNbcF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfTtcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG52YXIgX19yZXN0ID0gKHRoaXMgJiYgdGhpcy5fX3Jlc3QpIHx8IGZ1bmN0aW9uIChzLCBlKSB7XG4gICAgdmFyIHQgPSB7fTtcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcbiAgICAgICAgdFtwXSA9IHNbcF07XG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XG4gICAgICAgIH1cbiAgICByZXR1cm4gdDtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmdldFVzZXJIYXNoV2l0aG91dFN0YWJsZUlEID0gdm9pZCAwO1xudmFyIEhhc2hpbmdfMSA9IHJlcXVpcmUoXCIuL3V0aWxzL0hhc2hpbmdcIik7XG5mdW5jdGlvbiBnZXRVc2VySGFzaFdpdGhvdXRTdGFibGVJRCh1c2VyKSB7XG4gICAgdmFyIGN1c3RvbUlEcyA9IHVzZXIuY3VzdG9tSURzLCByZXN0ID0gX19yZXN0KHVzZXIsIFtcImN1c3RvbUlEc1wiXSk7XG4gICAgdmFyIGNvcHlDdXN0b21JRHMgPSBfX2Fzc2lnbih7fSwgY3VzdG9tSURzKTtcbiAgICBkZWxldGUgY29weUN1c3RvbUlEcy5zdGFibGVJRDtcbiAgICByZXR1cm4gKDAsIEhhc2hpbmdfMS5kamIySGFzaEZvck9iamVjdCkoX19hc3NpZ24oX19hc3NpZ24oe30sIHJlc3QpLCB7IGN1c3RvbUlEczogY29weUN1c3RvbUlEcyB9KSk7XG59XG5leHBvcnRzLmdldFVzZXJIYXNoV2l0aG91dFN0YWJsZUlEID0gZ2V0VXNlckhhc2hXaXRob3V0U3RhYmxlSUQ7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/statsig-js/dist/StatsigUser.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/statsig-js/dist/index.js":
/*!***********************************************!*\
  !*** ./node_modules/statsig-js/dist/index.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.StatsigAsyncStorage = exports.EvaluationReason = exports.StatsigClient = exports.Layer = exports.DynamicConfig = exports.FeatureGate = void 0;\nvar Errors_1 = __webpack_require__(/*! ./Errors */ \"(ssr)/./node_modules/statsig-js/dist/Errors.js\");\nvar StatsigClient_1 = __importDefault(__webpack_require__(/*! ./StatsigClient */ \"(ssr)/./node_modules/statsig-js/dist/StatsigClient.js\"));\nvar StatsigRuntime_1 = __importDefault(__webpack_require__(/*! ./StatsigRuntime */ \"(ssr)/./node_modules/statsig-js/dist/StatsigRuntime.js\"));\nvar EvaluationReason_1 = __webpack_require__(/*! ./utils/EvaluationReason */ \"(ssr)/./node_modules/statsig-js/dist/utils/EvaluationReason.js\");\nvar Object_entries_1 = __importDefault(__webpack_require__(/*! ./utils/Object.entries */ \"(ssr)/./node_modules/statsig-js/dist/utils/Object.entries.js\"));\nvar Object_fromEntries_1 = __importDefault(__webpack_require__(/*! ./utils/Object.fromEntries */ \"(ssr)/./node_modules/statsig-js/dist/utils/Object.fromEntries.js\"));\nvar Promise_finally_1 = __importDefault(__webpack_require__(/*! ./utils/Promise.finally */ \"(ssr)/./node_modules/statsig-js/dist/utils/Promise.finally.js\"));\nvar FeatureGate_1 = __webpack_require__(/*! ./FeatureGate */ \"(ssr)/./node_modules/statsig-js/dist/FeatureGate.js\");\nObject.defineProperty(exports, \"FeatureGate\", ({ enumerable: true, get: function () { return __importDefault(FeatureGate_1).default; } }));\nvar DynamicConfig_1 = __webpack_require__(/*! ./DynamicConfig */ \"(ssr)/./node_modules/statsig-js/dist/DynamicConfig.js\");\nObject.defineProperty(exports, \"DynamicConfig\", ({ enumerable: true, get: function () { return __importDefault(DynamicConfig_1).default; } }));\nvar Layer_1 = __webpack_require__(/*! ./Layer */ \"(ssr)/./node_modules/statsig-js/dist/Layer.js\");\nObject.defineProperty(exports, \"Layer\", ({ enumerable: true, get: function () { return __importDefault(Layer_1).default; } }));\nvar StatsigClient_2 = __webpack_require__(/*! ./StatsigClient */ \"(ssr)/./node_modules/statsig-js/dist/StatsigClient.js\");\nObject.defineProperty(exports, \"StatsigClient\", ({ enumerable: true, get: function () { return __importDefault(StatsigClient_2).default; } }));\nvar EvaluationReason_2 = __webpack_require__(/*! ./utils/EvaluationReason */ \"(ssr)/./node_modules/statsig-js/dist/utils/EvaluationReason.js\");\nObject.defineProperty(exports, \"EvaluationReason\", ({ enumerable: true, get: function () { return EvaluationReason_2.EvaluationReason; } }));\nvar StatsigAsyncStorage_1 = __webpack_require__(/*! ./utils/StatsigAsyncStorage */ \"(ssr)/./node_modules/statsig-js/dist/utils/StatsigAsyncStorage.js\");\nObject.defineProperty(exports, \"StatsigAsyncStorage\", ({ enumerable: true, get: function () { return __importDefault(StatsigAsyncStorage_1).default; } }));\n(0, Object_entries_1.default)();\n(0, Object_fromEntries_1.default)();\n(0, Promise_finally_1.default)();\nvar Statsig = /** @class */ (function () {\n    function Statsig() {\n    }\n    Object.defineProperty(Statsig, \"encodeIntializeCall\", {\n        get: function () {\n            return StatsigRuntime_1.default.encodeInitializeCall;\n        },\n        set: function (value) {\n            StatsigRuntime_1.default.encodeInitializeCall = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Statsig.initialize = function (sdkKey, user, options) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            var inst;\n            return __generator(this, function (_b) {\n                inst = (_a = Statsig.instance) !== null && _a !== void 0 ? _a : new StatsigClient_1.default(sdkKey, user, options);\n                if (!Statsig.instance) {\n                    Statsig.instance = inst;\n                }\n                return [2 /*return*/, inst.initializeAsync()];\n            });\n        });\n    };\n    Statsig.prefetchUsers = function (users) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, Statsig.getClientX().prefetchUsers(users)];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    Statsig.setInitializeValues = function (initializeValues) {\n        Statsig.getClientX().setInitializeValues(initializeValues);\n    };\n    Statsig.checkGate = function (gateName, ignoreOverrides) {\n        if (ignoreOverrides === void 0) { ignoreOverrides = false; }\n        return Statsig.getClientX().checkGate(gateName, ignoreOverrides);\n    };\n    Statsig.checkGateWithExposureLoggingDisabled = function (gateName, ignoreOverrides) {\n        if (ignoreOverrides === void 0) { ignoreOverrides = false; }\n        return Statsig.getClientX().checkGateWithExposureLoggingDisabled(gateName, ignoreOverrides);\n    };\n    Statsig.getFeatureGate = function (gateName, options) {\n        if (options === void 0) { options = null; }\n        return Statsig.getClientX().getFeatureGate(gateName, options);\n    };\n    Statsig.manuallyLogGateExposure = function (gateName) {\n        Statsig.getClientX().logGateExposure(gateName);\n    };\n    Statsig.getConfig = function (configName, ignoreOverrides) {\n        if (ignoreOverrides === void 0) { ignoreOverrides = false; }\n        return Statsig.getClientX().getConfig(configName, ignoreOverrides);\n    };\n    Statsig.getConfigWithExposureLoggingDisabled = function (configName, ignoreOverrides) {\n        if (ignoreOverrides === void 0) { ignoreOverrides = false; }\n        return Statsig.getClientX().getConfigWithExposureLoggingDisabled(configName, ignoreOverrides);\n    };\n    Statsig.manuallyLogConfigExposure = function (configName) {\n        Statsig.getClientX().logConfigExposure(configName);\n    };\n    Statsig.getExperiment = function (experimentName, keepDeviceValue, ignoreOverrides) {\n        if (keepDeviceValue === void 0) { keepDeviceValue = false; }\n        if (ignoreOverrides === void 0) { ignoreOverrides = false; }\n        return Statsig.getClientX().getExperiment(experimentName, keepDeviceValue, ignoreOverrides);\n    };\n    Statsig.getExperimentWithExposureLoggingDisabled = function (experimentName, keepDeviceValue, ignoreOverrides) {\n        if (keepDeviceValue === void 0) { keepDeviceValue = false; }\n        if (ignoreOverrides === void 0) { ignoreOverrides = false; }\n        return Statsig.getClientX().getExperimentWithExposureLoggingDisabled(experimentName, keepDeviceValue, ignoreOverrides);\n    };\n    Statsig.manuallyLogExperimentExposure = function (configName, keepDeviceValue) {\n        if (keepDeviceValue === void 0) { keepDeviceValue = false; }\n        Statsig.getClientX().logExperimentExposure(configName, keepDeviceValue);\n    };\n    Statsig.getLayer = function (layerName, keepDeviceValue) {\n        if (keepDeviceValue === void 0) { keepDeviceValue = false; }\n        return Statsig.getClientX().getLayer(layerName, keepDeviceValue);\n    };\n    Statsig.getLayerWithExposureLoggingDisabled = function (layerName, keepDeviceValue) {\n        if (keepDeviceValue === void 0) { keepDeviceValue = false; }\n        return Statsig.getClientX().getLayerWithExposureLoggingDisabled(layerName, keepDeviceValue);\n    };\n    Statsig.manuallyLogLayerParameterExposure = function (layerName, parameterName, keepDeviceValue) {\n        if (keepDeviceValue === void 0) { keepDeviceValue = false; }\n        Statsig.getClientX().logLayerParameterExposure(layerName, parameterName, keepDeviceValue);\n    };\n    Statsig.logEvent = function (eventName, value, metadata) {\n        if (value === void 0) { value = null; }\n        if (metadata === void 0) { metadata = null; }\n        return Statsig.getClientX().logEvent(eventName, value, metadata);\n    };\n    Statsig.updateUser = function (user) {\n        return Statsig.getClientX().updateUser(user);\n    };\n    Statsig.updateUserWithValues = function (user, values) {\n        return Statsig.getClientX().updateUserWithValues(user, values);\n    };\n    Statsig.shutdown = function () {\n        Statsig.getClientX().shutdown();\n        Statsig.instance = null;\n    };\n    /**\n     * Overrides the given gate locally with the given value\n     * @param gateName - name of the gate to override\n     * @param value - value to assign to the gate\n     */\n    Statsig.overrideGate = function (gateName, value) {\n        Statsig.getClientX().overrideGate(gateName, value);\n    };\n    /**\n     * Overrides the given config locally with the given value\n     * @param configName - name of the config to override\n     * @param value - value to assign to the config\n     */\n    Statsig.overrideConfig = function (configName, value) {\n        Statsig.getClientX().overrideConfig(configName, value);\n    };\n    /**\n     * Overrides the given layer locally with the given value\n     * @param layerName - name of the layer to override\n     * @param value - value to assign to the layer\n     */\n    Statsig.overrideLayer = function (layerName, value) {\n        Statsig.getClientX().overrideLayer(layerName, value);\n    };\n    /**\n     * @param name the gate override to remove. Leave this parameter empty to remove all gate overrides.\n     */\n    Statsig.removeGateOverride = function (name) {\n        Statsig.getClientX().removeGateOverride(name);\n    };\n    /**\n     * @param name the config override to remove. Leave this parameter empty to remove all config overrides.\n     */\n    Statsig.removeConfigOverride = function (name) {\n        Statsig.getClientX().removeConfigOverride(name);\n    };\n    /**\n     * @param name the layer override to remove. Leave this parameter empty to remove all layer overrides.\n     */\n    Statsig.removeLayerOverride = function (name) {\n        Statsig.getClientX().removeLayerOverride(name);\n    };\n    /**\n     * @returns The local gate and config overrides\n     */\n    Statsig.getAllOverrides = function () {\n        return Statsig.getClientX().getAllOverrides();\n    };\n    /**\n     * @returns The Statsig stable ID used for device level experiments\n     */\n    Statsig.getStableID = function () {\n        return Statsig.getClientX().getStableID();\n    };\n    /**\n     *\n     * @returns The reason and time associated with the evaluation for the current set\n     * of gates and configs\n     */\n    Statsig.getEvaluationDetails = function () {\n        var _a, _b;\n        return ((_b = (_a = Statsig.instance) === null || _a === void 0 ? void 0 : _a.getEvaluationDetails()) !== null && _b !== void 0 ? _b : {\n            reason: EvaluationReason_1.EvaluationReason.Uninitialized,\n            time: 0,\n        });\n    };\n    Statsig.getInitializeResponseJson = function () {\n        return Statsig.getClientX().getInitializeResponseJson();\n    };\n    /**\n     * @deprecated use removeGateOverride or removeConfigOverride\n     * @param name the gate override to remove\n     */\n    Statsig.removeOverride = function (name) {\n        Statsig.getClientX().removeOverride(name);\n    };\n    /**\n     * @deprecated use getAllOverrides\n     * @returns the gate overrides\n     */\n    Statsig.getOverrides = function () {\n        return Statsig.getClientX().getOverrides();\n    };\n    /**\n     * @returns true if initialize has already been called, false otherwise\n     */\n    Statsig.initializeCalled = function () {\n        return Statsig.instance != null && Statsig.instance.initializeCalled();\n    };\n    /**\n     * Send any currently queued events to Statsig\n     */\n    Statsig.flushEvents = function () {\n        Statsig.getClientX().flushEvents();\n    };\n    /**\n     * @params Debug information log with exposure event, and information will be living in metadata\n     */\n    Statsig.setDebugInfo = function (debugInfo) {\n        Statsig.getClientX().setDebugInfo(debugInfo);\n    };\n    /**\n     * Intended to be used in conjunction with StatsigOptions.disableAllLogging.\n     * This will set StatsigOptions.disableAllLogging to false, thereby enabling logs to function normally.\n     */\n    Statsig.reenableAllLogging = function () {\n        Statsig.getClientX().reenableAllLogging();\n    };\n    Statsig.getClientX = function () {\n        if (!Statsig.instance) {\n            throw new Errors_1.StatsigUninitializedError();\n        }\n        return Statsig.instance;\n    };\n    Statsig.instance = null;\n    return Statsig;\n}());\nexports[\"default\"] = Statsig;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw0QkFBNEIsK0RBQStELGlCQUFpQjtBQUM1RztBQUNBLG9DQUFvQyxNQUFNLCtCQUErQixZQUFZO0FBQ3JGLG1DQUFtQyxNQUFNLG1DQUFtQyxZQUFZO0FBQ3hGLGdDQUFnQztBQUNoQztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsY0FBYyw2QkFBNkIsMEJBQTBCLGNBQWMscUJBQXFCO0FBQ3hHLGlCQUFpQixvREFBb0QscUVBQXFFLGNBQWM7QUFDeEosdUJBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEMsbUNBQW1DLFNBQVM7QUFDNUMsbUNBQW1DLFdBQVcsVUFBVTtBQUN4RCwwQ0FBMEMsY0FBYztBQUN4RDtBQUNBLDhHQUE4RyxPQUFPO0FBQ3JILGlGQUFpRixpQkFBaUI7QUFDbEcseURBQXlELGdCQUFnQixRQUFRO0FBQ2pGLCtDQUErQyxnQkFBZ0IsZ0JBQWdCO0FBQy9FO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQSxVQUFVLFlBQVksYUFBYSxTQUFTLFVBQVU7QUFDdEQsb0NBQW9DLFNBQVM7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELDJCQUEyQixHQUFHLHdCQUF3QixHQUFHLHFCQUFxQixHQUFHLGFBQWEsR0FBRyxxQkFBcUIsR0FBRyxtQkFBbUI7QUFDNUksZUFBZSxtQkFBTyxDQUFDLGdFQUFVO0FBQ2pDLHNDQUFzQyxtQkFBTyxDQUFDLDhFQUFpQjtBQUMvRCx1Q0FBdUMsbUJBQU8sQ0FBQyxnRkFBa0I7QUFDakUseUJBQXlCLG1CQUFPLENBQUMsZ0dBQTBCO0FBQzNELHVDQUF1QyxtQkFBTyxDQUFDLDRGQUF3QjtBQUN2RSwyQ0FBMkMsbUJBQU8sQ0FBQyxvR0FBNEI7QUFDL0Usd0NBQXdDLG1CQUFPLENBQUMsOEZBQXlCO0FBQ3pFLG9CQUFvQixtQkFBTyxDQUFDLDBFQUFlO0FBQzNDLCtDQUE4QyxFQUFFLHFDQUFxQyxrREFBa0QsRUFBQztBQUN4SSxzQkFBc0IsbUJBQU8sQ0FBQyw4RUFBaUI7QUFDL0MsaURBQWdELEVBQUUscUNBQXFDLG9EQUFvRCxFQUFDO0FBQzVJLGNBQWMsbUJBQU8sQ0FBQyw4REFBUztBQUMvQix5Q0FBd0MsRUFBRSxxQ0FBcUMsNENBQTRDLEVBQUM7QUFDNUgsc0JBQXNCLG1CQUFPLENBQUMsOEVBQWlCO0FBQy9DLGlEQUFnRCxFQUFFLHFDQUFxQyxvREFBb0QsRUFBQztBQUM1SSx5QkFBeUIsbUJBQU8sQ0FBQyxnR0FBMEI7QUFDM0Qsb0RBQW1ELEVBQUUscUNBQXFDLCtDQUErQyxFQUFDO0FBQzFJLDRCQUE0QixtQkFBTyxDQUFDLHNHQUE2QjtBQUNqRSx1REFBc0QsRUFBRSxxQ0FBcUMsMERBQTBELEVBQUM7QUFDeEo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUMsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEMsbUNBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxrQkFBZSIsInNvdXJjZXMiOlsid2VicGFjazovL2FtYXpvbi1mcmVzaC1kZW1vLy4vbm9kZV9tb2R1bGVzL3N0YXRzaWctanMvZGlzdC9pbmRleC5qcz9jMjQzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICAgIHdoaWxlIChnICYmIChnID0gMCwgb3BbMF0gJiYgKF8gPSAwKSksIF8pIHRyeSB7XG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcbiAgICB9XG59O1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5TdGF0c2lnQXN5bmNTdG9yYWdlID0gZXhwb3J0cy5FdmFsdWF0aW9uUmVhc29uID0gZXhwb3J0cy5TdGF0c2lnQ2xpZW50ID0gZXhwb3J0cy5MYXllciA9IGV4cG9ydHMuRHluYW1pY0NvbmZpZyA9IGV4cG9ydHMuRmVhdHVyZUdhdGUgPSB2b2lkIDA7XG52YXIgRXJyb3JzXzEgPSByZXF1aXJlKFwiLi9FcnJvcnNcIik7XG52YXIgU3RhdHNpZ0NsaWVudF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1N0YXRzaWdDbGllbnRcIikpO1xudmFyIFN0YXRzaWdSdW50aW1lXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vU3RhdHNpZ1J1bnRpbWVcIikpO1xudmFyIEV2YWx1YXRpb25SZWFzb25fMSA9IHJlcXVpcmUoXCIuL3V0aWxzL0V2YWx1YXRpb25SZWFzb25cIik7XG52YXIgT2JqZWN0X2VudHJpZXNfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi91dGlscy9PYmplY3QuZW50cmllc1wiKSk7XG52YXIgT2JqZWN0X2Zyb21FbnRyaWVzXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vdXRpbHMvT2JqZWN0LmZyb21FbnRyaWVzXCIpKTtcbnZhciBQcm9taXNlX2ZpbmFsbHlfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi91dGlscy9Qcm9taXNlLmZpbmFsbHlcIikpO1xudmFyIEZlYXR1cmVHYXRlXzEgPSByZXF1aXJlKFwiLi9GZWF0dXJlR2F0ZVwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkZlYXR1cmVHYXRlXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBfX2ltcG9ydERlZmF1bHQoRmVhdHVyZUdhdGVfMSkuZGVmYXVsdDsgfSB9KTtcbnZhciBEeW5hbWljQ29uZmlnXzEgPSByZXF1aXJlKFwiLi9EeW5hbWljQ29uZmlnXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiRHluYW1pY0NvbmZpZ1wiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gX19pbXBvcnREZWZhdWx0KER5bmFtaWNDb25maWdfMSkuZGVmYXVsdDsgfSB9KTtcbnZhciBMYXllcl8xID0gcmVxdWlyZShcIi4vTGF5ZXJcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJMYXllclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gX19pbXBvcnREZWZhdWx0KExheWVyXzEpLmRlZmF1bHQ7IH0gfSk7XG52YXIgU3RhdHNpZ0NsaWVudF8yID0gcmVxdWlyZShcIi4vU3RhdHNpZ0NsaWVudFwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlN0YXRzaWdDbGllbnRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9faW1wb3J0RGVmYXVsdChTdGF0c2lnQ2xpZW50XzIpLmRlZmF1bHQ7IH0gfSk7XG52YXIgRXZhbHVhdGlvblJlYXNvbl8yID0gcmVxdWlyZShcIi4vdXRpbHMvRXZhbHVhdGlvblJlYXNvblwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkV2YWx1YXRpb25SZWFzb25cIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIEV2YWx1YXRpb25SZWFzb25fMi5FdmFsdWF0aW9uUmVhc29uOyB9IH0pO1xudmFyIFN0YXRzaWdBc3luY1N0b3JhZ2VfMSA9IHJlcXVpcmUoXCIuL3V0aWxzL1N0YXRzaWdBc3luY1N0b3JhZ2VcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJTdGF0c2lnQXN5bmNTdG9yYWdlXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBfX2ltcG9ydERlZmF1bHQoU3RhdHNpZ0FzeW5jU3RvcmFnZV8xKS5kZWZhdWx0OyB9IH0pO1xuKDAsIE9iamVjdF9lbnRyaWVzXzEuZGVmYXVsdCkoKTtcbigwLCBPYmplY3RfZnJvbUVudHJpZXNfMS5kZWZhdWx0KSgpO1xuKDAsIFByb21pc2VfZmluYWxseV8xLmRlZmF1bHQpKCk7XG52YXIgU3RhdHNpZyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTdGF0c2lnKCkge1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3RhdHNpZywgXCJlbmNvZGVJbnRpYWxpemVDYWxsXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gU3RhdHNpZ1J1bnRpbWVfMS5kZWZhdWx0LmVuY29kZUluaXRpYWxpemVDYWxsO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgU3RhdHNpZ1J1bnRpbWVfMS5kZWZhdWx0LmVuY29kZUluaXRpYWxpemVDYWxsID0gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdGF0c2lnLmluaXRpYWxpemUgPSBmdW5jdGlvbiAoc2RrS2V5LCB1c2VyLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGluc3Q7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgaW5zdCA9IChfYSA9IFN0YXRzaWcuaW5zdGFuY2UpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IG5ldyBTdGF0c2lnQ2xpZW50XzEuZGVmYXVsdChzZGtLZXksIHVzZXIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIGlmICghU3RhdHNpZy5pbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgICAgICBTdGF0c2lnLmluc3RhbmNlID0gaW5zdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGluc3QuaW5pdGlhbGl6ZUFzeW5jKCldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgU3RhdHNpZy5wcmVmZXRjaFVzZXJzID0gZnVuY3Rpb24gKHVzZXJzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgU3RhdHNpZy5nZXRDbGllbnRYKCkucHJlZmV0Y2hVc2Vycyh1c2VycyldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IHJldHVybiBbMiAvKnJldHVybiovLCBfYS5zZW50KCldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFN0YXRzaWcuc2V0SW5pdGlhbGl6ZVZhbHVlcyA9IGZ1bmN0aW9uIChpbml0aWFsaXplVmFsdWVzKSB7XG4gICAgICAgIFN0YXRzaWcuZ2V0Q2xpZW50WCgpLnNldEluaXRpYWxpemVWYWx1ZXMoaW5pdGlhbGl6ZVZhbHVlcyk7XG4gICAgfTtcbiAgICBTdGF0c2lnLmNoZWNrR2F0ZSA9IGZ1bmN0aW9uIChnYXRlTmFtZSwgaWdub3JlT3ZlcnJpZGVzKSB7XG4gICAgICAgIGlmIChpZ25vcmVPdmVycmlkZXMgPT09IHZvaWQgMCkgeyBpZ25vcmVPdmVycmlkZXMgPSBmYWxzZTsgfVxuICAgICAgICByZXR1cm4gU3RhdHNpZy5nZXRDbGllbnRYKCkuY2hlY2tHYXRlKGdhdGVOYW1lLCBpZ25vcmVPdmVycmlkZXMpO1xuICAgIH07XG4gICAgU3RhdHNpZy5jaGVja0dhdGVXaXRoRXhwb3N1cmVMb2dnaW5nRGlzYWJsZWQgPSBmdW5jdGlvbiAoZ2F0ZU5hbWUsIGlnbm9yZU92ZXJyaWRlcykge1xuICAgICAgICBpZiAoaWdub3JlT3ZlcnJpZGVzID09PSB2b2lkIDApIHsgaWdub3JlT3ZlcnJpZGVzID0gZmFsc2U7IH1cbiAgICAgICAgcmV0dXJuIFN0YXRzaWcuZ2V0Q2xpZW50WCgpLmNoZWNrR2F0ZVdpdGhFeHBvc3VyZUxvZ2dpbmdEaXNhYmxlZChnYXRlTmFtZSwgaWdub3JlT3ZlcnJpZGVzKTtcbiAgICB9O1xuICAgIFN0YXRzaWcuZ2V0RmVhdHVyZUdhdGUgPSBmdW5jdGlvbiAoZ2F0ZU5hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0gbnVsbDsgfVxuICAgICAgICByZXR1cm4gU3RhdHNpZy5nZXRDbGllbnRYKCkuZ2V0RmVhdHVyZUdhdGUoZ2F0ZU5hbWUsIG9wdGlvbnMpO1xuICAgIH07XG4gICAgU3RhdHNpZy5tYW51YWxseUxvZ0dhdGVFeHBvc3VyZSA9IGZ1bmN0aW9uIChnYXRlTmFtZSkge1xuICAgICAgICBTdGF0c2lnLmdldENsaWVudFgoKS5sb2dHYXRlRXhwb3N1cmUoZ2F0ZU5hbWUpO1xuICAgIH07XG4gICAgU3RhdHNpZy5nZXRDb25maWcgPSBmdW5jdGlvbiAoY29uZmlnTmFtZSwgaWdub3JlT3ZlcnJpZGVzKSB7XG4gICAgICAgIGlmIChpZ25vcmVPdmVycmlkZXMgPT09IHZvaWQgMCkgeyBpZ25vcmVPdmVycmlkZXMgPSBmYWxzZTsgfVxuICAgICAgICByZXR1cm4gU3RhdHNpZy5nZXRDbGllbnRYKCkuZ2V0Q29uZmlnKGNvbmZpZ05hbWUsIGlnbm9yZU92ZXJyaWRlcyk7XG4gICAgfTtcbiAgICBTdGF0c2lnLmdldENvbmZpZ1dpdGhFeHBvc3VyZUxvZ2dpbmdEaXNhYmxlZCA9IGZ1bmN0aW9uIChjb25maWdOYW1lLCBpZ25vcmVPdmVycmlkZXMpIHtcbiAgICAgICAgaWYgKGlnbm9yZU92ZXJyaWRlcyA9PT0gdm9pZCAwKSB7IGlnbm9yZU92ZXJyaWRlcyA9IGZhbHNlOyB9XG4gICAgICAgIHJldHVybiBTdGF0c2lnLmdldENsaWVudFgoKS5nZXRDb25maWdXaXRoRXhwb3N1cmVMb2dnaW5nRGlzYWJsZWQoY29uZmlnTmFtZSwgaWdub3JlT3ZlcnJpZGVzKTtcbiAgICB9O1xuICAgIFN0YXRzaWcubWFudWFsbHlMb2dDb25maWdFeHBvc3VyZSA9IGZ1bmN0aW9uIChjb25maWdOYW1lKSB7XG4gICAgICAgIFN0YXRzaWcuZ2V0Q2xpZW50WCgpLmxvZ0NvbmZpZ0V4cG9zdXJlKGNvbmZpZ05hbWUpO1xuICAgIH07XG4gICAgU3RhdHNpZy5nZXRFeHBlcmltZW50ID0gZnVuY3Rpb24gKGV4cGVyaW1lbnROYW1lLCBrZWVwRGV2aWNlVmFsdWUsIGlnbm9yZU92ZXJyaWRlcykge1xuICAgICAgICBpZiAoa2VlcERldmljZVZhbHVlID09PSB2b2lkIDApIHsga2VlcERldmljZVZhbHVlID0gZmFsc2U7IH1cbiAgICAgICAgaWYgKGlnbm9yZU92ZXJyaWRlcyA9PT0gdm9pZCAwKSB7IGlnbm9yZU92ZXJyaWRlcyA9IGZhbHNlOyB9XG4gICAgICAgIHJldHVybiBTdGF0c2lnLmdldENsaWVudFgoKS5nZXRFeHBlcmltZW50KGV4cGVyaW1lbnROYW1lLCBrZWVwRGV2aWNlVmFsdWUsIGlnbm9yZU92ZXJyaWRlcyk7XG4gICAgfTtcbiAgICBTdGF0c2lnLmdldEV4cGVyaW1lbnRXaXRoRXhwb3N1cmVMb2dnaW5nRGlzYWJsZWQgPSBmdW5jdGlvbiAoZXhwZXJpbWVudE5hbWUsIGtlZXBEZXZpY2VWYWx1ZSwgaWdub3JlT3ZlcnJpZGVzKSB7XG4gICAgICAgIGlmIChrZWVwRGV2aWNlVmFsdWUgPT09IHZvaWQgMCkgeyBrZWVwRGV2aWNlVmFsdWUgPSBmYWxzZTsgfVxuICAgICAgICBpZiAoaWdub3JlT3ZlcnJpZGVzID09PSB2b2lkIDApIHsgaWdub3JlT3ZlcnJpZGVzID0gZmFsc2U7IH1cbiAgICAgICAgcmV0dXJuIFN0YXRzaWcuZ2V0Q2xpZW50WCgpLmdldEV4cGVyaW1lbnRXaXRoRXhwb3N1cmVMb2dnaW5nRGlzYWJsZWQoZXhwZXJpbWVudE5hbWUsIGtlZXBEZXZpY2VWYWx1ZSwgaWdub3JlT3ZlcnJpZGVzKTtcbiAgICB9O1xuICAgIFN0YXRzaWcubWFudWFsbHlMb2dFeHBlcmltZW50RXhwb3N1cmUgPSBmdW5jdGlvbiAoY29uZmlnTmFtZSwga2VlcERldmljZVZhbHVlKSB7XG4gICAgICAgIGlmIChrZWVwRGV2aWNlVmFsdWUgPT09IHZvaWQgMCkgeyBrZWVwRGV2aWNlVmFsdWUgPSBmYWxzZTsgfVxuICAgICAgICBTdGF0c2lnLmdldENsaWVudFgoKS5sb2dFeHBlcmltZW50RXhwb3N1cmUoY29uZmlnTmFtZSwga2VlcERldmljZVZhbHVlKTtcbiAgICB9O1xuICAgIFN0YXRzaWcuZ2V0TGF5ZXIgPSBmdW5jdGlvbiAobGF5ZXJOYW1lLCBrZWVwRGV2aWNlVmFsdWUpIHtcbiAgICAgICAgaWYgKGtlZXBEZXZpY2VWYWx1ZSA9PT0gdm9pZCAwKSB7IGtlZXBEZXZpY2VWYWx1ZSA9IGZhbHNlOyB9XG4gICAgICAgIHJldHVybiBTdGF0c2lnLmdldENsaWVudFgoKS5nZXRMYXllcihsYXllck5hbWUsIGtlZXBEZXZpY2VWYWx1ZSk7XG4gICAgfTtcbiAgICBTdGF0c2lnLmdldExheWVyV2l0aEV4cG9zdXJlTG9nZ2luZ0Rpc2FibGVkID0gZnVuY3Rpb24gKGxheWVyTmFtZSwga2VlcERldmljZVZhbHVlKSB7XG4gICAgICAgIGlmIChrZWVwRGV2aWNlVmFsdWUgPT09IHZvaWQgMCkgeyBrZWVwRGV2aWNlVmFsdWUgPSBmYWxzZTsgfVxuICAgICAgICByZXR1cm4gU3RhdHNpZy5nZXRDbGllbnRYKCkuZ2V0TGF5ZXJXaXRoRXhwb3N1cmVMb2dnaW5nRGlzYWJsZWQobGF5ZXJOYW1lLCBrZWVwRGV2aWNlVmFsdWUpO1xuICAgIH07XG4gICAgU3RhdHNpZy5tYW51YWxseUxvZ0xheWVyUGFyYW1ldGVyRXhwb3N1cmUgPSBmdW5jdGlvbiAobGF5ZXJOYW1lLCBwYXJhbWV0ZXJOYW1lLCBrZWVwRGV2aWNlVmFsdWUpIHtcbiAgICAgICAgaWYgKGtlZXBEZXZpY2VWYWx1ZSA9PT0gdm9pZCAwKSB7IGtlZXBEZXZpY2VWYWx1ZSA9IGZhbHNlOyB9XG4gICAgICAgIFN0YXRzaWcuZ2V0Q2xpZW50WCgpLmxvZ0xheWVyUGFyYW1ldGVyRXhwb3N1cmUobGF5ZXJOYW1lLCBwYXJhbWV0ZXJOYW1lLCBrZWVwRGV2aWNlVmFsdWUpO1xuICAgIH07XG4gICAgU3RhdHNpZy5sb2dFdmVudCA9IGZ1bmN0aW9uIChldmVudE5hbWUsIHZhbHVlLCBtZXRhZGF0YSkge1xuICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9IG51bGw7IH1cbiAgICAgICAgaWYgKG1ldGFkYXRhID09PSB2b2lkIDApIHsgbWV0YWRhdGEgPSBudWxsOyB9XG4gICAgICAgIHJldHVybiBTdGF0c2lnLmdldENsaWVudFgoKS5sb2dFdmVudChldmVudE5hbWUsIHZhbHVlLCBtZXRhZGF0YSk7XG4gICAgfTtcbiAgICBTdGF0c2lnLnVwZGF0ZVVzZXIgPSBmdW5jdGlvbiAodXNlcikge1xuICAgICAgICByZXR1cm4gU3RhdHNpZy5nZXRDbGllbnRYKCkudXBkYXRlVXNlcih1c2VyKTtcbiAgICB9O1xuICAgIFN0YXRzaWcudXBkYXRlVXNlcldpdGhWYWx1ZXMgPSBmdW5jdGlvbiAodXNlciwgdmFsdWVzKSB7XG4gICAgICAgIHJldHVybiBTdGF0c2lnLmdldENsaWVudFgoKS51cGRhdGVVc2VyV2l0aFZhbHVlcyh1c2VyLCB2YWx1ZXMpO1xuICAgIH07XG4gICAgU3RhdHNpZy5zaHV0ZG93biA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgU3RhdHNpZy5nZXRDbGllbnRYKCkuc2h1dGRvd24oKTtcbiAgICAgICAgU3RhdHNpZy5pbnN0YW5jZSA9IG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBPdmVycmlkZXMgdGhlIGdpdmVuIGdhdGUgbG9jYWxseSB3aXRoIHRoZSBnaXZlbiB2YWx1ZVxuICAgICAqIEBwYXJhbSBnYXRlTmFtZSAtIG5hbWUgb2YgdGhlIGdhdGUgdG8gb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0gdmFsdWUgLSB2YWx1ZSB0byBhc3NpZ24gdG8gdGhlIGdhdGVcbiAgICAgKi9cbiAgICBTdGF0c2lnLm92ZXJyaWRlR2F0ZSA9IGZ1bmN0aW9uIChnYXRlTmFtZSwgdmFsdWUpIHtcbiAgICAgICAgU3RhdHNpZy5nZXRDbGllbnRYKCkub3ZlcnJpZGVHYXRlKGdhdGVOYW1lLCB2YWx1ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBPdmVycmlkZXMgdGhlIGdpdmVuIGNvbmZpZyBsb2NhbGx5IHdpdGggdGhlIGdpdmVuIHZhbHVlXG4gICAgICogQHBhcmFtIGNvbmZpZ05hbWUgLSBuYW1lIG9mIHRoZSBjb25maWcgdG8gb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0gdmFsdWUgLSB2YWx1ZSB0byBhc3NpZ24gdG8gdGhlIGNvbmZpZ1xuICAgICAqL1xuICAgIFN0YXRzaWcub3ZlcnJpZGVDb25maWcgPSBmdW5jdGlvbiAoY29uZmlnTmFtZSwgdmFsdWUpIHtcbiAgICAgICAgU3RhdHNpZy5nZXRDbGllbnRYKCkub3ZlcnJpZGVDb25maWcoY29uZmlnTmFtZSwgdmFsdWUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogT3ZlcnJpZGVzIHRoZSBnaXZlbiBsYXllciBsb2NhbGx5IHdpdGggdGhlIGdpdmVuIHZhbHVlXG4gICAgICogQHBhcmFtIGxheWVyTmFtZSAtIG5hbWUgb2YgdGhlIGxheWVyIHRvIG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHZhbHVlIC0gdmFsdWUgdG8gYXNzaWduIHRvIHRoZSBsYXllclxuICAgICAqL1xuICAgIFN0YXRzaWcub3ZlcnJpZGVMYXllciA9IGZ1bmN0aW9uIChsYXllck5hbWUsIHZhbHVlKSB7XG4gICAgICAgIFN0YXRzaWcuZ2V0Q2xpZW50WCgpLm92ZXJyaWRlTGF5ZXIobGF5ZXJOYW1lLCB2YWx1ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gbmFtZSB0aGUgZ2F0ZSBvdmVycmlkZSB0byByZW1vdmUuIExlYXZlIHRoaXMgcGFyYW1ldGVyIGVtcHR5IHRvIHJlbW92ZSBhbGwgZ2F0ZSBvdmVycmlkZXMuXG4gICAgICovXG4gICAgU3RhdHNpZy5yZW1vdmVHYXRlT3ZlcnJpZGUgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICBTdGF0c2lnLmdldENsaWVudFgoKS5yZW1vdmVHYXRlT3ZlcnJpZGUobmFtZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gbmFtZSB0aGUgY29uZmlnIG92ZXJyaWRlIHRvIHJlbW92ZS4gTGVhdmUgdGhpcyBwYXJhbWV0ZXIgZW1wdHkgdG8gcmVtb3ZlIGFsbCBjb25maWcgb3ZlcnJpZGVzLlxuICAgICAqL1xuICAgIFN0YXRzaWcucmVtb3ZlQ29uZmlnT3ZlcnJpZGUgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICBTdGF0c2lnLmdldENsaWVudFgoKS5yZW1vdmVDb25maWdPdmVycmlkZShuYW1lKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBuYW1lIHRoZSBsYXllciBvdmVycmlkZSB0byByZW1vdmUuIExlYXZlIHRoaXMgcGFyYW1ldGVyIGVtcHR5IHRvIHJlbW92ZSBhbGwgbGF5ZXIgb3ZlcnJpZGVzLlxuICAgICAqL1xuICAgIFN0YXRzaWcucmVtb3ZlTGF5ZXJPdmVycmlkZSA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIFN0YXRzaWcuZ2V0Q2xpZW50WCgpLnJlbW92ZUxheWVyT3ZlcnJpZGUobmFtZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBUaGUgbG9jYWwgZ2F0ZSBhbmQgY29uZmlnIG92ZXJyaWRlc1xuICAgICAqL1xuICAgIFN0YXRzaWcuZ2V0QWxsT3ZlcnJpZGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gU3RhdHNpZy5nZXRDbGllbnRYKCkuZ2V0QWxsT3ZlcnJpZGVzKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBUaGUgU3RhdHNpZyBzdGFibGUgSUQgdXNlZCBmb3IgZGV2aWNlIGxldmVsIGV4cGVyaW1lbnRzXG4gICAgICovXG4gICAgU3RhdHNpZy5nZXRTdGFibGVJRCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFN0YXRzaWcuZ2V0Q2xpZW50WCgpLmdldFN0YWJsZUlEKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSByZWFzb24gYW5kIHRpbWUgYXNzb2NpYXRlZCB3aXRoIHRoZSBldmFsdWF0aW9uIGZvciB0aGUgY3VycmVudCBzZXRcbiAgICAgKiBvZiBnYXRlcyBhbmQgY29uZmlnc1xuICAgICAqL1xuICAgIFN0YXRzaWcuZ2V0RXZhbHVhdGlvbkRldGFpbHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHJldHVybiAoKF9iID0gKF9hID0gU3RhdHNpZy5pbnN0YW5jZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldEV2YWx1YXRpb25EZXRhaWxzKCkpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHtcbiAgICAgICAgICAgIHJlYXNvbjogRXZhbHVhdGlvblJlYXNvbl8xLkV2YWx1YXRpb25SZWFzb24uVW5pbml0aWFsaXplZCxcbiAgICAgICAgICAgIHRpbWU6IDAsXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgU3RhdHNpZy5nZXRJbml0aWFsaXplUmVzcG9uc2VKc29uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gU3RhdHNpZy5nZXRDbGllbnRYKCkuZ2V0SW5pdGlhbGl6ZVJlc3BvbnNlSnNvbigpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgdXNlIHJlbW92ZUdhdGVPdmVycmlkZSBvciByZW1vdmVDb25maWdPdmVycmlkZVxuICAgICAqIEBwYXJhbSBuYW1lIHRoZSBnYXRlIG92ZXJyaWRlIHRvIHJlbW92ZVxuICAgICAqL1xuICAgIFN0YXRzaWcucmVtb3ZlT3ZlcnJpZGUgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICBTdGF0c2lnLmdldENsaWVudFgoKS5yZW1vdmVPdmVycmlkZShuYW1lKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIHVzZSBnZXRBbGxPdmVycmlkZXNcbiAgICAgKiBAcmV0dXJucyB0aGUgZ2F0ZSBvdmVycmlkZXNcbiAgICAgKi9cbiAgICBTdGF0c2lnLmdldE92ZXJyaWRlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFN0YXRzaWcuZ2V0Q2xpZW50WCgpLmdldE92ZXJyaWRlcygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiBpbml0aWFsaXplIGhhcyBhbHJlYWR5IGJlZW4gY2FsbGVkLCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKi9cbiAgICBTdGF0c2lnLmluaXRpYWxpemVDYWxsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBTdGF0c2lnLmluc3RhbmNlICE9IG51bGwgJiYgU3RhdHNpZy5pbnN0YW5jZS5pbml0aWFsaXplQ2FsbGVkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZW5kIGFueSBjdXJyZW50bHkgcXVldWVkIGV2ZW50cyB0byBTdGF0c2lnXG4gICAgICovXG4gICAgU3RhdHNpZy5mbHVzaEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgU3RhdHNpZy5nZXRDbGllbnRYKCkuZmx1c2hFdmVudHMoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbXMgRGVidWcgaW5mb3JtYXRpb24gbG9nIHdpdGggZXhwb3N1cmUgZXZlbnQsIGFuZCBpbmZvcm1hdGlvbiB3aWxsIGJlIGxpdmluZyBpbiBtZXRhZGF0YVxuICAgICAqL1xuICAgIFN0YXRzaWcuc2V0RGVidWdJbmZvID0gZnVuY3Rpb24gKGRlYnVnSW5mbykge1xuICAgICAgICBTdGF0c2lnLmdldENsaWVudFgoKS5zZXREZWJ1Z0luZm8oZGVidWdJbmZvKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEludGVuZGVkIHRvIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBTdGF0c2lnT3B0aW9ucy5kaXNhYmxlQWxsTG9nZ2luZy5cbiAgICAgKiBUaGlzIHdpbGwgc2V0IFN0YXRzaWdPcHRpb25zLmRpc2FibGVBbGxMb2dnaW5nIHRvIGZhbHNlLCB0aGVyZWJ5IGVuYWJsaW5nIGxvZ3MgdG8gZnVuY3Rpb24gbm9ybWFsbHkuXG4gICAgICovXG4gICAgU3RhdHNpZy5yZWVuYWJsZUFsbExvZ2dpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIFN0YXRzaWcuZ2V0Q2xpZW50WCgpLnJlZW5hYmxlQWxsTG9nZ2luZygpO1xuICAgIH07XG4gICAgU3RhdHNpZy5nZXRDbGllbnRYID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIVN0YXRzaWcuaW5zdGFuY2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcnNfMS5TdGF0c2lnVW5pbml0aWFsaXplZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFN0YXRzaWcuaW5zdGFuY2U7XG4gICAgfTtcbiAgICBTdGF0c2lnLmluc3RhbmNlID0gbnVsbDtcbiAgICByZXR1cm4gU3RhdHNpZztcbn0oKSk7XG5leHBvcnRzLmRlZmF1bHQgPSBTdGF0c2lnO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/statsig-js/dist/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/statsig-js/dist/utils/Base64.js":
/*!******************************************************!*\
  !*** ./node_modules/statsig-js/dist/utils/Base64.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Base64 = void 0;\n// Encoding logic from https://stackoverflow.com/a/246813/1524355, with slight modifications to make it work for binary strings\nexports.Base64 = {\n    _keyStr: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',\n    _encodeBinary: function (input) {\n        var output = '';\n        var chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n        var i = 0;\n        while (i < input.length) {\n            chr1 = input.charCodeAt(i++);\n            chr2 = input.charCodeAt(i++);\n            chr3 = input.charCodeAt(i++);\n            enc1 = chr1 >> 2;\n            enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n            enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n            enc4 = chr3 & 63;\n            if (isNaN(chr2)) {\n                enc3 = enc4 = 64;\n            }\n            else if (isNaN(chr3)) {\n                enc4 = 64;\n            }\n            output =\n                output +\n                    this._keyStr.charAt(enc1) +\n                    this._keyStr.charAt(enc2) +\n                    this._keyStr.charAt(enc3) +\n                    this._keyStr.charAt(enc4);\n        }\n        return output;\n    },\n    encodeArrayBuffer: function (buffer) {\n        var binary = '';\n        var bytes = new Uint8Array(buffer);\n        var len = bytes.byteLength;\n        for (var i = 0; i < len; i++) {\n            binary += String.fromCharCode(bytes[i]);\n        }\n        return exports.Base64._encodeBinary(binary);\n    },\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L3V0aWxzL0Jhc2U2NC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxjQUFjO0FBQ2Q7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLFNBQVM7QUFDakM7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYW1hem9uLWZyZXNoLWRlbW8vLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L3V0aWxzL0Jhc2U2NC5qcz8xNGRhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5CYXNlNjQgPSB2b2lkIDA7XG4vLyBFbmNvZGluZyBsb2dpYyBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNDY4MTMvMTUyNDM1NSwgd2l0aCBzbGlnaHQgbW9kaWZpY2F0aW9ucyB0byBtYWtlIGl0IHdvcmsgZm9yIGJpbmFyeSBzdHJpbmdzXG5leHBvcnRzLkJhc2U2NCA9IHtcbiAgICBfa2V5U3RyOiAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz0nLFxuICAgIF9lbmNvZGVCaW5hcnk6IGZ1bmN0aW9uIChpbnB1dCkge1xuICAgICAgICB2YXIgb3V0cHV0ID0gJyc7XG4gICAgICAgIHZhciBjaHIxLCBjaHIyLCBjaHIzLCBlbmMxLCBlbmMyLCBlbmMzLCBlbmM0O1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgaW5wdXQubGVuZ3RoKSB7XG4gICAgICAgICAgICBjaHIxID0gaW5wdXQuY2hhckNvZGVBdChpKyspO1xuICAgICAgICAgICAgY2hyMiA9IGlucHV0LmNoYXJDb2RlQXQoaSsrKTtcbiAgICAgICAgICAgIGNocjMgPSBpbnB1dC5jaGFyQ29kZUF0KGkrKyk7XG4gICAgICAgICAgICBlbmMxID0gY2hyMSA+PiAyO1xuICAgICAgICAgICAgZW5jMiA9ICgoY2hyMSAmIDMpIDw8IDQpIHwgKGNocjIgPj4gNCk7XG4gICAgICAgICAgICBlbmMzID0gKChjaHIyICYgMTUpIDw8IDIpIHwgKGNocjMgPj4gNik7XG4gICAgICAgICAgICBlbmM0ID0gY2hyMyAmIDYzO1xuICAgICAgICAgICAgaWYgKGlzTmFOKGNocjIpKSB7XG4gICAgICAgICAgICAgICAgZW5jMyA9IGVuYzQgPSA2NDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzTmFOKGNocjMpKSB7XG4gICAgICAgICAgICAgICAgZW5jNCA9IDY0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3V0cHV0ID1cbiAgICAgICAgICAgICAgICBvdXRwdXQgK1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9rZXlTdHIuY2hhckF0KGVuYzEpICtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fa2V5U3RyLmNoYXJBdChlbmMyKSArXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2tleVN0ci5jaGFyQXQoZW5jMykgK1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9rZXlTdHIuY2hhckF0KGVuYzQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfSxcbiAgICBlbmNvZGVBcnJheUJ1ZmZlcjogZnVuY3Rpb24gKGJ1ZmZlcikge1xuICAgICAgICB2YXIgYmluYXJ5ID0gJyc7XG4gICAgICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG4gICAgICAgIHZhciBsZW4gPSBieXRlcy5ieXRlTGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBiaW5hcnkgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShieXRlc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuQmFzZTY0Ll9lbmNvZGVCaW5hcnkoYmluYXJ5KTtcbiAgICB9LFxufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/statsig-js/dist/utils/Base64.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/statsig-js/dist/utils/BootstrapValidator.js":
/*!******************************************************************!*\
  !*** ./node_modules/statsig-js/dist/utils/BootstrapValidator.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar StatsigUser_1 = __webpack_require__(/*! ../StatsigUser */ \"(ssr)/./node_modules/statsig-js/dist/StatsigUser.js\");\nvar EvaluationReason_1 = __webpack_require__(/*! ./EvaluationReason */ \"(ssr)/./node_modules/statsig-js/dist/utils/EvaluationReason.js\");\nvar Hashing_1 = __webpack_require__(/*! ./Hashing */ \"(ssr)/./node_modules/statsig-js/dist/utils/Hashing.js\");\nvar BootstrapValidator = /** @class */ (function () {\n    function BootstrapValidator() {\n    }\n    BootstrapValidator.getEvaluationReasonForBootstrap = function (user, values, stableID) {\n        var isValid = true;\n        var stableIDMistmatch = false;\n        try {\n            var evaluatedKeys = values['evaluated_keys'];\n            if (evaluatedKeys && typeof evaluatedKeys === 'object') {\n                var evaluatedKeysRecord = this.copyObject(evaluatedKeys);\n                var userToCompare = user == null ? null : this.copyObject(user);\n                isValid =\n                    isValid &&\n                        BootstrapValidator.validate(evaluatedKeysRecord, userToCompare) &&\n                        BootstrapValidator.validate(userToCompare, evaluatedKeysRecord);\n                var customIDs = evaluatedKeys\n                    .customIDs;\n                if (stableID != (customIDs === null || customIDs === void 0 ? void 0 : customIDs.stableID)) {\n                    stableIDMistmatch = true;\n                }\n            }\n            var userHash = values['user_hash'];\n            if (userHash && typeof userHash === 'string' && user != null) {\n                var userHashGood = userHash === (0, StatsigUser_1.getUserHashWithoutStableID)(user) ||\n                    userHash === (0, Hashing_1.djb2HashForObject)(__assign(__assign({}, user), { stableID: stableID }));\n                isValid = isValid && userHashGood;\n            }\n        }\n        catch (error) {\n            // This is best-effort. If we fail, return true.\n        }\n        return !isValid\n            ? EvaluationReason_1.EvaluationReason.InvalidBootstrap\n            : stableIDMistmatch\n                ? EvaluationReason_1.EvaluationReason.BootstrapStableIDMismatch\n                : EvaluationReason_1.EvaluationReason.Bootstrap;\n    };\n    BootstrapValidator.validate = function (one, two) {\n        if (one == null) {\n            return two == null;\n        }\n        else if (two == null) {\n            return false;\n        }\n        for (var _i = 0, _a = Object.entries(one); _i < _a.length; _i++) {\n            var _b = _a[_i], key = _b[0], value = _b[1];\n            if (key === 'stableID') {\n                continue;\n            }\n            if (typeof value !== typeof two[key]) {\n                return false;\n            }\n            if (typeof value === 'string') {\n                if (value !== two[key]) {\n                    return false;\n                }\n            }\n            else if (typeof value === 'object') {\n                return this.validate(value, two[key]);\n            }\n            else {\n                // unexpected\n                return false;\n            }\n        }\n        return true;\n    };\n    BootstrapValidator.copyObject = function (obj) {\n        if (obj == null) {\n            return null;\n        }\n        var copy = {};\n        if (obj === null || obj === void 0 ? void 0 : obj.userID) {\n            copy['userID'] = obj === null || obj === void 0 ? void 0 : obj.userID;\n        }\n        if (obj === null || obj === void 0 ? void 0 : obj.customIDs) {\n            var customIDs = __assign({}, obj.customIDs);\n            delete customIDs['stableID'];\n            if (Object.keys(customIDs).length !== 0) {\n                copy['customIDs'] = customIDs;\n            }\n        }\n        return copy;\n    };\n    return BootstrapValidator;\n}());\nexports[\"default\"] = BootstrapValidator;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L3V0aWxzL0Jvb3RzdHJhcFZhbGlkYXRvci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQSxpREFBaUQsT0FBTztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELG9CQUFvQixtQkFBTyxDQUFDLDJFQUFnQjtBQUM1Qyx5QkFBeUIsbUJBQU8sQ0FBQywwRkFBb0I7QUFDckQsZ0JBQWdCLG1CQUFPLENBQUMsd0VBQVc7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0ZBQXNGLFdBQVcsb0JBQW9CO0FBQ3JIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELGdCQUFnQjtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELGtCQUFlIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYW1hem9uLWZyZXNoLWRlbW8vLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L3V0aWxzL0Jvb3RzdHJhcFZhbGlkYXRvci5qcz9lN2ZhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXNzaWduID0gKHRoaXMgJiYgdGhpcy5fX2Fzc2lnbikgfHwgZnVuY3Rpb24gKCkge1xuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSlcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9O1xuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBTdGF0c2lnVXNlcl8xID0gcmVxdWlyZShcIi4uL1N0YXRzaWdVc2VyXCIpO1xudmFyIEV2YWx1YXRpb25SZWFzb25fMSA9IHJlcXVpcmUoXCIuL0V2YWx1YXRpb25SZWFzb25cIik7XG52YXIgSGFzaGluZ18xID0gcmVxdWlyZShcIi4vSGFzaGluZ1wiKTtcbnZhciBCb290c3RyYXBWYWxpZGF0b3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQm9vdHN0cmFwVmFsaWRhdG9yKCkge1xuICAgIH1cbiAgICBCb290c3RyYXBWYWxpZGF0b3IuZ2V0RXZhbHVhdGlvblJlYXNvbkZvckJvb3RzdHJhcCA9IGZ1bmN0aW9uICh1c2VyLCB2YWx1ZXMsIHN0YWJsZUlEKSB7XG4gICAgICAgIHZhciBpc1ZhbGlkID0gdHJ1ZTtcbiAgICAgICAgdmFyIHN0YWJsZUlETWlzdG1hdGNoID0gZmFsc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgZXZhbHVhdGVkS2V5cyA9IHZhbHVlc1snZXZhbHVhdGVkX2tleXMnXTtcbiAgICAgICAgICAgIGlmIChldmFsdWF0ZWRLZXlzICYmIHR5cGVvZiBldmFsdWF0ZWRLZXlzID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIHZhciBldmFsdWF0ZWRLZXlzUmVjb3JkID0gdGhpcy5jb3B5T2JqZWN0KGV2YWx1YXRlZEtleXMpO1xuICAgICAgICAgICAgICAgIHZhciB1c2VyVG9Db21wYXJlID0gdXNlciA9PSBudWxsID8gbnVsbCA6IHRoaXMuY29weU9iamVjdCh1c2VyKTtcbiAgICAgICAgICAgICAgICBpc1ZhbGlkID1cbiAgICAgICAgICAgICAgICAgICAgaXNWYWxpZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgQm9vdHN0cmFwVmFsaWRhdG9yLnZhbGlkYXRlKGV2YWx1YXRlZEtleXNSZWNvcmQsIHVzZXJUb0NvbXBhcmUpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBCb290c3RyYXBWYWxpZGF0b3IudmFsaWRhdGUodXNlclRvQ29tcGFyZSwgZXZhbHVhdGVkS2V5c1JlY29yZCk7XG4gICAgICAgICAgICAgICAgdmFyIGN1c3RvbUlEcyA9IGV2YWx1YXRlZEtleXNcbiAgICAgICAgICAgICAgICAgICAgLmN1c3RvbUlEcztcbiAgICAgICAgICAgICAgICBpZiAoc3RhYmxlSUQgIT0gKGN1c3RvbUlEcyA9PT0gbnVsbCB8fCBjdXN0b21JRHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGN1c3RvbUlEcy5zdGFibGVJRCkpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhYmxlSURNaXN0bWF0Y2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB1c2VySGFzaCA9IHZhbHVlc1sndXNlcl9oYXNoJ107XG4gICAgICAgICAgICBpZiAodXNlckhhc2ggJiYgdHlwZW9mIHVzZXJIYXNoID09PSAnc3RyaW5nJyAmJiB1c2VyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB2YXIgdXNlckhhc2hHb29kID0gdXNlckhhc2ggPT09ICgwLCBTdGF0c2lnVXNlcl8xLmdldFVzZXJIYXNoV2l0aG91dFN0YWJsZUlEKSh1c2VyKSB8fFxuICAgICAgICAgICAgICAgICAgICB1c2VySGFzaCA9PT0gKDAsIEhhc2hpbmdfMS5kamIySGFzaEZvck9iamVjdCkoX19hc3NpZ24oX19hc3NpZ24oe30sIHVzZXIpLCB7IHN0YWJsZUlEOiBzdGFibGVJRCB9KSk7XG4gICAgICAgICAgICAgICAgaXNWYWxpZCA9IGlzVmFsaWQgJiYgdXNlckhhc2hHb29kO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgLy8gVGhpcyBpcyBiZXN0LWVmZm9ydC4gSWYgd2UgZmFpbCwgcmV0dXJuIHRydWUuXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICFpc1ZhbGlkXG4gICAgICAgICAgICA/IEV2YWx1YXRpb25SZWFzb25fMS5FdmFsdWF0aW9uUmVhc29uLkludmFsaWRCb290c3RyYXBcbiAgICAgICAgICAgIDogc3RhYmxlSURNaXN0bWF0Y2hcbiAgICAgICAgICAgICAgICA/IEV2YWx1YXRpb25SZWFzb25fMS5FdmFsdWF0aW9uUmVhc29uLkJvb3RzdHJhcFN0YWJsZUlETWlzbWF0Y2hcbiAgICAgICAgICAgICAgICA6IEV2YWx1YXRpb25SZWFzb25fMS5FdmFsdWF0aW9uUmVhc29uLkJvb3RzdHJhcDtcbiAgICB9O1xuICAgIEJvb3RzdHJhcFZhbGlkYXRvci52YWxpZGF0ZSA9IGZ1bmN0aW9uIChvbmUsIHR3bykge1xuICAgICAgICBpZiAob25lID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiB0d28gPT0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0d28gPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3QuZW50cmllcyhvbmUpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIF9iID0gX2FbX2ldLCBrZXkgPSBfYlswXSwgdmFsdWUgPSBfYlsxXTtcbiAgICAgICAgICAgIGlmIChrZXkgPT09ICdzdGFibGVJRCcpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IHR5cGVvZiB0d29ba2V5XSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB0d29ba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbGlkYXRlKHZhbHVlLCB0d29ba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyB1bmV4cGVjdGVkXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgQm9vdHN0cmFwVmFsaWRhdG9yLmNvcHlPYmplY3QgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIGlmIChvYmogPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNvcHkgPSB7fTtcbiAgICAgICAgaWYgKG9iaiA9PT0gbnVsbCB8fCBvYmogPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iai51c2VySUQpIHtcbiAgICAgICAgICAgIGNvcHlbJ3VzZXJJRCddID0gb2JqID09PSBudWxsIHx8IG9iaiA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqLnVzZXJJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAob2JqID09PSBudWxsIHx8IG9iaiA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqLmN1c3RvbUlEcykge1xuICAgICAgICAgICAgdmFyIGN1c3RvbUlEcyA9IF9fYXNzaWduKHt9LCBvYmouY3VzdG9tSURzKTtcbiAgICAgICAgICAgIGRlbGV0ZSBjdXN0b21JRHNbJ3N0YWJsZUlEJ107XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoY3VzdG9tSURzKS5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgICBjb3B5WydjdXN0b21JRHMnXSA9IGN1c3RvbUlEcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29weTtcbiAgICB9O1xuICAgIHJldHVybiBCb290c3RyYXBWYWxpZGF0b3I7XG59KCkpO1xuZXhwb3J0cy5kZWZhdWx0ID0gQm9vdHN0cmFwVmFsaWRhdG9yO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/statsig-js/dist/utils/BootstrapValidator.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/statsig-js/dist/utils/Constants.js":
/*!*********************************************************!*\
  !*** ./node_modules/statsig-js/dist/utils/Constants.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.STORAGE_PREFIX = exports.LOCAL_STORAGE_KEYS = exports.STATSIG_LOCAL_STORAGE_LOGGING_REQUEST_KEY = exports.STATSIG_STABLE_ID_KEY = exports.INTERNAL_STORE_KEY = exports.STICKY_DEVICE_EXPERIMENTS_KEY = exports.OVERRIDES_STORE_KEY = void 0;\nexports.OVERRIDES_STORE_KEY = 'STATSIG_LOCAL_STORAGE_INTERNAL_STORE_OVERRIDES_V3';\nexports.STICKY_DEVICE_EXPERIMENTS_KEY = 'STATSIG_LOCAL_STORAGE_STICKY_DEVICE_EXPERIMENTS';\n// V4 change: values are now cached on a specific user ID\n// We store values for up to 10 different user IDs at a time.\nexports.INTERNAL_STORE_KEY = 'STATSIG_LOCAL_STORAGE_INTERNAL_STORE_V4';\nexports.STATSIG_STABLE_ID_KEY = 'STATSIG_LOCAL_STORAGE_STABLE_ID';\nexports.STATSIG_LOCAL_STORAGE_LOGGING_REQUEST_KEY = 'STATSIG_LOCAL_STORAGE_LOGGING_REQUEST';\nexports.LOCAL_STORAGE_KEYS = {\n    STATSIG_LOCAL_STORAGE_STABLE_ID: true,\n    STATSIG_LOCAL_STORAGE_INTERNAL_STORE_V4: true,\n    STATSIG_LOCAL_STORAGE_STICKY_DEVICE_EXPERIMENTS: true,\n    STATSIG_LOCAL_STORAGE_INTERNAL_STORE_OVERRIDES_V3: true,\n    STATSIG_LOCAL_STORAGE_LOGGING_REQUEST: true,\n};\nexports.STORAGE_PREFIX = 'STATSIG_LOCAL_STORAGE';\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L3V0aWxzL0NvbnN0YW50cy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxzQkFBc0IsR0FBRywwQkFBMEIsR0FBRyxpREFBaUQsR0FBRyw2QkFBNkIsR0FBRywwQkFBMEIsR0FBRyxxQ0FBcUMsR0FBRywyQkFBMkI7QUFDMU8sMkJBQTJCO0FBQzNCLHFDQUFxQztBQUNyQztBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCLDZCQUE2QjtBQUM3QixpREFBaUQ7QUFDakQsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiIsInNvdXJjZXMiOlsid2VicGFjazovL2FtYXpvbi1mcmVzaC1kZW1vLy4vbm9kZV9tb2R1bGVzL3N0YXRzaWctanMvZGlzdC91dGlscy9Db25zdGFudHMuanM/NjBlNSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuU1RPUkFHRV9QUkVGSVggPSBleHBvcnRzLkxPQ0FMX1NUT1JBR0VfS0VZUyA9IGV4cG9ydHMuU1RBVFNJR19MT0NBTF9TVE9SQUdFX0xPR0dJTkdfUkVRVUVTVF9LRVkgPSBleHBvcnRzLlNUQVRTSUdfU1RBQkxFX0lEX0tFWSA9IGV4cG9ydHMuSU5URVJOQUxfU1RPUkVfS0VZID0gZXhwb3J0cy5TVElDS1lfREVWSUNFX0VYUEVSSU1FTlRTX0tFWSA9IGV4cG9ydHMuT1ZFUlJJREVTX1NUT1JFX0tFWSA9IHZvaWQgMDtcbmV4cG9ydHMuT1ZFUlJJREVTX1NUT1JFX0tFWSA9ICdTVEFUU0lHX0xPQ0FMX1NUT1JBR0VfSU5URVJOQUxfU1RPUkVfT1ZFUlJJREVTX1YzJztcbmV4cG9ydHMuU1RJQ0tZX0RFVklDRV9FWFBFUklNRU5UU19LRVkgPSAnU1RBVFNJR19MT0NBTF9TVE9SQUdFX1NUSUNLWV9ERVZJQ0VfRVhQRVJJTUVOVFMnO1xuLy8gVjQgY2hhbmdlOiB2YWx1ZXMgYXJlIG5vdyBjYWNoZWQgb24gYSBzcGVjaWZpYyB1c2VyIElEXG4vLyBXZSBzdG9yZSB2YWx1ZXMgZm9yIHVwIHRvIDEwIGRpZmZlcmVudCB1c2VyIElEcyBhdCBhIHRpbWUuXG5leHBvcnRzLklOVEVSTkFMX1NUT1JFX0tFWSA9ICdTVEFUU0lHX0xPQ0FMX1NUT1JBR0VfSU5URVJOQUxfU1RPUkVfVjQnO1xuZXhwb3J0cy5TVEFUU0lHX1NUQUJMRV9JRF9LRVkgPSAnU1RBVFNJR19MT0NBTF9TVE9SQUdFX1NUQUJMRV9JRCc7XG5leHBvcnRzLlNUQVRTSUdfTE9DQUxfU1RPUkFHRV9MT0dHSU5HX1JFUVVFU1RfS0VZID0gJ1NUQVRTSUdfTE9DQUxfU1RPUkFHRV9MT0dHSU5HX1JFUVVFU1QnO1xuZXhwb3J0cy5MT0NBTF9TVE9SQUdFX0tFWVMgPSB7XG4gICAgU1RBVFNJR19MT0NBTF9TVE9SQUdFX1NUQUJMRV9JRDogdHJ1ZSxcbiAgICBTVEFUU0lHX0xPQ0FMX1NUT1JBR0VfSU5URVJOQUxfU1RPUkVfVjQ6IHRydWUsXG4gICAgU1RBVFNJR19MT0NBTF9TVE9SQUdFX1NUSUNLWV9ERVZJQ0VfRVhQRVJJTUVOVFM6IHRydWUsXG4gICAgU1RBVFNJR19MT0NBTF9TVE9SQUdFX0lOVEVSTkFMX1NUT1JFX09WRVJSSURFU19WMzogdHJ1ZSxcbiAgICBTVEFUU0lHX0xPQ0FMX1NUT1JBR0VfTE9HR0lOR19SRVFVRVNUOiB0cnVlLFxufTtcbmV4cG9ydHMuU1RPUkFHRV9QUkVGSVggPSAnU1RBVFNJR19MT0NBTF9TVE9SQUdFJztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/statsig-js/dist/utils/Constants.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/statsig-js/dist/utils/Diagnostics.js":
/*!***********************************************************!*\
  !*** ./node_modules/statsig-js/dist/utils/Diagnostics.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.DiagnosticsImpl = void 0;\nvar Timing_1 = __webpack_require__(/*! ./Timing */ \"(ssr)/./node_modules/statsig-js/dist/utils/Timing.js\");\nvar DiagnosticsImpl = /** @class */ (function () {\n    function DiagnosticsImpl(args) {\n        var _this = this;\n        var _a, _b, _c;\n        this.mark = {\n            overall: this.selectAction('overall'),\n            initialize: this.selectStep('initialize'),\n            bootstrap: this.selectStep('bootstrap'),\n            api_call: function (tag) {\n                switch (tag) {\n                    case 'getConfig':\n                        return _this.selectAction('get_config');\n                    case 'getExperiment':\n                        return _this.selectAction('get_experiment');\n                    case 'checkGate':\n                        return _this.selectAction('check_gate');\n                    case 'getLayer':\n                        return _this.selectAction('get_layer');\n                }\n                return null;\n            },\n        };\n        this.context = 'initialize';\n        this.defaultMaxMarkers = 30;\n        this.maxMarkers = {\n            initialize: this.defaultMaxMarkers,\n            config_sync: this.defaultMaxMarkers,\n            event_logging: this.defaultMaxMarkers,\n            api_call: this.defaultMaxMarkers,\n        };\n        this.markers = (_a = args.markers) !== null && _a !== void 0 ? _a : {\n            initialize: [],\n            config_sync: [],\n            event_logging: [],\n            api_call: [],\n        };\n        this.disabled = (_c = (_b = args.options) === null || _b === void 0 ? void 0 : _b.getDisableDiagnosticsLogging()) !== null && _c !== void 0 ? _c : false;\n    }\n    DiagnosticsImpl.prototype.setContext = function (context) {\n        this.context = context;\n    };\n    DiagnosticsImpl.prototype.selectAction = function (key, step) {\n        var _this = this;\n        return {\n            start: function (data, context) {\n                return _this.addMarker(__assign({ key: key, step: step, action: 'start', timestamp: (0, Timing_1.now)({ withPrecision: true }) }, (data !== null && data !== void 0 ? data : {})), context);\n            },\n            end: function (data, context) {\n                return _this.addMarker(__assign({ key: key, step: step, action: 'end', timestamp: (0, Timing_1.now)({ withPrecision: true }) }, (data !== null && data !== void 0 ? data : {})), context);\n            },\n        };\n    };\n    DiagnosticsImpl.prototype.selectStep = function (key) {\n        return {\n            process: this.selectAction(key, 'process'),\n            networkRequest: this.selectAction(key, 'network_request'),\n        };\n    };\n    DiagnosticsImpl.prototype.addMarker = function (marker, overrideContext) {\n        var _a;\n        var context = overrideContext !== null && overrideContext !== void 0 ? overrideContext : this.context;\n        if (this.disabled && context === 'api_call') {\n            return false;\n        }\n        if (this.maxMarkers[context] !== undefined &&\n            this.markers[context].length >=\n                ((_a = this.maxMarkers[context]) !== null && _a !== void 0 ? _a : this.defaultMaxMarkers)) {\n            return false;\n        }\n        this.markers[context].push(marker);\n        return true;\n    };\n    DiagnosticsImpl.prototype.getMarkers = function (context) {\n        return this.markers[context];\n    };\n    DiagnosticsImpl.prototype.setMaxMarkers = function (context, max) {\n        this.maxMarkers[context] = max;\n    };\n    DiagnosticsImpl.prototype.getMarkerCount = function (context) {\n        return this.markers[context].length;\n    };\n    DiagnosticsImpl.prototype.clearContext = function (context) {\n        this.markers[context] = [];\n    };\n    return DiagnosticsImpl;\n}());\nexports.DiagnosticsImpl = DiagnosticsImpl;\nvar Diagnostics = /** @class */ (function () {\n    function Diagnostics() {\n    }\n    Diagnostics.initialize = function (args) {\n        this.instance = new DiagnosticsImpl(args);\n        this.mark = this.instance.mark;\n        this.disabled = this.instance.disabled;\n        this.getMarkers = this.instance.getMarkers.bind(this.instance);\n        this.getMarkerCount = this.instance.getMarkerCount.bind(this.instance);\n        this.setMaxMarkers = this.instance.setMaxMarkers.bind(this.instance);\n        this.setContext = this.instance.setContext.bind(this.instance);\n        this.clearContext = this.instance.clearContext.bind(this.instance);\n    };\n    Diagnostics.formatError = function (e) {\n        if (!(e && typeof e === 'object')) {\n            return;\n        }\n        return {\n            code: this.safeGetField(e, 'code'),\n            name: this.safeGetField(e, 'name'),\n            message: this.safeGetField(e, 'message'),\n        };\n    };\n    Diagnostics.safeGetField = function (data, field) {\n        if (field in data) {\n            return data[field];\n        }\n        return undefined;\n    };\n    return Diagnostics;\n}());\nexports[\"default\"] = Diagnostics;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L3V0aWxzL0RpYWdub3N0aWNzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBLGlEQUFpRCxPQUFPO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsdUJBQXVCO0FBQ3ZCLGVBQWUsbUJBQU8sQ0FBQyxzRUFBVTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxzRUFBc0UscUJBQXFCLEdBQUcsK0NBQStDO0FBQy9MLGFBQWE7QUFDYjtBQUNBLGtEQUFrRCxvRUFBb0UscUJBQXFCLEdBQUcsK0NBQStDO0FBQzdMLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsa0JBQWUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbWF6b24tZnJlc2gtZGVtby8uL25vZGVfbW9kdWxlcy9zdGF0c2lnLWpzL2Rpc3QvdXRpbHMvRGlhZ25vc3RpY3MuanM/NjIzOCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHtcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXG4gICAgICAgICAgICAgICAgdFtwXSA9IHNbcF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfTtcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkRpYWdub3N0aWNzSW1wbCA9IHZvaWQgMDtcbnZhciBUaW1pbmdfMSA9IHJlcXVpcmUoXCIuL1RpbWluZ1wiKTtcbnZhciBEaWFnbm9zdGljc0ltcGwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRGlhZ25vc3RpY3NJbXBsKGFyZ3MpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIHRoaXMubWFyayA9IHtcbiAgICAgICAgICAgIG92ZXJhbGw6IHRoaXMuc2VsZWN0QWN0aW9uKCdvdmVyYWxsJyksXG4gICAgICAgICAgICBpbml0aWFsaXplOiB0aGlzLnNlbGVjdFN0ZXAoJ2luaXRpYWxpemUnKSxcbiAgICAgICAgICAgIGJvb3RzdHJhcDogdGhpcy5zZWxlY3RTdGVwKCdib290c3RyYXAnKSxcbiAgICAgICAgICAgIGFwaV9jYWxsOiBmdW5jdGlvbiAodGFnKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0YWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZ2V0Q29uZmlnJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zZWxlY3RBY3Rpb24oJ2dldF9jb25maWcnKTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZ2V0RXhwZXJpbWVudCc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc2VsZWN0QWN0aW9uKCdnZXRfZXhwZXJpbWVudCcpO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdjaGVja0dhdGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNlbGVjdEFjdGlvbignY2hlY2tfZ2F0ZScpO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdnZXRMYXllcic6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc2VsZWN0QWN0aW9uKCdnZXRfbGF5ZXInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNvbnRleHQgPSAnaW5pdGlhbGl6ZSc7XG4gICAgICAgIHRoaXMuZGVmYXVsdE1heE1hcmtlcnMgPSAzMDtcbiAgICAgICAgdGhpcy5tYXhNYXJrZXJzID0ge1xuICAgICAgICAgICAgaW5pdGlhbGl6ZTogdGhpcy5kZWZhdWx0TWF4TWFya2VycyxcbiAgICAgICAgICAgIGNvbmZpZ19zeW5jOiB0aGlzLmRlZmF1bHRNYXhNYXJrZXJzLFxuICAgICAgICAgICAgZXZlbnRfbG9nZ2luZzogdGhpcy5kZWZhdWx0TWF4TWFya2VycyxcbiAgICAgICAgICAgIGFwaV9jYWxsOiB0aGlzLmRlZmF1bHRNYXhNYXJrZXJzLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLm1hcmtlcnMgPSAoX2EgPSBhcmdzLm1hcmtlcnMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHtcbiAgICAgICAgICAgIGluaXRpYWxpemU6IFtdLFxuICAgICAgICAgICAgY29uZmlnX3N5bmM6IFtdLFxuICAgICAgICAgICAgZXZlbnRfbG9nZ2luZzogW10sXG4gICAgICAgICAgICBhcGlfY2FsbDogW10sXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSAoX2MgPSAoX2IgPSBhcmdzLm9wdGlvbnMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5nZXREaXNhYmxlRGlhZ25vc3RpY3NMb2dnaW5nKCkpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IGZhbHNlO1xuICAgIH1cbiAgICBEaWFnbm9zdGljc0ltcGwucHJvdG90eXBlLnNldENvbnRleHQgPSBmdW5jdGlvbiAoY29udGV4dCkge1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgIH07XG4gICAgRGlhZ25vc3RpY3NJbXBsLnByb3RvdHlwZS5zZWxlY3RBY3Rpb24gPSBmdW5jdGlvbiAoa2V5LCBzdGVwKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGFydDogZnVuY3Rpb24gKGRhdGEsIGNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuYWRkTWFya2VyKF9fYXNzaWduKHsga2V5OiBrZXksIHN0ZXA6IHN0ZXAsIGFjdGlvbjogJ3N0YXJ0JywgdGltZXN0YW1wOiAoMCwgVGltaW5nXzEubm93KSh7IHdpdGhQcmVjaXNpb246IHRydWUgfSkgfSwgKGRhdGEgIT09IG51bGwgJiYgZGF0YSAhPT0gdm9pZCAwID8gZGF0YSA6IHt9KSksIGNvbnRleHQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVuZDogZnVuY3Rpb24gKGRhdGEsIGNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuYWRkTWFya2VyKF9fYXNzaWduKHsga2V5OiBrZXksIHN0ZXA6IHN0ZXAsIGFjdGlvbjogJ2VuZCcsIHRpbWVzdGFtcDogKDAsIFRpbWluZ18xLm5vdykoeyB3aXRoUHJlY2lzaW9uOiB0cnVlIH0pIH0sIChkYXRhICE9PSBudWxsICYmIGRhdGEgIT09IHZvaWQgMCA/IGRhdGEgOiB7fSkpLCBjb250ZXh0KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBEaWFnbm9zdGljc0ltcGwucHJvdG90eXBlLnNlbGVjdFN0ZXAgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwcm9jZXNzOiB0aGlzLnNlbGVjdEFjdGlvbihrZXksICdwcm9jZXNzJyksXG4gICAgICAgICAgICBuZXR3b3JrUmVxdWVzdDogdGhpcy5zZWxlY3RBY3Rpb24oa2V5LCAnbmV0d29ya19yZXF1ZXN0JyksXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBEaWFnbm9zdGljc0ltcGwucHJvdG90eXBlLmFkZE1hcmtlciA9IGZ1bmN0aW9uIChtYXJrZXIsIG92ZXJyaWRlQ29udGV4dCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHZhciBjb250ZXh0ID0gb3ZlcnJpZGVDb250ZXh0ICE9PSBudWxsICYmIG92ZXJyaWRlQ29udGV4dCAhPT0gdm9pZCAwID8gb3ZlcnJpZGVDb250ZXh0IDogdGhpcy5jb250ZXh0O1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCAmJiBjb250ZXh0ID09PSAnYXBpX2NhbGwnKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubWF4TWFya2Vyc1tjb250ZXh0XSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICB0aGlzLm1hcmtlcnNbY29udGV4dF0ubGVuZ3RoID49XG4gICAgICAgICAgICAgICAgKChfYSA9IHRoaXMubWF4TWFya2Vyc1tjb250ZXh0XSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdGhpcy5kZWZhdWx0TWF4TWFya2VycykpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1hcmtlcnNbY29udGV4dF0ucHVzaChtYXJrZXIpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIERpYWdub3N0aWNzSW1wbC5wcm90b3R5cGUuZ2V0TWFya2VycyA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcmtlcnNbY29udGV4dF07XG4gICAgfTtcbiAgICBEaWFnbm9zdGljc0ltcGwucHJvdG90eXBlLnNldE1heE1hcmtlcnMgPSBmdW5jdGlvbiAoY29udGV4dCwgbWF4KSB7XG4gICAgICAgIHRoaXMubWF4TWFya2Vyc1tjb250ZXh0XSA9IG1heDtcbiAgICB9O1xuICAgIERpYWdub3N0aWNzSW1wbC5wcm90b3R5cGUuZ2V0TWFya2VyQ291bnQgPSBmdW5jdGlvbiAoY29udGV4dCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXJrZXJzW2NvbnRleHRdLmxlbmd0aDtcbiAgICB9O1xuICAgIERpYWdub3N0aWNzSW1wbC5wcm90b3R5cGUuY2xlYXJDb250ZXh0ID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgICAgICAgdGhpcy5tYXJrZXJzW2NvbnRleHRdID0gW107XG4gICAgfTtcbiAgICByZXR1cm4gRGlhZ25vc3RpY3NJbXBsO1xufSgpKTtcbmV4cG9ydHMuRGlhZ25vc3RpY3NJbXBsID0gRGlhZ25vc3RpY3NJbXBsO1xudmFyIERpYWdub3N0aWNzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIERpYWdub3N0aWNzKCkge1xuICAgIH1cbiAgICBEaWFnbm9zdGljcy5pbml0aWFsaXplID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgdGhpcy5pbnN0YW5jZSA9IG5ldyBEaWFnbm9zdGljc0ltcGwoYXJncyk7XG4gICAgICAgIHRoaXMubWFyayA9IHRoaXMuaW5zdGFuY2UubWFyaztcbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IHRoaXMuaW5zdGFuY2UuZGlzYWJsZWQ7XG4gICAgICAgIHRoaXMuZ2V0TWFya2VycyA9IHRoaXMuaW5zdGFuY2UuZ2V0TWFya2Vycy5iaW5kKHRoaXMuaW5zdGFuY2UpO1xuICAgICAgICB0aGlzLmdldE1hcmtlckNvdW50ID0gdGhpcy5pbnN0YW5jZS5nZXRNYXJrZXJDb3VudC5iaW5kKHRoaXMuaW5zdGFuY2UpO1xuICAgICAgICB0aGlzLnNldE1heE1hcmtlcnMgPSB0aGlzLmluc3RhbmNlLnNldE1heE1hcmtlcnMuYmluZCh0aGlzLmluc3RhbmNlKTtcbiAgICAgICAgdGhpcy5zZXRDb250ZXh0ID0gdGhpcy5pbnN0YW5jZS5zZXRDb250ZXh0LmJpbmQodGhpcy5pbnN0YW5jZSk7XG4gICAgICAgIHRoaXMuY2xlYXJDb250ZXh0ID0gdGhpcy5pbnN0YW5jZS5jbGVhckNvbnRleHQuYmluZCh0aGlzLmluc3RhbmNlKTtcbiAgICB9O1xuICAgIERpYWdub3N0aWNzLmZvcm1hdEVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKCEoZSAmJiB0eXBlb2YgZSA9PT0gJ29iamVjdCcpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvZGU6IHRoaXMuc2FmZUdldEZpZWxkKGUsICdjb2RlJyksXG4gICAgICAgICAgICBuYW1lOiB0aGlzLnNhZmVHZXRGaWVsZChlLCAnbmFtZScpLFxuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5zYWZlR2V0RmllbGQoZSwgJ21lc3NhZ2UnKSxcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIERpYWdub3N0aWNzLnNhZmVHZXRGaWVsZCA9IGZ1bmN0aW9uIChkYXRhLCBmaWVsZCkge1xuICAgICAgICBpZiAoZmllbGQgaW4gZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIGRhdGFbZmllbGRdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICByZXR1cm4gRGlhZ25vc3RpY3M7XG59KCkpO1xuZXhwb3J0cy5kZWZhdWx0ID0gRGlhZ25vc3RpY3M7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/statsig-js/dist/utils/Diagnostics.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/statsig-js/dist/utils/EvaluationReason.js":
/*!****************************************************************!*\
  !*** ./node_modules/statsig-js/dist/utils/EvaluationReason.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.EvaluationReason = void 0;\nvar EvaluationReason;\n(function (EvaluationReason) {\n    EvaluationReason[\"Network\"] = \"Network\";\n    EvaluationReason[\"Bootstrap\"] = \"Bootstrap\";\n    EvaluationReason[\"InvalidBootstrap\"] = \"InvalidBootstrap\";\n    EvaluationReason[\"Cache\"] = \"Cache\";\n    EvaluationReason[\"Prefetch\"] = \"Prefetch\";\n    EvaluationReason[\"Sticky\"] = \"Sticky\";\n    EvaluationReason[\"LocalOverride\"] = \"LocalOverride\";\n    EvaluationReason[\"Unrecognized\"] = \"Unrecognized\";\n    EvaluationReason[\"Uninitialized\"] = \"Uninitialized\";\n    EvaluationReason[\"Error\"] = \"Error\";\n    EvaluationReason[\"NetworkNotModified\"] = \"NetworkNotModified\";\n    EvaluationReason[\"BootstrapStableIDMismatch\"] = \"BootstrapStableIDMismatch\";\n})(EvaluationReason = exports.EvaluationReason || (exports.EvaluationReason = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L3V0aWxzL0V2YWx1YXRpb25SZWFzb24uanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGtEQUFrRCx3QkFBd0IsS0FBSyIsInNvdXJjZXMiOlsid2VicGFjazovL2FtYXpvbi1mcmVzaC1kZW1vLy4vbm9kZV9tb2R1bGVzL3N0YXRzaWctanMvZGlzdC91dGlscy9FdmFsdWF0aW9uUmVhc29uLmpzPzNhMDQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkV2YWx1YXRpb25SZWFzb24gPSB2b2lkIDA7XG52YXIgRXZhbHVhdGlvblJlYXNvbjtcbihmdW5jdGlvbiAoRXZhbHVhdGlvblJlYXNvbikge1xuICAgIEV2YWx1YXRpb25SZWFzb25bXCJOZXR3b3JrXCJdID0gXCJOZXR3b3JrXCI7XG4gICAgRXZhbHVhdGlvblJlYXNvbltcIkJvb3RzdHJhcFwiXSA9IFwiQm9vdHN0cmFwXCI7XG4gICAgRXZhbHVhdGlvblJlYXNvbltcIkludmFsaWRCb290c3RyYXBcIl0gPSBcIkludmFsaWRCb290c3RyYXBcIjtcbiAgICBFdmFsdWF0aW9uUmVhc29uW1wiQ2FjaGVcIl0gPSBcIkNhY2hlXCI7XG4gICAgRXZhbHVhdGlvblJlYXNvbltcIlByZWZldGNoXCJdID0gXCJQcmVmZXRjaFwiO1xuICAgIEV2YWx1YXRpb25SZWFzb25bXCJTdGlja3lcIl0gPSBcIlN0aWNreVwiO1xuICAgIEV2YWx1YXRpb25SZWFzb25bXCJMb2NhbE92ZXJyaWRlXCJdID0gXCJMb2NhbE92ZXJyaWRlXCI7XG4gICAgRXZhbHVhdGlvblJlYXNvbltcIlVucmVjb2duaXplZFwiXSA9IFwiVW5yZWNvZ25pemVkXCI7XG4gICAgRXZhbHVhdGlvblJlYXNvbltcIlVuaW5pdGlhbGl6ZWRcIl0gPSBcIlVuaW5pdGlhbGl6ZWRcIjtcbiAgICBFdmFsdWF0aW9uUmVhc29uW1wiRXJyb3JcIl0gPSBcIkVycm9yXCI7XG4gICAgRXZhbHVhdGlvblJlYXNvbltcIk5ldHdvcmtOb3RNb2RpZmllZFwiXSA9IFwiTmV0d29ya05vdE1vZGlmaWVkXCI7XG4gICAgRXZhbHVhdGlvblJlYXNvbltcIkJvb3RzdHJhcFN0YWJsZUlETWlzbWF0Y2hcIl0gPSBcIkJvb3RzdHJhcFN0YWJsZUlETWlzbWF0Y2hcIjtcbn0pKEV2YWx1YXRpb25SZWFzb24gPSBleHBvcnRzLkV2YWx1YXRpb25SZWFzb24gfHwgKGV4cG9ydHMuRXZhbHVhdGlvblJlYXNvbiA9IHt9KSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/statsig-js/dist/utils/EvaluationReason.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/statsig-js/dist/utils/Hashing.js":
/*!*******************************************************!*\
  !*** ./node_modules/statsig-js/dist/utils/Hashing.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.getUserCacheKey = exports.getSortedObject = exports.djb2HashForObject = exports.sha256Hash = exports.djb2Hash = exports.memoizedUserCacheKeyHash = exports.fasthash = void 0;\nvar js_sha256_1 = __webpack_require__(/*! js-sha256 */ \"(ssr)/./node_modules/js-sha256/src/sha256.js\");\nvar Base64_1 = __webpack_require__(/*! ./Base64 */ \"(ssr)/./node_modules/statsig-js/dist/utils/Base64.js\");\nvar hashLookupTable = {};\nfunction fasthash(value) {\n    var hash = 0;\n    for (var i = 0; i < value.length; i++) {\n        var character = value.charCodeAt(i);\n        hash = (hash << 5) - hash + character;\n        hash = hash & hash; // Convert to 32bit integer\n    }\n    return hash;\n}\nexports.fasthash = fasthash;\n// Keeping this around to prevent busting existing caches\n// This is just the same as djb2Hash but it can have negative values\nfunction memoizedUserCacheKeyHash(value) {\n    var seen = hashLookupTable[value];\n    if (seen) {\n        return seen;\n    }\n    var hash = String(fasthash(value));\n    hashLookupTable[value] = hash;\n    return hash;\n}\nexports.memoizedUserCacheKeyHash = memoizedUserCacheKeyHash;\nfunction djb2Hash(value) {\n    return String(fasthash(value) >>> 0);\n}\nexports.djb2Hash = djb2Hash;\nfunction sha256Hash(value) {\n    var seen = hashLookupTable[value];\n    if (seen) {\n        return seen;\n    }\n    var buffer = js_sha256_1.sha256.create().update(value).arrayBuffer();\n    var hash = Base64_1.Base64.encodeArrayBuffer(buffer);\n    hashLookupTable[value] = hash;\n    return hash;\n}\nexports.sha256Hash = sha256Hash;\nfunction djb2HashForObject(object) {\n    return djb2Hash(JSON.stringify(getSortedObject(object)));\n}\nexports.djb2HashForObject = djb2HashForObject;\nfunction getSortedObject(object) {\n    if (object == null) {\n        return null;\n    }\n    var keys = Object.keys(object).sort();\n    var sortedObject = {};\n    keys.forEach(function (key) {\n        var value = object[key];\n        if (value instanceof Object) {\n            value = getSortedObject(value);\n        }\n        sortedObject[key] = value;\n    });\n    return sortedObject;\n}\nexports.getSortedObject = getSortedObject;\nfunction getUserCacheKey(stableID, user, sdkKey) {\n    var _a;\n    var parts = [\"userID:\".concat(String((_a = user === null || user === void 0 ? void 0 : user.userID) !== null && _a !== void 0 ? _a : ''))];\n    var customIDs = user === null || user === void 0 ? void 0 : user.customIDs;\n    if (customIDs != null) {\n        for (var _i = 0, _b = Object.entries(customIDs); _i < _b.length; _i++) {\n            var _c = _b[_i], type = _c[0], value = _c[1];\n            parts.push(\"\".concat(type, \":\").concat(value));\n        }\n    }\n    var v2 = memoizedUserCacheKeyHash(parts.join(';'));\n    var v3 = memoizedUserCacheKeyHash(parts.join(';') + \";sdkKey:\".concat(sdkKey));\n    parts.splice(1, 0, \"stableID:\".concat(stableID));\n    var v1 = memoizedUserCacheKeyHash(parts.join(';'));\n    return {\n        v1: v1,\n        v2: v2,\n        v3: v3,\n    };\n}\nexports.getUserCacheKey = getUserCacheKey;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L3V0aWxzL0hhc2hpbmcuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsdUJBQXVCLEdBQUcsdUJBQXVCLEdBQUcseUJBQXlCLEdBQUcsa0JBQWtCLEdBQUcsZ0JBQWdCLEdBQUcsZ0NBQWdDLEdBQUcsZ0JBQWdCO0FBQzNLLGtCQUFrQixtQkFBTyxDQUFDLCtEQUFXO0FBQ3JDLGVBQWUsbUJBQU8sQ0FBQyxzRUFBVTtBQUNqQztBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isa0JBQWtCO0FBQ3RDO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlELGdCQUFnQjtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRDtBQUNuRCxtREFBbUQsT0FBTztBQUMxRDtBQUNBLG1EQUFtRDtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbWF6b24tZnJlc2gtZGVtby8uL25vZGVfbW9kdWxlcy9zdGF0c2lnLWpzL2Rpc3QvdXRpbHMvSGFzaGluZy5qcz9lN2ZmIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5nZXRVc2VyQ2FjaGVLZXkgPSBleHBvcnRzLmdldFNvcnRlZE9iamVjdCA9IGV4cG9ydHMuZGpiMkhhc2hGb3JPYmplY3QgPSBleHBvcnRzLnNoYTI1Nkhhc2ggPSBleHBvcnRzLmRqYjJIYXNoID0gZXhwb3J0cy5tZW1vaXplZFVzZXJDYWNoZUtleUhhc2ggPSBleHBvcnRzLmZhc3RoYXNoID0gdm9pZCAwO1xudmFyIGpzX3NoYTI1Nl8xID0gcmVxdWlyZShcImpzLXNoYTI1NlwiKTtcbnZhciBCYXNlNjRfMSA9IHJlcXVpcmUoXCIuL0Jhc2U2NFwiKTtcbnZhciBoYXNoTG9va3VwVGFibGUgPSB7fTtcbmZ1bmN0aW9uIGZhc3RoYXNoKHZhbHVlKSB7XG4gICAgdmFyIGhhc2ggPSAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGNoYXJhY3RlciA9IHZhbHVlLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIGhhc2ggPSAoaGFzaCA8PCA1KSAtIGhhc2ggKyBjaGFyYWN0ZXI7XG4gICAgICAgIGhhc2ggPSBoYXNoICYgaGFzaDsgLy8gQ29udmVydCB0byAzMmJpdCBpbnRlZ2VyXG4gICAgfVxuICAgIHJldHVybiBoYXNoO1xufVxuZXhwb3J0cy5mYXN0aGFzaCA9IGZhc3RoYXNoO1xuLy8gS2VlcGluZyB0aGlzIGFyb3VuZCB0byBwcmV2ZW50IGJ1c3RpbmcgZXhpc3RpbmcgY2FjaGVzXG4vLyBUaGlzIGlzIGp1c3QgdGhlIHNhbWUgYXMgZGpiMkhhc2ggYnV0IGl0IGNhbiBoYXZlIG5lZ2F0aXZlIHZhbHVlc1xuZnVuY3Rpb24gbWVtb2l6ZWRVc2VyQ2FjaGVLZXlIYXNoKHZhbHVlKSB7XG4gICAgdmFyIHNlZW4gPSBoYXNoTG9va3VwVGFibGVbdmFsdWVdO1xuICAgIGlmIChzZWVuKSB7XG4gICAgICAgIHJldHVybiBzZWVuO1xuICAgIH1cbiAgICB2YXIgaGFzaCA9IFN0cmluZyhmYXN0aGFzaCh2YWx1ZSkpO1xuICAgIGhhc2hMb29rdXBUYWJsZVt2YWx1ZV0gPSBoYXNoO1xuICAgIHJldHVybiBoYXNoO1xufVxuZXhwb3J0cy5tZW1vaXplZFVzZXJDYWNoZUtleUhhc2ggPSBtZW1vaXplZFVzZXJDYWNoZUtleUhhc2g7XG5mdW5jdGlvbiBkamIySGFzaCh2YWx1ZSkge1xuICAgIHJldHVybiBTdHJpbmcoZmFzdGhhc2godmFsdWUpID4+PiAwKTtcbn1cbmV4cG9ydHMuZGpiMkhhc2ggPSBkamIySGFzaDtcbmZ1bmN0aW9uIHNoYTI1Nkhhc2godmFsdWUpIHtcbiAgICB2YXIgc2VlbiA9IGhhc2hMb29rdXBUYWJsZVt2YWx1ZV07XG4gICAgaWYgKHNlZW4pIHtcbiAgICAgICAgcmV0dXJuIHNlZW47XG4gICAgfVxuICAgIHZhciBidWZmZXIgPSBqc19zaGEyNTZfMS5zaGEyNTYuY3JlYXRlKCkudXBkYXRlKHZhbHVlKS5hcnJheUJ1ZmZlcigpO1xuICAgIHZhciBoYXNoID0gQmFzZTY0XzEuQmFzZTY0LmVuY29kZUFycmF5QnVmZmVyKGJ1ZmZlcik7XG4gICAgaGFzaExvb2t1cFRhYmxlW3ZhbHVlXSA9IGhhc2g7XG4gICAgcmV0dXJuIGhhc2g7XG59XG5leHBvcnRzLnNoYTI1Nkhhc2ggPSBzaGEyNTZIYXNoO1xuZnVuY3Rpb24gZGpiMkhhc2hGb3JPYmplY3Qob2JqZWN0KSB7XG4gICAgcmV0dXJuIGRqYjJIYXNoKEpTT04uc3RyaW5naWZ5KGdldFNvcnRlZE9iamVjdChvYmplY3QpKSk7XG59XG5leHBvcnRzLmRqYjJIYXNoRm9yT2JqZWN0ID0gZGpiMkhhc2hGb3JPYmplY3Q7XG5mdW5jdGlvbiBnZXRTb3J0ZWRPYmplY3Qob2JqZWN0KSB7XG4gICAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCkuc29ydCgpO1xuICAgIHZhciBzb3J0ZWRPYmplY3QgPSB7fTtcbiAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgdmFsdWUgPSBvYmplY3Rba2V5XTtcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgT2JqZWN0KSB7XG4gICAgICAgICAgICB2YWx1ZSA9IGdldFNvcnRlZE9iamVjdCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgc29ydGVkT2JqZWN0W2tleV0gPSB2YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gc29ydGVkT2JqZWN0O1xufVxuZXhwb3J0cy5nZXRTb3J0ZWRPYmplY3QgPSBnZXRTb3J0ZWRPYmplY3Q7XG5mdW5jdGlvbiBnZXRVc2VyQ2FjaGVLZXkoc3RhYmxlSUQsIHVzZXIsIHNka0tleSkge1xuICAgIHZhciBfYTtcbiAgICB2YXIgcGFydHMgPSBbXCJ1c2VySUQ6XCIuY29uY2F0KFN0cmluZygoX2EgPSB1c2VyID09PSBudWxsIHx8IHVzZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHVzZXIudXNlcklEKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJykpXTtcbiAgICB2YXIgY3VzdG9tSURzID0gdXNlciA9PT0gbnVsbCB8fCB1c2VyID09PSB2b2lkIDAgPyB2b2lkIDAgOiB1c2VyLmN1c3RvbUlEcztcbiAgICBpZiAoY3VzdG9tSURzICE9IG51bGwpIHtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYiA9IE9iamVjdC5lbnRyaWVzKGN1c3RvbUlEcyk7IF9pIDwgX2IubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgX2MgPSBfYltfaV0sIHR5cGUgPSBfY1swXSwgdmFsdWUgPSBfY1sxXTtcbiAgICAgICAgICAgIHBhcnRzLnB1c2goXCJcIi5jb25jYXQodHlwZSwgXCI6XCIpLmNvbmNhdCh2YWx1ZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciB2MiA9IG1lbW9pemVkVXNlckNhY2hlS2V5SGFzaChwYXJ0cy5qb2luKCc7JykpO1xuICAgIHZhciB2MyA9IG1lbW9pemVkVXNlckNhY2hlS2V5SGFzaChwYXJ0cy5qb2luKCc7JykgKyBcIjtzZGtLZXk6XCIuY29uY2F0KHNka0tleSkpO1xuICAgIHBhcnRzLnNwbGljZSgxLCAwLCBcInN0YWJsZUlEOlwiLmNvbmNhdChzdGFibGVJRCkpO1xuICAgIHZhciB2MSA9IG1lbW9pemVkVXNlckNhY2hlS2V5SGFzaChwYXJ0cy5qb2luKCc7JykpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHYxOiB2MSxcbiAgICAgICAgdjI6IHYyLFxuICAgICAgICB2MzogdjMsXG4gICAgfTtcbn1cbmV4cG9ydHMuZ2V0VXNlckNhY2hlS2V5ID0gZ2V0VXNlckNhY2hlS2V5O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/statsig-js/dist/utils/Hashing.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/statsig-js/dist/utils/Object.entries.js":
/*!**************************************************************!*\
  !*** ./node_modules/statsig-js/dist/utils/Object.entries.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nfunction Polyfill() {\n    if (!Object.entries) {\n        // Pollyfill from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/entries\n        Object.entries = function (obj) {\n            var ownProps = Object.keys(obj);\n            var i = ownProps.length;\n            var resArray = new Array(i); // preallocate the Array\n            while (i--)\n                resArray[i] = [ownProps[i], obj[ownProps[i]]];\n            return resArray;\n        };\n    }\n}\nexports[\"default\"] = Polyfill;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L3V0aWxzL09iamVjdC5lbnRyaWVzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBZSIsInNvdXJjZXMiOlsid2VicGFjazovL2FtYXpvbi1mcmVzaC1kZW1vLy4vbm9kZV9tb2R1bGVzL3N0YXRzaWctanMvZGlzdC91dGlscy9PYmplY3QuZW50cmllcy5qcz9lYzkxIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZnVuY3Rpb24gUG9seWZpbGwoKSB7XG4gICAgaWYgKCFPYmplY3QuZW50cmllcykge1xuICAgICAgICAvLyBQb2xseWZpbGwgZnJvbSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvZW50cmllc1xuICAgICAgICBPYmplY3QuZW50cmllcyA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIHZhciBvd25Qcm9wcyA9IE9iamVjdC5rZXlzKG9iaik7XG4gICAgICAgICAgICB2YXIgaSA9IG93blByb3BzLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciByZXNBcnJheSA9IG5ldyBBcnJheShpKTsgLy8gcHJlYWxsb2NhdGUgdGhlIEFycmF5XG4gICAgICAgICAgICB3aGlsZSAoaS0tKVxuICAgICAgICAgICAgICAgIHJlc0FycmF5W2ldID0gW293blByb3BzW2ldLCBvYmpbb3duUHJvcHNbaV1dXTtcbiAgICAgICAgICAgIHJldHVybiByZXNBcnJheTtcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnRzLmRlZmF1bHQgPSBQb2x5ZmlsbDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/statsig-js/dist/utils/Object.entries.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/statsig-js/dist/utils/Object.fromEntries.js":
/*!******************************************************************!*\
  !*** ./node_modules/statsig-js/dist/utils/Object.fromEntries.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nfunction Polyfill() {\n    if (!Object.fromEntries) {\n        // @ts-ignore polyfill from https://github.com/tc39/proposal-object-from-entries/blob/main/polyfill.js\n        Object.fromEntries = function (iter) {\n            var obj = {};\n            for (var _i = 0, iter_1 = iter; _i < iter_1.length; _i++) {\n                var pair = iter_1[_i];\n                if (Object(pair) !== pair) {\n                    throw new TypeError('iterable for fromEntries should yield objects');\n                }\n                // Consistency with Map: contract is that entry has \"0\" and \"1\" keys, not\n                // that it is an array or iterable.\n                var key = pair[0], val = pair[1];\n                Object.defineProperty(obj, key, {\n                    configurable: true,\n                    enumerable: true,\n                    writable: true,\n                    value: val,\n                });\n            }\n            return obj;\n        };\n    }\n}\nexports[\"default\"] = Polyfill;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L3V0aWxzL09iamVjdC5mcm9tRW50cmllcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLG9CQUFvQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFlIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYW1hem9uLWZyZXNoLWRlbW8vLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L3V0aWxzL09iamVjdC5mcm9tRW50cmllcy5qcz8wNzBiIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZnVuY3Rpb24gUG9seWZpbGwoKSB7XG4gICAgaWYgKCFPYmplY3QuZnJvbUVudHJpZXMpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBwb2x5ZmlsbCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLW9iamVjdC1mcm9tLWVudHJpZXMvYmxvYi9tYWluL3BvbHlmaWxsLmpzXG4gICAgICAgIE9iamVjdC5mcm9tRW50cmllcyA9IGZ1bmN0aW9uIChpdGVyKSB7XG4gICAgICAgICAgICB2YXIgb2JqID0ge307XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGl0ZXJfMSA9IGl0ZXI7IF9pIDwgaXRlcl8xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwYWlyID0gaXRlcl8xW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0KHBhaXIpICE9PSBwYWlyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2l0ZXJhYmxlIGZvciBmcm9tRW50cmllcyBzaG91bGQgeWllbGQgb2JqZWN0cycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBDb25zaXN0ZW5jeSB3aXRoIE1hcDogY29udHJhY3QgaXMgdGhhdCBlbnRyeSBoYXMgXCIwXCIgYW5kIFwiMVwiIGtleXMsIG5vdFxuICAgICAgICAgICAgICAgIC8vIHRoYXQgaXQgaXMgYW4gYXJyYXkgb3IgaXRlcmFibGUuXG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IHBhaXJbMF0sIHZhbCA9IHBhaXJbMV07XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydHMuZGVmYXVsdCA9IFBvbHlmaWxsO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/statsig-js/dist/utils/Object.fromEntries.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/statsig-js/dist/utils/OutputLogger.js":
/*!************************************************************!*\
  !*** ./node_modules/statsig-js/dist/utils/OutputLogger.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n/* eslint-disable @typescript-eslint/no-explicit-any */\nvar StatsigSDKOptions_1 = __webpack_require__(/*! ../StatsigSDKOptions */ \"(ssr)/./node_modules/statsig-js/dist/StatsigSDKOptions.js\");\nvar _logger = console;\nvar _logLevel = StatsigSDKOptions_1.LogLevel.WARN;\nvar OutputLogger = /** @class */ (function () {\n    function OutputLogger() {\n    }\n    OutputLogger.getLogger = function () {\n        return _logger;\n    };\n    OutputLogger.debug = function (message) {\n        var optionalParams = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            optionalParams[_i - 1] = arguments[_i];\n        }\n        if (_logLevel !== StatsigSDKOptions_1.LogLevel.NONE) {\n            _logger.debug && _logger.debug.apply(_logger, __spreadArray([\"\".concat(this.LOG_PREFIX, \" \").concat(message)], optionalParams, false));\n        }\n    };\n    OutputLogger.info = function (message) {\n        var optionalParams = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            optionalParams[_i - 1] = arguments[_i];\n        }\n        if (_logLevel === StatsigSDKOptions_1.LogLevel.INFO) {\n            _logger.info.apply(_logger, __spreadArray([\"\".concat(this.LOG_PREFIX, \" \").concat(message)], optionalParams, false));\n        }\n    };\n    OutputLogger.warn = function (message) {\n        var optionalParams = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            optionalParams[_i - 1] = arguments[_i];\n        }\n        if (_logLevel === StatsigSDKOptions_1.LogLevel.WARN) {\n            _logger.warn.apply(_logger, __spreadArray([\"\".concat(this.LOG_PREFIX, \" \").concat(message)], optionalParams, false));\n        }\n    };\n    OutputLogger.error = function (message) {\n        var optionalParams = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            optionalParams[_i - 1] = arguments[_i];\n        }\n        if (_logLevel === StatsigSDKOptions_1.LogLevel.ERROR) {\n            _logger.error.apply(_logger, __spreadArray([\"\".concat(this.LOG_PREFIX, \" \").concat(message)], optionalParams, false));\n        }\n    };\n    OutputLogger.setLogger = function (logger) {\n        _logger = logger;\n    };\n    OutputLogger.setLogLevel = function (logLevel) {\n        _logLevel = logLevel;\n    };\n    OutputLogger.resetLogger = function () {\n        _logger = console;\n        _logLevel = StatsigSDKOptions_1.LogLevel.WARN;\n    };\n    OutputLogger.LOG_PREFIX = '[Statsig]';\n    return OutputLogger;\n}());\nexports[\"default\"] = OutputLogger;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L3V0aWxzL091dHB1dExvZ2dlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsNkVBQTZFLE9BQU87QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Q7QUFDQSwwQkFBMEIsbUJBQU8sQ0FBQyx1RkFBc0I7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxrQkFBZSIsInNvdXJjZXMiOlsid2VicGFjazovL2FtYXpvbi1mcmVzaC1kZW1vLy4vbm9kZV9tb2R1bGVzL3N0YXRzaWctanMvZGlzdC91dGlscy9PdXRwdXRMb2dnZXIuanM/MDlkZiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX3NwcmVhZEFycmF5ID0gKHRoaXMgJiYgdGhpcy5fX3NwcmVhZEFycmF5KSB8fCBmdW5jdGlvbiAodG8sIGZyb20sIHBhY2spIHtcbiAgICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xuICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XG4gICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xuICAgICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi9cbnZhciBTdGF0c2lnU0RLT3B0aW9uc18xID0gcmVxdWlyZShcIi4uL1N0YXRzaWdTREtPcHRpb25zXCIpO1xudmFyIF9sb2dnZXIgPSBjb25zb2xlO1xudmFyIF9sb2dMZXZlbCA9IFN0YXRzaWdTREtPcHRpb25zXzEuTG9nTGV2ZWwuV0FSTjtcbnZhciBPdXRwdXRMb2dnZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gT3V0cHV0TG9nZ2VyKCkge1xuICAgIH1cbiAgICBPdXRwdXRMb2dnZXIuZ2V0TG9nZ2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX2xvZ2dlcjtcbiAgICB9O1xuICAgIE91dHB1dExvZ2dlci5kZWJ1ZyA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgIHZhciBvcHRpb25hbFBhcmFtcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgb3B0aW9uYWxQYXJhbXNbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9sb2dMZXZlbCAhPT0gU3RhdHNpZ1NES09wdGlvbnNfMS5Mb2dMZXZlbC5OT05FKSB7XG4gICAgICAgICAgICBfbG9nZ2VyLmRlYnVnICYmIF9sb2dnZXIuZGVidWcuYXBwbHkoX2xvZ2dlciwgX19zcHJlYWRBcnJheShbXCJcIi5jb25jYXQodGhpcy5MT0dfUFJFRklYLCBcIiBcIikuY29uY2F0KG1lc3NhZ2UpXSwgb3B0aW9uYWxQYXJhbXMsIGZhbHNlKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE91dHB1dExvZ2dlci5pbmZvID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgdmFyIG9wdGlvbmFsUGFyYW1zID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBvcHRpb25hbFBhcmFtc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2xvZ0xldmVsID09PSBTdGF0c2lnU0RLT3B0aW9uc18xLkxvZ0xldmVsLklORk8pIHtcbiAgICAgICAgICAgIF9sb2dnZXIuaW5mby5hcHBseShfbG9nZ2VyLCBfX3NwcmVhZEFycmF5KFtcIlwiLmNvbmNhdCh0aGlzLkxPR19QUkVGSVgsIFwiIFwiKS5jb25jYXQobWVzc2FnZSldLCBvcHRpb25hbFBhcmFtcywgZmFsc2UpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgT3V0cHV0TG9nZ2VyLndhcm4gPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICB2YXIgb3B0aW9uYWxQYXJhbXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIG9wdGlvbmFsUGFyYW1zW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfbG9nTGV2ZWwgPT09IFN0YXRzaWdTREtPcHRpb25zXzEuTG9nTGV2ZWwuV0FSTikge1xuICAgICAgICAgICAgX2xvZ2dlci53YXJuLmFwcGx5KF9sb2dnZXIsIF9fc3ByZWFkQXJyYXkoW1wiXCIuY29uY2F0KHRoaXMuTE9HX1BSRUZJWCwgXCIgXCIpLmNvbmNhdChtZXNzYWdlKV0sIG9wdGlvbmFsUGFyYW1zLCBmYWxzZSkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBPdXRwdXRMb2dnZXIuZXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICB2YXIgb3B0aW9uYWxQYXJhbXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIG9wdGlvbmFsUGFyYW1zW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfbG9nTGV2ZWwgPT09IFN0YXRzaWdTREtPcHRpb25zXzEuTG9nTGV2ZWwuRVJST1IpIHtcbiAgICAgICAgICAgIF9sb2dnZXIuZXJyb3IuYXBwbHkoX2xvZ2dlciwgX19zcHJlYWRBcnJheShbXCJcIi5jb25jYXQodGhpcy5MT0dfUFJFRklYLCBcIiBcIikuY29uY2F0KG1lc3NhZ2UpXSwgb3B0aW9uYWxQYXJhbXMsIGZhbHNlKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE91dHB1dExvZ2dlci5zZXRMb2dnZXIgPSBmdW5jdGlvbiAobG9nZ2VyKSB7XG4gICAgICAgIF9sb2dnZXIgPSBsb2dnZXI7XG4gICAgfTtcbiAgICBPdXRwdXRMb2dnZXIuc2V0TG9nTGV2ZWwgPSBmdW5jdGlvbiAobG9nTGV2ZWwpIHtcbiAgICAgICAgX2xvZ0xldmVsID0gbG9nTGV2ZWw7XG4gICAgfTtcbiAgICBPdXRwdXRMb2dnZXIucmVzZXRMb2dnZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9sb2dnZXIgPSBjb25zb2xlO1xuICAgICAgICBfbG9nTGV2ZWwgPSBTdGF0c2lnU0RLT3B0aW9uc18xLkxvZ0xldmVsLldBUk47XG4gICAgfTtcbiAgICBPdXRwdXRMb2dnZXIuTE9HX1BSRUZJWCA9ICdbU3RhdHNpZ10nO1xuICAgIHJldHVybiBPdXRwdXRMb2dnZXI7XG59KCkpO1xuZXhwb3J0cy5kZWZhdWx0ID0gT3V0cHV0TG9nZ2VyO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/statsig-js/dist/utils/OutputLogger.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/statsig-js/dist/utils/Promise.finally.js":
/*!***************************************************************!*\
  !*** ./node_modules/statsig-js/dist/utils/Promise.finally.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n// @ts-nocheck\nfunction Polyfill() {\n    Promise.prototype.finally =\n        Promise.prototype.finally ||\n            {\n                finally: function (fn) {\n                    var onFinally = function (callback) { return Promise.resolve(fn()).then(callback); };\n                    return this.then(function (result) { return onFinally(function () { return result; }); }, function (reason) { return onFinally(function () { return Promise.reject(reason); }); });\n                },\n            }.finally;\n}\nexports[\"default\"] = Polyfill;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L3V0aWxzL1Byb21pc2UuZmluYWxseS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQ7QUFDMUQseURBQXlELCtCQUErQixnQkFBZ0IsSUFBSSxzQkFBc0IsK0JBQStCLGdDQUFnQyxJQUFJO0FBQ3JNLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQSxrQkFBZSIsInNvdXJjZXMiOlsid2VicGFjazovL2FtYXpvbi1mcmVzaC1kZW1vLy4vbm9kZV9tb2R1bGVzL3N0YXRzaWctanMvZGlzdC91dGlscy9Qcm9taXNlLmZpbmFsbHkuanM/Y2Q4OCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8vIEB0cy1ub2NoZWNrXG5mdW5jdGlvbiBQb2x5ZmlsbCgpIHtcbiAgICBQcm9taXNlLnByb3RvdHlwZS5maW5hbGx5ID1cbiAgICAgICAgUHJvbWlzZS5wcm90b3R5cGUuZmluYWxseSB8fFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGZpbmFsbHk6IGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgb25GaW5hbGx5ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7IHJldHVybiBQcm9taXNlLnJlc29sdmUoZm4oKSkudGhlbihjYWxsYmFjayk7IH07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgeyByZXR1cm4gb25GaW5hbGx5KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc3VsdDsgfSk7IH0sIGZ1bmN0aW9uIChyZWFzb24pIHsgcmV0dXJuIG9uRmluYWxseShmdW5jdGlvbiAoKSB7IHJldHVybiBQcm9taXNlLnJlamVjdChyZWFzb24pOyB9KTsgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0uZmluYWxseTtcbn1cbmV4cG9ydHMuZGVmYXVsdCA9IFBvbHlmaWxsO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/statsig-js/dist/utils/Promise.finally.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/statsig-js/dist/utils/ResponseVerification.js":
/*!********************************************************************!*\
  !*** ./node_modules/statsig-js/dist/utils/ResponseVerification.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.verifySDKKeyUsed = void 0;\nvar Errors_1 = __webpack_require__(/*! ../Errors */ \"(ssr)/./node_modules/statsig-js/dist/Errors.js\");\nvar Hashing_1 = __webpack_require__(/*! ./Hashing */ \"(ssr)/./node_modules/statsig-js/dist/utils/Hashing.js\");\nfunction verifySDKKeyUsed(json, sdkKey, errorBoundary) {\n    var hashedSDKKeyUsed = json === null || json === void 0 ? void 0 : json.hashed_sdk_key_used;\n    if (hashedSDKKeyUsed != null && hashedSDKKeyUsed !== (0, Hashing_1.djb2Hash)(sdkKey !== null && sdkKey !== void 0 ? sdkKey : '')) {\n        errorBoundary.logError('verifySDKKeyUsed', new Errors_1.StatsigSDKKeyMismatchError('The SDK key provided does not match the one used to generate values.'));\n        return false;\n    }\n    return true;\n}\nexports.verifySDKKeyUsed = verifySDKKeyUsed;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L3V0aWxzL1Jlc3BvbnNlVmVyaWZpY2F0aW9uLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELHdCQUF3QjtBQUN4QixlQUFlLG1CQUFPLENBQUMsaUVBQVc7QUFDbEMsZ0JBQWdCLG1CQUFPLENBQUMsd0VBQVc7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiIsInNvdXJjZXMiOlsid2VicGFjazovL2FtYXpvbi1mcmVzaC1kZW1vLy4vbm9kZV9tb2R1bGVzL3N0YXRzaWctanMvZGlzdC91dGlscy9SZXNwb25zZVZlcmlmaWNhdGlvbi5qcz9mMjFmIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy52ZXJpZnlTREtLZXlVc2VkID0gdm9pZCAwO1xudmFyIEVycm9yc18xID0gcmVxdWlyZShcIi4uL0Vycm9yc1wiKTtcbnZhciBIYXNoaW5nXzEgPSByZXF1aXJlKFwiLi9IYXNoaW5nXCIpO1xuZnVuY3Rpb24gdmVyaWZ5U0RLS2V5VXNlZChqc29uLCBzZGtLZXksIGVycm9yQm91bmRhcnkpIHtcbiAgICB2YXIgaGFzaGVkU0RLS2V5VXNlZCA9IGpzb24gPT09IG51bGwgfHwganNvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDoganNvbi5oYXNoZWRfc2RrX2tleV91c2VkO1xuICAgIGlmIChoYXNoZWRTREtLZXlVc2VkICE9IG51bGwgJiYgaGFzaGVkU0RLS2V5VXNlZCAhPT0gKDAsIEhhc2hpbmdfMS5kamIySGFzaCkoc2RrS2V5ICE9PSBudWxsICYmIHNka0tleSAhPT0gdm9pZCAwID8gc2RrS2V5IDogJycpKSB7XG4gICAgICAgIGVycm9yQm91bmRhcnkubG9nRXJyb3IoJ3ZlcmlmeVNES0tleVVzZWQnLCBuZXcgRXJyb3JzXzEuU3RhdHNpZ1NES0tleU1pc21hdGNoRXJyb3IoJ1RoZSBTREsga2V5IHByb3ZpZGVkIGRvZXMgbm90IG1hdGNoIHRoZSBvbmUgdXNlZCB0byBnZW5lcmF0ZSB2YWx1ZXMuJykpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuZXhwb3J0cy52ZXJpZnlTREtLZXlVc2VkID0gdmVyaWZ5U0RLS2V5VXNlZDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/statsig-js/dist/utils/ResponseVerification.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/statsig-js/dist/utils/StatsigAsyncStorage.js":
/*!*******************************************************************!*\
  !*** ./node_modules/statsig-js/dist/utils/StatsigAsyncStorage.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar StatsigAsyncStorage = /** @class */ (function () {\n    function StatsigAsyncStorage() {\n    }\n    StatsigAsyncStorage.getItemAsync = function (key) {\n        var _a;\n        if (StatsigAsyncStorage.asyncStorage) {\n            return (_a = StatsigAsyncStorage.asyncStorage.getItem(key)) !== null && _a !== void 0 ? _a : null;\n        }\n        return Promise.resolve(null);\n    };\n    StatsigAsyncStorage.setItemAsync = function (key, value) {\n        if (StatsigAsyncStorage.asyncStorage) {\n            return StatsigAsyncStorage.asyncStorage.setItem(key, value);\n        }\n        return Promise.resolve();\n    };\n    StatsigAsyncStorage.removeItemAsync = function (key) {\n        if (StatsigAsyncStorage.asyncStorage) {\n            return StatsigAsyncStorage.asyncStorage.removeItem(key);\n        }\n        return Promise.resolve();\n    };\n    return StatsigAsyncStorage;\n}());\nexports[\"default\"] = StatsigAsyncStorage;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L3V0aWxzL1N0YXRzaWdBc3luY1N0b3JhZ2UuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxrQkFBZSIsInNvdXJjZXMiOlsid2VicGFjazovL2FtYXpvbi1mcmVzaC1kZW1vLy4vbm9kZV9tb2R1bGVzL3N0YXRzaWctanMvZGlzdC91dGlscy9TdGF0c2lnQXN5bmNTdG9yYWdlLmpzPzcyMjUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgU3RhdHNpZ0FzeW5jU3RvcmFnZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTdGF0c2lnQXN5bmNTdG9yYWdlKCkge1xuICAgIH1cbiAgICBTdGF0c2lnQXN5bmNTdG9yYWdlLmdldEl0ZW1Bc3luYyA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAoU3RhdHNpZ0FzeW5jU3RvcmFnZS5hc3luY1N0b3JhZ2UpIHtcbiAgICAgICAgICAgIHJldHVybiAoX2EgPSBTdGF0c2lnQXN5bmNTdG9yYWdlLmFzeW5jU3RvcmFnZS5nZXRJdGVtKGtleSkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICB9O1xuICAgIFN0YXRzaWdBc3luY1N0b3JhZ2Uuc2V0SXRlbUFzeW5jID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKFN0YXRzaWdBc3luY1N0b3JhZ2UuYXN5bmNTdG9yYWdlKSB7XG4gICAgICAgICAgICByZXR1cm4gU3RhdHNpZ0FzeW5jU3RvcmFnZS5hc3luY1N0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfTtcbiAgICBTdGF0c2lnQXN5bmNTdG9yYWdlLnJlbW92ZUl0ZW1Bc3luYyA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgaWYgKFN0YXRzaWdBc3luY1N0b3JhZ2UuYXN5bmNTdG9yYWdlKSB7XG4gICAgICAgICAgICByZXR1cm4gU3RhdHNpZ0FzeW5jU3RvcmFnZS5hc3luY1N0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9O1xuICAgIHJldHVybiBTdGF0c2lnQXN5bmNTdG9yYWdlO1xufSgpKTtcbmV4cG9ydHMuZGVmYXVsdCA9IFN0YXRzaWdBc3luY1N0b3JhZ2U7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/statsig-js/dist/utils/StatsigAsyncStorage.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/statsig-js/dist/utils/StatsigLocalStorage.js":
/*!*******************************************************************!*\
  !*** ./node_modules/statsig-js/dist/utils/StatsigLocalStorage.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar Constants_1 = __webpack_require__(/*! ./Constants */ \"(ssr)/./node_modules/statsig-js/dist/utils/Constants.js\");\nvar StatsigLocalStorage = /** @class */ (function () {\n    function StatsigLocalStorage() {\n    }\n    StatsigLocalStorage.getItem = function (key) {\n        var _a;\n        try {\n            if (this.isStorageAccessible()) {\n                return window.localStorage.getItem(key);\n            }\n        }\n        catch (e) {\n            // noop\n        }\n        return (_a = this.fallbackSessionCache[key]) !== null && _a !== void 0 ? _a : null;\n    };\n    StatsigLocalStorage.setItem = function (key, value) {\n        try {\n            if (this.isStorageAccessible()) {\n                window.localStorage.setItem(key, value);\n                return;\n            }\n        }\n        catch (e) {\n            // noop\n        }\n        this.fallbackSessionCache[key] = value;\n    };\n    StatsigLocalStorage.removeItem = function (key) {\n        try {\n            if (this.isStorageAccessible()) {\n                window.localStorage.removeItem(key);\n                return;\n            }\n        }\n        catch (e) {\n            // noop\n        }\n        delete this.fallbackSessionCache[key];\n    };\n    StatsigLocalStorage.cleanup = function () {\n        try {\n            if (this.isStorageAccessible(true) // clean up all storage keys if this session sets disabled\n            ) {\n                for (var key in window.localStorage) {\n                    if (typeof window.localStorage[key] !== 'string') {\n                        continue;\n                    }\n                    if (key == null) {\n                        continue;\n                    }\n                    // if local storage is disabled on a subsequent session on this device,\n                    // lets delete everything we already have stored in local storage\n                    if (!this.disabled && key in Constants_1.LOCAL_STORAGE_KEYS) {\n                        continue;\n                    }\n                    if (!this.disabled &&\n                        key.substring(0, Constants_1.STORAGE_PREFIX.length) !== Constants_1.STORAGE_PREFIX) {\n                        continue;\n                    }\n                    window.localStorage.removeItem(key);\n                }\n            }\n        }\n        catch (e) {\n            // noop\n        }\n    };\n    StatsigLocalStorage.isStorageAccessible = function (ignoreDisabledOption) {\n        if (ignoreDisabledOption === void 0) { ignoreDisabledOption = false; }\n        if (this.canAccessStorageAccessible == null) {\n            this.canAccessStorageAccessible =\n                typeof Storage !== 'undefined' &&\n                    typeof window !== 'undefined' &&\n                    window != null &&\n                    window.localStorage != null;\n        }\n        var canAccess = this.canAccessStorageAccessible;\n        if (ignoreDisabledOption) {\n            return canAccess;\n        }\n        return !this.disabled && canAccess;\n    };\n    StatsigLocalStorage.disabled = false;\n    StatsigLocalStorage.fallbackSessionCache = {};\n    StatsigLocalStorage.canAccessStorageAccessible = null;\n    return StatsigLocalStorage;\n}());\nexports[\"default\"] = StatsigLocalStorage;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L3V0aWxzL1N0YXRzaWdMb2NhbFN0b3JhZ2UuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsa0JBQWtCLG1CQUFPLENBQUMsNEVBQWE7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELGtCQUFlIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYW1hem9uLWZyZXNoLWRlbW8vLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L3V0aWxzL1N0YXRzaWdMb2NhbFN0b3JhZ2UuanM/NDA1YSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBDb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuL0NvbnN0YW50c1wiKTtcbnZhciBTdGF0c2lnTG9jYWxTdG9yYWdlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFN0YXRzaWdMb2NhbFN0b3JhZ2UoKSB7XG4gICAgfVxuICAgIFN0YXRzaWdMb2NhbFN0b3JhZ2UuZ2V0SXRlbSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNTdG9yYWdlQWNjZXNzaWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBub29wXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChfYSA9IHRoaXMuZmFsbGJhY2tTZXNzaW9uQ2FjaGVba2V5XSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbnVsbDtcbiAgICB9O1xuICAgIFN0YXRzaWdMb2NhbFN0b3JhZ2Uuc2V0SXRlbSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1N0b3JhZ2VBY2Nlc3NpYmxlKCkpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBub29wXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mYWxsYmFja1Nlc3Npb25DYWNoZVtrZXldID0gdmFsdWU7XG4gICAgfTtcbiAgICBTdGF0c2lnTG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0gPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1N0b3JhZ2VBY2Nlc3NpYmxlKCkpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIG5vb3BcbiAgICAgICAgfVxuICAgICAgICBkZWxldGUgdGhpcy5mYWxsYmFja1Nlc3Npb25DYWNoZVtrZXldO1xuICAgIH07XG4gICAgU3RhdHNpZ0xvY2FsU3RvcmFnZS5jbGVhbnVwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNTdG9yYWdlQWNjZXNzaWJsZSh0cnVlKSAvLyBjbGVhbiB1cCBhbGwgc3RvcmFnZSBrZXlzIGlmIHRoaXMgc2Vzc2lvbiBzZXRzIGRpc2FibGVkXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gd2luZG93LmxvY2FsU3RvcmFnZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdy5sb2NhbFN0b3JhZ2Vba2V5XSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgbG9jYWwgc3RvcmFnZSBpcyBkaXNhYmxlZCBvbiBhIHN1YnNlcXVlbnQgc2Vzc2lvbiBvbiB0aGlzIGRldmljZSxcbiAgICAgICAgICAgICAgICAgICAgLy8gbGV0cyBkZWxldGUgZXZlcnl0aGluZyB3ZSBhbHJlYWR5IGhhdmUgc3RvcmVkIGluIGxvY2FsIHN0b3JhZ2VcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmRpc2FibGVkICYmIGtleSBpbiBDb25zdGFudHNfMS5MT0NBTF9TVE9SQUdFX0tFWVMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5kaXNhYmxlZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAga2V5LnN1YnN0cmluZygwLCBDb25zdGFudHNfMS5TVE9SQUdFX1BSRUZJWC5sZW5ndGgpICE9PSBDb25zdGFudHNfMS5TVE9SQUdFX1BSRUZJWCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBub29wXG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN0YXRzaWdMb2NhbFN0b3JhZ2UuaXNTdG9yYWdlQWNjZXNzaWJsZSA9IGZ1bmN0aW9uIChpZ25vcmVEaXNhYmxlZE9wdGlvbikge1xuICAgICAgICBpZiAoaWdub3JlRGlzYWJsZWRPcHRpb24gPT09IHZvaWQgMCkgeyBpZ25vcmVEaXNhYmxlZE9wdGlvbiA9IGZhbHNlOyB9XG4gICAgICAgIGlmICh0aGlzLmNhbkFjY2Vzc1N0b3JhZ2VBY2Nlc3NpYmxlID09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuY2FuQWNjZXNzU3RvcmFnZUFjY2Vzc2libGUgPVxuICAgICAgICAgICAgICAgIHR5cGVvZiBTdG9yYWdlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgICAgICAgICAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cgIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlICE9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNhbkFjY2VzcyA9IHRoaXMuY2FuQWNjZXNzU3RvcmFnZUFjY2Vzc2libGU7XG4gICAgICAgIGlmIChpZ25vcmVEaXNhYmxlZE9wdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIGNhbkFjY2VzcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gIXRoaXMuZGlzYWJsZWQgJiYgY2FuQWNjZXNzO1xuICAgIH07XG4gICAgU3RhdHNpZ0xvY2FsU3RvcmFnZS5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIFN0YXRzaWdMb2NhbFN0b3JhZ2UuZmFsbGJhY2tTZXNzaW9uQ2FjaGUgPSB7fTtcbiAgICBTdGF0c2lnTG9jYWxTdG9yYWdlLmNhbkFjY2Vzc1N0b3JhZ2VBY2Nlc3NpYmxlID0gbnVsbDtcbiAgICByZXR1cm4gU3RhdHNpZ0xvY2FsU3RvcmFnZTtcbn0oKSk7XG5leHBvcnRzLmRlZmF1bHQgPSBTdGF0c2lnTG9jYWxTdG9yYWdlO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/statsig-js/dist/utils/StatsigLocalStorage.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/statsig-js/dist/utils/Timing.js":
/*!******************************************************!*\
  !*** ./node_modules/statsig-js/dist/utils/Timing.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.difference = exports.now = void 0;\nfunction now(opts) {\n    if (opts === void 0) { opts = { withPrecision: false }; }\n    if (typeof performance === 'undefined' || !performance) {\n        return Date.now();\n    }\n    if (!opts.withPrecision) {\n        return performance.now() | 0;\n    }\n    return performance.now();\n}\nexports.now = now;\nfunction difference(time) {\n    return now() - time;\n}\nexports.difference = difference;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L3V0aWxzL1RpbWluZy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxrQkFBa0IsR0FBRyxXQUFXO0FBQ2hDO0FBQ0EsMkJBQTJCLFNBQVM7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbWF6b24tZnJlc2gtZGVtby8uL25vZGVfbW9kdWxlcy9zdGF0c2lnLWpzL2Rpc3QvdXRpbHMvVGltaW5nLmpzPzFjMWYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmRpZmZlcmVuY2UgPSBleHBvcnRzLm5vdyA9IHZvaWQgMDtcbmZ1bmN0aW9uIG5vdyhvcHRzKSB7XG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkgeyBvcHRzID0geyB3aXRoUHJlY2lzaW9uOiBmYWxzZSB9OyB9XG4gICAgaWYgKHR5cGVvZiBwZXJmb3JtYW5jZSA9PT0gJ3VuZGVmaW5lZCcgfHwgIXBlcmZvcm1hbmNlKSB7XG4gICAgICAgIHJldHVybiBEYXRlLm5vdygpO1xuICAgIH1cbiAgICBpZiAoIW9wdHMud2l0aFByZWNpc2lvbikge1xuICAgICAgICByZXR1cm4gcGVyZm9ybWFuY2Uubm93KCkgfCAwO1xuICAgIH1cbiAgICByZXR1cm4gcGVyZm9ybWFuY2Uubm93KCk7XG59XG5leHBvcnRzLm5vdyA9IG5vdztcbmZ1bmN0aW9uIGRpZmZlcmVuY2UodGltZSkge1xuICAgIHJldHVybiBub3coKSAtIHRpbWU7XG59XG5leHBvcnRzLmRpZmZlcmVuY2UgPSBkaWZmZXJlbmNlO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/statsig-js/dist/utils/Timing.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/statsig-js/dist/utils/parseError.js":
/*!**********************************************************!*\
  !*** ./node_modules/statsig-js/dist/utils/parseError.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nfunction parseError(error) {\n    var unwrapped = (error !== null && error !== void 0 ? error : Error('[Statsig] Error was empty'));\n    var isError = unwrapped instanceof Error;\n    var name = isError ? unwrapped.name : 'No Name';\n    var message = isError ? unwrapped.message : undefined;\n    var trace = isError ? unwrapped.stack : getDescription(unwrapped);\n    return { name: name, message: message, trace: trace };\n}\nexports[\"default\"] = parseError;\nfunction getDescription(obj) {\n    try {\n        return JSON.stringify(obj);\n    }\n    catch (_a) {\n        return '[Statsig] Failed to get string for error.';\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L3V0aWxzL3BhcnNlRXJyb3IuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0Esa0JBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYW1hem9uLWZyZXNoLWRlbW8vLi9ub2RlX21vZHVsZXMvc3RhdHNpZy1qcy9kaXN0L3V0aWxzL3BhcnNlRXJyb3IuanM/N2IzNyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmZ1bmN0aW9uIHBhcnNlRXJyb3IoZXJyb3IpIHtcbiAgICB2YXIgdW53cmFwcGVkID0gKGVycm9yICE9PSBudWxsICYmIGVycm9yICE9PSB2b2lkIDAgPyBlcnJvciA6IEVycm9yKCdbU3RhdHNpZ10gRXJyb3Igd2FzIGVtcHR5JykpO1xuICAgIHZhciBpc0Vycm9yID0gdW53cmFwcGVkIGluc3RhbmNlb2YgRXJyb3I7XG4gICAgdmFyIG5hbWUgPSBpc0Vycm9yID8gdW53cmFwcGVkLm5hbWUgOiAnTm8gTmFtZSc7XG4gICAgdmFyIG1lc3NhZ2UgPSBpc0Vycm9yID8gdW53cmFwcGVkLm1lc3NhZ2UgOiB1bmRlZmluZWQ7XG4gICAgdmFyIHRyYWNlID0gaXNFcnJvciA/IHVud3JhcHBlZC5zdGFjayA6IGdldERlc2NyaXB0aW9uKHVud3JhcHBlZCk7XG4gICAgcmV0dXJuIHsgbmFtZTogbmFtZSwgbWVzc2FnZTogbWVzc2FnZSwgdHJhY2U6IHRyYWNlIH07XG59XG5leHBvcnRzLmRlZmF1bHQgPSBwYXJzZUVycm9yO1xuZnVuY3Rpb24gZ2V0RGVzY3JpcHRpb24ob2JqKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iaik7XG4gICAgfVxuICAgIGNhdGNoIChfYSkge1xuICAgICAgICByZXR1cm4gJ1tTdGF0c2lnXSBGYWlsZWQgdG8gZ2V0IHN0cmluZyBmb3IgZXJyb3IuJztcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/statsig-js/dist/utils/parseError.js\n");

/***/ })

};
;